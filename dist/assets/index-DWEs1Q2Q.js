var yZ=Object.defineProperty;var A6=e=>{throw TypeError(e)};var vZ=(e,t,n)=>t in e?yZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>vZ(e,typeof t!="symbol"?t+"":t,n),R6=(e,t,n)=>t.has(e)||A6("Cannot "+n);var T6=(e,t,n)=>(R6(e,t,"read from private field"),n?n.call(e):t.get(e)),N6=(e,t,n)=>t.has(e)?A6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Jw=(e,t,n,r)=>(R6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Gv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eS={exports:{}},Uh={},tS={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F6;function xZ(){if(F6)return Ke;F6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function p(z){return z===null||typeof z!="object"?null:(z=d&&z[d]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function x(z,G,xe){this.props=z,this.context=G,this.refs=v,this.updater=xe||g}x.prototype.isReactComponent={},x.prototype.setState=function(z,G){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,G,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function w(){}w.prototype=x.prototype;function S(z,G,xe){this.props=z,this.context=G,this.refs=v,this.updater=xe||g}var E=S.prototype=new w;E.constructor=S,y(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,$=Object.prototype.hasOwnProperty,R={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function N(z,G,xe){var we,ve={},Be=null,Je=null;if(G!=null)for(we in G.ref!==void 0&&(Je=G.ref),G.key!==void 0&&(Be=""+G.key),G)$.call(G,we)&&!A.hasOwnProperty(we)&&(ve[we]=G[we]);var Ye=arguments.length-2;if(Ye===1)ve.children=xe;else if(1<Ye){for(var le=Array(Ye),Me=0;Me<Ye;Me++)le[Me]=arguments[Me+2];ve.children=le}if(z&&z.defaultProps)for(we in Ye=z.defaultProps,Ye)ve[we]===void 0&&(ve[we]=Ye[we]);return{$$typeof:e,type:z,key:Be,ref:Je,props:ve,_owner:R.current}}function M(z,G){return{$$typeof:e,type:z.type,key:G,ref:z.ref,props:z.props,_owner:z._owner}}function I(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function P(z){var G={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(xe){return G[xe]})}var K=/\/+/g;function W(z,G){return typeof z=="object"&&z!==null&&z.key!=null?P(""+z.key):G.toString(36)}function j(z,G,xe,we,ve){var Be=typeof z;(Be==="undefined"||Be==="boolean")&&(z=null);var Je=!1;if(z===null)Je=!0;else switch(Be){case"string":case"number":Je=!0;break;case"object":switch(z.$$typeof){case e:case t:Je=!0}}if(Je)return Je=z,ve=ve(Je),z=we===""?"."+W(Je,0):we,C(ve)?(xe="",z!=null&&(xe=z.replace(K,"$&/")+"/"),j(ve,G,xe,"",function(Me){return Me})):ve!=null&&(I(ve)&&(ve=M(ve,xe+(!ve.key||Je&&Je.key===ve.key?"":(""+ve.key).replace(K,"$&/")+"/")+z)),G.push(ve)),1;if(Je=0,we=we===""?".":we+":",C(z))for(var Ye=0;Ye<z.length;Ye++){Be=z[Ye];var le=we+W(Be,Ye);Je+=j(Be,G,xe,le,ve)}else if(le=p(z),typeof le=="function")for(z=le.call(z),Ye=0;!(Be=z.next()).done;)Be=Be.value,le=we+W(Be,Ye++),Je+=j(Be,G,xe,le,ve);else if(Be==="object")throw G=String(z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Je}function D(z,G,xe){if(z==null)return z;var we=[],ve=0;return j(z,we,"","",function(Be){return G.call(xe,Be,ve++)}),we}function L(z){if(z._status===-1){var G=z._result;G=G(),G.then(function(xe){(z._status===0||z._status===-1)&&(z._status=1,z._result=xe)},function(xe){(z._status===0||z._status===-1)&&(z._status=2,z._result=xe)}),z._status===-1&&(z._status=0,z._result=G)}if(z._status===1)return z._result.default;throw z._result}var H={current:null},U={transition:null},V={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:U,ReactCurrentOwner:R};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:D,forEach:function(z,G,xe){D(z,function(){G.apply(this,arguments)},xe)},count:function(z){var G=0;return D(z,function(){G++}),G},toArray:function(z){return D(z,function(G){return G})||[]},only:function(z){if(!I(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ke.Component=x,Ke.Fragment=n,Ke.Profiler=i,Ke.PureComponent=S,Ke.StrictMode=r,Ke.Suspense=l,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Ke.act=J,Ke.cloneElement=function(z,G,xe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var we=y({},z.props),ve=z.key,Be=z.ref,Je=z._owner;if(G!=null){if(G.ref!==void 0&&(Be=G.ref,Je=R.current),G.key!==void 0&&(ve=""+G.key),z.type&&z.type.defaultProps)var Ye=z.type.defaultProps;for(le in G)$.call(G,le)&&!A.hasOwnProperty(le)&&(we[le]=G[le]===void 0&&Ye!==void 0?Ye[le]:G[le])}var le=arguments.length-2;if(le===1)we.children=xe;else if(1<le){Ye=Array(le);for(var Me=0;Me<le;Me++)Ye[Me]=arguments[Me+2];we.children=Ye}return{$$typeof:e,type:z.type,key:ve,ref:Be,props:we,_owner:Je}},Ke.createContext=function(z){return z={$$typeof:s,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Ke.createElement=N,Ke.createFactory=function(z){var G=N.bind(null,z);return G.type=z,G},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(z){return{$$typeof:a,render:z}},Ke.isValidElement=I,Ke.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:L}},Ke.memo=function(z,G){return{$$typeof:u,type:z,compare:G===void 0?null:G}},Ke.startTransition=function(z){var G=U.transition;U.transition={};try{z()}finally{U.transition=G}},Ke.unstable_act=J,Ke.useCallback=function(z,G){return H.current.useCallback(z,G)},Ke.useContext=function(z){return H.current.useContext(z)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(z){return H.current.useDeferredValue(z)},Ke.useEffect=function(z,G){return H.current.useEffect(z,G)},Ke.useId=function(){return H.current.useId()},Ke.useImperativeHandle=function(z,G,xe){return H.current.useImperativeHandle(z,G,xe)},Ke.useInsertionEffect=function(z,G){return H.current.useInsertionEffect(z,G)},Ke.useLayoutEffect=function(z,G){return H.current.useLayoutEffect(z,G)},Ke.useMemo=function(z,G){return H.current.useMemo(z,G)},Ke.useReducer=function(z,G,xe){return H.current.useReducer(z,G,xe)},Ke.useRef=function(z){return H.current.useRef(z)},Ke.useState=function(z){return H.current.useState(z)},Ke.useSyncExternalStore=function(z,G,xe){return H.current.useSyncExternalStore(z,G,xe)},Ke.useTransition=function(){return H.current.useTransition()},Ke.version="18.3.1",Ke}var M6;function K$(){return M6||(M6=1,tS.exports=xZ()),tS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D6;function bZ(){if(D6)return Uh;D6=1;var e=K$(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var f,d={},p=null,g=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(g=l.ref);for(f in l)r.call(l,f)&&!o.hasOwnProperty(f)&&(d[f]=l[f]);if(a&&a.defaultProps)for(f in l=a.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:t,type:a,key:p,ref:g,props:d,_owner:i.current}}return Uh.Fragment=n,Uh.jsx=s,Uh.jsxs=s,Uh}var O6;function wZ(){return O6||(O6=1,eS.exports=bZ()),eS.exports}var F=wZ(),X=K$();const Ru=Gv(X);var B0={},nS={exports:{}},$r={},rS={exports:{}},iS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P6;function SZ(){return P6||(P6=1,function(e){function t(U,V){var J=U.length;U.push(V);e:for(;0<J;){var z=J-1>>>1,G=U[z];if(0<i(G,V))U[z]=V,U[J]=G,J=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],J=U.pop();if(J!==V){U[0]=J;e:for(var z=0,G=U.length,xe=G>>>1;z<xe;){var we=2*(z+1)-1,ve=U[we],Be=we+1,Je=U[Be];if(0>i(ve,J))Be<G&&0>i(Je,ve)?(U[z]=Je,U[Be]=J,z=Be):(U[z]=ve,U[we]=J,z=we);else if(Be<G&&0>i(Je,J))U[z]=Je,U[Be]=J,z=Be;else break e}}return V}function i(U,V){var J=U.sortIndex-V.sortIndex;return J!==0?J:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],f=1,d=null,p=3,g=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=U)r(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(u)}}function C(U){if(v=!1,E(U),!y)if(n(l)!==null)y=!0,L($);else{var V=n(u);V!==null&&H(C,V.startTime-U)}}function $(U,V){y=!1,v&&(v=!1,w(N),N=-1),g=!0;var J=p;try{for(E(V),d=n(l);d!==null&&(!(d.expirationTime>V)||U&&!P());){var z=d.callback;if(typeof z=="function"){d.callback=null,p=d.priorityLevel;var G=z(d.expirationTime<=V);V=e.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),E(V)}else r(l);d=n(l)}if(d!==null)var xe=!0;else{var we=n(u);we!==null&&H(C,we.startTime-V),xe=!1}return xe}finally{d=null,p=J,g=!1}}var R=!1,A=null,N=-1,M=5,I=-1;function P(){return!(e.unstable_now()-I<M)}function K(){if(A!==null){var U=e.unstable_now();I=U;var V=!0;try{V=A(!0,U)}finally{V?W():(R=!1,A=null)}}else R=!1}var W;if(typeof S=="function")W=function(){S(K)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,D=j.port2;j.port1.onmessage=K,W=function(){D.postMessage(null)}}else W=function(){x(K,0)};function L(U){A=U,R||(R=!0,W())}function H(U,V){N=x(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,L($))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var J=p;p=V;try{return U()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=p;p=U;try{return V()}finally{p=J}},e.unstable_scheduleCallback=function(U,V,J){var z=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?z+J:z):J=z,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,U={id:f++,callback:V,priorityLevel:U,startTime:J,expirationTime:G,sortIndex:-1},J>z?(U.sortIndex=J,t(u,U),n(l)===null&&U===n(u)&&(v?(w(N),N=-1):v=!0,H(C,J-z))):(U.sortIndex=G,t(l,U),y||g||(y=!0,L($))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var V=p;return function(){var J=p;p=V;try{return U.apply(this,arguments)}finally{p=J}}}}(iS)),iS}var I6;function kZ(){return I6||(I6=1,rS.exports=SZ()),rS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L6;function EZ(){if(L6)return $r;L6=1;var e=K$(),t=kZ();function n(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(c,h){s(c,h),s(c+"Capture",h)}function s(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function p(c){return l.call(d,c)?!0:l.call(f,c)?!1:u.test(c)?d[c]=!0:(f[c]=!0,!1)}function g(c,h,m,b){if(m!==null&&m.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return b?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,h,m,b){if(h===null||typeof h>"u"||g(c,h,m,b))return!0;if(b)return!1;if(m!==null)switch(m.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function v(c,h,m,b,k,_,T){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=b,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=c,this.type=h,this.sanitizeURL=_,this.removeEmptyString=T}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){x[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];x[h]=new v(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){x[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){x[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){x[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){x[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){x[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){x[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){x[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function S(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(w,S);x[h]=new v(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(w,S);x[h]=new v(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(w,S);x[h]=new v(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){x[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),x.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){x[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function E(c,h,m,b){var k=x.hasOwnProperty(h)?x[h]:null;(k!==null?k.type!==0:b||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(y(h,m,k,b)&&(m=null),b||k===null?p(h)&&(m===null?c.removeAttribute(h):c.setAttribute(h,""+m)):k.mustUseProperty?c[k.propertyName]=m===null?k.type===3?!1:"":m:(h=k.attributeName,b=k.attributeNamespace,m===null?c.removeAttribute(h):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,b?c.setAttributeNS(b,h,m):c.setAttribute(h,m))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),R=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),P=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),U=Symbol.iterator;function V(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var J=Object.assign,z;function G(c){if(z===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);z=h&&h[1]||""}return`
`+z+c}var xe=!1;function we(c,h){if(!c||xe)return"";xe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Z){var b=Z}Reflect.construct(c,[],h)}else{try{h.call()}catch(Z){b=Z}c.call(h.prototype)}else{try{throw Error()}catch(Z){b=Z}c()}}catch(Z){if(Z&&b&&typeof Z.stack=="string"){for(var k=Z.stack.split(`
`),_=b.stack.split(`
`),T=k.length-1,O=_.length-1;1<=T&&0<=O&&k[T]!==_[O];)O--;for(;1<=T&&0<=O;T--,O--)if(k[T]!==_[O]){if(T!==1||O!==1)do if(T--,O--,0>O||k[T]!==_[O]){var B=`
`+k[T].replace(" at new "," at ");return c.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",c.displayName)),B}while(1<=T&&0<=O);break}}}finally{xe=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?G(c):""}function ve(c){switch(c.tag){case 5:return G(c.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return c=we(c.type,!1),c;case 11:return c=we(c.type.render,!1),c;case 1:return c=we(c.type,!0),c;default:return""}}function Be(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case A:return"Fragment";case R:return"Portal";case M:return"Profiler";case N:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case P:return(c.displayName||"Context")+".Consumer";case I:return(c._context.displayName||"Context")+".Provider";case K:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case D:return h=c.displayName||null,h!==null?h:Be(c.type)||"Memo";case L:h=c._payload,c=c._init;try{return Be(c(h))}catch{}}return null}function Je(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(h);case 8:return h===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ye(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function le(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Me(c){var h=le(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),b=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,_=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return k.call(this)},set:function(T){b=""+T,_.call(this,T)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(T){b=""+T},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function We(c){c._valueTracker||(c._valueTracker=Me(c))}function ce(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),b="";return c&&(b=le(c)?c.checked?"true":"false":c.value),c=b,c!==m?(h.setValue(c),!0):!1}function Et(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function et(c,h){var m=h.checked;return J({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function Nt(c,h){var m=h.defaultValue==null?"":h.defaultValue,b=h.checked!=null?h.checked:h.defaultChecked;m=Ye(h.value!=null?h.value:m),c._wrapperState={initialChecked:b,initialValue:m,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ut(c,h){h=h.checked,h!=null&&E(c,"checked",h,!1)}function In(c,h){Ut(c,h);var m=Ye(h.value),b=h.type;if(m!=null)b==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Mc(c,h.type,m):h.hasOwnProperty("defaultValue")&&Mc(c,h.type,Ye(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function ma(c,h,m){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var b=h.type;if(!(b!=="submit"&&b!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,m||h===c.value||(c.value=h),c.defaultValue=h}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Mc(c,h,m){(h!=="number"||Et(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var ya=Array.isArray;function vs(c,h,m,b){if(c=c.options,h){h={};for(var k=0;k<m.length;k++)h["$"+m[k]]=!0;for(m=0;m<c.length;m++)k=h.hasOwnProperty("$"+c[m].value),c[m].selected!==k&&(c[m].selected=k),k&&b&&(c[m].defaultSelected=!0)}else{for(m=""+Ye(m),h=null,k=0;k<c.length;k++){if(c[k].value===m){c[k].selected=!0,b&&(c[k].defaultSelected=!0);return}h!==null||c[k].disabled||(h=c[k])}h!==null&&(h.selected=!0)}}function Dc(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function eh(c,h){var m=h.value;if(m==null){if(m=h.children,h=h.defaultValue,m!=null){if(h!=null)throw Error(n(92));if(ya(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),m=h}c._wrapperState={initialValue:Ye(m)}}function th(c,h){var m=Ye(h.value),b=Ye(h.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),h.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),b!=null&&(c.defaultValue=""+b)}function nh(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function rh(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?rh(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Ul,ih=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,b,k){MSApp.execUnsafeLocalFunction(function(){return c(h,m,b,k)})}:c}(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Ul=Ul||document.createElement("div"),Ul.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ul.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function va(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mm=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(c){Mm.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),xa[h]=xa[c]})});function oh(c,h,m){return h==null||typeof h=="boolean"||h===""?"":m||typeof h!="number"||h===0||xa.hasOwnProperty(c)&&xa[c]?(""+h).trim():h+"px"}function Pi(c,h){c=c.style;for(var m in h)if(h.hasOwnProperty(m)){var b=m.indexOf("--")===0,k=oh(m,h[m],b);m==="float"&&(m="cssFloat"),b?c.setProperty(m,k):c[m]=k}}var cb=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fb(c,h){if(h){if(cb[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function db(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hb=null;function pb(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var gb=null,Pc=null,Ic=null;function VN(c){if(c=$h(c)){if(typeof gb!="function")throw Error(n(280));var h=c.stateNode;h&&(h=n0(h),gb(c.stateNode,c.type,h))}}function HN(c){Pc?Ic?Ic.push(c):Ic=[c]:Pc=c}function GN(){if(Pc){var c=Pc,h=Ic;if(Ic=Pc=null,VN(c),h)for(c=0;c<h.length;c++)VN(h[c])}}function YN(c,h){return c(h)}function XN(){}var mb=!1;function KN(c,h,m){if(mb)return c(h,m);mb=!0;try{return YN(c,h,m)}finally{mb=!1,(Pc!==null||Ic!==null)&&(XN(),GN())}}function sh(c,h){var m=c.stateNode;if(m===null)return null;var b=n0(m);if(b===null)return null;m=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(n(231,h,typeof m));return m}var yb=!1;if(a)try{var ah={};Object.defineProperty(ah,"passive",{get:function(){yb=!0}}),window.addEventListener("test",ah,ah),window.removeEventListener("test",ah,ah)}catch{yb=!1}function kK(c,h,m,b,k,_,T,O,B){var Z=Array.prototype.slice.call(arguments,3);try{h.apply(m,Z)}catch(ae){this.onError(ae)}}var lh=!1,Dm=null,Om=!1,vb=null,EK={onError:function(c){lh=!0,Dm=c}};function _K(c,h,m,b,k,_,T,O,B){lh=!1,Dm=null,kK.apply(EK,arguments)}function CK(c,h,m,b,k,_,T,O,B){if(_K.apply(this,arguments),lh){if(lh){var Z=Dm;lh=!1,Dm=null}else throw Error(n(198));Om||(Om=!0,vb=Z)}}function ql(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function QN(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function ZN(c){if(ql(c)!==c)throw Error(n(188))}function $K(c){var h=c.alternate;if(!h){if(h=ql(c),h===null)throw Error(n(188));return h!==c?null:c}for(var m=c,b=h;;){var k=m.return;if(k===null)break;var _=k.alternate;if(_===null){if(b=k.return,b!==null){m=b;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===m)return ZN(k),c;if(_===b)return ZN(k),h;_=_.sibling}throw Error(n(188))}if(m.return!==b.return)m=k,b=_;else{for(var T=!1,O=k.child;O;){if(O===m){T=!0,m=k,b=_;break}if(O===b){T=!0,b=k,m=_;break}O=O.sibling}if(!T){for(O=_.child;O;){if(O===m){T=!0,m=_,b=k;break}if(O===b){T=!0,b=_,m=k;break}O=O.sibling}if(!T)throw Error(n(189))}}if(m.alternate!==b)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?c:h}function JN(c){return c=$K(c),c!==null?e4(c):null}function e4(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=e4(c);if(h!==null)return h;c=c.sibling}return null}var t4=t.unstable_scheduleCallback,n4=t.unstable_cancelCallback,AK=t.unstable_shouldYield,RK=t.unstable_requestPaint,Yt=t.unstable_now,TK=t.unstable_getCurrentPriorityLevel,xb=t.unstable_ImmediatePriority,r4=t.unstable_UserBlockingPriority,Pm=t.unstable_NormalPriority,NK=t.unstable_LowPriority,i4=t.unstable_IdlePriority,Im=null,_o=null;function FK(c){if(_o&&typeof _o.onCommitFiberRoot=="function")try{_o.onCommitFiberRoot(Im,c,void 0,(c.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:OK,MK=Math.log,DK=Math.LN2;function OK(c){return c>>>=0,c===0?32:31-(MK(c)/DK|0)|0}var Lm=64,zm=4194304;function uh(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function jm(c,h){var m=c.pendingLanes;if(m===0)return 0;var b=0,k=c.suspendedLanes,_=c.pingedLanes,T=m&268435455;if(T!==0){var O=T&~k;O!==0?b=uh(O):(_&=T,_!==0&&(b=uh(_)))}else T=m&~k,T!==0?b=uh(T):_!==0&&(b=uh(_));if(b===0)return 0;if(h!==0&&h!==b&&(h&k)===0&&(k=b&-b,_=h&-h,k>=_||k===16&&(_&4194240)!==0))return h;if((b&4)!==0&&(b|=m&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=b;0<h;)m=31-Ii(h),k=1<<m,b|=c[m],h&=~k;return b}function PK(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IK(c,h){for(var m=c.suspendedLanes,b=c.pingedLanes,k=c.expirationTimes,_=c.pendingLanes;0<_;){var T=31-Ii(_),O=1<<T,B=k[T];B===-1?((O&m)===0||(O&b)!==0)&&(k[T]=PK(O,h)):B<=h&&(c.expiredLanes|=O),_&=~O}}function bb(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function o4(){var c=Lm;return Lm<<=1,(Lm&4194240)===0&&(Lm=64),c}function wb(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function ch(c,h,m){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Ii(h),c[h]=m}function LK(c,h){var m=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<m;){var k=31-Ii(m),_=1<<k;h[k]=0,b[k]=-1,c[k]=-1,m&=~_}}function Sb(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var b=31-Ii(m),k=1<<b;k&h|c[b]&h&&(c[b]|=h),m&=~k}}var mt=0;function s4(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var a4,kb,l4,u4,c4,Eb=!1,Bm=[],ba=null,wa=null,Sa=null,fh=new Map,dh=new Map,ka=[],zK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f4(c,h){switch(c){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":fh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":dh.delete(h.pointerId)}}function hh(c,h,m,b,k,_){return c===null||c.nativeEvent!==_?(c={blockedOn:h,domEventName:m,eventSystemFlags:b,nativeEvent:_,targetContainers:[k]},h!==null&&(h=$h(h),h!==null&&kb(h)),c):(c.eventSystemFlags|=b,h=c.targetContainers,k!==null&&h.indexOf(k)===-1&&h.push(k),c)}function jK(c,h,m,b,k){switch(h){case"focusin":return ba=hh(ba,c,h,m,b,k),!0;case"dragenter":return wa=hh(wa,c,h,m,b,k),!0;case"mouseover":return Sa=hh(Sa,c,h,m,b,k),!0;case"pointerover":var _=k.pointerId;return fh.set(_,hh(fh.get(_)||null,c,h,m,b,k)),!0;case"gotpointercapture":return _=k.pointerId,dh.set(_,hh(dh.get(_)||null,c,h,m,b,k)),!0}return!1}function d4(c){var h=Wl(c.target);if(h!==null){var m=ql(h);if(m!==null){if(h=m.tag,h===13){if(h=QN(m),h!==null){c.blockedOn=h,c4(c.priority,function(){l4(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Um(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=Cb(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var b=new m.constructor(m.type,m);hb=b,m.target.dispatchEvent(b),hb=null}else return h=$h(m),h!==null&&kb(h),c.blockedOn=m,!1;h.shift()}return!0}function h4(c,h,m){Um(c)&&m.delete(h)}function BK(){Eb=!1,ba!==null&&Um(ba)&&(ba=null),wa!==null&&Um(wa)&&(wa=null),Sa!==null&&Um(Sa)&&(Sa=null),fh.forEach(h4),dh.forEach(h4)}function ph(c,h){c.blockedOn===h&&(c.blockedOn=null,Eb||(Eb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BK)))}function gh(c){function h(k){return ph(k,c)}if(0<Bm.length){ph(Bm[0],c);for(var m=1;m<Bm.length;m++){var b=Bm[m];b.blockedOn===c&&(b.blockedOn=null)}}for(ba!==null&&ph(ba,c),wa!==null&&ph(wa,c),Sa!==null&&ph(Sa,c),fh.forEach(h),dh.forEach(h),m=0;m<ka.length;m++)b=ka[m],b.blockedOn===c&&(b.blockedOn=null);for(;0<ka.length&&(m=ka[0],m.blockedOn===null);)d4(m),m.blockedOn===null&&ka.shift()}var Lc=C.ReactCurrentBatchConfig,qm=!0;function UK(c,h,m,b){var k=mt,_=Lc.transition;Lc.transition=null;try{mt=1,_b(c,h,m,b)}finally{mt=k,Lc.transition=_}}function qK(c,h,m,b){var k=mt,_=Lc.transition;Lc.transition=null;try{mt=4,_b(c,h,m,b)}finally{mt=k,Lc.transition=_}}function _b(c,h,m,b){if(qm){var k=Cb(c,h,m,b);if(k===null)qb(c,h,b,Wm,m),f4(c,b);else if(jK(k,c,h,m,b))b.stopPropagation();else if(f4(c,b),h&4&&-1<zK.indexOf(c)){for(;k!==null;){var _=$h(k);if(_!==null&&a4(_),_=Cb(c,h,m,b),_===null&&qb(c,h,b,Wm,m),_===k)break;k=_}k!==null&&b.stopPropagation()}else qb(c,h,b,null,m)}}var Wm=null;function Cb(c,h,m,b){if(Wm=null,c=pb(b),c=Wl(c),c!==null)if(h=ql(c),h===null)c=null;else if(m=h.tag,m===13){if(c=QN(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Wm=c,null}function p4(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TK()){case xb:return 1;case r4:return 4;case Pm:case NK:return 16;case i4:return 536870912;default:return 16}default:return 16}}var Ea=null,$b=null,Vm=null;function g4(){if(Vm)return Vm;var c,h=$b,m=h.length,b,k="value"in Ea?Ea.value:Ea.textContent,_=k.length;for(c=0;c<m&&h[c]===k[c];c++);var T=m-c;for(b=1;b<=T&&h[m-b]===k[_-b];b++);return Vm=k.slice(c,1<b?1-b:void 0)}function Hm(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Gm(){return!0}function m4(){return!1}function Ur(c){function h(m,b,k,_,T){this._reactName=m,this._targetInst=k,this.type=b,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var O in c)c.hasOwnProperty(O)&&(m=c[O],this[O]=m?m(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gm:m4,this.isPropagationStopped=m4,this}return J(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Gm)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Gm)},persist:function(){},isPersistent:Gm}),h}var zc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ab=Ur(zc),mh=J({},zc,{view:0,detail:0}),WK=Ur(mh),Rb,Tb,yh,Ym=J({},mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fb,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==yh&&(yh&&c.type==="mousemove"?(Rb=c.screenX-yh.screenX,Tb=c.screenY-yh.screenY):Tb=Rb=0,yh=c),Rb)},movementY:function(c){return"movementY"in c?c.movementY:Tb}}),y4=Ur(Ym),VK=J({},Ym,{dataTransfer:0}),HK=Ur(VK),GK=J({},mh,{relatedTarget:0}),Nb=Ur(GK),YK=J({},zc,{animationName:0,elapsedTime:0,pseudoElement:0}),XK=Ur(YK),KK=J({},zc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),QK=Ur(KK),ZK=J({},zc,{data:0}),v4=Ur(ZK),JK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nQ(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=tQ[c])?!!h[c]:!1}function Fb(){return nQ}var rQ=J({},mh,{key:function(c){if(c.key){var h=JK[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Hm(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?eQ[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fb,charCode:function(c){return c.type==="keypress"?Hm(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Hm(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),iQ=Ur(rQ),oQ=J({},Ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x4=Ur(oQ),sQ=J({},mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fb}),aQ=Ur(sQ),lQ=J({},zc,{propertyName:0,elapsedTime:0,pseudoElement:0}),uQ=Ur(lQ),cQ=J({},Ym,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),fQ=Ur(cQ),dQ=[9,13,27,32],Mb=a&&"CompositionEvent"in window,vh=null;a&&"documentMode"in document&&(vh=document.documentMode);var hQ=a&&"TextEvent"in window&&!vh,b4=a&&(!Mb||vh&&8<vh&&11>=vh),w4=" ",S4=!1;function k4(c,h){switch(c){case"keyup":return dQ.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E4(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var jc=!1;function pQ(c,h){switch(c){case"compositionend":return E4(h);case"keypress":return h.which!==32?null:(S4=!0,w4);case"textInput":return c=h.data,c===w4&&S4?null:c;default:return null}}function gQ(c,h){if(jc)return c==="compositionend"||!Mb&&k4(c,h)?(c=g4(),Vm=$b=Ea=null,jc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return b4&&h.locale!=="ko"?null:h.data;default:return null}}var mQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _4(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!mQ[c.type]:h==="textarea"}function C4(c,h,m,b){HN(b),h=Jm(h,"onChange"),0<h.length&&(m=new Ab("onChange","change",null,m,b),c.push({event:m,listeners:h}))}var xh=null,bh=null;function yQ(c){W4(c,0)}function Xm(c){var h=Vc(c);if(ce(h))return c}function vQ(c,h){if(c==="change")return h}var $4=!1;if(a){var Db;if(a){var Ob="oninput"in document;if(!Ob){var A4=document.createElement("div");A4.setAttribute("oninput","return;"),Ob=typeof A4.oninput=="function"}Db=Ob}else Db=!1;$4=Db&&(!document.documentMode||9<document.documentMode)}function R4(){xh&&(xh.detachEvent("onpropertychange",T4),bh=xh=null)}function T4(c){if(c.propertyName==="value"&&Xm(bh)){var h=[];C4(h,bh,c,pb(c)),KN(yQ,h)}}function xQ(c,h,m){c==="focusin"?(R4(),xh=h,bh=m,xh.attachEvent("onpropertychange",T4)):c==="focusout"&&R4()}function bQ(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Xm(bh)}function wQ(c,h){if(c==="click")return Xm(h)}function SQ(c,h){if(c==="input"||c==="change")return Xm(h)}function kQ(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Li=typeof Object.is=="function"?Object.is:kQ;function wh(c,h){if(Li(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),b=Object.keys(h);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var k=m[b];if(!l.call(h,k)||!Li(c[k],h[k]))return!1}return!0}function N4(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function F4(c,h){var m=N4(c);c=0;for(var b;m;){if(m.nodeType===3){if(b=c+m.textContent.length,c<=h&&b>=h)return{node:m,offset:h-c};c=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=N4(m)}}function M4(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?M4(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function D4(){for(var c=window,h=Et();h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=Et(c.document)}return h}function Pb(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function EQ(c){var h=D4(),m=c.focusedElem,b=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&M4(m.ownerDocument.documentElement,m)){if(b!==null&&Pb(m)){if(h=b.start,c=b.end,c===void 0&&(c=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(c,m.value.length);else if(c=(h=m.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var k=m.textContent.length,_=Math.min(b.start,k);b=b.end===void 0?_:Math.min(b.end,k),!c.extend&&_>b&&(k=b,b=_,_=k),k=F4(m,_);var T=F4(m,b);k&&T&&(c.rangeCount!==1||c.anchorNode!==k.node||c.anchorOffset!==k.offset||c.focusNode!==T.node||c.focusOffset!==T.offset)&&(h=h.createRange(),h.setStart(k.node,k.offset),c.removeAllRanges(),_>b?(c.addRange(h),c.extend(T.node,T.offset)):(h.setEnd(T.node,T.offset),c.addRange(h)))}}for(h=[],c=m;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)c=h[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var _Q=a&&"documentMode"in document&&11>=document.documentMode,Bc=null,Ib=null,Sh=null,Lb=!1;function O4(c,h,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Lb||Bc==null||Bc!==Et(b)||(b=Bc,"selectionStart"in b&&Pb(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Sh&&wh(Sh,b)||(Sh=b,b=Jm(Ib,"onSelect"),0<b.length&&(h=new Ab("onSelect","select",null,h,m),c.push({event:h,listeners:b}),h.target=Bc)))}function Km(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var Uc={animationend:Km("Animation","AnimationEnd"),animationiteration:Km("Animation","AnimationIteration"),animationstart:Km("Animation","AnimationStart"),transitionend:Km("Transition","TransitionEnd")},zb={},P4={};a&&(P4=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Qm(c){if(zb[c])return zb[c];if(!Uc[c])return c;var h=Uc[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in P4)return zb[c]=h[m];return c}var I4=Qm("animationend"),L4=Qm("animationiteration"),z4=Qm("animationstart"),j4=Qm("transitionend"),B4=new Map,U4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(c,h){B4.set(c,h),o(h,[c])}for(var jb=0;jb<U4.length;jb++){var Bb=U4[jb],CQ=Bb.toLowerCase(),$Q=Bb[0].toUpperCase()+Bb.slice(1);_a(CQ,"on"+$Q)}_a(I4,"onAnimationEnd"),_a(L4,"onAnimationIteration"),_a(z4,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(j4,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function q4(c,h,m){var b=c.type||"unknown-event";c.currentTarget=m,CK(b,h,void 0,c),c.currentTarget=null}function W4(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var b=c[m],k=b.event;b=b.listeners;e:{var _=void 0;if(h)for(var T=b.length-1;0<=T;T--){var O=b[T],B=O.instance,Z=O.currentTarget;if(O=O.listener,B!==_&&k.isPropagationStopped())break e;q4(k,O,Z),_=B}else for(T=0;T<b.length;T++){if(O=b[T],B=O.instance,Z=O.currentTarget,O=O.listener,B!==_&&k.isPropagationStopped())break e;q4(k,O,Z),_=B}}}if(Om)throw c=vb,Om=!1,vb=null,c}function $t(c,h){var m=h[Xb];m===void 0&&(m=h[Xb]=new Set);var b=c+"__bubble";m.has(b)||(V4(h,c,2,!1),m.add(b))}function Ub(c,h,m){var b=0;h&&(b|=4),V4(m,c,b,h)}var Zm="_reactListening"+Math.random().toString(36).slice(2);function Eh(c){if(!c[Zm]){c[Zm]=!0,r.forEach(function(m){m!=="selectionchange"&&(AQ.has(m)||Ub(m,!1,c),Ub(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Zm]||(h[Zm]=!0,Ub("selectionchange",!1,h))}}function V4(c,h,m,b){switch(p4(h)){case 1:var k=UK;break;case 4:k=qK;break;default:k=_b}m=k.bind(null,h,m,c),k=void 0,!yb||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(k=!0),b?k!==void 0?c.addEventListener(h,m,{capture:!0,passive:k}):c.addEventListener(h,m,!0):k!==void 0?c.addEventListener(h,m,{passive:k}):c.addEventListener(h,m,!1)}function qb(c,h,m,b,k){var _=b;if((h&1)===0&&(h&2)===0&&b!==null)e:for(;;){if(b===null)return;var T=b.tag;if(T===3||T===4){var O=b.stateNode.containerInfo;if(O===k||O.nodeType===8&&O.parentNode===k)break;if(T===4)for(T=b.return;T!==null;){var B=T.tag;if((B===3||B===4)&&(B=T.stateNode.containerInfo,B===k||B.nodeType===8&&B.parentNode===k))return;T=T.return}for(;O!==null;){if(T=Wl(O),T===null)return;if(B=T.tag,B===5||B===6){b=_=T;continue e}O=O.parentNode}}b=b.return}KN(function(){var Z=_,ae=pb(m),de=[];e:{var se=B4.get(c);if(se!==void 0){var Ce=Ab,Ae=c;switch(c){case"keypress":if(Hm(m)===0)break e;case"keydown":case"keyup":Ce=iQ;break;case"focusin":Ae="focus",Ce=Nb;break;case"focusout":Ae="blur",Ce=Nb;break;case"beforeblur":case"afterblur":Ce=Nb;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=y4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=HK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=aQ;break;case I4:case L4:case z4:Ce=XK;break;case j4:Ce=uQ;break;case"scroll":Ce=WK;break;case"wheel":Ce=fQ;break;case"copy":case"cut":case"paste":Ce=QK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=x4}var Re=(h&4)!==0,Xt=!Re&&c==="scroll",Y=Re?se!==null?se+"Capture":null:se;Re=[];for(var q=Z,Q;q!==null;){Q=q;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,Y!==null&&(me=sh(q,Y),me!=null&&Re.push(_h(q,me,Q)))),Xt)break;q=q.return}0<Re.length&&(se=new Ce(se,Ae,null,m,ae),de.push({event:se,listeners:Re}))}}if((h&7)===0){e:{if(se=c==="mouseover"||c==="pointerover",Ce=c==="mouseout"||c==="pointerout",se&&m!==hb&&(Ae=m.relatedTarget||m.fromElement)&&(Wl(Ae)||Ae[xs]))break e;if((Ce||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,Ce?(Ae=m.relatedTarget||m.toElement,Ce=Z,Ae=Ae?Wl(Ae):null,Ae!==null&&(Xt=ql(Ae),Ae!==Xt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ce=null,Ae=Z),Ce!==Ae)){if(Re=y4,me="onMouseLeave",Y="onMouseEnter",q="mouse",(c==="pointerout"||c==="pointerover")&&(Re=x4,me="onPointerLeave",Y="onPointerEnter",q="pointer"),Xt=Ce==null?se:Vc(Ce),Q=Ae==null?se:Vc(Ae),se=new Re(me,q+"leave",Ce,m,ae),se.target=Xt,se.relatedTarget=Q,me=null,Wl(ae)===Z&&(Re=new Re(Y,q+"enter",Ae,m,ae),Re.target=Q,Re.relatedTarget=Xt,me=Re),Xt=me,Ce&&Ae)t:{for(Re=Ce,Y=Ae,q=0,Q=Re;Q;Q=qc(Q))q++;for(Q=0,me=Y;me;me=qc(me))Q++;for(;0<q-Q;)Re=qc(Re),q--;for(;0<Q-q;)Y=qc(Y),Q--;for(;q--;){if(Re===Y||Y!==null&&Re===Y.alternate)break t;Re=qc(Re),Y=qc(Y)}Re=null}else Re=null;Ce!==null&&H4(de,se,Ce,Re,!1),Ae!==null&&Xt!==null&&H4(de,Xt,Ae,Re,!0)}}e:{if(se=Z?Vc(Z):window,Ce=se.nodeName&&se.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&se.type==="file")var Fe=vQ;else if(_4(se))if($4)Fe=SQ;else{Fe=bQ;var Le=xQ}else(Ce=se.nodeName)&&Ce.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Fe=wQ);if(Fe&&(Fe=Fe(c,Z))){C4(de,Fe,m,ae);break e}Le&&Le(c,se,Z),c==="focusout"&&(Le=se._wrapperState)&&Le.controlled&&se.type==="number"&&Mc(se,"number",se.value)}switch(Le=Z?Vc(Z):window,c){case"focusin":(_4(Le)||Le.contentEditable==="true")&&(Bc=Le,Ib=Z,Sh=null);break;case"focusout":Sh=Ib=Bc=null;break;case"mousedown":Lb=!0;break;case"contextmenu":case"mouseup":case"dragend":Lb=!1,O4(de,m,ae);break;case"selectionchange":if(_Q)break;case"keydown":case"keyup":O4(de,m,ae)}var ze;if(Mb)e:{switch(c){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else jc?k4(c,m)&&(Ue="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Ue="onCompositionStart");Ue&&(b4&&m.locale!=="ko"&&(jc||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&jc&&(ze=g4()):(Ea=ae,$b="value"in Ea?Ea.value:Ea.textContent,jc=!0)),Le=Jm(Z,Ue),0<Le.length&&(Ue=new v4(Ue,c,null,m,ae),de.push({event:Ue,listeners:Le}),ze?Ue.data=ze:(ze=E4(m),ze!==null&&(Ue.data=ze)))),(ze=hQ?pQ(c,m):gQ(c,m))&&(Z=Jm(Z,"onBeforeInput"),0<Z.length&&(ae=new v4("onBeforeInput","beforeinput",null,m,ae),de.push({event:ae,listeners:Z}),ae.data=ze))}W4(de,h)})}function _h(c,h,m){return{instance:c,listener:h,currentTarget:m}}function Jm(c,h){for(var m=h+"Capture",b=[];c!==null;){var k=c,_=k.stateNode;k.tag===5&&_!==null&&(k=_,_=sh(c,m),_!=null&&b.unshift(_h(c,_,k)),_=sh(c,h),_!=null&&b.push(_h(c,_,k))),c=c.return}return b}function qc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function H4(c,h,m,b,k){for(var _=h._reactName,T=[];m!==null&&m!==b;){var O=m,B=O.alternate,Z=O.stateNode;if(B!==null&&B===b)break;O.tag===5&&Z!==null&&(O=Z,k?(B=sh(m,_),B!=null&&T.unshift(_h(m,B,O))):k||(B=sh(m,_),B!=null&&T.push(_h(m,B,O)))),m=m.return}T.length!==0&&c.push({event:h,listeners:T})}var RQ=/\r\n?/g,TQ=/\u0000|\uFFFD/g;function G4(c){return(typeof c=="string"?c:""+c).replace(RQ,`
`).replace(TQ,"")}function e0(c,h,m){if(h=G4(h),G4(c)!==h&&m)throw Error(n(425))}function t0(){}var Wb=null,Vb=null;function Hb(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Gb=typeof setTimeout=="function"?setTimeout:void 0,NQ=typeof clearTimeout=="function"?clearTimeout:void 0,Y4=typeof Promise=="function"?Promise:void 0,FQ=typeof queueMicrotask=="function"?queueMicrotask:typeof Y4<"u"?function(c){return Y4.resolve(null).then(c).catch(MQ)}:Gb;function MQ(c){setTimeout(function(){throw c})}function Yb(c,h){var m=h,b=0;do{var k=m.nextSibling;if(c.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(b===0){c.removeChild(k),gh(h);return}b--}else m!=="$"&&m!=="$?"&&m!=="$!"||b++;m=k}while(m);gh(h)}function Ca(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function X4(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Co="__reactFiber$"+Wc,Ch="__reactProps$"+Wc,xs="__reactContainer$"+Wc,Xb="__reactEvents$"+Wc,DQ="__reactListeners$"+Wc,OQ="__reactHandles$"+Wc;function Wl(c){var h=c[Co];if(h)return h;for(var m=c.parentNode;m;){if(h=m[xs]||m[Co]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=X4(c);c!==null;){if(m=c[Co])return m;c=X4(c)}return h}c=m,m=c.parentNode}return null}function $h(c){return c=c[Co]||c[xs],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Vc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(n(33))}function n0(c){return c[Ch]||null}var Kb=[],Hc=-1;function $a(c){return{current:c}}function At(c){0>Hc||(c.current=Kb[Hc],Kb[Hc]=null,Hc--)}function _t(c,h){Hc++,Kb[Hc]=c.current,c.current=h}var Aa={},Ln=$a(Aa),Sr=$a(!1),Vl=Aa;function Gc(c,h){var m=c.type.contextTypes;if(!m)return Aa;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var k={},_;for(_ in m)k[_]=h[_];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=k),k}function kr(c){return c=c.childContextTypes,c!=null}function r0(){At(Sr),At(Ln)}function K4(c,h,m){if(Ln.current!==Aa)throw Error(n(168));_t(Ln,h),_t(Sr,m)}function Q4(c,h,m){var b=c.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return m;b=b.getChildContext();for(var k in b)if(!(k in h))throw Error(n(108,Je(c)||"Unknown",k));return J({},m,b)}function i0(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Aa,Vl=Ln.current,_t(Ln,c),_t(Sr,Sr.current),!0}function Z4(c,h,m){var b=c.stateNode;if(!b)throw Error(n(169));m?(c=Q4(c,h,Vl),b.__reactInternalMemoizedMergedChildContext=c,At(Sr),At(Ln),_t(Ln,c)):At(Sr),_t(Sr,m)}var bs=null,o0=!1,Qb=!1;function J4(c){bs===null?bs=[c]:bs.push(c)}function PQ(c){o0=!0,J4(c)}function Ra(){if(!Qb&&bs!==null){Qb=!0;var c=0,h=mt;try{var m=bs;for(mt=1;c<m.length;c++){var b=m[c];do b=b(!0);while(b!==null)}bs=null,o0=!1}catch(k){throw bs!==null&&(bs=bs.slice(c+1)),t4(xb,Ra),k}finally{mt=h,Qb=!1}}return null}var Yc=[],Xc=0,s0=null,a0=0,ai=[],li=0,Hl=null,ws=1,Ss="";function Gl(c,h){Yc[Xc++]=a0,Yc[Xc++]=s0,s0=c,a0=h}function eF(c,h,m){ai[li++]=ws,ai[li++]=Ss,ai[li++]=Hl,Hl=c;var b=ws;c=Ss;var k=32-Ii(b)-1;b&=~(1<<k),m+=1;var _=32-Ii(h)+k;if(30<_){var T=k-k%5;_=(b&(1<<T)-1).toString(32),b>>=T,k-=T,ws=1<<32-Ii(h)+k|m<<k|b,Ss=_+c}else ws=1<<_|m<<k|b,Ss=c}function Zb(c){c.return!==null&&(Gl(c,1),eF(c,1,0))}function Jb(c){for(;c===s0;)s0=Yc[--Xc],Yc[Xc]=null,a0=Yc[--Xc],Yc[Xc]=null;for(;c===Hl;)Hl=ai[--li],ai[li]=null,Ss=ai[--li],ai[li]=null,ws=ai[--li],ai[li]=null}var qr=null,Wr=null,Ft=!1,zi=null;function tF(c,h){var m=di(5,null,null,0);m.elementType="DELETED",m.stateNode=h,m.return=c,h=c.deletions,h===null?(c.deletions=[m],c.flags|=16):h.push(m)}function nF(c,h){switch(c.tag){case 5:var m=c.type;return h=h.nodeType!==1||m.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,qr=c,Wr=Ca(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,qr=c,Wr=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(m=Hl!==null?{id:ws,overflow:Ss}:null,c.memoizedState={dehydrated:h,treeContext:m,retryLane:1073741824},m=di(18,null,null,0),m.stateNode=h,m.return=c,c.child=m,qr=c,Wr=null,!0):!1;default:return!1}}function ew(c){return(c.mode&1)!==0&&(c.flags&128)===0}function tw(c){if(Ft){var h=Wr;if(h){var m=h;if(!nF(c,h)){if(ew(c))throw Error(n(418));h=Ca(m.nextSibling);var b=qr;h&&nF(c,h)?tF(b,m):(c.flags=c.flags&-4097|2,Ft=!1,qr=c)}}else{if(ew(c))throw Error(n(418));c.flags=c.flags&-4097|2,Ft=!1,qr=c}}}function rF(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;qr=c}function l0(c){if(c!==qr)return!1;if(!Ft)return rF(c),Ft=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!Hb(c.type,c.memoizedProps)),h&&(h=Wr)){if(ew(c))throw iF(),Error(n(418));for(;h;)tF(c,h),h=Ca(h.nextSibling)}if(rF(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(h===0){Wr=Ca(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++}c=c.nextSibling}Wr=null}}else Wr=qr?Ca(c.stateNode.nextSibling):null;return!0}function iF(){for(var c=Wr;c;)c=Ca(c.nextSibling)}function Kc(){Wr=qr=null,Ft=!1}function nw(c){zi===null?zi=[c]:zi.push(c)}var IQ=C.ReactCurrentBatchConfig;function Ah(c,h,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var b=m.stateNode}if(!b)throw Error(n(147,c));var k=b,_=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===_?h.ref:(h=function(T){var O=k.refs;T===null?delete O[_]:O[_]=T},h._stringRef=_,h)}if(typeof c!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,c))}return c}function u0(c,h){throw c=Object.prototype.toString.call(h),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function oF(c){var h=c._init;return h(c._payload)}function sF(c){function h(Y,q){if(c){var Q=Y.deletions;Q===null?(Y.deletions=[q],Y.flags|=16):Q.push(q)}}function m(Y,q){if(!c)return null;for(;q!==null;)h(Y,q),q=q.sibling;return null}function b(Y,q){for(Y=new Map;q!==null;)q.key!==null?Y.set(q.key,q):Y.set(q.index,q),q=q.sibling;return Y}function k(Y,q){return Y=Ia(Y,q),Y.index=0,Y.sibling=null,Y}function _(Y,q,Q){return Y.index=Q,c?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<q?(Y.flags|=2,q):Q):(Y.flags|=2,q)):(Y.flags|=1048576,q)}function T(Y){return c&&Y.alternate===null&&(Y.flags|=2),Y}function O(Y,q,Q,me){return q===null||q.tag!==6?(q=Gw(Q,Y.mode,me),q.return=Y,q):(q=k(q,Q),q.return=Y,q)}function B(Y,q,Q,me){var Fe=Q.type;return Fe===A?ae(Y,q,Q.props.children,me,Q.key):q!==null&&(q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===L&&oF(Fe)===q.type)?(me=k(q,Q.props),me.ref=Ah(Y,q,Q),me.return=Y,me):(me=M0(Q.type,Q.key,Q.props,null,Y.mode,me),me.ref=Ah(Y,q,Q),me.return=Y,me)}function Z(Y,q,Q,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=Yw(Q,Y.mode,me),q.return=Y,q):(q=k(q,Q.children||[]),q.return=Y,q)}function ae(Y,q,Q,me,Fe){return q===null||q.tag!==7?(q=tu(Q,Y.mode,me,Fe),q.return=Y,q):(q=k(q,Q),q.return=Y,q)}function de(Y,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Gw(""+q,Y.mode,Q),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case $:return Q=M0(q.type,q.key,q.props,null,Y.mode,Q),Q.ref=Ah(Y,null,q),Q.return=Y,Q;case R:return q=Yw(q,Y.mode,Q),q.return=Y,q;case L:var me=q._init;return de(Y,me(q._payload),Q)}if(ya(q)||V(q))return q=tu(q,Y.mode,Q,null),q.return=Y,q;u0(Y,q)}return null}function se(Y,q,Q,me){var Fe=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Fe!==null?null:O(Y,q,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===Fe?B(Y,q,Q,me):null;case R:return Q.key===Fe?Z(Y,q,Q,me):null;case L:return Fe=Q._init,se(Y,q,Fe(Q._payload),me)}if(ya(Q)||V(Q))return Fe!==null?null:ae(Y,q,Q,me,null);u0(Y,Q)}return null}function Ce(Y,q,Q,me,Fe){if(typeof me=="string"&&me!==""||typeof me=="number")return Y=Y.get(Q)||null,O(q,Y,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case $:return Y=Y.get(me.key===null?Q:me.key)||null,B(q,Y,me,Fe);case R:return Y=Y.get(me.key===null?Q:me.key)||null,Z(q,Y,me,Fe);case L:var Le=me._init;return Ce(Y,q,Q,Le(me._payload),Fe)}if(ya(me)||V(me))return Y=Y.get(Q)||null,ae(q,Y,me,Fe,null);u0(q,me)}return null}function Ae(Y,q,Q,me){for(var Fe=null,Le=null,ze=q,Ue=q=0,gn=null;ze!==null&&Ue<Q.length;Ue++){ze.index>Ue?(gn=ze,ze=null):gn=ze.sibling;var st=se(Y,ze,Q[Ue],me);if(st===null){ze===null&&(ze=gn);break}c&&ze&&st.alternate===null&&h(Y,ze),q=_(st,q,Ue),Le===null?Fe=st:Le.sibling=st,Le=st,ze=gn}if(Ue===Q.length)return m(Y,ze),Ft&&Gl(Y,Ue),Fe;if(ze===null){for(;Ue<Q.length;Ue++)ze=de(Y,Q[Ue],me),ze!==null&&(q=_(ze,q,Ue),Le===null?Fe=ze:Le.sibling=ze,Le=ze);return Ft&&Gl(Y,Ue),Fe}for(ze=b(Y,ze);Ue<Q.length;Ue++)gn=Ce(ze,Y,Ue,Q[Ue],me),gn!==null&&(c&&gn.alternate!==null&&ze.delete(gn.key===null?Ue:gn.key),q=_(gn,q,Ue),Le===null?Fe=gn:Le.sibling=gn,Le=gn);return c&&ze.forEach(function(La){return h(Y,La)}),Ft&&Gl(Y,Ue),Fe}function Re(Y,q,Q,me){var Fe=V(Q);if(typeof Fe!="function")throw Error(n(150));if(Q=Fe.call(Q),Q==null)throw Error(n(151));for(var Le=Fe=null,ze=q,Ue=q=0,gn=null,st=Q.next();ze!==null&&!st.done;Ue++,st=Q.next()){ze.index>Ue?(gn=ze,ze=null):gn=ze.sibling;var La=se(Y,ze,st.value,me);if(La===null){ze===null&&(ze=gn);break}c&&ze&&La.alternate===null&&h(Y,ze),q=_(La,q,Ue),Le===null?Fe=La:Le.sibling=La,Le=La,ze=gn}if(st.done)return m(Y,ze),Ft&&Gl(Y,Ue),Fe;if(ze===null){for(;!st.done;Ue++,st=Q.next())st=de(Y,st.value,me),st!==null&&(q=_(st,q,Ue),Le===null?Fe=st:Le.sibling=st,Le=st);return Ft&&Gl(Y,Ue),Fe}for(ze=b(Y,ze);!st.done;Ue++,st=Q.next())st=Ce(ze,Y,Ue,st.value,me),st!==null&&(c&&st.alternate!==null&&ze.delete(st.key===null?Ue:st.key),q=_(st,q,Ue),Le===null?Fe=st:Le.sibling=st,Le=st);return c&&ze.forEach(function(mZ){return h(Y,mZ)}),Ft&&Gl(Y,Ue),Fe}function Xt(Y,q,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var Fe=Q.key,Le=q;Le!==null;){if(Le.key===Fe){if(Fe=Q.type,Fe===A){if(Le.tag===7){m(Y,Le.sibling),q=k(Le,Q.props.children),q.return=Y,Y=q;break e}}else if(Le.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===L&&oF(Fe)===Le.type){m(Y,Le.sibling),q=k(Le,Q.props),q.ref=Ah(Y,Le,Q),q.return=Y,Y=q;break e}m(Y,Le);break}else h(Y,Le);Le=Le.sibling}Q.type===A?(q=tu(Q.props.children,Y.mode,me,Q.key),q.return=Y,Y=q):(me=M0(Q.type,Q.key,Q.props,null,Y.mode,me),me.ref=Ah(Y,q,Q),me.return=Y,Y=me)}return T(Y);case R:e:{for(Le=Q.key;q!==null;){if(q.key===Le)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){m(Y,q.sibling),q=k(q,Q.children||[]),q.return=Y,Y=q;break e}else{m(Y,q);break}else h(Y,q);q=q.sibling}q=Yw(Q,Y.mode,me),q.return=Y,Y=q}return T(Y);case L:return Le=Q._init,Xt(Y,q,Le(Q._payload),me)}if(ya(Q))return Ae(Y,q,Q,me);if(V(Q))return Re(Y,q,Q,me);u0(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,q!==null&&q.tag===6?(m(Y,q.sibling),q=k(q,Q),q.return=Y,Y=q):(m(Y,q),q=Gw(Q,Y.mode,me),q.return=Y,Y=q),T(Y)):m(Y,q)}return Xt}var Qc=sF(!0),aF=sF(!1),c0=$a(null),f0=null,Zc=null,rw=null;function iw(){rw=Zc=f0=null}function ow(c){var h=c0.current;At(c0),c._currentValue=h}function sw(c,h,m){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===m)break;c=c.return}}function Jc(c,h){f0=c,rw=Zc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(Er=!0),c.firstContext=null)}function ui(c){var h=c._currentValue;if(rw!==c)if(c={context:c,memoizedValue:h,next:null},Zc===null){if(f0===null)throw Error(n(308));Zc=c,f0.dependencies={lanes:0,firstContext:c}}else Zc=Zc.next=c;return h}var Yl=null;function aw(c){Yl===null?Yl=[c]:Yl.push(c)}function lF(c,h,m,b){var k=h.interleaved;return k===null?(m.next=m,aw(h)):(m.next=k.next,k.next=m),h.interleaved=m,ks(c,b)}function ks(c,h){c.lanes|=h;var m=c.alternate;for(m!==null&&(m.lanes|=h),m=c,c=c.return;c!==null;)c.childLanes|=h,m=c.alternate,m!==null&&(m.childLanes|=h),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Ta=!1;function lw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uF(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Es(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Na(c,h,m){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(ot&2)!==0){var k=b.pending;return k===null?h.next=h:(h.next=k.next,k.next=h),b.pending=h,ks(c,m)}return k=b.interleaved,k===null?(h.next=h,aw(b)):(h.next=k.next,k.next=h),b.interleaved=h,ks(c,m)}function d0(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194240)!==0)){var b=h.lanes;b&=c.pendingLanes,m|=b,h.lanes=m,Sb(c,m)}}function cF(c,h){var m=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var k=null,_=null;if(m=m.firstBaseUpdate,m!==null){do{var T={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};_===null?k=_=T:_=_.next=T,m=m.next}while(m!==null);_===null?k=_=h:_=_.next=h}else k=_=h;m={baseState:b.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:b.shared,effects:b.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}function h0(c,h,m,b){var k=c.updateQueue;Ta=!1;var _=k.firstBaseUpdate,T=k.lastBaseUpdate,O=k.shared.pending;if(O!==null){k.shared.pending=null;var B=O,Z=B.next;B.next=null,T===null?_=Z:T.next=Z,T=B;var ae=c.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==T&&(O===null?ae.firstBaseUpdate=Z:O.next=Z,ae.lastBaseUpdate=B))}if(_!==null){var de=k.baseState;T=0,ae=Z=B=null,O=_;do{var se=O.lane,Ce=O.eventTime;if((b&se)===se){ae!==null&&(ae=ae.next={eventTime:Ce,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ae=c,Re=O;switch(se=h,Ce=m,Re.tag){case 1:if(Ae=Re.payload,typeof Ae=="function"){de=Ae.call(Ce,de,se);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Re.payload,se=typeof Ae=="function"?Ae.call(Ce,de,se):Ae,se==null)break e;de=J({},de,se);break e;case 2:Ta=!0}}O.callback!==null&&O.lane!==0&&(c.flags|=64,se=k.effects,se===null?k.effects=[O]:se.push(O))}else Ce={eventTime:Ce,lane:se,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(Z=ae=Ce,B=de):ae=ae.next=Ce,T|=se;if(O=O.next,O===null){if(O=k.shared.pending,O===null)break;se=O,O=se.next,se.next=null,k.lastBaseUpdate=se,k.shared.pending=null}}while(!0);if(ae===null&&(B=de),k.baseState=B,k.firstBaseUpdate=Z,k.lastBaseUpdate=ae,h=k.shared.interleaved,h!==null){k=h;do T|=k.lane,k=k.next;while(k!==h)}else _===null&&(k.shared.lanes=0);Ql|=T,c.lanes=T,c.memoizedState=de}}function fF(c,h,m){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var b=c[h],k=b.callback;if(k!==null){if(b.callback=null,b=m,typeof k!="function")throw Error(n(191,k));k.call(b)}}}var Rh={},$o=$a(Rh),Th=$a(Rh),Nh=$a(Rh);function Xl(c){if(c===Rh)throw Error(n(174));return c}function uw(c,h){switch(_t(Nh,h),_t(Th,c),_t($o,Rh),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Oc(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Oc(h,c)}At($o),_t($o,h)}function ef(){At($o),At(Th),At(Nh)}function dF(c){Xl(Nh.current);var h=Xl($o.current),m=Oc(h,c.type);h!==m&&(_t(Th,c),_t($o,m))}function cw(c){Th.current===c&&(At($o),At(Th))}var It=$a(0);function p0(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var fw=[];function dw(){for(var c=0;c<fw.length;c++)fw[c]._workInProgressVersionPrimary=null;fw.length=0}var g0=C.ReactCurrentDispatcher,hw=C.ReactCurrentBatchConfig,Kl=0,Lt=null,rn=null,hn=null,m0=!1,Fh=!1,Mh=0,LQ=0;function zn(){throw Error(n(321))}function pw(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!Li(c[m],h[m]))return!1;return!0}function gw(c,h,m,b,k,_){if(Kl=_,Lt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,g0.current=c===null||c.memoizedState===null?UQ:qQ,c=m(b,k),Fh){_=0;do{if(Fh=!1,Mh=0,25<=_)throw Error(n(301));_+=1,hn=rn=null,h.updateQueue=null,g0.current=WQ,c=m(b,k)}while(Fh)}if(g0.current=x0,h=rn!==null&&rn.next!==null,Kl=0,hn=rn=Lt=null,m0=!1,h)throw Error(n(300));return c}function mw(){var c=Mh!==0;return Mh=0,c}function Ao(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Lt.memoizedState=hn=c:hn=hn.next=c,hn}function ci(){if(rn===null){var c=Lt.alternate;c=c!==null?c.memoizedState:null}else c=rn.next;var h=hn===null?Lt.memoizedState:hn.next;if(h!==null)hn=h,rn=c;else{if(c===null)throw Error(n(310));rn=c,c={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},hn===null?Lt.memoizedState=hn=c:hn=hn.next=c}return hn}function Dh(c,h){return typeof h=="function"?h(c):h}function yw(c){var h=ci(),m=h.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var b=rn,k=b.baseQueue,_=m.pending;if(_!==null){if(k!==null){var T=k.next;k.next=_.next,_.next=T}b.baseQueue=k=_,m.pending=null}if(k!==null){_=k.next,b=b.baseState;var O=T=null,B=null,Z=_;do{var ae=Z.lane;if((Kl&ae)===ae)B!==null&&(B=B.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),b=Z.hasEagerState?Z.eagerState:c(b,Z.action);else{var de={lane:ae,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};B===null?(O=B=de,T=b):B=B.next=de,Lt.lanes|=ae,Ql|=ae}Z=Z.next}while(Z!==null&&Z!==_);B===null?T=b:B.next=O,Li(b,h.memoizedState)||(Er=!0),h.memoizedState=b,h.baseState=T,h.baseQueue=B,m.lastRenderedState=b}if(c=m.interleaved,c!==null){k=c;do _=k.lane,Lt.lanes|=_,Ql|=_,k=k.next;while(k!==c)}else k===null&&(m.lanes=0);return[h.memoizedState,m.dispatch]}function vw(c){var h=ci(),m=h.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var b=m.dispatch,k=m.pending,_=h.memoizedState;if(k!==null){m.pending=null;var T=k=k.next;do _=c(_,T.action),T=T.next;while(T!==k);Li(_,h.memoizedState)||(Er=!0),h.memoizedState=_,h.baseQueue===null&&(h.baseState=_),m.lastRenderedState=_}return[_,b]}function hF(){}function pF(c,h){var m=Lt,b=ci(),k=h(),_=!Li(b.memoizedState,k);if(_&&(b.memoizedState=k,Er=!0),b=b.queue,xw(yF.bind(null,m,b,c),[c]),b.getSnapshot!==h||_||hn!==null&&hn.memoizedState.tag&1){if(m.flags|=2048,Oh(9,mF.bind(null,m,b,k,h),void 0,null),pn===null)throw Error(n(349));(Kl&30)!==0||gF(m,h,k)}return k}function gF(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=Lt.updateQueue,h===null?(h={lastEffect:null,stores:null},Lt.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function mF(c,h,m,b){h.value=m,h.getSnapshot=b,vF(h)&&xF(c)}function yF(c,h,m){return m(function(){vF(h)&&xF(c)})}function vF(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!Li(c,m)}catch{return!0}}function xF(c){var h=ks(c,1);h!==null&&qi(h,c,1,-1)}function bF(c){var h=Ao();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dh,lastRenderedState:c},h.queue=c,c=c.dispatch=BQ.bind(null,Lt,c),[h.memoizedState,c]}function Oh(c,h,m,b){return c={tag:c,create:h,destroy:m,deps:b,next:null},h=Lt.updateQueue,h===null?(h={lastEffect:null,stores:null},Lt.updateQueue=h,h.lastEffect=c.next=c):(m=h.lastEffect,m===null?h.lastEffect=c.next=c:(b=m.next,m.next=c,c.next=b,h.lastEffect=c)),c}function wF(){return ci().memoizedState}function y0(c,h,m,b){var k=Ao();Lt.flags|=c,k.memoizedState=Oh(1|h,m,void 0,b===void 0?null:b)}function v0(c,h,m,b){var k=ci();b=b===void 0?null:b;var _=void 0;if(rn!==null){var T=rn.memoizedState;if(_=T.destroy,b!==null&&pw(b,T.deps)){k.memoizedState=Oh(h,m,_,b);return}}Lt.flags|=c,k.memoizedState=Oh(1|h,m,_,b)}function SF(c,h){return y0(8390656,8,c,h)}function xw(c,h){return v0(2048,8,c,h)}function kF(c,h){return v0(4,2,c,h)}function EF(c,h){return v0(4,4,c,h)}function _F(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function CF(c,h,m){return m=m!=null?m.concat([c]):null,v0(4,4,_F.bind(null,h,c),m)}function bw(){}function $F(c,h){var m=ci();h=h===void 0?null:h;var b=m.memoizedState;return b!==null&&h!==null&&pw(h,b[1])?b[0]:(m.memoizedState=[c,h],c)}function AF(c,h){var m=ci();h=h===void 0?null:h;var b=m.memoizedState;return b!==null&&h!==null&&pw(h,b[1])?b[0]:(c=c(),m.memoizedState=[c,h],c)}function RF(c,h,m){return(Kl&21)===0?(c.baseState&&(c.baseState=!1,Er=!0),c.memoizedState=m):(Li(m,h)||(m=o4(),Lt.lanes|=m,Ql|=m,c.baseState=!0),h)}function zQ(c,h){var m=mt;mt=m!==0&&4>m?m:4,c(!0);var b=hw.transition;hw.transition={};try{c(!1),h()}finally{mt=m,hw.transition=b}}function TF(){return ci().memoizedState}function jQ(c,h,m){var b=Oa(c);if(m={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null},NF(c))FF(h,m);else if(m=lF(c,h,m,b),m!==null){var k=rr();qi(m,c,b,k),MF(m,h,b)}}function BQ(c,h,m){var b=Oa(c),k={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null};if(NF(c))FF(h,k);else{var _=c.alternate;if(c.lanes===0&&(_===null||_.lanes===0)&&(_=h.lastRenderedReducer,_!==null))try{var T=h.lastRenderedState,O=_(T,m);if(k.hasEagerState=!0,k.eagerState=O,Li(O,T)){var B=h.interleaved;B===null?(k.next=k,aw(h)):(k.next=B.next,B.next=k),h.interleaved=k;return}}catch{}finally{}m=lF(c,h,k,b),m!==null&&(k=rr(),qi(m,c,b,k),MF(m,h,b))}}function NF(c){var h=c.alternate;return c===Lt||h!==null&&h===Lt}function FF(c,h){Fh=m0=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function MF(c,h,m){if((m&4194240)!==0){var b=h.lanes;b&=c.pendingLanes,m|=b,h.lanes=m,Sb(c,m)}}var x0={readContext:ui,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},UQ={readContext:ui,useCallback:function(c,h){return Ao().memoizedState=[c,h===void 0?null:h],c},useContext:ui,useEffect:SF,useImperativeHandle:function(c,h,m){return m=m!=null?m.concat([c]):null,y0(4194308,4,_F.bind(null,h,c),m)},useLayoutEffect:function(c,h){return y0(4194308,4,c,h)},useInsertionEffect:function(c,h){return y0(4,2,c,h)},useMemo:function(c,h){var m=Ao();return h=h===void 0?null:h,c=c(),m.memoizedState=[c,h],c},useReducer:function(c,h,m){var b=Ao();return h=m!==void 0?m(h):h,b.memoizedState=b.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},b.queue=c,c=c.dispatch=jQ.bind(null,Lt,c),[b.memoizedState,c]},useRef:function(c){var h=Ao();return c={current:c},h.memoizedState=c},useState:bF,useDebugValue:bw,useDeferredValue:function(c){return Ao().memoizedState=c},useTransition:function(){var c=bF(!1),h=c[0];return c=zQ.bind(null,c[1]),Ao().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,m){var b=Lt,k=Ao();if(Ft){if(m===void 0)throw Error(n(407));m=m()}else{if(m=h(),pn===null)throw Error(n(349));(Kl&30)!==0||gF(b,h,m)}k.memoizedState=m;var _={value:m,getSnapshot:h};return k.queue=_,SF(yF.bind(null,b,_,c),[c]),b.flags|=2048,Oh(9,mF.bind(null,b,_,m,h),void 0,null),m},useId:function(){var c=Ao(),h=pn.identifierPrefix;if(Ft){var m=Ss,b=ws;m=(b&~(1<<32-Ii(b)-1)).toString(32)+m,h=":"+h+"R"+m,m=Mh++,0<m&&(h+="H"+m.toString(32)),h+=":"}else m=LQ++,h=":"+h+"r"+m.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},qQ={readContext:ui,useCallback:$F,useContext:ui,useEffect:xw,useImperativeHandle:CF,useInsertionEffect:kF,useLayoutEffect:EF,useMemo:AF,useReducer:yw,useRef:wF,useState:function(){return yw(Dh)},useDebugValue:bw,useDeferredValue:function(c){var h=ci();return RF(h,rn.memoizedState,c)},useTransition:function(){var c=yw(Dh)[0],h=ci().memoizedState;return[c,h]},useMutableSource:hF,useSyncExternalStore:pF,useId:TF,unstable_isNewReconciler:!1},WQ={readContext:ui,useCallback:$F,useContext:ui,useEffect:xw,useImperativeHandle:CF,useInsertionEffect:kF,useLayoutEffect:EF,useMemo:AF,useReducer:vw,useRef:wF,useState:function(){return vw(Dh)},useDebugValue:bw,useDeferredValue:function(c){var h=ci();return rn===null?h.memoizedState=c:RF(h,rn.memoizedState,c)},useTransition:function(){var c=vw(Dh)[0],h=ci().memoizedState;return[c,h]},useMutableSource:hF,useSyncExternalStore:pF,useId:TF,unstable_isNewReconciler:!1};function ji(c,h){if(c&&c.defaultProps){h=J({},h),c=c.defaultProps;for(var m in c)h[m]===void 0&&(h[m]=c[m]);return h}return h}function ww(c,h,m,b){h=c.memoizedState,m=m(b,h),m=m==null?h:J({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var b0={isMounted:function(c){return(c=c._reactInternals)?ql(c)===c:!1},enqueueSetState:function(c,h,m){c=c._reactInternals;var b=rr(),k=Oa(c),_=Es(b,k);_.payload=h,m!=null&&(_.callback=m),h=Na(c,_,k),h!==null&&(qi(h,c,k,b),d0(h,c,k))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var b=rr(),k=Oa(c),_=Es(b,k);_.tag=1,_.payload=h,m!=null&&(_.callback=m),h=Na(c,_,k),h!==null&&(qi(h,c,k,b),d0(h,c,k))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=rr(),b=Oa(c),k=Es(m,b);k.tag=2,h!=null&&(k.callback=h),h=Na(c,k,b),h!==null&&(qi(h,c,b,m),d0(h,c,b))}};function DF(c,h,m,b,k,_,T){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,_,T):h.prototype&&h.prototype.isPureReactComponent?!wh(m,b)||!wh(k,_):!0}function OF(c,h,m){var b=!1,k=Aa,_=h.contextType;return typeof _=="object"&&_!==null?_=ui(_):(k=kr(h)?Vl:Ln.current,b=h.contextTypes,_=(b=b!=null)?Gc(c,k):Aa),h=new h(m,_),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=b0,c.stateNode=h,h._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=k,c.__reactInternalMemoizedMaskedChildContext=_),h}function PF(c,h,m,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,b),h.state!==c&&b0.enqueueReplaceState(h,h.state,null)}function Sw(c,h,m,b){var k=c.stateNode;k.props=m,k.state=c.memoizedState,k.refs={},lw(c);var _=h.contextType;typeof _=="object"&&_!==null?k.context=ui(_):(_=kr(h)?Vl:Ln.current,k.context=Gc(c,_)),k.state=c.memoizedState,_=h.getDerivedStateFromProps,typeof _=="function"&&(ww(c,h,_,m),k.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(h=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),h!==k.state&&b0.enqueueReplaceState(k,k.state,null),h0(c,m,k,b),k.state=c.memoizedState),typeof k.componentDidMount=="function"&&(c.flags|=4194308)}function tf(c,h){try{var m="",b=h;do m+=ve(b),b=b.return;while(b);var k=m}catch(_){k=`
Error generating stack: `+_.message+`
`+_.stack}return{value:c,source:h,stack:k,digest:null}}function kw(c,h,m){return{value:c,source:null,stack:m??null,digest:h??null}}function Ew(c,h){try{console.error(h.value)}catch(m){setTimeout(function(){throw m})}}var VQ=typeof WeakMap=="function"?WeakMap:Map;function IF(c,h,m){m=Es(-1,m),m.tag=3,m.payload={element:null};var b=h.value;return m.callback=function(){$0||($0=!0,zw=b),Ew(c,h)},m}function LF(c,h,m){m=Es(-1,m),m.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var k=h.value;m.payload=function(){return b(k)},m.callback=function(){Ew(c,h)}}var _=c.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(m.callback=function(){Ew(c,h),typeof b!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var T=h.stack;this.componentDidCatch(h.value,{componentStack:T!==null?T:""})}),m}function zF(c,h,m){var b=c.pingCache;if(b===null){b=c.pingCache=new VQ;var k=new Set;b.set(h,k)}else k=b.get(h),k===void 0&&(k=new Set,b.set(h,k));k.has(m)||(k.add(m),c=oZ.bind(null,c,h,m),h.then(c,c))}function jF(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function BF(c,h,m,b,k){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(h=Es(-1,1),h.tag=2,Na(m,h,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=k,c)}var HQ=C.ReactCurrentOwner,Er=!1;function nr(c,h,m,b){h.child=c===null?aF(h,null,m,b):Qc(h,c.child,m,b)}function UF(c,h,m,b,k){m=m.render;var _=h.ref;return Jc(h,k),b=gw(c,h,m,b,_,k),m=mw(),c!==null&&!Er?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~k,_s(c,h,k)):(Ft&&m&&Zb(h),h.flags|=1,nr(c,h,b,k),h.child)}function qF(c,h,m,b,k){if(c===null){var _=m.type;return typeof _=="function"&&!Hw(_)&&_.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(h.tag=15,h.type=_,WF(c,h,_,b,k)):(c=M0(m.type,null,b,h,h.mode,k),c.ref=h.ref,c.return=h,h.child=c)}if(_=c.child,(c.lanes&k)===0){var T=_.memoizedProps;if(m=m.compare,m=m!==null?m:wh,m(T,b)&&c.ref===h.ref)return _s(c,h,k)}return h.flags|=1,c=Ia(_,b),c.ref=h.ref,c.return=h,h.child=c}function WF(c,h,m,b,k){if(c!==null){var _=c.memoizedProps;if(wh(_,b)&&c.ref===h.ref)if(Er=!1,h.pendingProps=b=_,(c.lanes&k)!==0)(c.flags&131072)!==0&&(Er=!0);else return h.lanes=c.lanes,_s(c,h,k)}return _w(c,h,m,b,k)}function VF(c,h,m){var b=h.pendingProps,k=b.children,_=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(rf,Vr),Vr|=m;else{if((m&1073741824)===0)return c=_!==null?_.baseLanes|m:m,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,_t(rf,Vr),Vr|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=_!==null?_.baseLanes:m,_t(rf,Vr),Vr|=b}else _!==null?(b=_.baseLanes|m,h.memoizedState=null):b=m,_t(rf,Vr),Vr|=b;return nr(c,h,k,m),h.child}function HF(c,h){var m=h.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(h.flags|=512,h.flags|=2097152)}function _w(c,h,m,b,k){var _=kr(m)?Vl:Ln.current;return _=Gc(h,_),Jc(h,k),m=gw(c,h,m,b,_,k),b=mw(),c!==null&&!Er?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~k,_s(c,h,k)):(Ft&&b&&Zb(h),h.flags|=1,nr(c,h,m,k),h.child)}function GF(c,h,m,b,k){if(kr(m)){var _=!0;i0(h)}else _=!1;if(Jc(h,k),h.stateNode===null)S0(c,h),OF(h,m,b),Sw(h,m,b,k),b=!0;else if(c===null){var T=h.stateNode,O=h.memoizedProps;T.props=O;var B=T.context,Z=m.contextType;typeof Z=="object"&&Z!==null?Z=ui(Z):(Z=kr(m)?Vl:Ln.current,Z=Gc(h,Z));var ae=m.getDerivedStateFromProps,de=typeof ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";de||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==b||B!==Z)&&PF(h,T,b,Z),Ta=!1;var se=h.memoizedState;T.state=se,h0(h,b,T,k),B=h.memoizedState,O!==b||se!==B||Sr.current||Ta?(typeof ae=="function"&&(ww(h,m,ae,b),B=h.memoizedState),(O=Ta||DF(h,m,O,b,se,B,Z))?(de||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(h.flags|=4194308)):(typeof T.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=B),T.props=b,T.state=B,T.context=Z,b=O):(typeof T.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{T=h.stateNode,uF(c,h),O=h.memoizedProps,Z=h.type===h.elementType?O:ji(h.type,O),T.props=Z,de=h.pendingProps,se=T.context,B=m.contextType,typeof B=="object"&&B!==null?B=ui(B):(B=kr(m)?Vl:Ln.current,B=Gc(h,B));var Ce=m.getDerivedStateFromProps;(ae=typeof Ce=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==de||se!==B)&&PF(h,T,b,B),Ta=!1,se=h.memoizedState,T.state=se,h0(h,b,T,k);var Ae=h.memoizedState;O!==de||se!==Ae||Sr.current||Ta?(typeof Ce=="function"&&(ww(h,m,Ce,b),Ae=h.memoizedState),(Z=Ta||DF(h,m,Z,b,se,Ae,B)||!1)?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(b,Ae,B),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(b,Ae,B)),typeof T.componentDidUpdate=="function"&&(h.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof T.componentDidUpdate!="function"||O===c.memoizedProps&&se===c.memoizedState||(h.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===c.memoizedProps&&se===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=Ae),T.props=b,T.state=Ae,T.context=B,b=Z):(typeof T.componentDidUpdate!="function"||O===c.memoizedProps&&se===c.memoizedState||(h.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===c.memoizedProps&&se===c.memoizedState||(h.flags|=1024),b=!1)}return Cw(c,h,m,b,_,k)}function Cw(c,h,m,b,k,_){HF(c,h);var T=(h.flags&128)!==0;if(!b&&!T)return k&&Z4(h,m,!1),_s(c,h,_);b=h.stateNode,HQ.current=h;var O=T&&typeof m.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,c!==null&&T?(h.child=Qc(h,c.child,null,_),h.child=Qc(h,null,O,_)):nr(c,h,O,_),h.memoizedState=b.state,k&&Z4(h,m,!0),h.child}function YF(c){var h=c.stateNode;h.pendingContext?K4(c,h.pendingContext,h.pendingContext!==h.context):h.context&&K4(c,h.context,!1),uw(c,h.containerInfo)}function XF(c,h,m,b,k){return Kc(),nw(k),h.flags|=256,nr(c,h,m,b),h.child}var $w={dehydrated:null,treeContext:null,retryLane:0};function Aw(c){return{baseLanes:c,cachePool:null,transitions:null}}function KF(c,h,m){var b=h.pendingProps,k=It.current,_=!1,T=(h.flags&128)!==0,O;if((O=T)||(O=c!==null&&c.memoizedState===null?!1:(k&2)!==0),O?(_=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(k|=1),_t(It,k&1),c===null)return tw(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(T=b.children,c=b.fallback,_?(b=h.mode,_=h.child,T={mode:"hidden",children:T},(b&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=D0(T,b,0,null),c=tu(c,b,m,null),_.return=h,c.return=h,_.sibling=c,h.child=_,h.child.memoizedState=Aw(m),h.memoizedState=$w,c):Rw(h,T));if(k=c.memoizedState,k!==null&&(O=k.dehydrated,O!==null))return GQ(c,h,T,b,O,k,m);if(_){_=b.fallback,T=h.mode,k=c.child,O=k.sibling;var B={mode:"hidden",children:b.children};return(T&1)===0&&h.child!==k?(b=h.child,b.childLanes=0,b.pendingProps=B,h.deletions=null):(b=Ia(k,B),b.subtreeFlags=k.subtreeFlags&14680064),O!==null?_=Ia(O,_):(_=tu(_,T,m,null),_.flags|=2),_.return=h,b.return=h,b.sibling=_,h.child=b,b=_,_=h.child,T=c.child.memoizedState,T=T===null?Aw(m):{baseLanes:T.baseLanes|m,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=c.childLanes&~m,h.memoizedState=$w,b}return _=c.child,c=_.sibling,b=Ia(_,{mode:"visible",children:b.children}),(h.mode&1)===0&&(b.lanes=m),b.return=h,b.sibling=null,c!==null&&(m=h.deletions,m===null?(h.deletions=[c],h.flags|=16):m.push(c)),h.child=b,h.memoizedState=null,b}function Rw(c,h){return h=D0({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function w0(c,h,m,b){return b!==null&&nw(b),Qc(h,c.child,null,m),c=Rw(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function GQ(c,h,m,b,k,_,T){if(m)return h.flags&256?(h.flags&=-257,b=kw(Error(n(422))),w0(c,h,T,b)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(_=b.fallback,k=h.mode,b=D0({mode:"visible",children:b.children},k,0,null),_=tu(_,k,T,null),_.flags|=2,b.return=h,_.return=h,b.sibling=_,h.child=b,(h.mode&1)!==0&&Qc(h,c.child,null,T),h.child.memoizedState=Aw(T),h.memoizedState=$w,_);if((h.mode&1)===0)return w0(c,h,T,null);if(k.data==="$!"){if(b=k.nextSibling&&k.nextSibling.dataset,b)var O=b.dgst;return b=O,_=Error(n(419)),b=kw(_,b,void 0),w0(c,h,T,b)}if(O=(T&c.childLanes)!==0,Er||O){if(b=pn,b!==null){switch(T&-T){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(b.suspendedLanes|T))!==0?0:k,k!==0&&k!==_.retryLane&&(_.retryLane=k,ks(c,k),qi(b,c,k,-1))}return Vw(),b=kw(Error(n(421))),w0(c,h,T,b)}return k.data==="$?"?(h.flags|=128,h.child=c.child,h=sZ.bind(null,c),k._reactRetry=h,null):(c=_.treeContext,Wr=Ca(k.nextSibling),qr=h,Ft=!0,zi=null,c!==null&&(ai[li++]=ws,ai[li++]=Ss,ai[li++]=Hl,ws=c.id,Ss=c.overflow,Hl=h),h=Rw(h,b.children),h.flags|=4096,h)}function QF(c,h,m){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),sw(c.return,h,m)}function Tw(c,h,m,b,k){var _=c.memoizedState;_===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:k}:(_.isBackwards=h,_.rendering=null,_.renderingStartTime=0,_.last=b,_.tail=m,_.tailMode=k)}function ZF(c,h,m){var b=h.pendingProps,k=b.revealOrder,_=b.tail;if(nr(c,h,b.children,m),b=It.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&QF(c,m,h);else if(c.tag===19)QF(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(_t(It,b),(h.mode&1)===0)h.memoizedState=null;else switch(k){case"forwards":for(m=h.child,k=null;m!==null;)c=m.alternate,c!==null&&p0(c)===null&&(k=m),m=m.sibling;m=k,m===null?(k=h.child,h.child=null):(k=m.sibling,m.sibling=null),Tw(h,!1,k,m,_);break;case"backwards":for(m=null,k=h.child,h.child=null;k!==null;){if(c=k.alternate,c!==null&&p0(c)===null){h.child=k;break}c=k.sibling,k.sibling=m,m=k,k=c}Tw(h,!0,m,null,_);break;case"together":Tw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function S0(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function _s(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),Ql|=h.lanes,(m&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(n(153));if(h.child!==null){for(c=h.child,m=Ia(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=Ia(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function YQ(c,h,m){switch(h.tag){case 3:YF(h),Kc();break;case 5:dF(h);break;case 1:kr(h.type)&&i0(h);break;case 4:uw(h,h.stateNode.containerInfo);break;case 10:var b=h.type._context,k=h.memoizedProps.value;_t(c0,b._currentValue),b._currentValue=k;break;case 13:if(b=h.memoizedState,b!==null)return b.dehydrated!==null?(_t(It,It.current&1),h.flags|=128,null):(m&h.child.childLanes)!==0?KF(c,h,m):(_t(It,It.current&1),c=_s(c,h,m),c!==null?c.sibling:null);_t(It,It.current&1);break;case 19:if(b=(m&h.childLanes)!==0,(c.flags&128)!==0){if(b)return ZF(c,h,m);h.flags|=128}if(k=h.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),_t(It,It.current),b)break;return null;case 22:case 23:return h.lanes=0,VF(c,h,m)}return _s(c,h,m)}var JF,Nw,e6,t6;JF=function(c,h){for(var m=h.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Nw=function(){},e6=function(c,h,m,b){var k=c.memoizedProps;if(k!==b){c=h.stateNode,Xl($o.current);var _=null;switch(m){case"input":k=et(c,k),b=et(c,b),_=[];break;case"select":k=J({},k,{value:void 0}),b=J({},b,{value:void 0}),_=[];break;case"textarea":k=Dc(c,k),b=Dc(c,b),_=[];break;default:typeof k.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=t0)}fb(m,b);var T;m=null;for(Z in k)if(!b.hasOwnProperty(Z)&&k.hasOwnProperty(Z)&&k[Z]!=null)if(Z==="style"){var O=k[Z];for(T in O)O.hasOwnProperty(T)&&(m||(m={}),m[T]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(i.hasOwnProperty(Z)?_||(_=[]):(_=_||[]).push(Z,null));for(Z in b){var B=b[Z];if(O=k!=null?k[Z]:void 0,b.hasOwnProperty(Z)&&B!==O&&(B!=null||O!=null))if(Z==="style")if(O){for(T in O)!O.hasOwnProperty(T)||B&&B.hasOwnProperty(T)||(m||(m={}),m[T]="");for(T in B)B.hasOwnProperty(T)&&O[T]!==B[T]&&(m||(m={}),m[T]=B[T])}else m||(_||(_=[]),_.push(Z,m)),m=B;else Z==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,O=O?O.__html:void 0,B!=null&&O!==B&&(_=_||[]).push(Z,B)):Z==="children"?typeof B!="string"&&typeof B!="number"||(_=_||[]).push(Z,""+B):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(i.hasOwnProperty(Z)?(B!=null&&Z==="onScroll"&&$t("scroll",c),_||O===B||(_=[])):(_=_||[]).push(Z,B))}m&&(_=_||[]).push("style",m);var Z=_;(h.updateQueue=Z)&&(h.flags|=4)}},t6=function(c,h,m,b){m!==b&&(h.flags|=4)};function Ph(c,h){if(!Ft)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function jn(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,b=0;if(h)for(var k=c.child;k!==null;)m|=k.lanes|k.childLanes,b|=k.subtreeFlags&14680064,b|=k.flags&14680064,k.return=c,k=k.sibling;else for(k=c.child;k!==null;)m|=k.lanes|k.childLanes,b|=k.subtreeFlags,b|=k.flags,k.return=c,k=k.sibling;return c.subtreeFlags|=b,c.childLanes=m,h}function XQ(c,h,m){var b=h.pendingProps;switch(Jb(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(h),null;case 1:return kr(h.type)&&r0(),jn(h),null;case 3:return b=h.stateNode,ef(),At(Sr),At(Ln),dw(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(l0(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,zi!==null&&(Uw(zi),zi=null))),Nw(c,h),jn(h),null;case 5:cw(h);var k=Xl(Nh.current);if(m=h.type,c!==null&&h.stateNode!=null)e6(c,h,m,b,k),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(n(166));return jn(h),null}if(c=Xl($o.current),l0(h)){b=h.stateNode,m=h.type;var _=h.memoizedProps;switch(b[Co]=h,b[Ch]=_,c=(h.mode&1)!==0,m){case"dialog":$t("cancel",b),$t("close",b);break;case"iframe":case"object":case"embed":$t("load",b);break;case"video":case"audio":for(k=0;k<kh.length;k++)$t(kh[k],b);break;case"source":$t("error",b);break;case"img":case"image":case"link":$t("error",b),$t("load",b);break;case"details":$t("toggle",b);break;case"input":Nt(b,_),$t("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!_.multiple},$t("invalid",b);break;case"textarea":eh(b,_),$t("invalid",b)}fb(m,_),k=null;for(var T in _)if(_.hasOwnProperty(T)){var O=_[T];T==="children"?typeof O=="string"?b.textContent!==O&&(_.suppressHydrationWarning!==!0&&e0(b.textContent,O,c),k=["children",O]):typeof O=="number"&&b.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&e0(b.textContent,O,c),k=["children",""+O]):i.hasOwnProperty(T)&&O!=null&&T==="onScroll"&&$t("scroll",b)}switch(m){case"input":We(b),ma(b,_,!0);break;case"textarea":We(b),nh(b);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(b.onclick=t0)}b=k,h.updateQueue=b,b!==null&&(h.flags|=4)}else{T=k.nodeType===9?k:k.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=rh(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=T.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=T.createElement(m,{is:b.is}):(c=T.createElement(m),m==="select"&&(T=c,b.multiple?T.multiple=!0:b.size&&(T.size=b.size))):c=T.createElementNS(c,m),c[Co]=h,c[Ch]=b,JF(c,h,!1,!1),h.stateNode=c;e:{switch(T=db(m,b),m){case"dialog":$t("cancel",c),$t("close",c),k=b;break;case"iframe":case"object":case"embed":$t("load",c),k=b;break;case"video":case"audio":for(k=0;k<kh.length;k++)$t(kh[k],c);k=b;break;case"source":$t("error",c),k=b;break;case"img":case"image":case"link":$t("error",c),$t("load",c),k=b;break;case"details":$t("toggle",c),k=b;break;case"input":Nt(c,b),k=et(c,b),$t("invalid",c);break;case"option":k=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},k=J({},b,{value:void 0}),$t("invalid",c);break;case"textarea":eh(c,b),k=Dc(c,b),$t("invalid",c);break;default:k=b}fb(m,k),O=k;for(_ in O)if(O.hasOwnProperty(_)){var B=O[_];_==="style"?Pi(c,B):_==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&ih(c,B)):_==="children"?typeof B=="string"?(m!=="textarea"||B!=="")&&va(c,B):typeof B=="number"&&va(c,""+B):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?B!=null&&_==="onScroll"&&$t("scroll",c):B!=null&&E(c,_,B,T))}switch(m){case"input":We(c),ma(c,b,!1);break;case"textarea":We(c),nh(c);break;case"option":b.value!=null&&c.setAttribute("value",""+Ye(b.value));break;case"select":c.multiple=!!b.multiple,_=b.value,_!=null?vs(c,!!b.multiple,_,!1):b.defaultValue!=null&&vs(c,!!b.multiple,b.defaultValue,!0);break;default:typeof k.onClick=="function"&&(c.onclick=t0)}switch(m){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return jn(h),null;case 6:if(c&&h.stateNode!=null)t6(c,h,c.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(n(166));if(m=Xl(Nh.current),Xl($o.current),l0(h)){if(b=h.stateNode,m=h.memoizedProps,b[Co]=h,(_=b.nodeValue!==m)&&(c=qr,c!==null))switch(c.tag){case 3:e0(b.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&e0(b.nodeValue,m,(c.mode&1)!==0)}_&&(h.flags|=4)}else b=(m.nodeType===9?m:m.ownerDocument).createTextNode(b),b[Co]=h,h.stateNode=b}return jn(h),null;case 13:if(At(It),b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Ft&&Wr!==null&&(h.mode&1)!==0&&(h.flags&128)===0)iF(),Kc(),h.flags|=98560,_=!1;else if(_=l0(h),b!==null&&b.dehydrated!==null){if(c===null){if(!_)throw Error(n(318));if(_=h.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Co]=h}else Kc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;jn(h),_=!1}else zi!==null&&(Uw(zi),zi=null),_=!0;if(!_)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=m,h):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(It.current&1)!==0?on===0&&(on=3):Vw())),h.updateQueue!==null&&(h.flags|=4),jn(h),null);case 4:return ef(),Nw(c,h),c===null&&Eh(h.stateNode.containerInfo),jn(h),null;case 10:return ow(h.type._context),jn(h),null;case 17:return kr(h.type)&&r0(),jn(h),null;case 19:if(At(It),_=h.memoizedState,_===null)return jn(h),null;if(b=(h.flags&128)!==0,T=_.rendering,T===null)if(b)Ph(_,!1);else{if(on!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(T=p0(c),T!==null){for(h.flags|=128,Ph(_,!1),b=T.updateQueue,b!==null&&(h.updateQueue=b,h.flags|=4),h.subtreeFlags=0,b=m,m=h.child;m!==null;)_=m,c=b,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=c,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,c=T.dependencies,_.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return _t(It,It.current&1|2),h.child}c=c.sibling}_.tail!==null&&Yt()>of&&(h.flags|=128,b=!0,Ph(_,!1),h.lanes=4194304)}else{if(!b)if(c=p0(T),c!==null){if(h.flags|=128,b=!0,m=c.updateQueue,m!==null&&(h.updateQueue=m,h.flags|=4),Ph(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ft)return jn(h),null}else 2*Yt()-_.renderingStartTime>of&&m!==1073741824&&(h.flags|=128,b=!0,Ph(_,!1),h.lanes=4194304);_.isBackwards?(T.sibling=h.child,h.child=T):(m=_.last,m!==null?m.sibling=T:h.child=T,_.last=T)}return _.tail!==null?(h=_.tail,_.rendering=h,_.tail=h.sibling,_.renderingStartTime=Yt(),h.sibling=null,m=It.current,_t(It,b?m&1|2:m&1),h):(jn(h),null);case 22:case 23:return Ww(),b=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(h.flags|=8192),b&&(h.mode&1)!==0?(Vr&1073741824)!==0&&(jn(h),h.subtreeFlags&6&&(h.flags|=8192)):jn(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function KQ(c,h){switch(Jb(h),h.tag){case 1:return kr(h.type)&&r0(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return ef(),At(Sr),At(Ln),dw(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return cw(h),null;case 13:if(At(It),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(n(340));Kc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return At(It),null;case 4:return ef(),null;case 10:return ow(h.type._context),null;case 22:case 23:return Ww(),null;case 24:return null;default:return null}}var k0=!1,Bn=!1,QQ=typeof WeakSet=="function"?WeakSet:Set,$e=null;function nf(c,h){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(b){qt(c,h,b)}else m.current=null}function Fw(c,h,m){try{m()}catch(b){qt(c,h,b)}}var n6=!1;function ZQ(c,h){if(Wb=qm,c=D4(),Pb(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var k=b.anchorOffset,_=b.focusNode;b=b.focusOffset;try{m.nodeType,_.nodeType}catch{m=null;break e}var T=0,O=-1,B=-1,Z=0,ae=0,de=c,se=null;t:for(;;){for(var Ce;de!==m||k!==0&&de.nodeType!==3||(O=T+k),de!==_||b!==0&&de.nodeType!==3||(B=T+b),de.nodeType===3&&(T+=de.nodeValue.length),(Ce=de.firstChild)!==null;)se=de,de=Ce;for(;;){if(de===c)break t;if(se===m&&++Z===k&&(O=T),se===_&&++ae===b&&(B=T),(Ce=de.nextSibling)!==null)break;de=se,se=de.parentNode}de=Ce}m=O===-1||B===-1?null:{start:O,end:B}}else m=null}m=m||{start:0,end:0}}else m=null;for(Vb={focusedElem:c,selectionRange:m},qm=!1,$e=h;$e!==null;)if(h=$e,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,$e=c;else for(;$e!==null;){h=$e;try{var Ae=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Re=Ae.memoizedProps,Xt=Ae.memoizedState,Y=h.stateNode,q=Y.getSnapshotBeforeUpdate(h.elementType===h.type?Re:ji(h.type,Re),Xt);Y.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var Q=h.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(me){qt(h,h.return,me)}if(c=h.sibling,c!==null){c.return=h.return,$e=c;break}$e=h.return}return Ae=n6,n6=!1,Ae}function Ih(c,h,m){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var k=b=b.next;do{if((k.tag&c)===c){var _=k.destroy;k.destroy=void 0,_!==void 0&&Fw(h,m,_)}k=k.next}while(k!==b)}}function E0(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&c)===c){var b=m.create;m.destroy=b()}m=m.next}while(m!==h)}}function Mw(c){var h=c.ref;if(h!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof h=="function"?h(c):h.current=c}}function r6(c){var h=c.alternate;h!==null&&(c.alternate=null,r6(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Co],delete h[Ch],delete h[Xb],delete h[DQ],delete h[OQ])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function i6(c){return c.tag===5||c.tag===3||c.tag===4}function o6(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||i6(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Dw(c,h,m){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?m.nodeType===8?m.parentNode.insertBefore(c,h):m.insertBefore(c,h):(m.nodeType===8?(h=m.parentNode,h.insertBefore(c,m)):(h=m,h.appendChild(c)),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=t0));else if(b!==4&&(c=c.child,c!==null))for(Dw(c,h,m),c=c.sibling;c!==null;)Dw(c,h,m),c=c.sibling}function Ow(c,h,m){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(Ow(c,h,m),c=c.sibling;c!==null;)Ow(c,h,m),c=c.sibling}var Cn=null,Bi=!1;function Fa(c,h,m){for(m=m.child;m!==null;)s6(c,h,m),m=m.sibling}function s6(c,h,m){if(_o&&typeof _o.onCommitFiberUnmount=="function")try{_o.onCommitFiberUnmount(Im,m)}catch{}switch(m.tag){case 5:Bn||nf(m,h);case 6:var b=Cn,k=Bi;Cn=null,Fa(c,h,m),Cn=b,Bi=k,Cn!==null&&(Bi?(c=Cn,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):Cn.removeChild(m.stateNode));break;case 18:Cn!==null&&(Bi?(c=Cn,m=m.stateNode,c.nodeType===8?Yb(c.parentNode,m):c.nodeType===1&&Yb(c,m),gh(c)):Yb(Cn,m.stateNode));break;case 4:b=Cn,k=Bi,Cn=m.stateNode.containerInfo,Bi=!0,Fa(c,h,m),Cn=b,Bi=k;break;case 0:case 11:case 14:case 15:if(!Bn&&(b=m.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){k=b=b.next;do{var _=k,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Fw(m,h,T),k=k.next}while(k!==b)}Fa(c,h,m);break;case 1:if(!Bn&&(nf(m,h),b=m.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=m.memoizedProps,b.state=m.memoizedState,b.componentWillUnmount()}catch(O){qt(m,h,O)}Fa(c,h,m);break;case 21:Fa(c,h,m);break;case 22:m.mode&1?(Bn=(b=Bn)||m.memoizedState!==null,Fa(c,h,m),Bn=b):Fa(c,h,m);break;default:Fa(c,h,m)}}function a6(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new QQ),h.forEach(function(b){var k=aZ.bind(null,c,b);m.has(b)||(m.add(b),b.then(k,k))})}}function Ui(c,h){var m=h.deletions;if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];try{var _=c,T=h,O=T;e:for(;O!==null;){switch(O.tag){case 5:Cn=O.stateNode,Bi=!1;break e;case 3:Cn=O.stateNode.containerInfo,Bi=!0;break e;case 4:Cn=O.stateNode.containerInfo,Bi=!0;break e}O=O.return}if(Cn===null)throw Error(n(160));s6(_,T,k),Cn=null,Bi=!1;var B=k.alternate;B!==null&&(B.return=null),k.return=null}catch(Z){qt(k,h,Z)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)l6(h,c),h=h.sibling}function l6(c,h){var m=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ui(h,c),Ro(c),b&4){try{Ih(3,c,c.return),E0(3,c)}catch(Re){qt(c,c.return,Re)}try{Ih(5,c,c.return)}catch(Re){qt(c,c.return,Re)}}break;case 1:Ui(h,c),Ro(c),b&512&&m!==null&&nf(m,m.return);break;case 5:if(Ui(h,c),Ro(c),b&512&&m!==null&&nf(m,m.return),c.flags&32){var k=c.stateNode;try{va(k,"")}catch(Re){qt(c,c.return,Re)}}if(b&4&&(k=c.stateNode,k!=null)){var _=c.memoizedProps,T=m!==null?m.memoizedProps:_,O=c.type,B=c.updateQueue;if(c.updateQueue=null,B!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&Ut(k,_),db(O,T);var Z=db(O,_);for(T=0;T<B.length;T+=2){var ae=B[T],de=B[T+1];ae==="style"?Pi(k,de):ae==="dangerouslySetInnerHTML"?ih(k,de):ae==="children"?va(k,de):E(k,ae,de,Z)}switch(O){case"input":In(k,_);break;case"textarea":th(k,_);break;case"select":var se=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!_.multiple;var Ce=_.value;Ce!=null?vs(k,!!_.multiple,Ce,!1):se!==!!_.multiple&&(_.defaultValue!=null?vs(k,!!_.multiple,_.defaultValue,!0):vs(k,!!_.multiple,_.multiple?[]:"",!1))}k[Ch]=_}catch(Re){qt(c,c.return,Re)}}break;case 6:if(Ui(h,c),Ro(c),b&4){if(c.stateNode===null)throw Error(n(162));k=c.stateNode,_=c.memoizedProps;try{k.nodeValue=_}catch(Re){qt(c,c.return,Re)}}break;case 3:if(Ui(h,c),Ro(c),b&4&&m!==null&&m.memoizedState.isDehydrated)try{gh(h.containerInfo)}catch(Re){qt(c,c.return,Re)}break;case 4:Ui(h,c),Ro(c);break;case 13:Ui(h,c),Ro(c),k=c.child,k.flags&8192&&(_=k.memoizedState!==null,k.stateNode.isHidden=_,!_||k.alternate!==null&&k.alternate.memoizedState!==null||(Lw=Yt())),b&4&&a6(c);break;case 22:if(ae=m!==null&&m.memoizedState!==null,c.mode&1?(Bn=(Z=Bn)||ae,Ui(h,c),Bn=Z):Ui(h,c),Ro(c),b&8192){if(Z=c.memoizedState!==null,(c.stateNode.isHidden=Z)&&!ae&&(c.mode&1)!==0)for($e=c,ae=c.child;ae!==null;){for(de=$e=ae;$e!==null;){switch(se=$e,Ce=se.child,se.tag){case 0:case 11:case 14:case 15:Ih(4,se,se.return);break;case 1:nf(se,se.return);var Ae=se.stateNode;if(typeof Ae.componentWillUnmount=="function"){b=se,m=se.return;try{h=b,Ae.props=h.memoizedProps,Ae.state=h.memoizedState,Ae.componentWillUnmount()}catch(Re){qt(b,m,Re)}}break;case 5:nf(se,se.return);break;case 22:if(se.memoizedState!==null){f6(de);continue}}Ce!==null?(Ce.return=se,$e=Ce):f6(de)}ae=ae.sibling}e:for(ae=null,de=c;;){if(de.tag===5){if(ae===null){ae=de;try{k=de.stateNode,Z?(_=k.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=de.stateNode,B=de.memoizedProps.style,T=B!=null&&B.hasOwnProperty("display")?B.display:null,O.style.display=oh("display",T))}catch(Re){qt(c,c.return,Re)}}}else if(de.tag===6){if(ae===null)try{de.stateNode.nodeValue=Z?"":de.memoizedProps}catch(Re){qt(c,c.return,Re)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===c)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===c)break e;for(;de.sibling===null;){if(de.return===null||de.return===c)break e;ae===de&&(ae=null),de=de.return}ae===de&&(ae=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Ui(h,c),Ro(c),b&4&&a6(c);break;case 21:break;default:Ui(h,c),Ro(c)}}function Ro(c){var h=c.flags;if(h&2){try{e:{for(var m=c.return;m!==null;){if(i6(m)){var b=m;break e}m=m.return}throw Error(n(160))}switch(b.tag){case 5:var k=b.stateNode;b.flags&32&&(va(k,""),b.flags&=-33);var _=o6(c);Ow(c,_,k);break;case 3:case 4:var T=b.stateNode.containerInfo,O=o6(c);Dw(c,O,T);break;default:throw Error(n(161))}}catch(B){qt(c,c.return,B)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function JQ(c,h,m){$e=c,u6(c)}function u6(c,h,m){for(var b=(c.mode&1)!==0;$e!==null;){var k=$e,_=k.child;if(k.tag===22&&b){var T=k.memoizedState!==null||k0;if(!T){var O=k.alternate,B=O!==null&&O.memoizedState!==null||Bn;O=k0;var Z=Bn;if(k0=T,(Bn=B)&&!Z)for($e=k;$e!==null;)T=$e,B=T.child,T.tag===22&&T.memoizedState!==null?d6(k):B!==null?(B.return=T,$e=B):d6(k);for(;_!==null;)$e=_,u6(_),_=_.sibling;$e=k,k0=O,Bn=Z}c6(c)}else(k.subtreeFlags&8772)!==0&&_!==null?(_.return=k,$e=_):c6(c)}}function c6(c){for(;$e!==null;){var h=$e;if((h.flags&8772)!==0){var m=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Bn||E0(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Bn)if(m===null)b.componentDidMount();else{var k=h.elementType===h.type?m.memoizedProps:ji(h.type,m.memoizedProps);b.componentDidUpdate(k,m.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var _=h.updateQueue;_!==null&&fF(h,_,b);break;case 3:var T=h.updateQueue;if(T!==null){if(m=null,h.child!==null)switch(h.child.tag){case 5:m=h.child.stateNode;break;case 1:m=h.child.stateNode}fF(h,T,m)}break;case 5:var O=h.stateNode;if(m===null&&h.flags&4){m=O;var B=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&m.focus();break;case"img":B.src&&(m.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Z=h.alternate;if(Z!==null){var ae=Z.memoizedState;if(ae!==null){var de=ae.dehydrated;de!==null&&gh(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bn||h.flags&512&&Mw(h)}catch(se){qt(h,h.return,se)}}if(h===c){$e=null;break}if(m=h.sibling,m!==null){m.return=h.return,$e=m;break}$e=h.return}}function f6(c){for(;$e!==null;){var h=$e;if(h===c){$e=null;break}var m=h.sibling;if(m!==null){m.return=h.return,$e=m;break}$e=h.return}}function d6(c){for(;$e!==null;){var h=$e;try{switch(h.tag){case 0:case 11:case 15:var m=h.return;try{E0(4,h)}catch(B){qt(h,m,B)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var k=h.return;try{b.componentDidMount()}catch(B){qt(h,k,B)}}var _=h.return;try{Mw(h)}catch(B){qt(h,_,B)}break;case 5:var T=h.return;try{Mw(h)}catch(B){qt(h,T,B)}}}catch(B){qt(h,h.return,B)}if(h===c){$e=null;break}var O=h.sibling;if(O!==null){O.return=h.return,$e=O;break}$e=h.return}}var eZ=Math.ceil,_0=C.ReactCurrentDispatcher,Pw=C.ReactCurrentOwner,fi=C.ReactCurrentBatchConfig,ot=0,pn=null,en=null,$n=0,Vr=0,rf=$a(0),on=0,Lh=null,Ql=0,C0=0,Iw=0,zh=null,_r=null,Lw=0,of=1/0,Cs=null,$0=!1,zw=null,Ma=null,A0=!1,Da=null,R0=0,jh=0,jw=null,T0=-1,N0=0;function rr(){return(ot&6)!==0?Yt():T0!==-1?T0:T0=Yt()}function Oa(c){return(c.mode&1)===0?1:(ot&2)!==0&&$n!==0?$n&-$n:IQ.transition!==null?(N0===0&&(N0=o4()),N0):(c=mt,c!==0||(c=window.event,c=c===void 0?16:p4(c.type)),c)}function qi(c,h,m,b){if(50<jh)throw jh=0,jw=null,Error(n(185));ch(c,m,b),((ot&2)===0||c!==pn)&&(c===pn&&((ot&2)===0&&(C0|=m),on===4&&Pa(c,$n)),Cr(c,b),m===1&&ot===0&&(h.mode&1)===0&&(of=Yt()+500,o0&&Ra()))}function Cr(c,h){var m=c.callbackNode;IK(c,h);var b=jm(c,c===pn?$n:0);if(b===0)m!==null&&n4(m),c.callbackNode=null,c.callbackPriority=0;else if(h=b&-b,c.callbackPriority!==h){if(m!=null&&n4(m),h===1)c.tag===0?PQ(p6.bind(null,c)):J4(p6.bind(null,c)),FQ(function(){(ot&6)===0&&Ra()}),m=null;else{switch(s4(b)){case 1:m=xb;break;case 4:m=r4;break;case 16:m=Pm;break;case 536870912:m=i4;break;default:m=Pm}m=S6(m,h6.bind(null,c))}c.callbackPriority=h,c.callbackNode=m}}function h6(c,h){if(T0=-1,N0=0,(ot&6)!==0)throw Error(n(327));var m=c.callbackNode;if(sf()&&c.callbackNode!==m)return null;var b=jm(c,c===pn?$n:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||h)h=F0(c,b);else{h=b;var k=ot;ot|=2;var _=m6();(pn!==c||$n!==h)&&(Cs=null,of=Yt()+500,Jl(c,h));do try{rZ();break}catch(O){g6(c,O)}while(!0);iw(),_0.current=_,ot=k,en!==null?h=0:(pn=null,$n=0,h=on)}if(h!==0){if(h===2&&(k=bb(c),k!==0&&(b=k,h=Bw(c,k))),h===1)throw m=Lh,Jl(c,0),Pa(c,b),Cr(c,Yt()),m;if(h===6)Pa(c,b);else{if(k=c.current.alternate,(b&30)===0&&!tZ(k)&&(h=F0(c,b),h===2&&(_=bb(c),_!==0&&(b=_,h=Bw(c,_))),h===1))throw m=Lh,Jl(c,0),Pa(c,b),Cr(c,Yt()),m;switch(c.finishedWork=k,c.finishedLanes=b,h){case 0:case 1:throw Error(n(345));case 2:eu(c,_r,Cs);break;case 3:if(Pa(c,b),(b&130023424)===b&&(h=Lw+500-Yt(),10<h)){if(jm(c,0)!==0)break;if(k=c.suspendedLanes,(k&b)!==b){rr(),c.pingedLanes|=c.suspendedLanes&k;break}c.timeoutHandle=Gb(eu.bind(null,c,_r,Cs),h);break}eu(c,_r,Cs);break;case 4:if(Pa(c,b),(b&4194240)===b)break;for(h=c.eventTimes,k=-1;0<b;){var T=31-Ii(b);_=1<<T,T=h[T],T>k&&(k=T),b&=~_}if(b=k,b=Yt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*eZ(b/1960))-b,10<b){c.timeoutHandle=Gb(eu.bind(null,c,_r,Cs),b);break}eu(c,_r,Cs);break;case 5:eu(c,_r,Cs);break;default:throw Error(n(329))}}}return Cr(c,Yt()),c.callbackNode===m?h6.bind(null,c):null}function Bw(c,h){var m=zh;return c.current.memoizedState.isDehydrated&&(Jl(c,h).flags|=256),c=F0(c,h),c!==2&&(h=_r,_r=m,h!==null&&Uw(h)),c}function Uw(c){_r===null?_r=c:_r.push.apply(_r,c)}function tZ(c){for(var h=c;;){if(h.flags&16384){var m=h.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var b=0;b<m.length;b++){var k=m[b],_=k.getSnapshot;k=k.value;try{if(!Li(_(),k))return!1}catch{return!1}}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Pa(c,h){for(h&=~Iw,h&=~C0,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var m=31-Ii(h),b=1<<m;c[m]=-1,h&=~b}}function p6(c){if((ot&6)!==0)throw Error(n(327));sf();var h=jm(c,0);if((h&1)===0)return Cr(c,Yt()),null;var m=F0(c,h);if(c.tag!==0&&m===2){var b=bb(c);b!==0&&(h=b,m=Bw(c,b))}if(m===1)throw m=Lh,Jl(c,0),Pa(c,h),Cr(c,Yt()),m;if(m===6)throw Error(n(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,eu(c,_r,Cs),Cr(c,Yt()),null}function qw(c,h){var m=ot;ot|=1;try{return c(h)}finally{ot=m,ot===0&&(of=Yt()+500,o0&&Ra())}}function Zl(c){Da!==null&&Da.tag===0&&(ot&6)===0&&sf();var h=ot;ot|=1;var m=fi.transition,b=mt;try{if(fi.transition=null,mt=1,c)return c()}finally{mt=b,fi.transition=m,ot=h,(ot&6)===0&&Ra()}}function Ww(){Vr=rf.current,At(rf)}function Jl(c,h){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,NQ(m)),en!==null)for(m=en.return;m!==null;){var b=m;switch(Jb(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&r0();break;case 3:ef(),At(Sr),At(Ln),dw();break;case 5:cw(b);break;case 4:ef();break;case 13:At(It);break;case 19:At(It);break;case 10:ow(b.type._context);break;case 22:case 23:Ww()}m=m.return}if(pn=c,en=c=Ia(c.current,null),$n=Vr=h,on=0,Lh=null,Iw=C0=Ql=0,_r=zh=null,Yl!==null){for(h=0;h<Yl.length;h++)if(m=Yl[h],b=m.interleaved,b!==null){m.interleaved=null;var k=b.next,_=m.pending;if(_!==null){var T=_.next;_.next=k,b.next=T}m.pending=b}Yl=null}return c}function g6(c,h){do{var m=en;try{if(iw(),g0.current=x0,m0){for(var b=Lt.memoizedState;b!==null;){var k=b.queue;k!==null&&(k.pending=null),b=b.next}m0=!1}if(Kl=0,hn=rn=Lt=null,Fh=!1,Mh=0,Pw.current=null,m===null||m.return===null){on=1,Lh=h,en=null;break}e:{var _=c,T=m.return,O=m,B=h;if(h=$n,O.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Z=B,ae=O,de=ae.tag;if((ae.mode&1)===0&&(de===0||de===11||de===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ce=jF(T);if(Ce!==null){Ce.flags&=-257,BF(Ce,T,O,_,h),Ce.mode&1&&zF(_,Z,h),h=Ce,B=Z;var Ae=h.updateQueue;if(Ae===null){var Re=new Set;Re.add(B),h.updateQueue=Re}else Ae.add(B);break e}else{if((h&1)===0){zF(_,Z,h),Vw();break e}B=Error(n(426))}}else if(Ft&&O.mode&1){var Xt=jF(T);if(Xt!==null){(Xt.flags&65536)===0&&(Xt.flags|=256),BF(Xt,T,O,_,h),nw(tf(B,O));break e}}_=B=tf(B,O),on!==4&&(on=2),zh===null?zh=[_]:zh.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,h&=-h,_.lanes|=h;var Y=IF(_,B,h);cF(_,Y);break e;case 1:O=B;var q=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ma===null||!Ma.has(Q)))){_.flags|=65536,h&=-h,_.lanes|=h;var me=LF(_,O,h);cF(_,me);break e}}_=_.return}while(_!==null)}v6(m)}catch(Fe){h=Fe,en===m&&m!==null&&(en=m=m.return);continue}break}while(!0)}function m6(){var c=_0.current;return _0.current=x0,c===null?x0:c}function Vw(){(on===0||on===3||on===2)&&(on=4),pn===null||(Ql&268435455)===0&&(C0&268435455)===0||Pa(pn,$n)}function F0(c,h){var m=ot;ot|=2;var b=m6();(pn!==c||$n!==h)&&(Cs=null,Jl(c,h));do try{nZ();break}catch(k){g6(c,k)}while(!0);if(iw(),ot=m,_0.current=b,en!==null)throw Error(n(261));return pn=null,$n=0,on}function nZ(){for(;en!==null;)y6(en)}function rZ(){for(;en!==null&&!AK();)y6(en)}function y6(c){var h=w6(c.alternate,c,Vr);c.memoizedProps=c.pendingProps,h===null?v6(c):en=h,Pw.current=null}function v6(c){var h=c;do{var m=h.alternate;if(c=h.return,(h.flags&32768)===0){if(m=XQ(m,h,Vr),m!==null){en=m;return}}else{if(m=KQ(m,h),m!==null){m.flags&=32767,en=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{on=6,en=null;return}}if(h=h.sibling,h!==null){en=h;return}en=h=c}while(h!==null);on===0&&(on=5)}function eu(c,h,m){var b=mt,k=fi.transition;try{fi.transition=null,mt=1,iZ(c,h,m,b)}finally{fi.transition=k,mt=b}return null}function iZ(c,h,m,b){do sf();while(Da!==null);if((ot&6)!==0)throw Error(n(327));m=c.finishedWork;var k=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(n(177));c.callbackNode=null,c.callbackPriority=0;var _=m.lanes|m.childLanes;if(LK(c,_),c===pn&&(en=pn=null,$n=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||A0||(A0=!0,S6(Pm,function(){return sf(),null})),_=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||_){_=fi.transition,fi.transition=null;var T=mt;mt=1;var O=ot;ot|=4,Pw.current=null,ZQ(c,m),l6(m,c),EQ(Vb),qm=!!Wb,Vb=Wb=null,c.current=m,JQ(m),RK(),ot=O,mt=T,fi.transition=_}else c.current=m;if(A0&&(A0=!1,Da=c,R0=k),_=c.pendingLanes,_===0&&(Ma=null),FK(m.stateNode),Cr(c,Yt()),h!==null)for(b=c.onRecoverableError,m=0;m<h.length;m++)k=h[m],b(k.value,{componentStack:k.stack,digest:k.digest});if($0)throw $0=!1,c=zw,zw=null,c;return(R0&1)!==0&&c.tag!==0&&sf(),_=c.pendingLanes,(_&1)!==0?c===jw?jh++:(jh=0,jw=c):jh=0,Ra(),null}function sf(){if(Da!==null){var c=s4(R0),h=fi.transition,m=mt;try{if(fi.transition=null,mt=16>c?16:c,Da===null)var b=!1;else{if(c=Da,Da=null,R0=0,(ot&6)!==0)throw Error(n(331));var k=ot;for(ot|=4,$e=c.current;$e!==null;){var _=$e,T=_.child;if(($e.flags&16)!==0){var O=_.deletions;if(O!==null){for(var B=0;B<O.length;B++){var Z=O[B];for($e=Z;$e!==null;){var ae=$e;switch(ae.tag){case 0:case 11:case 15:Ih(8,ae,_)}var de=ae.child;if(de!==null)de.return=ae,$e=de;else for(;$e!==null;){ae=$e;var se=ae.sibling,Ce=ae.return;if(r6(ae),ae===Z){$e=null;break}if(se!==null){se.return=Ce,$e=se;break}$e=Ce}}}var Ae=_.alternate;if(Ae!==null){var Re=Ae.child;if(Re!==null){Ae.child=null;do{var Xt=Re.sibling;Re.sibling=null,Re=Xt}while(Re!==null)}}$e=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,$e=T;else e:for(;$e!==null;){if(_=$e,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ih(9,_,_.return)}var Y=_.sibling;if(Y!==null){Y.return=_.return,$e=Y;break e}$e=_.return}}var q=c.current;for($e=q;$e!==null;){T=$e;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,$e=Q;else e:for(T=q;$e!==null;){if(O=$e,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:E0(9,O)}}catch(Fe){qt(O,O.return,Fe)}if(O===T){$e=null;break e}var me=O.sibling;if(me!==null){me.return=O.return,$e=me;break e}$e=O.return}}if(ot=k,Ra(),_o&&typeof _o.onPostCommitFiberRoot=="function")try{_o.onPostCommitFiberRoot(Im,c)}catch{}b=!0}return b}finally{mt=m,fi.transition=h}}return!1}function x6(c,h,m){h=tf(m,h),h=IF(c,h,1),c=Na(c,h,1),h=rr(),c!==null&&(ch(c,1,h),Cr(c,h))}function qt(c,h,m){if(c.tag===3)x6(c,c,m);else for(;h!==null;){if(h.tag===3){x6(h,c,m);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ma===null||!Ma.has(b))){c=tf(m,c),c=LF(h,c,1),h=Na(h,c,1),c=rr(),h!==null&&(ch(h,1,c),Cr(h,c));break}}h=h.return}}function oZ(c,h,m){var b=c.pingCache;b!==null&&b.delete(h),h=rr(),c.pingedLanes|=c.suspendedLanes&m,pn===c&&($n&m)===m&&(on===4||on===3&&($n&130023424)===$n&&500>Yt()-Lw?Jl(c,0):Iw|=m),Cr(c,h)}function b6(c,h){h===0&&((c.mode&1)===0?h=1:(h=zm,zm<<=1,(zm&130023424)===0&&(zm=4194304)));var m=rr();c=ks(c,h),c!==null&&(ch(c,h,m),Cr(c,m))}function sZ(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),b6(c,m)}function aZ(c,h){var m=0;switch(c.tag){case 13:var b=c.stateNode,k=c.memoizedState;k!==null&&(m=k.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(h),b6(c,m)}var w6;w6=function(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps||Sr.current)Er=!0;else{if((c.lanes&m)===0&&(h.flags&128)===0)return Er=!1,YQ(c,h,m);Er=(c.flags&131072)!==0}else Er=!1,Ft&&(h.flags&1048576)!==0&&eF(h,a0,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;S0(c,h),c=h.pendingProps;var k=Gc(h,Ln.current);Jc(h,m),k=gw(null,h,b,c,k,m);var _=mw();return h.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,kr(b)?(_=!0,i0(h)):_=!1,h.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,lw(h),k.updater=b0,h.stateNode=k,k._reactInternals=h,Sw(h,b,c,m),h=Cw(null,h,b,!0,_,m)):(h.tag=0,Ft&&_&&Zb(h),nr(null,h,k,m),h=h.child),h;case 16:b=h.elementType;e:{switch(S0(c,h),c=h.pendingProps,k=b._init,b=k(b._payload),h.type=b,k=h.tag=uZ(b),c=ji(b,c),k){case 0:h=_w(null,h,b,c,m);break e;case 1:h=GF(null,h,b,c,m);break e;case 11:h=UF(null,h,b,c,m);break e;case 14:h=qF(null,h,b,ji(b.type,c),m);break e}throw Error(n(306,b,""))}return h;case 0:return b=h.type,k=h.pendingProps,k=h.elementType===b?k:ji(b,k),_w(c,h,b,k,m);case 1:return b=h.type,k=h.pendingProps,k=h.elementType===b?k:ji(b,k),GF(c,h,b,k,m);case 3:e:{if(YF(h),c===null)throw Error(n(387));b=h.pendingProps,_=h.memoizedState,k=_.element,uF(c,h),h0(h,b,null,m);var T=h.memoizedState;if(b=T.element,_.isDehydrated)if(_={element:b,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},h.updateQueue.baseState=_,h.memoizedState=_,h.flags&256){k=tf(Error(n(423)),h),h=XF(c,h,b,m,k);break e}else if(b!==k){k=tf(Error(n(424)),h),h=XF(c,h,b,m,k);break e}else for(Wr=Ca(h.stateNode.containerInfo.firstChild),qr=h,Ft=!0,zi=null,m=aF(h,null,b,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Kc(),b===k){h=_s(c,h,m);break e}nr(c,h,b,m)}h=h.child}return h;case 5:return dF(h),c===null&&tw(h),b=h.type,k=h.pendingProps,_=c!==null?c.memoizedProps:null,T=k.children,Hb(b,k)?T=null:_!==null&&Hb(b,_)&&(h.flags|=32),HF(c,h),nr(c,h,T,m),h.child;case 6:return c===null&&tw(h),null;case 13:return KF(c,h,m);case 4:return uw(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=Qc(h,null,b,m):nr(c,h,b,m),h.child;case 11:return b=h.type,k=h.pendingProps,k=h.elementType===b?k:ji(b,k),UF(c,h,b,k,m);case 7:return nr(c,h,h.pendingProps,m),h.child;case 8:return nr(c,h,h.pendingProps.children,m),h.child;case 12:return nr(c,h,h.pendingProps.children,m),h.child;case 10:e:{if(b=h.type._context,k=h.pendingProps,_=h.memoizedProps,T=k.value,_t(c0,b._currentValue),b._currentValue=T,_!==null)if(Li(_.value,T)){if(_.children===k.children&&!Sr.current){h=_s(c,h,m);break e}}else for(_=h.child,_!==null&&(_.return=h);_!==null;){var O=_.dependencies;if(O!==null){T=_.child;for(var B=O.firstContext;B!==null;){if(B.context===b){if(_.tag===1){B=Es(-1,m&-m),B.tag=2;var Z=_.updateQueue;if(Z!==null){Z=Z.shared;var ae=Z.pending;ae===null?B.next=B:(B.next=ae.next,ae.next=B),Z.pending=B}}_.lanes|=m,B=_.alternate,B!==null&&(B.lanes|=m),sw(_.return,m,h),O.lanes|=m;break}B=B.next}}else if(_.tag===10)T=_.type===h.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(n(341));T.lanes|=m,O=T.alternate,O!==null&&(O.lanes|=m),sw(T,m,h),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===h){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}nr(c,h,k.children,m),h=h.child}return h;case 9:return k=h.type,b=h.pendingProps.children,Jc(h,m),k=ui(k),b=b(k),h.flags|=1,nr(c,h,b,m),h.child;case 14:return b=h.type,k=ji(b,h.pendingProps),k=ji(b.type,k),qF(c,h,b,k,m);case 15:return WF(c,h,h.type,h.pendingProps,m);case 17:return b=h.type,k=h.pendingProps,k=h.elementType===b?k:ji(b,k),S0(c,h),h.tag=1,kr(b)?(c=!0,i0(h)):c=!1,Jc(h,m),OF(h,b,k),Sw(h,b,k,m),Cw(null,h,b,!0,c,m);case 19:return ZF(c,h,m);case 22:return VF(c,h,m)}throw Error(n(156,h.tag))};function S6(c,h){return t4(c,h)}function lZ(c,h,m,b){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(c,h,m,b){return new lZ(c,h,m,b)}function Hw(c){return c=c.prototype,!(!c||!c.isReactComponent)}function uZ(c){if(typeof c=="function")return Hw(c)?1:0;if(c!=null){if(c=c.$$typeof,c===K)return 11;if(c===D)return 14}return 2}function Ia(c,h){var m=c.alternate;return m===null?(m=di(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function M0(c,h,m,b,k,_){var T=2;if(b=c,typeof c=="function")Hw(c)&&(T=1);else if(typeof c=="string")T=5;else e:switch(c){case A:return tu(m.children,k,_,h);case N:T=8,k|=8;break;case M:return c=di(12,m,h,k|2),c.elementType=M,c.lanes=_,c;case W:return c=di(13,m,h,k),c.elementType=W,c.lanes=_,c;case j:return c=di(19,m,h,k),c.elementType=j,c.lanes=_,c;case H:return D0(m,k,_,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case I:T=10;break e;case P:T=9;break e;case K:T=11;break e;case D:T=14;break e;case L:T=16,b=null;break e}throw Error(n(130,c==null?c:typeof c,""))}return h=di(T,m,h,k),h.elementType=c,h.type=b,h.lanes=_,h}function tu(c,h,m,b){return c=di(7,c,b,h),c.lanes=m,c}function D0(c,h,m,b){return c=di(22,c,b,h),c.elementType=H,c.lanes=m,c.stateNode={isHidden:!1},c}function Gw(c,h,m){return c=di(6,c,null,h),c.lanes=m,c}function Yw(c,h,m){return h=di(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function cZ(c,h,m,b,k){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wb(0),this.expirationTimes=wb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wb(0),this.identifierPrefix=b,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Xw(c,h,m,b,k,_,T,O,B){return c=new cZ(c,h,m,O,B),h===1?(h=1,_===!0&&(h|=8)):h=0,_=di(3,null,null,h),c.current=_,_.stateNode=c,_.memoizedState={element:b,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},lw(_),c}function fZ(c,h,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:b==null?null:""+b,children:c,containerInfo:h,implementation:m}}function k6(c){if(!c)return Aa;c=c._reactInternals;e:{if(ql(c)!==c||c.tag!==1)throw Error(n(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(kr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(c.tag===1){var m=c.type;if(kr(m))return Q4(c,m,h)}return h}function E6(c,h,m,b,k,_,T,O,B){return c=Xw(m,b,!0,c,k,_,T,O,B),c.context=k6(null),m=c.current,b=rr(),k=Oa(m),_=Es(b,k),_.callback=h??null,Na(m,_,k),c.current.lanes=k,ch(c,k,b),Cr(c,b),c}function O0(c,h,m,b){var k=h.current,_=rr(),T=Oa(k);return m=k6(m),h.context===null?h.context=m:h.pendingContext=m,h=Es(_,T),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=Na(k,h,T),c!==null&&(qi(c,k,T,_),d0(c,k,T)),T}function P0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function _6(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function Kw(c,h){_6(c,h),(c=c.alternate)&&_6(c,h)}function dZ(){return null}var C6=typeof reportError=="function"?reportError:function(c){console.error(c)};function Qw(c){this._internalRoot=c}I0.prototype.render=Qw.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(n(409));O0(c,h,null,null)},I0.prototype.unmount=Qw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Zl(function(){O0(null,c,null,null)}),h[xs]=null}};function I0(c){this._internalRoot=c}I0.prototype.unstable_scheduleHydration=function(c){if(c){var h=u4();c={blockedOn:null,target:c,priority:h};for(var m=0;m<ka.length&&h!==0&&h<ka[m].priority;m++);ka.splice(m,0,c),m===0&&d4(c)}};function Zw(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function L0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function $6(){}function hZ(c,h,m,b,k){if(k){if(typeof b=="function"){var _=b;b=function(){var Z=P0(T);_.call(Z)}}var T=E6(h,b,c,0,null,!1,!1,"",$6);return c._reactRootContainer=T,c[xs]=T.current,Eh(c.nodeType===8?c.parentNode:c),Zl(),T}for(;k=c.lastChild;)c.removeChild(k);if(typeof b=="function"){var O=b;b=function(){var Z=P0(B);O.call(Z)}}var B=Xw(c,0,!1,null,null,!1,!1,"",$6);return c._reactRootContainer=B,c[xs]=B.current,Eh(c.nodeType===8?c.parentNode:c),Zl(function(){O0(h,B,m,b)}),B}function z0(c,h,m,b,k){var _=m._reactRootContainer;if(_){var T=_;if(typeof k=="function"){var O=k;k=function(){var B=P0(T);O.call(B)}}O0(h,T,c,k)}else T=hZ(m,h,c,k,b);return P0(T)}a4=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var m=uh(h.pendingLanes);m!==0&&(Sb(h,m|1),Cr(h,Yt()),(ot&6)===0&&(of=Yt()+500,Ra()))}break;case 13:Zl(function(){var b=ks(c,1);if(b!==null){var k=rr();qi(b,c,1,k)}}),Kw(c,1)}},kb=function(c){if(c.tag===13){var h=ks(c,134217728);if(h!==null){var m=rr();qi(h,c,134217728,m)}Kw(c,134217728)}},l4=function(c){if(c.tag===13){var h=Oa(c),m=ks(c,h);if(m!==null){var b=rr();qi(m,c,h,b)}Kw(c,h)}},u4=function(){return mt},c4=function(c,h){var m=mt;try{return mt=c,h()}finally{mt=m}},gb=function(c,h,m){switch(h){case"input":if(In(c,m),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<m.length;h++){var b=m[h];if(b!==c&&b.form===c.form){var k=n0(b);if(!k)throw Error(n(90));ce(b),In(b,k)}}}break;case"textarea":th(c,m);break;case"select":h=m.value,h!=null&&vs(c,!!m.multiple,h,!1)}},YN=qw,XN=Zl;var pZ={usingClientEntryPoint:!1,Events:[$h,Vc,n0,HN,GN,qw]},Bh={findFiberByHostInstance:Wl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gZ={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=JN(c),c===null?null:c.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||dZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var j0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!j0.isDisabled&&j0.supportsFiber)try{Im=j0.inject(gZ),_o=j0}catch{}}return $r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pZ,$r.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zw(h))throw Error(n(200));return fZ(c,h,null,m)},$r.createRoot=function(c,h){if(!Zw(c))throw Error(n(299));var m=!1,b="",k=C6;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(k=h.onRecoverableError)),h=Xw(c,1,!1,null,null,m,!1,b,k),c[xs]=h.current,Eh(c.nodeType===8?c.parentNode:c),new Qw(h)},$r.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=JN(h),c=c===null?null:c.stateNode,c},$r.flushSync=function(c){return Zl(c)},$r.hydrate=function(c,h,m){if(!L0(h))throw Error(n(200));return z0(null,c,h,!0,m)},$r.hydrateRoot=function(c,h,m){if(!Zw(c))throw Error(n(405));var b=m!=null&&m.hydratedSources||null,k=!1,_="",T=C6;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(_=m.identifierPrefix),m.onRecoverableError!==void 0&&(T=m.onRecoverableError)),h=E6(h,null,c,1,m??null,k,!1,_,T),c[xs]=h.current,Eh(c),b)for(c=0;c<b.length;c++)m=b[c],k=m._getVersion,k=k(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,k]:h.mutableSourceEagerHydrationData.push(m,k);return new I0(h)},$r.render=function(c,h,m){if(!L0(h))throw Error(n(200));return z0(null,c,h,!1,m)},$r.unmountComponentAtNode=function(c){if(!L0(c))throw Error(n(40));return c._reactRootContainer?(Zl(function(){z0(null,null,c,!1,function(){c._reactRootContainer=null,c[xs]=null})}),!0):!1},$r.unstable_batchedUpdates=qw,$r.unstable_renderSubtreeIntoContainer=function(c,h,m,b){if(!L0(m))throw Error(n(200));if(c==null||c._reactInternals===void 0)throw Error(n(38));return z0(c,h,m,!1,b)},$r.version="18.3.1-next-f1338f8080-20240426",$r}var z6;function _Z(){if(z6)return nS.exports;z6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nS.exports=EZ(),nS.exports}var j6;function CZ(){if(j6)return B0;j6=1;var e=_Z();return B0.createRoot=e.createRoot,B0.hydrateRoot=e.hydrateRoot,B0}var $Z=CZ(),qh={},B6;function AZ(){if(B6)return qh;B6=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.parse=s,qh.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function s(p,g){const y=new o,v=p.length;if(v<2)return y;const x=(g==null?void 0:g.decode)||f;let w=0;do{const S=p.indexOf("=",w);if(S===-1)break;const E=p.indexOf(";",w),C=E===-1?v:E;if(S>C){w=p.lastIndexOf(";",S-1)+1;continue}const $=a(p,w,S),R=l(p,S,$),A=p.slice($,R);if(y[A]===void 0){let N=a(p,S+1,C),M=l(p,C,N);const I=x(p.slice(N,M));y[A]=I}w=C+1}while(w<v);return y}function a(p,g,y){do{const v=p.charCodeAt(g);if(v!==32&&v!==9)return g}while(++g<y);return y}function l(p,g,y){for(;g>y;){const v=p.charCodeAt(--g);if(v!==32&&v!==9)return g+1}return y}function u(p,g,y){const v=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const x=v(g);if(!t.test(x))throw new TypeError(`argument val is invalid: ${g}`);let w=p+"="+x;if(!y)return w;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);w+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);w+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);w+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);w+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(w+="; HttpOnly"),y.secure&&(w+="; Secure"),y.partitioned&&(w+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return w}function f(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function d(p){return i.call(p)==="[object Date]"}return qh}AZ();var U6="popstate";function RZ(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return C_("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ig(i)}return NZ(t,n,null,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function so(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TZ(){return Math.random().toString(36).substring(2,10)}function q6(e,t){return{usr:e.state,key:e.key,idx:t}}function C_(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?kd(t):t,state:n,key:t&&t.key||r||TZ()}}function ig({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function kd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function NZ(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function d(){a="POP";let x=f(),w=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:w})}function p(x,w){a="PUSH";let S=C_(v.location,x,w);u=f()+1;let E=q6(S,u),C=v.createHref(S);try{s.pushState(E,"",C)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(C)}o&&l&&l({action:a,location:v.location,delta:1})}function g(x,w){a="REPLACE";let S=C_(v.location,x,w);u=f();let E=q6(S,u),C=v.createHref(S);s.replaceState(E,"",C),o&&l&&l({action:a,location:v.location,delta:0})}function y(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof x=="string"?x:ig(x);return S=S.replace(/ $/,"%20"),Ot(w,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,w)}let v={get action(){return a},get location(){return e(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(U6,d),l=x,()=>{i.removeEventListener(U6,d),l=null}},createHref(x){return t(i,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(x){return s.go(x)}};return v}function TI(e,t,n="/"){return FZ(e,t,n,!1)}function FZ(e,t,n,r){let i=typeof t=="string"?kd(t):t,o=Js(i.pathname||"/",n);if(o==null)return null;let s=NI(e);MZ(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=WZ(o);a=UZ(s[l],u,r)}return a}function NI(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ot(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=qs([r,l.relativePath]),f=n.concat(l);o.children&&o.children.length>0&&(Ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),NI(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:jZ(u,o.index),routesMeta:f})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of FI(o.path))i(o,s,l)}),t}function FI(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=FI(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function MZ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:BZ(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var DZ=/^:[\w-]+$/,OZ=3,PZ=2,IZ=1,LZ=10,zZ=-2,W6=e=>e==="*";function jZ(e,t){let n=e.split("/"),r=n.length;return n.some(W6)&&(r+=zZ),t&&(r+=PZ),n.filter(i=>!W6(i)).reduce((i,o)=>i+(DZ.test(o)?OZ:o===""?IZ:LZ),r)}function BZ(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function UZ(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",d=fy({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),p=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=fy({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:qs([o,d.pathname]),pathnameBase:YZ(qs([o,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(o=qs([o,d.pathnameBase]))}return s}function fy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qZ(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:d},p)=>{if(f==="*"){let y=a[p]||"";s=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[p];return d&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function qZ(e,t=!1,n=!0){so(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function WZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return so(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Js(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function VZ(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?kd(e):e;return{pathname:n?n.startsWith("/")?n:HZ(n,t):t,search:XZ(r),hash:KZ(i)}}function HZ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function oS(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GZ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Q$(e){let t=GZ(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Z$(e,t,n,r=!1){let i;typeof e=="string"?i=kd(e):(i={...e},Ot(!i.pathname||!i.pathname.includes("?"),oS("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),oS("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),oS("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=t.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?t[d]:"/"}let l=VZ(i,a),u=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}var qs=e=>e.join("/").replace(/\/\/+/g,"/"),YZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var MI=["POST","PUT","PATCH","DELETE"];new Set(MI);var ZZ=["GET",...MI];new Set(ZZ);var Ed=X.createContext(null);Ed.displayName="DataRouter";var Yv=X.createContext(null);Yv.displayName="DataRouterState";var DI=X.createContext({isTransitioning:!1});DI.displayName="ViewTransition";var JZ=X.createContext(new Map);JZ.displayName="Fetchers";var eJ=X.createContext(null);eJ.displayName="Await";var go=X.createContext(null);go.displayName="Navigation";var Pg=X.createContext(null);Pg.displayName="Location";var mo=X.createContext({outlet:null,matches:[],isDataRoute:!1});mo.displayName="Route";var J$=X.createContext(null);J$.displayName="RouteError";function tJ(e,{relative:t}={}){Ot(_d(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=X.useContext(go),{hash:i,pathname:o,search:s}=Ig(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:qs([n,o])),r.createHref({pathname:a,search:s,hash:i})}function _d(){return X.useContext(Pg)!=null}function is(){return Ot(_d(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(Pg).location}var OI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PI(e){X.useContext(go).static||X.useLayoutEffect(e)}function Xv(){let{isDataRoute:e}=X.useContext(mo);return e?gJ():nJ()}function nJ(){Ot(_d(),"useNavigate() may be used only in the context of a <Router> component.");let e=X.useContext(Ed),{basename:t,navigator:n}=X.useContext(go),{matches:r}=X.useContext(mo),{pathname:i}=is(),o=JSON.stringify(Q$(r)),s=X.useRef(!1);return PI(()=>{s.current=!0}),X.useCallback((l,u={})=>{if(so(s.current,OI),!s.current)return;if(typeof l=="number"){n.go(l);return}let f=Z$(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:qs([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}X.createContext(null);function rJ(){let{matches:e}=X.useContext(mo),t=e[e.length-1];return t?t.params:{}}function Ig(e,{relative:t}={}){let{matches:n}=X.useContext(mo),{pathname:r}=is(),i=JSON.stringify(Q$(n));return X.useMemo(()=>Z$(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function iJ(e,t){return II(e,t)}function II(e,t,n,r){var S;Ot(_d(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=X.useContext(go),{matches:s}=X.useContext(mo),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",f=a?a.pathnameBase:"/",d=a&&a.route;{let E=d&&d.path||"";LI(u,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=is(),g;if(t){let E=typeof t=="string"?kd(t):t;Ot(f==="/"||((S=E.pathname)==null?void 0:S.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=p;let y=g.pathname||"/",v=y;if(f!=="/"){let E=f.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=!o&&n&&n.matches&&n.matches.length>0?n.matches:TI(e,{pathname:v});so(d||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),so(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=uJ(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:qs([f,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:qs([f,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return t&&w?X.createElement(Pg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function oJ(){let e=pJ(),t=QZ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:o},"ErrorBoundary")," or"," ",X.createElement("code",{style:o},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),n?X.createElement("pre",{style:i},n):null,s)}var sJ=X.createElement(oJ,null),aJ=class extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(mo.Provider,{value:this.props.routeContext},X.createElement(J$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lJ({routeContext:e,match:t,children:n}){let r=X.useContext(Ed);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(mo.Provider,{value:e},n)}function uJ(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ot(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:f,errors:d}=n,p=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||p){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,f)=>{let d,p=!1,g=null,y=null;n&&(d=o&&u.route.id?o[u.route.id]:void 0,g=u.route.errorElement||sJ,s&&(a<0&&f===0?(LI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):a===f&&(p=!0,y=u.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,f+1)),x=()=>{let w;return d?w=g:p?w=y:u.route.Component?w=X.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=l,X.createElement(lJ,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:w})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?X.createElement(aJ,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function e3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cJ(e){let t=X.useContext(Ed);return Ot(t,e3(e)),t}function fJ(e){let t=X.useContext(Yv);return Ot(t,e3(e)),t}function dJ(e){let t=X.useContext(mo);return Ot(t,e3(e)),t}function t3(e){let t=dJ(e),n=t.matches[t.matches.length-1];return Ot(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function hJ(){return t3("useRouteId")}function pJ(){var r;let e=X.useContext(J$),t=fJ("useRouteError"),n=t3("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function gJ(){let{router:e}=cJ("useNavigate"),t=t3("useNavigate"),n=X.useRef(!1);return PI(()=>{n.current=!0}),X.useCallback(async(i,o={})=>{so(n.current,OI),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var V6={};function LI(e,t,n){!t&&!V6[e]&&(V6[e]=!0,so(!1,n))}X.memo(mJ);function mJ({routes:e,future:t,state:n}){return II(e,void 0,n,t)}function yJ({to:e,replace:t,state:n,relative:r}){Ot(_d(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=X.useContext(go);so(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=X.useContext(mo),{pathname:s}=is(),a=Xv(),l=Z$(e,Q$(o),s,r==="path"),u=JSON.stringify(l);return X.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function ja(e){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vJ({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Ot(!_d(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=X.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=kd(n));let{pathname:l="/",search:u="",hash:f="",state:d=null,key:p="default"}=n,g=X.useMemo(()=>{let y=Js(l,s);return y==null?null:{location:{pathname:y,search:u,hash:f,state:d,key:p},navigationType:r}},[s,l,u,f,d,p,r]);return so(g!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:X.createElement(go.Provider,{value:a},X.createElement(Pg.Provider,{children:t,value:g}))}function xJ({children:e,location:t}){return iJ($_(e),t)}function $_(e,t=[]){let n=[];return X.Children.forEach(e,(r,i)=>{if(!X.isValidElement(r))return;let o=[...t,i];if(r.type===X.Fragment){n.push.apply(n,$_(r.props.children,o));return}Ot(r.type===ja,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=$_(r.props.children,o)),n.push(s)}),n}var I1="get",L1="application/x-www-form-urlencoded";function Kv(e){return e!=null&&typeof e.tagName=="string"}function bJ(e){return Kv(e)&&e.tagName.toLowerCase()==="button"}function wJ(e){return Kv(e)&&e.tagName.toLowerCase()==="form"}function SJ(e){return Kv(e)&&e.tagName.toLowerCase()==="input"}function kJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EJ(e,t){return e.button===0&&(!t||t==="_self")&&!kJ(e)}var U0=null;function _J(){if(U0===null)try{new FormData(document.createElement("form"),0),U0=!1}catch{U0=!0}return U0}var CJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sS(e){return e!=null&&!CJ.has(e)?(so(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${L1}"`),null):e}function $J(e,t){let n,r,i,o,s;if(wJ(e)){let a=e.getAttribute("action");r=a?Js(a,t):null,n=e.getAttribute("method")||I1,i=sS(e.getAttribute("enctype"))||L1,o=new FormData(e)}else if(bJ(e)||SJ(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Js(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||I1,i=sS(e.getAttribute("formenctype"))||sS(a.getAttribute("enctype"))||L1,o=new FormData(a,e),!_J()){let{name:u,type:f,value:d}=e;if(f==="image"){let p=u?`${u}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else u&&o.append(u,d)}}else{if(Kv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=I1,r=null,i=L1,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function n3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function AJ(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RJ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function TJ(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await AJ(o,n);return s.links?s.links():[]}return[]}));return DJ(r.flat(1).filter(RJ).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function H6(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var f;return n[u].pathname!==l.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var d;let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function NJ(e,t,{includeHydrateFallback:n}={}){return FJ(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function FJ(e){return[...new Set(e)]}function MJ(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function DJ(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(MJ(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}var OJ=new Set([100,101,204,205]);function PJ(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Js(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function zI(){let e=X.useContext(Ed);return n3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function IJ(){let e=X.useContext(Yv);return n3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var r3=X.createContext(void 0);r3.displayName="FrameworkContext";function jI(){let e=X.useContext(r3);return n3(e,"You must render this element inside a <HydratedRouter> element"),e}function LJ(e,t){let n=X.useContext(r3),[r,i]=X.useState(!1),[o,s]=X.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:f,onTouchStart:d}=t,p=X.useRef(null);X.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let v=w=>{w.forEach(S=>{s(S.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[e]),X.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let g=()=>{i(!0)},y=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,p,{}]:[o,p,{onFocus:Wh(a,g),onBlur:Wh(l,y),onMouseEnter:Wh(u,g),onMouseLeave:Wh(f,y),onTouchStart:Wh(d,g)}]:[!1,p,{}]}function Wh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function zJ({page:e,...t}){let{router:n}=zI(),r=X.useMemo(()=>TI(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?X.createElement(BJ,{page:e,matches:r,...t}):null}function jJ(e){let{manifest:t,routeModules:n}=jI(),[r,i]=X.useState([]);return X.useEffect(()=>{let o=!1;return TJ(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function BJ({page:e,matches:t,...n}){let r=is(),{manifest:i,routeModules:o}=jI(),{basename:s}=zI(),{loaderData:a,matches:l}=IJ(),u=X.useMemo(()=>H6(e,t,l,i,r,"data"),[e,t,l,i,r]),f=X.useMemo(()=>H6(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=X.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,v=!1;if(t.forEach(w=>{var E;let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(C=>C.route.id===w.route.id)&&w.route.id in a&&((E=o[w.route.id])!=null&&E.shouldRevalidate)||S.hasClientLoader?v=!0:y.add(w.route.id))}),y.size===0)return[];let x=PJ(e,s);return v&&y.size>0&&x.searchParams.set("_routes",t.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[s,a,r,i,u,t,e,o]),p=X.useMemo(()=>NJ(f,i),[f,i]),g=jJ(f);return X.createElement(X.Fragment,null,d.map(y=>X.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),p.map(y=>X.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),g.map(({key:y,link:v})=>X.createElement("link",{key:y,...v})))}function UJ(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var BI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BI&&(window.__reactRouterVersion="7.5.3")}catch{}function qJ({basename:e,children:t,window:n}){let r=X.useRef();r.current==null&&(r.current=RZ({window:n,v5Compat:!0}));let i=r.current,[o,s]=X.useState({action:i.action,location:i.location}),a=X.useCallback(l=>{X.startTransition(()=>s(l))},[s]);return X.useLayoutEffect(()=>i.listen(a),[i,a]),X.createElement(vJ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var UI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qI=X.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:f,viewTransition:d,...p},g){let{basename:y}=X.useContext(go),v=typeof u=="string"&&UI.test(u),x,w=!1;if(typeof u=="string"&&v&&(x=u,BI))try{let M=new URL(window.location.href),I=u.startsWith("//")?new URL(M.protocol+u):new URL(u),P=Js(I.pathname,y);I.origin===M.origin&&P!=null?u=P+I.search+I.hash:w=!0}catch{so(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=tJ(u,{relative:i}),[E,C,$]=LJ(r,p),R=GJ(u,{replace:s,state:a,target:l,preventScrollReset:f,relative:i,viewTransition:d});function A(M){t&&t(M),M.defaultPrevented||R(M)}let N=X.createElement("a",{...p,...$,href:x||S,onClick:w||o?t:A,ref:UJ(g,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return E&&!v?X.createElement(X.Fragment,null,N,X.createElement(zJ,{page:S})):N});qI.displayName="Link";var WJ=X.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},f){let d=Ig(s,{relative:u.relative}),p=is(),g=X.useContext(Yv),{navigator:y,basename:v}=X.useContext(go),x=g!=null&&ZJ(d)&&a===!0,w=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,S=p.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&v&&(E=Js(E,v)||E);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let $=S===w||!i&&S.startsWith(w)&&S.charAt(C)==="/",R=E!=null&&(E===w||!i&&E.startsWith(w)&&E.charAt(w.length)==="/"),A={isActive:$,isPending:R,isTransitioning:x},N=$?t:void 0,M;typeof r=="function"?M=r(A):M=[r,$?"active":null,R?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(A):o;return X.createElement(qI,{...u,"aria-current":N,className:M,ref:f,style:I,to:s,viewTransition:a},typeof l=="function"?l(A):l)});WJ.displayName="NavLink";var VJ=X.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=I1,action:a,onSubmit:l,relative:u,preventScrollReset:f,viewTransition:d,...p},g)=>{let y=KJ(),v=QJ(a,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&UI.test(a),S=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let C=E.nativeEvent.submitter,$=(C==null?void 0:C.getAttribute("formmethod"))||s;y(C||E.currentTarget,{fetcherKey:t,method:$,navigate:n,replace:i,state:o,relative:u,preventScrollReset:f,viewTransition:d})};return X.createElement("form",{ref:g,method:x,action:v,onSubmit:r?l:S,...p,"data-discover":!w&&e==="render"?"true":void 0})});VJ.displayName="Form";function HJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WI(e){let t=X.useContext(Ed);return Ot(t,HJ(e)),t}function GJ(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Xv(),l=is(),u=Ig(e,{relative:o});return X.useCallback(f=>{if(EJ(f,t)){f.preventDefault();let d=n!==void 0?n:ig(l)===ig(u);a(e,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var YJ=0,XJ=()=>`__${String(++YJ)}__`;function KJ(){let{router:e}=WI("useSubmit"),{basename:t}=X.useContext(go),n=hJ();return X.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=$J(r,t);if(i.navigate===!1){let f=i.fetcherKey||XJ();await e.fetch(f,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function QJ(e,{relative:t}={}){let{basename:n}=X.useContext(go),r=X.useContext(mo);Ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Ig(e||".",{relative:t})},s=is();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(f=>f==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let f=a.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:qs([n,o.pathname])),ig(o)}function ZJ(e,t={}){let n=X.useContext(DI);Ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=WI("useViewTransitionState"),i=Ig(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Js(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Js(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fy(i.pathname,s)!=null||fy(i.pathname,o)!=null}new TextEncoder;[...OJ];const JJ=()=>{const[e,t]=X.useState(!1),[n,r]=X.useState("light"),[i,o]=X.useState("en"),s=()=>{const l=n==="light"?"dark":"light";r(l),document.documentElement.setAttribute("data-theme",l)},a=l=>{o(l.target.value)};return F.jsx("div",{className:"top-bar",children:F.jsxs("div",{className:"top-bar-container",children:[F.jsx("a",{href:"https://www.nyc.gov/",target:"_blank",rel:"noopener noreferrer",children:F.jsx("img",{src:"https://a816-dohbesp.nyc.gov/IndicatorPublic/images/nyc-bubble-logo.svg",alt:"NYC Health Logo",className:"top-bar-logo-image desktop-only"})}),F.jsxs("button",{className:"hamburger",onClick:()=>t(!e),"aria-label":"Toggle menu",children:[F.jsx("span",{className:"hamburger-line"}),F.jsx("span",{className:"hamburger-line"}),F.jsx("span",{className:"hamburger-line"})]}),F.jsxs("div",{className:`top-bar-nav ${e?"open":""}`,children:[F.jsx("a",{href:"https://www.nyc.gov/",target:"_blank",rel:"noopener noreferrer",children:F.jsx("img",{src:"https://a816-dohbesp.nyc.gov/IndicatorPublic/images/nyc-bubble-logo.svg",alt:"NYC Health Logo",className:"top-bar-logo-image mobile-only"})}),F.jsxs("div",{className:"top-bar-nav-item",children:[F.jsx("label",{htmlFor:"language-select-mobile",className:"visually-hidden",children:"Language"}),F.jsxs("select",{id:"language-select-mobile",className:"language-select",value:i,onChange:a,children:[F.jsx("option",{value:"en",children:"English"}),F.jsx("option",{value:"es",children:"Espaol"}),F.jsx("option",{value:"zh",children:""})]})]}),F.jsxs("div",{className:"top-bar-nav-item theme-toggle-wrapper",children:[F.jsxs("span",{className:"theme-label",children:[n==="dark"?"Dark":"Light"," Mode"]}),F.jsxs("label",{className:"switch",children:[F.jsx("input",{type:"checkbox",checked:n==="dark",onChange:s}),F.jsx("span",{className:"slider",children:F.jsx("span",{className:"icon",children:n==="dark"?"":""})})]})]})]}),F.jsxs("div",{className:"top-bar-extras desktop-only",children:[F.jsx("label",{htmlFor:"language-select",className:"visually-hidden",children:"Language"}),F.jsxs("select",{id:"language-select",className:"language-select",value:i,onChange:a,children:[F.jsx("option",{value:"en",children:"English"}),F.jsx("option",{value:"es",children:"Espaol"}),F.jsx("option",{value:"zh",children:""})]}),F.jsx("div",{className:"theme-toggle-wrapper",children:F.jsxs("label",{className:"switch",children:[F.jsx("input",{type:"checkbox",checked:n==="dark",onChange:s}),F.jsx("span",{className:"slider",children:F.jsx("span",{className:"icon",children:n==="dark"?"":""})})]})})]})]})})},G6=[{id:"home",labelKey:"nav.home",path:"/"},{id:"data",labelKey:"nav.data",path:"/data"},{id:"info",labelKey:"nav.info",path:"/info"}],eee=()=>{const e=Xv(),n=is().pathname.split("/")[2]||"emergency-dept",r=i=>{const o=i.target.value;o!==n&&e(`/data/${o}`)};return F.jsxs("div",{className:"dropdown-block",children:[F.jsx("label",{htmlFor:"data-topic-select",className:"dropdown-label sr-only",children:"Explore different topics:"}),F.jsxs("select",{id:"data-topic-select",className:"data-topic-select nav-pill",onChange:r,value:n,"aria-label":"Select a data topic","aria-describedby":"dropdown-hint",role:"combobox",children:[F.jsx("option",{value:"emergency-dept",children:"Emergency Department Data"}),F.jsx("option",{value:"cases",children:"Lab-Reported Cases"}),F.jsx("option",{value:"deaths",children:"COVID-19 Deaths"})]}),F.jsx("span",{id:"dropdown-hint",className:"dropdown-hint sr-only",children:" Page will update automatically"})]})},tee={home:"Home",data:"Data",info:"Info",externalTool:"Health Tool"},nee={emergencyDept:{title:"Emergency Department Visits & Hospitalizations",description:"Explore emergency department trends across boroughs."},github:{title:"Explore our Github Repository",description:"Visit our Github repo to get code, file an issue, or download data"},wastewater:{title:"COVID-19 Wastewater Surveillance",description:"View NYC COVID-19 wastewater surveillance through the New York State dashboard"}},ree={title:"Acute Respiratory Infections Overview",subtitle:"Explore Acute Respiratory Virus data in NYC",indicators:{title:"Emergency Department Trends"},charts:{monthlyARIChart:{title:"Acute Respiratory Infection Overview",subtitle:"{viewLabel} for the week of {date} have {trend} since the previous week"}},statCards:{ari:{title:"Acute Respiratory Infections"},covid:{title:"COVID-19"},flu:{title:"Influenza"},rsv:{title:"RSV"}},summaryBox:{title:"Emergency Department Trends",description:"This summary highlights recent patterns in ED visits and hospitalizations related to respiratory viruses across NYC. Use the toggles and filters above to explore further."}},iee={mainTitle:"Emergency Department Visits & Hospitalizations",mainSubtitle:"Trends and characteristics of Emergency Department use for COVID-19, influenza, and RSV",summarySection:{summaryTitle:"Emergency Department Summary"},charts:{seasonalEdVisits:{title:"<span style='font-weight:bold'>Emergency Department {viewLabel}</span> for <span style='font-weight:bold'>{virus}</span>",subtitle:"{viewLabel} for the week of {date} have {trend} since the previous week."},percentEdVisitsByAge:{title:"<span style='font-weight:bold'>Emergency Department {viewLabel}</span> for <span style='font-weight:bold'>{virus}</span>, by Age Group",subtitle:"{viewLabel} for the week of {date} have {trend} since the previous week for {group}"},percentEdVisitsByGeo:{title:"<span style='font-weight:bold'>Emergency Department {viewLabel}</span> for <span style='font-weight:bold'>{virus}</span>, by Borough",subtitle:"{viewLabel} for the week of {date} have {trend} since the previous week for {group}"}}},oee={mainTitle:"Laboratory-Reported Cases",mainSubtitle:"Trends and characteristics of COVID-19, influenza, and RSV laboratory reports",summarySection:{summaryTitle:"Case Data Summary"},charts:{seasonalComparison:{title:"{virus} Laboratory-Reported Cases by Season",subtitle:"Reports for the week of {date} have {trend} since the previous week"},reportsByTestType:{title:"{virus} Laboratory-Reported Cases by Test Type",subtitle:""},reportsBySubtype:{title:"{virus} Laboratory-Reported Cases by SubType",subtitle:""},reportsByAge:{title:"{virus} Laboratory-Reported Cases by Age Group",subtitle:""},reportsByBorough:{title:"{virus} Laboratory-Reported Cases by Borough",subtitle:""},reportsByRE:{title:"{virus} Laboratory-Reported Cases by Race and Ethnicity",subtitle:""}}},see={mainTitle:"COVID-19 Death Surveillance",mainSubtitle:"Trends and characteristics of COVID-19 deaths",summarySection:{summaryTitle:"Case Data Summary"},charts:{seasonalComparison:{title:"COVID-19 Deaths by Season",subtitle:"Deaths for the week of {date} have {trend} since the previous week"},deathsByAge:{title:"COVID-19 Deaths by Age Group",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},deathsByBorough:{title:"COVID-19 Deaths by Borough",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},deathsByRE:{title:"COVID-19 Deaths by Race and Ethnicity",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"}}},aee={mainTitle:"About the Respiratory Virus Tracker",mainSubtitle:"Learn about respiratory illnesses and how to use this site",summary:{title:"About This Project"},sections:{learn:{title:"Learn about Respiratory Illnesses"},aboutTracker:{title:"About the Tracker"},prevention:{title:"Prevention and Vaccination Information"},providers:{title:"Information for Providers"},seasonality:{title:"Respiratory Virus Seasonality"},transparency:{title:"Data Transparency"}},cards:{covid:{title:"COVID-19"},flu:{title:"Influenza"},rsv:{title:"RSV"},covidProvider:{title:"COVID-19"},fluProvider:{title:"Influenza"},rsvProvider:{title:"RSV"}}},vu={nav:tee,overviewBottomNav:nee,overview:ree,emergencyDeptPage:iee,caseDataPage:oee,CovidDeathPage:see,aboutPage:aee};console.log("Loaded text.json:",vu);const Ws=(e,t=e)=>{const n=e.split(".").reduce((r,i)=>r==null?void 0:r[i],vu);return n===void 0&&console.warn(`[getText] Missing text key: ${e}`),n??t},lee=({activeButton:e})=>{const t=Xv();return F.jsxs("div",{className:"header-buttons-wrapper",children:[F.jsx("div",{className:"left-buttons",children:G6.filter(n=>n.id!=="info"&&!n.hidden).map(({id:n,labelKey:r,path:i,external:o})=>o?F.jsx("a",{href:i,className:`outline-button ${e===n?"active":""}`,target:"_blank",rel:"noopener noreferrer",children:Ws(r)},n):F.jsxs("div",{className:n==="data"?"button-with-dropdown":"",children:[F.jsx("button",{className:`outline-button ${e===n?"active":""}`,onClick:()=>t(i),children:Ws(r)}),n==="data"&&e==="data"&&F.jsx("div",{className:"inline-dropdown",children:F.jsx(eee,{})})]},n))}),F.jsx("div",{className:"right-buttons",children:G6.filter(n=>n.id==="info").map(({id:n,labelKey:r,path:i})=>F.jsx("button",{className:`outline-button ${e===n?"active":""}`,onClick:()=>t(i),children:Ws(r)},n))})]})},uee=()=>{const t=is().pathname;let n="home";return t.startsWith("/data")?n="data":t.startsWith("/info")&&(n="info"),F.jsxs(F.Fragment,{children:[F.jsx("section",{className:"header-section",children:F.jsx("div",{className:"header-container",children:F.jsxs("div",{className:"header-content",children:[F.jsx("h1",{className:"header-title",children:"Respiratory Illness Data Tracker"}),F.jsx("p",{className:"header-subtitle",children:"Data insights for respiratory illnesses in New York City"})]})})}),F.jsx(lee,{activeButton:n})]})};var aS={exports:{}},lS,Y6;function cee(){if(Y6)return lS;Y6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return lS=e,lS}var uS,X6;function fee(){if(X6)return uS;X6=1;var e=cee();function t(){}function n(){}return n.resetWarningCache=t,uS=function(){function r(s,a,l,u,f,d){if(d!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},uS}var K6;function dee(){return K6||(K6=1,aS.exports=fee()()),aS.exports}var hee=dee();const oe=Gv(hee);function i3(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let cc=i3();function VI(e){cc=e}const Up={exec:()=>null};function gt(e,t=""){let n=typeof e=="string"?e:e.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(dr.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,t)};return r}const dr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},pee=/^(?:[ \t]*(?:\n|$))+/,gee=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,mee=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Lg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yee=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,o3=/(?:[*+-]|\d{1,9}[.)])/,HI=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,GI=gt(HI).replace(/bull/g,o3).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),vee=gt(HI).replace(/bull/g,o3).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),s3=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,xee=/^[^\n]+/,a3=/(?!\s*\])(?:\\.|[^\[\]\\])+/,bee=gt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",a3).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wee=gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,o3).getRegex(),Qv="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",l3=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,See=gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",l3).replace("tag",Qv).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YI=gt(s3).replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qv).getRegex(),kee=gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YI).getRegex(),u3={blockquote:kee,code:gee,def:bee,fences:mee,heading:yee,hr:Lg,html:See,lheading:GI,list:wee,newline:pee,paragraph:YI,table:Up,text:xee},Q6=gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qv).getRegex(),Eee={...u3,lheading:vee,table:Q6,paragraph:gt(s3).replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Q6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qv).getRegex()},_ee={...u3,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",l3).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Up,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(s3).replace("hr",Lg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",GI).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Cee=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$ee=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,XI=/^( {2,}|\\)\n(?!\s*$)/,Aee=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zv=/[\p{P}\p{S}]/u,c3=/[\s\p{P}\p{S}]/u,KI=/[^\s\p{P}\p{S}]/u,Ree=gt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,c3).getRegex(),QI=/(?!~)[\p{P}\p{S}]/u,Tee=/(?!~)[\s\p{P}\p{S}]/u,Nee=/(?:[^\s\p{P}\p{S}]|~)/u,Fee=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,ZI=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Mee=gt(ZI,"u").replace(/punct/g,Zv).getRegex(),Dee=gt(ZI,"u").replace(/punct/g,QI).getRegex(),JI="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Oee=gt(JI,"gu").replace(/notPunctSpace/g,KI).replace(/punctSpace/g,c3).replace(/punct/g,Zv).getRegex(),Pee=gt(JI,"gu").replace(/notPunctSpace/g,Nee).replace(/punctSpace/g,Tee).replace(/punct/g,QI).getRegex(),Iee=gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,KI).replace(/punctSpace/g,c3).replace(/punct/g,Zv).getRegex(),Lee=gt(/\\(punct)/,"gu").replace(/punct/g,Zv).getRegex(),zee=gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jee=gt(l3).replace("(?:-->|$)","-->").getRegex(),Bee=gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jee).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dy=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Uee=gt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",dy).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),eL=gt(/^!?\[(label)\]\[(ref)\]/).replace("label",dy).replace("ref",a3).getRegex(),tL=gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",a3).getRegex(),qee=gt("reflink|nolink(?!\\()","g").replace("reflink",eL).replace("nolink",tL).getRegex(),f3={_backpedal:Up,anyPunctuation:Lee,autolink:zee,blockSkip:Fee,br:XI,code:$ee,del:Up,emStrongLDelim:Mee,emStrongRDelimAst:Oee,emStrongRDelimUnd:Iee,escape:Cee,link:Uee,nolink:tL,punctuation:Ree,reflink:eL,reflinkSearch:qee,tag:Bee,text:Aee,url:Up},Wee={...f3,link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",dy).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dy).getRegex()},A_={...f3,emStrongRDelimAst:Pee,emStrongLDelim:Dee,url:gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Vee={...A_,br:gt(XI).replace("{2,}","*").getRegex(),text:gt(A_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},q0={normal:u3,gfm:Eee,pedantic:_ee},Vh={normal:f3,gfm:A_,breaks:Vee,pedantic:Wee},Hee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z6=e=>Hee[e];function Mo(e,t){if(t){if(dr.escapeTest.test(e))return e.replace(dr.escapeReplace,Z6)}else if(dr.escapeTestNoEncode.test(e))return e.replace(dr.escapeReplaceNoEncode,Z6);return e}function J6(e){try{e=encodeURI(e).replace(dr.percentDecode,"%")}catch{return null}return e}function eM(e,t){var o;const n=e.replace(dr.findPipe,(s,a,l)=>{let u=!1,f=a;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),r=n.split(dr.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(dr.slashPipe,"|");return r}function Hh(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function Gee(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function tM(e,t,n,r,i){const o=t.href,s=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function Yee(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(r===null)return t;const i=r[1];return t.split(`
`).map(o=>{const s=o.match(n.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class hy{constructor(t){ee(this,"options");ee(this,"rules");ee(this,"lexer");this.options=t||cc}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Hh(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],i=Yee(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const i=Hh(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:Hh(n[0],`
`)}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let r=Hh(n[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const l=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))l.push(r[u]),a=!0;else if(!a)l.push(r[u]);else break;r=r.slice(u);const f=l.join(`
`),d=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,o=o?`${o}
${d}`:d;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=p,r.length===0)break;const g=s.at(-1);if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){const y=g,v=y.raw+`
`+r.join(`
`),x=this.blockquote(v);s[s.length-1]=x,i=i.substring(0,i.length-y.raw.length)+x.raw,o=o.substring(0,o.length-y.text.length)+x.text;break}else if((g==null?void 0:g.type)==="list"){const y=g,v=y.raw+`
`+r.join(`
`),x=this.list(v);s[s.length-1]=x,i=i.substring(0,i.length-g.raw.length)+x.raw,o=o.substring(0,o.length-y.raw.length)+x.raw,r=v.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;t;){let u=!1,f="",d="";if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;f=n[0],t=t.substring(f.length);let p=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),g=t.split(`
`,1)[0],y=!p.trim(),v=0;if(this.options.pedantic?(v=2,d=p.trimStart()):y?v=n[1].length+1:(v=n[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,d=p.slice(v),v+=n[1].length),y&&this.rules.other.blankLine.test(g)&&(f+=g+`
`,t=t.substring(g.length+1),u=!0),!u){const S=this.rules.other.nextBulletRegex(v),E=this.rules.other.hrRegex(v),C=this.rules.other.fencesBeginRegex(v),$=this.rules.other.headingBeginRegex(v),R=this.rules.other.htmlBeginRegex(v);for(;t;){const A=t.split(`
`,1)[0];let N;if(g=A,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),N=g):N=g.replace(this.rules.other.tabCharGlobal,"    "),C.test(g)||$.test(g)||R.test(g)||S.test(g)||E.test(g))break;if(N.search(this.rules.other.nonSpaceChar)>=v||!g.trim())d+=`
`+N.slice(v);else{if(y||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(p)||$.test(p)||E.test(p))break;d+=`
`+g}!y&&!g.trim()&&(y=!0),f+=A+`
`,t=t.substring(A.length+1),p=N.slice(v)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let x=null,w;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(w=x[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:f,task:!!x,checked:w,loose:!1,text:d,tokens:[]}),o.raw+=f}const l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const f=o.items[u].tokens.filter(p=>p.type==="space"),d=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:o}}}table(t){var a;const n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=eM(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(const l of o)s.rows.push(eM(l,s.header.length).map((u,f)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[f]})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=Hh(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=Gee(n[2],"()");if(s===-2)return;if(s>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),tM(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return tM(r,o,r[0],this.lexer,this.rules)}}emStrong(t,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,u=s,f=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,n=n.slice(-1*t.length+s);(i=d.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){f+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+f);const p=[...i[0]][0].length,g=t.slice(0,s+i.index+p+l);if(Math.min(s,l)%2){const v=g.slice(1,-1);return{type:"em",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}const y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let i,o;if(n[2]==="@")i=n[0],o="mailto:"+i;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class vi{constructor(t){ee(this,"tokens");ee(this,"options");ee(this,"state");ee(this,"tokenizer");ee(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||cc,this.options.tokenizer=this.options.tokenizer||new hy,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:dr,block:q0.normal,inline:Vh.normal};this.options.pedantic?(n.block=q0.pedantic,n.inline=Vh.pedantic):this.options.gfm&&(n.block=q0.gfm,this.options.breaks?n.inline=Vh.breaks:n.inline=Vh.gfm),this.tokenizer.rules=n}static get rules(){return{block:q0,inline:Vh}}static lex(t,n){return new vi(n).lex(t)}static lexInline(t,n){return new vi(n).inlineTokens(t)}lex(t){t=t.replace(dr.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var i,o,s;for(this.options.pedantic&&(t=t.replace(dr.tabCharGlobal,"    ").replace(dr.spaceLine,""));t;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(u=>(a=u.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0;const f=t.slice(1);let d;this.options.extensions.startBlock.forEach(p=>{d=p.call({lexer:this},f),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=t.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,l,u;let r=t,i=null;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;t;){o||(s=""),o=!1;let f;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(p=>(f=p.call({lexer:this},t,n))?(t=t.substring(f.raw.length),n.push(f),!0):!1))continue;if(f=this.tokenizer.escape(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.tag(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.link(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(f.raw.length);const p=n.at(-1);f.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=f.raw,p.text+=f.text):n.push(f);continue}if(f=this.tokenizer.emStrong(t,r,s)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.codespan(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.br(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.del(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.autolink(t)){t=t.substring(f.raw.length),n.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(t))){t=t.substring(f.raw.length),n.push(f);continue}let d=t;if((u=this.options.extensions)!=null&&u.startInline){let p=1/0;const g=t.slice(1);let y;this.options.extensions.startInline.forEach(v=>{y=v.call({lexer:this},g),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(d=t.substring(0,p+1))}if(f=this.tokenizer.inlineText(d)){t=t.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(s=f.raw.slice(-1)),o=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=f.raw,p.text+=f.text):n.push(f);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}}class py{constructor(t){ee(this,"options");ee(this,"parser");this.options=t||cc}space(t){return""}code({text:t,lang:n,escaped:r}){var s;const i=(s=(n||"").match(dr.notSpaceStart))==null?void 0:s[0],o=t.replace(dr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Mo(i)+'">'+(r?o:Mo(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:Mo(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){const n=t.ordered,r=t.start;let i="";for(let a=0;a<t.items.length;a++){const l=t.items[a];i+=this.listitem(l)}const o=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(t){var r;let n="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((r=t.tokens[0])==null?void 0:r.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Mo(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",r="";for(let o=0;o<t.header.length;o++)r+=this.tablecell(t.header[o]);n+=this.tablerow({text:r});let i="";for(let o=0;o<t.rows.length;o++){const s=t.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const n=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Mo(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:r}){const i=this.parser.parseInline(r),o=J6(t);if(o===null)return i;t=o;let s='<a href="'+t+'"';return n&&(s+=' title="'+Mo(n)+'"'),s+=">"+i+"</a>",s}image({href:t,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));const o=J6(t);if(o===null)return Mo(r);t=o;let s=`<img src="${t}" alt="${r}"`;return n&&(s+=` title="${Mo(n)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Mo(t.text)}}class d3{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class xi{constructor(t){ee(this,"options");ee(this,"renderer");ee(this,"textRenderer");this.options=t||cc,this.options.renderer=this.options.renderer||new py,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new d3}static parse(t,n){return new xi(n).parse(t)}static parseInline(t,n){return new xi(n).parseInline(t)}parse(t,n=!0){var i,o;let r="";for(let s=0;s<t.length;s++){const a=t[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=a,f=this.options.extensions.renderers[u.type].call({parser:this},u);if(f!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=f||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,f=this.renderer.text(u);for(;s+1<t.length&&t[s+1].type==="text";)u=t[++s],f+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:f,text:f,tokens:[{type:"text",raw:f,text:f,escaped:!0}]}):r+=f;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(t,n=this.renderer){var i,o;let r="";for(let s=0;s<t.length;s++){const a=t[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class qp{constructor(t){ee(this,"options");ee(this,"block");this.options=t||cc}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?vi.lex:vi.lexInline}provideParser(){return this.block?xi.parse:xi.parseInline}}ee(qp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Xee{constructor(...t){ee(this,"defaults",i3());ee(this,"options",this.setOptions);ee(this,"parse",this.parseMarkdown(!0));ee(this,"parseInline",this.parseMarkdown(!1));ee(this,"Parser",xi);ee(this,"Renderer",py);ee(this,"TextRenderer",d3);ee(this,"Lexer",vi);ee(this,"Tokenizer",hy);ee(this,"Hooks",qp);this.use(...t)}walkTokens(t,n){var i,o;let r=[];for(const s of t)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),i.extensions=n),r.renderer){const o=this.defaults.renderer||new py(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,l=r.renderer[a],u=o[a];o[a]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new hy(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],u=o[a];o[a]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new qp;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,l=r.hooks[a],u=o[a];qp.passThroughHooks.has(s)?o[a]=f=>{if(this.defaults.async)return Promise.resolve(l.call(o,f)).then(p=>u.call(o,p));const d=l.call(o,f);return u.call(o,d)}:o[a]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return vi.lex(t,n??this.defaults)}parser(t,n){return xi.parse(t,n??this.defaults)}parseMarkdown(t){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);const l=s.hooks?s.hooks.provideLexer():t?vi.lex:vi.lexInline,u=s.hooks?s.hooks.provideParser():t?xi.parse:xi.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(f=>l(f,s)).then(f=>s.hooks?s.hooks.processAllTokens(f):f).then(f=>s.walkTokens?Promise.all(this.walkTokens(f,s.walkTokens)).then(()=>f):f).then(f=>u(f,s)).then(f=>s.hooks?s.hooks.postprocess(f):f).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let f=l(r,s);s.hooks&&(f=s.hooks.processAllTokens(f)),s.walkTokens&&this.walkTokens(f,s.walkTokens);let d=u(f,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(f){return a(f)}}}onError(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Mo(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}}const ju=new Xee;function ft(e,t){return ju.parse(e,t)}ft.options=ft.setOptions=function(e){return ju.setOptions(e),ft.defaults=ju.defaults,VI(ft.defaults),ft};ft.getDefaults=i3;ft.defaults=cc;ft.use=function(...e){return ju.use(...e),ft.defaults=ju.defaults,VI(ft.defaults),ft};ft.walkTokens=function(e,t){return ju.walkTokens(e,t)};ft.parseInline=ju.parseInline;ft.Parser=xi;ft.parser=xi.parse;ft.Renderer=py;ft.TextRenderer=d3;ft.Lexer=vi;ft.lexer=vi.lex;ft.Tokenizer=hy;ft.Hooks=qp;ft.parse=ft;ft.options;ft.setOptions;ft.use;ft.walkTokens;ft.parseInline;xi.parse;vi.lex;const Kee=(e,t,n=!1)=>{const r=e.split(`
`),i=[];let o=!1;const s=t.trim().toLowerCase();for(const a of r){if(a.trim().startsWith("## ")){if(a.trim().slice(3).trim().toLowerCase()===s){o=!0;continue}else if(o)break}if(o){const u=/^render:\s*/i.test(a.trim());if(n&&u)continue;i.push(a)}}return i.join(`
`).trim()},Qee=(e,t={})=>e.replace(/{(\w+)}/g,(n,r)=>t[r]??`{${r}}`),Bu=({filePath:e,rawContent:t,sectionTitle:n,showTitle:r=!1,className:i="markdown-body",variables:o={},stripRenderDirectives:s=!1})=>{const[a,l]=X.useState("");return X.useEffect(()=>{(async()=>{try{let f=t;if(!f&&e){const g=await fetch(e);if(!g.ok)throw new Error(`Markdown file not found or inaccessible: ${e}`);f=await g.text()}const d=Qee(f,o),p=n?Kee(d,n,s)||`### ${n}
_Section not found._`:d;l(ft.parse(p))}catch(f){console.error("Failed to load markdown:",f),l(`<p style="color:red;"><strong>Error:</strong> ${f.message}</p>`)}})()},[e,t,n,o,s]),F.jsxs("div",{className:i,children:[r&&n&&F.jsx("h3",{children:n}),F.jsx("div",{dangerouslySetInnerHTML:{__html:a}})]})};Bu.propTypes={filePath:oe.string,rawContent:oe.string,sectionTitle:oe.string,showTitle:oe.bool,className:oe.string,variables:oe.object,stripRenderDirectives:oe.bool};const Zee=()=>F.jsx("footer",{className:"footer",children:F.jsxs("div",{className:"footer-content footer-grid",children:[F.jsxs("div",{className:"footer-columns",children:[F.jsxs("div",{className:"footer-col",children:[F.jsx("a",{href:"/nyc-resources/agencies.page",children:"Directory of City Agencies"}),F.jsx("a",{href:"https://a858-nycnotify.nyc.gov/notifynyc/",children:"Notify NYC"}),F.jsx("a",{href:"/connect/mobile-applications.page",children:"NYC Mobile Apps"})]}),F.jsxs("div",{className:"footer-col",children:[F.jsx("a",{href:"/home/contact-us.page",children:"Contact NYC Government"}),F.jsx("a",{href:"https://a856-citystore.nyc.gov/",children:"CityStore"}),F.jsx("a",{href:"/nyc-resources/nyc-maps.page",children:"Maps"})]}),F.jsxs("div",{className:"footer-col",children:[F.jsx("a",{href:"https://a127-ess.nyc.gov",children:"City Employees"}),F.jsx("a",{href:"/connect/social-media.page",children:"Stay Connected"}),F.jsx("a",{href:"/nyc-resources/resident-toolkit.page",children:"Resident Toolkit"})]})]}),F.jsxs("div",{className:"footer-right",children:[F.jsx("img",{src:"https://a816-dohbesp.nyc.gov/IndicatorPublic/images/nyc-bubble-logo.svg",alt:"NYC Health Logo",className:"footer-logo"}),F.jsxs("div",{className:"footer-legal",children:[F.jsx("p",{children:" City of New York. 2025 All Rights Reserved."}),F.jsx("p",{children:"NYC is a trademark and service mark of the City of New York."}),F.jsx("p",{children:F.jsx("a",{href:"https://www.nyc.gov/nyc-resources/website-accessibility-statement.page","aria-label":"Learn more about Digital Accessibility from the Mayors Office for People with Disabilities.",children:F.jsx("svg",{className:"footer-accessibility-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",role:"img","aria-hidden":"true",focusable:"false",children:F.jsx("path",{fill:"currentColor",d:"M423.9 255.8L411 413.1c-3.3 40.7-63.9 35.1-60.6-4.9l10-122.5-41.1 2.3c10.1 20.7 15.8 43.9 15.8 68.5 0 41.2-16.1 78.7-42.3 106.5l-39.3-39.3c57.9-63.7 13.1-167.2-74-167.2-25.9 0-49.5 9.9-67.2 26L73 243.2c22-20.7 50.1-35.1 81.4-40.2l75.3-85.7-42.6-24.8-51.6 46c-30 26.8-70.6-18.5-40.5-45.4l68-60.7c9.8-8.8 24.1-10.2 35.5-3.6 0 0 139.3 80.9 139.5 81.1 16.2 10.1 20.7 36 6.1 52.6L285.7 229l106.1-5.9c18.5-1.1 33.6 14.4 32.1 32.7zm-64.9-154c28.1 0 50.9-22.8 50.9-50.9C409.9 22.8 387.1 0 359 0c-28.1 0-50.9 22.8-50.9 50.9 0 28.1 22.8 50.9 50.9 50.9zM179.6 456.5c-80.6 0-127.4-90.6-82.7-156.1l-39.7-39.7C36.4 287 24 320.3 24 356.4c0 130.7 150.7 201.4 251.4 122.5l-39.7-39.7c-16 10.9-35.3 17.3-56.1 17.3z"})})})})]})]})]})});function nL(e,t="data.csv"){if(!e||e.length===0)return;const n=Object.keys(e[0]),r=[n.join(","),...e.map(a=>n.map(l=>`"${a[l]}"`).join(","))],i=new Blob([r.join(`
`)],{type:"text/csv"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=t,s.click(),URL.revokeObjectURL(o)}const rL=X.createContext(),Jee=()=>X.useContext(rL),Jv=({children:e,initialData:t=[],enableVirusToggle:n=!0})=>{const[r,i]=X.useState("visits"),[o,s]=X.useState(n?"COVID-19":null),a=()=>{const l=t.map(({week:f,season:d,visits:p})=>({week:f,season:d,[r]:p})),u=n&&o?`${o.toLowerCase()}-`:"";nL(l,`${u}${r}-seasonal.csv`)};return F.jsx(rL.Provider,{value:{activeVirus:o,setActiveVirus:s,view:r,setView:i,handleDownload:a,setVirus:s},children:e})},e2=({title:e,subtitle:t,topControls:n,info:r,children:i})=>F.jsxs("main",{className:"data-page",children:[F.jsx("div",{className:"data-section-wrapper",children:F.jsxs("div",{className:"data-section-container",children:[F.jsx("h2",{className:"data-title",children:e}),t&&F.jsx("p",{className:"data-subtitle",children:t}),n&&F.jsx("div",{className:"data-controls-wrapper",children:F.jsx("div",{className:"data-controls-row",children:n})}),F.jsx("hr",{className:"data-divider"}),F.jsx("div",{className:"info-container",children:r})]})}),F.jsx("div",{className:"data-highlight",children:F.jsx("div",{className:"data-container",children:i})})]});e2.propTypes={title:oe.string.isRequired,subtitle:oe.node,topControls:oe.node,info:oe.node,children:oe.node.isRequired};const iL=({label:e,icon:t,active:n,onClick:r})=>F.jsxs("button",{onClick:r,className:`filter-button ${n?"active":""}`,children:[F.jsx("img",{src:t,alt:e,className:"filter-icon"}),e]});iL.propTypes={label:oe.string.isRequired,icon:oe.string.isRequired,active:oe.bool,onClick:oe.func.isRequired};const ete="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Frame'%3e%3cg%20clip-path='url(%23clip0_4496_2242)'%3e%3cpath%20id='Vector'%20d='M10.125%201.125C10.125%200.502734%209.62227%200%209%200C8.37773%200%207.875%200.502734%207.875%201.125V1.5293C7.875%203.28359%205.75508%204.1625%204.51406%202.92148L4.22578%202.63672C3.78633%202.19727%203.07617%202.19727%202.63672%202.63672C2.19727%203.07617%202.19727%203.78984%202.63672%204.2293L2.925%204.51758C4.1625%205.75508%203.28359%207.875%201.5293%207.875H1.125C0.502734%207.875%200%208.37773%200%209C0%209.62227%200.502734%2010.125%201.125%2010.125H1.5293C3.28359%2010.125%204.1625%2012.2449%202.92148%2013.4859L2.63672%2013.7742C2.19727%2014.2137%202.19727%2014.9273%202.63672%2015.3668C3.07617%2015.8063%203.78984%2015.8063%204.2293%2015.3668L4.51758%2015.0785C5.75859%2013.8375%207.87852%2014.7164%207.87852%2016.4707V16.875C7.87852%2017.4973%208.38125%2018%209.00352%2018C9.62578%2018%2010.1285%2017.4973%2010.1285%2016.875V16.4707C10.1285%2014.7164%2012.2484%2013.8375%2013.4895%2015.0785L13.7777%2015.3668C14.2172%2015.8063%2014.9309%2015.8063%2015.3703%2015.3668C15.8098%2014.9273%2015.8098%2014.2137%2015.3703%2013.7742L15.082%2013.4859C13.841%2012.2449%2014.7199%2010.125%2016.4742%2010.125H16.875C17.4973%2010.125%2018%209.62227%2018%209C18%208.37773%2017.4973%207.875%2016.875%207.875H16.4707C14.7164%207.875%2013.8375%205.75508%2015.0785%204.51406L15.3668%204.22578C15.8063%203.78633%2015.8063%203.07266%2015.3668%202.6332C14.9273%202.19375%2014.2137%202.19375%2013.7742%202.6332L13.4859%202.92148C12.2449%204.1625%2010.125%203.28359%2010.125%201.5293V1.125ZM6.1875%207.875C6.1875%207.65339%206.23115%207.43396%206.31595%207.22922C6.40076%207.02448%206.52506%206.83846%206.68176%206.68176C6.83846%206.52506%207.02448%206.40076%207.22922%206.31595C7.43396%206.23115%207.65339%206.1875%207.875%206.1875C8.09661%206.1875%208.31604%206.23115%208.52078%206.31595C8.72552%206.40076%208.91154%206.52506%209.06824%206.68176C9.22494%206.83846%209.34924%207.02448%209.43405%207.22922C9.51885%207.43396%209.5625%207.65339%209.5625%207.875C9.5625%208.09661%209.51885%208.31604%209.43405%208.52078C9.34924%208.72552%209.22494%208.91154%209.06824%209.06824C8.91154%209.22494%208.72552%209.34924%208.52078%209.43405C8.31604%209.51885%208.09661%209.5625%207.875%209.5625C7.65339%209.5625%207.43396%209.51885%207.22922%209.43405C7.02448%209.34924%206.83846%209.22494%206.68176%209.06824C6.52506%208.91154%206.40076%208.72552%206.31595%208.52078C6.23115%208.31604%206.1875%208.09661%206.1875%207.875ZM10.6875%209.84375C10.9113%209.84375%2011.1259%209.93264%2011.2841%2010.0909C11.4424%2010.2491%2011.5312%2010.4637%2011.5312%2010.6875C11.5312%2010.9113%2011.4424%2011.1259%2011.2841%2011.2841C11.1259%2011.4424%2010.9113%2011.5312%2010.6875%2011.5312C10.4637%2011.5312%2010.2491%2011.4424%2010.0909%2011.2841C9.93264%2011.1259%209.84375%2010.9113%209.84375%2010.6875C9.84375%2010.4637%209.93264%2010.2491%2010.0909%2010.0909C10.2491%209.93264%2010.4637%209.84375%2010.6875%209.84375Z'%20fill='%232563EB'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4496_2242'%3e%3cpath%20d='M0%200H18V18H0V0Z'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",tte="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Frame'%3e%3cg%20clip-path='url(%23clip0_4496_2246)'%3e%3cpath%20id='Vector'%20d='M10.125%201.125C10.125%200.502734%209.62227%200%209%200C8.37773%200%207.875%200.502734%207.875%201.125V1.5293C7.875%203.28359%205.75508%204.1625%204.51406%202.92148L4.22578%202.63672C3.78633%202.19727%203.07617%202.19727%202.63672%202.63672C2.19727%203.07617%202.19727%203.78984%202.63672%204.2293L2.925%204.51758C4.1625%205.75508%203.28359%207.875%201.5293%207.875H1.125C0.502734%207.875%200%208.37773%200%209C0%209.62227%200.502734%2010.125%201.125%2010.125H1.5293C3.28359%2010.125%204.1625%2012.2449%202.92148%2013.4859L2.63672%2013.7742C2.19727%2014.2137%202.19727%2014.9273%202.63672%2015.3668C3.07617%2015.8063%203.78984%2015.8063%204.2293%2015.3668L4.51758%2015.0785C5.75859%2013.8375%207.87852%2014.7164%207.87852%2016.4707V16.875C7.87852%2017.4973%208.38125%2018%209.00352%2018C9.62578%2018%2010.1285%2017.4973%2010.1285%2016.875V16.4707C10.1285%2014.7164%2012.2484%2013.8375%2013.4895%2015.0785L13.7777%2015.3668C14.2172%2015.8063%2014.9309%2015.8063%2015.3703%2015.3668C15.8098%2014.9273%2015.8098%2014.2137%2015.3703%2013.7742L15.082%2013.4859C13.841%2012.2449%2014.7199%2010.125%2016.4742%2010.125H16.875C17.4973%2010.125%2018%209.62227%2018%209C18%208.37773%2017.4973%207.875%2016.875%207.875H16.4707C14.7164%207.875%2013.8375%205.75508%2015.0785%204.51406L15.3668%204.22578C15.8063%203.78633%2015.8063%203.07266%2015.3668%202.6332C14.9273%202.19375%2014.2137%202.19375%2013.7742%202.6332L13.4859%202.92148C12.2449%204.1625%2010.125%203.28359%2010.125%201.5293V1.125ZM6.1875%207.875C6.1875%207.65339%206.23115%207.43396%206.31595%207.22922C6.40076%207.02448%206.52506%206.83846%206.68176%206.68176C6.83846%206.52506%207.02448%206.40076%207.22922%206.31595C7.43396%206.23115%207.65339%206.1875%207.875%206.1875C8.09661%206.1875%208.31604%206.23115%208.52078%206.31595C8.72552%206.40076%208.91154%206.52506%209.06824%206.68176C9.22494%206.83846%209.34924%207.02448%209.43405%207.22922C9.51885%207.43396%209.5625%207.65339%209.5625%207.875C9.5625%208.09661%209.51885%208.31604%209.43405%208.52078C9.34924%208.72552%209.22494%208.91154%209.06824%209.06824C8.91154%209.22494%208.72552%209.34924%208.52078%209.43405C8.31604%209.51885%208.09661%209.5625%207.875%209.5625C7.65339%209.5625%207.43396%209.51885%207.22922%209.43405C7.02448%209.34924%206.83846%209.22494%206.68176%209.06824C6.52506%208.91154%206.40076%208.72552%206.31595%208.52078C6.23115%208.31604%206.1875%208.09661%206.1875%207.875ZM10.6875%209.84375C10.9113%209.84375%2011.1259%209.93264%2011.2841%2010.0909C11.4424%2010.2491%2011.5312%2010.4637%2011.5312%2010.6875C11.5312%2010.9113%2011.4424%2011.1259%2011.2841%2011.2841C11.1259%2011.4424%2010.9113%2011.5312%2010.6875%2011.5312C10.4637%2011.5312%2010.2491%2011.4424%2010.0909%2011.2841C9.93264%2011.1259%209.84375%2010.9113%209.84375%2010.6875C9.84375%2010.4637%209.93264%2010.2491%2010.0909%2010.0909C10.2491%209.93264%2010.4637%209.84375%2010.6875%209.84375Z'%20fill='%237C3AED'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4496_2246'%3e%3cpath%20d='M0%200H18V18H0V0Z'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",nte="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Vector'%20d='M8.4375%200.9375C8.4375%200.418945%208.01855%200%207.5%200C6.98145%200%206.5625%200.418945%206.5625%200.9375V1.27441C6.5625%202.73633%204.7959%203.46875%203.76172%202.43457L3.52148%202.19727C3.15527%201.83105%202.56348%201.83105%202.19727%202.19727C1.83105%202.56348%201.83105%203.1582%202.19727%203.52441L2.4375%203.76465C3.46875%204.7959%202.73633%206.5625%201.27441%206.5625H0.9375C0.418945%206.5625%200%206.98145%200%207.5C0%208.01855%200.418945%208.4375%200.9375%208.4375H1.27441C2.73633%208.4375%203.46875%2010.2041%202.43457%2011.2383L2.19727%2011.4785C1.83105%2011.8447%201.83105%2012.4395%202.19727%2012.8057C2.56348%2013.1719%203.1582%2013.1719%203.52441%2012.8057L3.76465%2012.5654C4.79883%2011.5312%206.56543%2012.2637%206.56543%2013.7256V14.0625C6.56543%2014.5811%206.98438%2015%207.50293%2015C8.02148%2015%208.44043%2014.5811%208.44043%2014.0625V13.7256C8.44043%2012.2637%2010.207%2011.5312%2011.2412%2012.5654L11.4814%2012.8057C11.8477%2013.1719%2012.4424%2013.1719%2012.8086%2012.8057C13.1748%2012.4395%2013.1748%2011.8447%2012.8086%2011.4785L12.5684%2011.2383C11.5342%2010.2041%2012.2666%208.4375%2013.7285%208.4375H14.0625C14.5811%208.4375%2015%208.01855%2015%207.5C15%206.98145%2014.5811%206.5625%2014.0625%206.5625H13.7256C12.2637%206.5625%2011.5312%204.7959%2012.5654%203.76172L12.8057%203.52148C13.1719%203.15527%2013.1719%202.56055%2012.8057%202.19434C12.4395%201.82812%2011.8447%201.82812%2011.4785%202.19434L11.2383%202.43457C10.2041%203.46875%208.4375%202.73633%208.4375%201.27441V0.9375ZM5.15625%206.5625C5.15625%206.37783%205.19262%206.19497%205.26329%206.02435C5.33396%205.85374%205.43755%205.69871%205.56813%205.56813C5.69871%205.43755%205.85374%205.33396%206.02435%205.26329C6.19497%205.19262%206.37783%205.15625%206.5625%205.15625C6.74717%205.15625%206.93003%205.19262%207.10065%205.26329C7.27126%205.33396%207.42629%205.43755%207.55687%205.56813C7.68745%205.69871%207.79104%205.85374%207.86171%206.02435C7.93238%206.19497%207.96875%206.37783%207.96875%206.5625C7.96875%206.74717%207.93238%206.93003%207.86171%207.10065C7.79104%207.27126%207.68745%207.42629%207.55687%207.55687C7.42629%207.68745%207.27126%207.79104%207.10065%207.86171C6.93003%207.93238%206.74717%207.96875%206.5625%207.96875C6.37783%207.96875%206.19497%207.93238%206.02435%207.86171C5.85374%207.79104%205.69871%207.68745%205.56813%207.55687C5.43755%207.42629%205.33396%207.27126%205.26329%207.10065C5.19262%206.93003%205.15625%206.74717%205.15625%206.5625ZM8.90625%208.20312C9.09273%208.20312%209.27157%208.2772%209.40343%208.40907C9.5353%208.54093%209.60938%208.71977%209.60938%208.90625C9.60938%209.09273%209.5353%209.27157%209.40343%209.40343C9.27157%209.5353%209.09273%209.60938%208.90625%209.60938C8.71977%209.60938%208.54093%209.5353%208.40907%209.40343C8.2772%209.27157%208.20312%209.09273%208.20312%208.90625C8.20312%208.71977%208.2772%208.54093%208.40907%208.40907C8.54093%208.2772%208.71977%208.20312%208.90625%208.20312Z'%20fill='%23059669'/%3e%3c/svg%3e",oL=[{label:"COVID-19",icon:ete},{label:"Influenza",icon:tte},{label:"RSV",icon:nte}],h3=({activeVirus:e,onChange:t})=>F.jsx("div",{style:{display:"flex",gap:"12px"},children:oL.map(({label:n,icon:r})=>F.jsx(iL,{label:n,icon:r,active:e===n,onClick:()=>t(n)},n))});h3.propTypes={activeVirus:oe.string.isRequired,onChange:oe.func.isRequired};const p3=({activeView:e,onChange:t})=>F.jsxs("div",{className:"view-toggle-group",children:[F.jsx("button",{className:`view-toggle ${e==="visits"?"active":""}`,onClick:()=>t("visits"),children:"Visits"}),F.jsx("button",{className:`view-toggle ${e==="hospitalizations"?"active":""}`,onClick:()=>t("hospitalizations"),children:"Hospitalizations"})]});p3.propTypes={activeView:oe.string.isRequired,onChange:oe.func.isRequired};const sL=({controls:e={},activeVirus:t,onVirusChange:n,view:r,onViewChange:i})=>{const{virusToggle:o,viewToggle:s}=e;return F.jsxs(F.Fragment,{children:[o&&F.jsxs("div",{className:"data-filter-group",children:[F.jsx("span",{className:"data-filter-label sr-only",children:"Virus"}),F.jsx(h3,{activeVirus:t,onChange:n})]}),s&&F.jsxs("div",{className:"data-filter-group right-aligned",children:[F.jsx("span",{className:"data-filter-label sr-only",children:"Choose Between"}),F.jsx(p3,{activeView:r,onChange:i})]})]})};sL.propTypes={controls:oe.shape({virusToggle:oe.bool,viewToggle:oe.bool}),activeVirus:oe.string,onVirusChange:oe.func,view:oe.string,onViewChange:oe.func};const rte=({trendDirection:e,metricLabel:t,virus:n})=>{if(!e)return null;const r={up:"var(--red-accent)",down:"var(--green-muted)",same:"var(--black)"},i={up:"",down:"",same:""},o={up:"higher than last week",down:"lower than last week",same:"the same as last week"};return{trendColor:r[e],arrow:i[e],directionText:o[e],label:`${n} ${t} are `}},g3=X.forwardRef(({sectionTitle:e,date:t,trendDirection:n,animateOnScroll:r=!0,markdownPath:i,showTitle:o=!1,children:s,metricLabel:a,virus:l="COVID-19",view:u="visits"},f)=>{const d=X.useRef(null),p=f??d,[g,y]=X.useState(!1);X.useEffect(()=>{const w=p.current;if(!r||!w)return;const S=new IntersectionObserver(([E])=>y(E.isIntersecting),{threshold:.2});return S.observe(w),()=>{w&&S.unobserve(w)}},[r]);const x=rte({trendDirection:n,metricLabel:a||u,virus:l});return F.jsxs("div",{ref:p,className:`trend-summary-container ${r&&g?"fade-in":""}`,children:[t&&F.jsxs("p",{className:"trend-date",children:["Latest data as of ",F.jsx("strong",{children:t})]}),x&&F.jsxs("div",{className:"trend-status",children:[F.jsx("span",{className:"trend-arrow",style:{color:x.trendColor},children:x.arrow}),F.jsxs("span",{className:"trend-text",style:{color:x.trendColor},children:[x.label,F.jsx("strong",{children:x.directionText})]})]}),i&&F.jsx(Bu,{filePath:i,sectionTitle:e,showTitle:!1,className:"markdown-body"}),s&&F.jsx("div",{className:"trend-body",children:s})]})});g3.displayName="TrendSummaryContainer";g3.propTypes={sectionTitle:oe.string,date:oe.string,trendDirection:oe.oneOf(["up","down","same"]),markdownPath:oe.string,showTitle:oe.bool,metricLabel:oe.string,virus:oe.string,view:oe.string,children:oe.node,animateOnScroll:oe.bool};const R_=({title:e,content:t,markdownPath:n,isOpen:r,onClose:i})=>r?F.jsx("div",{className:"info-modal-overlay",onClick:i,children:F.jsxs("div",{className:"info-modal",onClick:o=>o.stopPropagation(),children:[F.jsx("button",{className:"info-modal-close",onClick:i,"aria-label":"Close info popup",children:""}),F.jsx("h3",{className:"info-modal-title",children:e}),F.jsx("div",{className:"info-modal-content",children:n?F.jsx(Bu,{filePath:n}):t})]})}):null;R_.propTypes={title:oe.string.isRequired,content:oe.node,markdownPath:oe.string,isOpen:oe.bool.isRequired,onClose:oe.func.isRequired};const aL=({data:e,columnLabels:t={},maxRows:n=100})=>{const r=X.useMemo(()=>Object.keys(e[0]||{}),[e]),[i,o]=X.useState(null),[s,a]=X.useState(!0),[l,u]=X.useState({}),[f,d]=X.useState(0),p=10,g=E=>{o(E),a(C=>E===i?!C:!0)},y=(E,C)=>{u($=>({...$,[E]:C})),d(0)},v=X.useMemo(()=>e.filter(E=>r.every(C=>{var $;return l[C]?($=E[C])==null?void 0:$.toString().toLowerCase().includes(l[C].toLowerCase()):!0})),[e,r,l]),x=X.useMemo(()=>i?[...v].sort((E,C)=>{const $=E[i],R=C[i];return s?String($).localeCompare(String(R)):String(R).localeCompare(String($))}):v,[v,i,s]),w=x.slice(f*p,(f+1)*p),S=Math.ceil(x.length/p);return F.jsxs("div",{className:"preview-table-wrapper",children:[F.jsxs("table",{className:"preview-table",children:[F.jsxs("thead",{children:[F.jsx("tr",{children:r.map(E=>F.jsxs("th",{onClick:()=>g(E),children:[t[E]||E,i===E?s?" ":" ":""]},E))}),F.jsx("tr",{children:r.map(E=>F.jsx("th",{children:F.jsx("input",{className:"filter-input",type:"text",value:l[E]||"",onChange:C=>y(E,C.target.value),placeholder:"Filter"})},E+"-filter"))})]}),F.jsx("tbody",{children:w.map((E,C)=>F.jsx("tr",{children:r.map($=>F.jsx("td",{children:E[$]},$))},C))})]}),S>1&&F.jsxs("div",{className:"pagination-controls",children:[F.jsx("button",{disabled:f===0,onClick:()=>d(E=>E-1),children:" Prev"}),F.jsxs("span",{children:["Page ",f+1," of ",S]}),F.jsx("button",{disabled:f+1>=S,onClick:()=>d(E=>E+1),children:"Next "})]})]})};aL.propTypes={data:oe.array.isRequired,maxRows:oe.number};const ite=(e,t={})=>{const n=typeof e=="string"&&e.includes(".")?Ws(e):e;return typeof n!="string"?n:n.replace(/{(\w+)}/g,(r,i)=>{const o=t[i]??`{${i}}`;return i==="trend"?`<span class='trend-text trend-${t.trendDirection||"neutral"}'>${o}</span>`:o})},m3=({title:e,subtitle:t,subtitleVariables:n={},children:r,className:i="",background:o="white",animateOnScroll:s=!0,infoIcon:a=!1,downloadIcon:l=!1,modalTitle:u="More Info",modalContent:f=null,onDownloadClick:d=null,previewData:p=[],columnLabels:g={}})=>{const y=X.useRef(null),[v,x]=X.useState(!1),[w,S]=X.useState(!1),[E,C]=X.useState(!1);X.useEffect(()=>{if(!s)return;const R=new IntersectionObserver(([N])=>{N.isIntersecting&&(x(!0),R.disconnect())},{threshold:.1,rootMargin:"0px 0px -10% 0px"}),A=y.current;return A&&R.observe(A),()=>R.disconnect()},[s]);const $=typeof t=="string"?ite(t,n):t;return F.jsxs("div",{ref:y,className:`content-container background-${o} ${i} ${s&&v?"fade-in":""}`,children:[(e||t)&&F.jsxs("div",{className:"content-header",children:[F.jsxs("div",{className:"content-title-row",children:[typeof e=="string"?F.jsx("h3",{className:"content-title",dangerouslySetInnerHTML:{__html:e}}):F.jsx("h3",{className:"content-title",children:e}),F.jsxs("div",{className:"content-title-icons",children:[a&&F.jsx("img",{src:"/assets/info-icon.png",alt:"More info",className:"icon info-icon",onClick:()=>S(!0)}),l&&F.jsx("img",{src:"/assets/download-data-icon.png",alt:"Download CSV",className:"icon download-icon",onClick:()=>C(!0),style:{cursor:"pointer"}})]})]}),typeof $=="string"?F.jsx("p",{className:"content-subtitle",dangerouslySetInnerHTML:{__html:$}}):F.jsx("p",{className:"content-subtitle",children:$})]}),F.jsx("div",{className:"content-body",children:r}),a&&f&&F.jsx(R_,{isOpen:w,onClose:()=>S(!1),title:u,content:f}),l&&d&&F.jsx(R_,{isOpen:E,onClose:()=>C(!1),title:"Download Data",content:F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Would you like to download a CSV of this charts data?"}),Array.isArray(p)&&p.length>0&&F.jsx(aL,{data:p,columnLabels:g,maxRows:100}),F.jsx("button",{className:"toggle-button active",onClick:()=>{d(),C(!1)},style:{marginTop:"12px"},children:"Yes, Download"})]})})]})};m3.propTypes={title:oe.string,subtitle:oe.node,subtitleVariables:oe.object,children:oe.node.isRequired,className:oe.string,background:oe.oneOf(["white","gray","transparent"]),animateOnScroll:oe.bool,infoIcon:oe.bool,downloadIcon:oe.bool,modalTitle:oe.string,modalContent:oe.node,onDownloadClick:oe.func,previewData:oe.array};const y3=({title:e,subtitle:t,chart:n,sidebar:r,footer:i})=>F.jsxs("div",{className:"chart-container",children:[F.jsx("div",{className:"chart-header",children:F.jsx("div",{className:"chart-title-section",children:t&&F.jsx("p",{className:"chart-subtitle",children:t})})}),F.jsxs("div",{className:"chart-content",children:[r&&F.jsx("div",{className:"chart-sidebar",children:r}),F.jsx("div",{className:"chart-body",children:n&&F.jsx("div",{className:"chart-vega",children:n})})]}),i&&F.jsx("div",{className:"chart-footer",children:i})]});y3.propTypes={title:oe.string,subtitle:oe.node,chart:oe.node,sidebar:oe.node,footer:oe.node};const ote=({title:e,subtitle:t,subtitleVariables:n,infoIcon:r,downloadIcon:i,modalTitle:o,modalContent:s,onDownloadClick:a,chartTitle:l,chart:u,footer:f,children:d,animateOnScroll:p,previewData:g=[],columnLabels:y={}})=>F.jsx(m3,{title:e,subtitle:t,subtitleVariables:n,infoIcon:r,downloadIcon:i,modalTitle:o,modalContent:s,onDownloadClick:a,animateOnScroll:p,previewData:g,columnLabels:y,children:d??F.jsx(y3,{title:l||e,chart:u,footer:f})}),lL=({activeVirus:e,view:t,viewLabel:n,onVirusChange:r,onViewChange:i,controls:o={},className:s=""})=>{var p;const[a,l]=X.useState(!1),{virusToggle:u=!0,viewToggle:f=!0}=o,d=(p=oL.find(g=>g.label===e))==null?void 0:p.icon;return!u&&!f?null:F.jsxs("div",{className:`floating-pill ${s} ${a?"open":""}`,children:[F.jsx("button",{className:`pill-button ${a?"open":""}`,onClick:()=>l(!a),children:F.jsxs(F.Fragment,{children:[d&&F.jsx("img",{src:d,alt:e,className:"filter-icon",style:{marginRight:"8px"}}),e,f&&` | ${n}`,F.jsx("span",{className:"arrow",children:""})]})}),a&&F.jsxs("div",{className:"pill-dropdown",children:[u&&F.jsxs("div",{className:"pill-section",children:[F.jsx("label",{children:"Virus:"}),F.jsx(h3,{activeVirus:e,onChange:g=>{r(g),l(!1)}})]}),f&&F.jsxs("div",{className:"pill-section",children:[F.jsx("label",{children:"View:"}),F.jsx(p3,{activeView:t,onChange:g=>{i(g),l(!1)}})]})]})]})};lL.propTypes={activeVirus:oe.string.isRequired,view:oe.string.isRequired,viewLabel:oe.string.isRequired,className:oe.string,onVirusChange:oe.func.isRequired,onViewChange:oe.func.isRequired,controls:oe.shape({virusToggle:oe.bool,viewToggle:oe.bool})};const uL=({markdown:e,sectionTitle:t,title:n})=>F.jsxs("section",{className:"markdown-paragraph-section",children:[F.jsx("h2",{className:"markdown-paragraph-title",children:n||t}),F.jsx(Bu,{rawContent:e,sectionTitle:t,showTitle:!1,stripRenderDirectives:!0})]});uL.propTypes={markdown:oe.string.isRequired,sectionTitle:oe.string.isRequired,title:oe.string};const ste={white:"#FFFFFF",black:"#000000",gray100:"#F9FAFB",gray200:"#F3F4F6",gray300:"#E5E7EB",gray400:"#D1D5DB",gray500:"#9CA3AF",gray600:"#6B7280",gray700:"#4B5563",gray800:"#374151",gray900:"#1F2937",grayTransparent:"rgba(0, 0, 0, 0)",bluePrimary:"#1E40AF",blueSecondary:"#2563EB",blueAccent:"#0075FF",purplePrimary:"#5B21B6",purpleAccent:"#7C3AED",greenPrimary:"#065F46",greenAccent:"#139D72",greenMuted:"#059669",orangeText:"#91401A",orangePrimary:"#FF6600",orangeAccent:"#B36C31",orangeMuted:"#FF6C0B",redPrimary:"#B91C1C",redAccent:"#DC2626",redMuted:"#F87171",bgLightBlue:"#EFF6FF",bgLightGreen:"#ECFDF5",bgLightOrange:"#F4C4A5",bgLightPurple:"#F5F3FF",bgMutedPink:"#F4C4A5",bgMutedPurple:"#F5F3FF",bgMutedGray:"#ADAEBC"},ate={xs:"4px",sm:"8px"},lte={body:'"Inter", sans-serif',heading:'"Inter", sans-serif',fontSizeBase:"14px"},ute={covid:["#3B0F70","#4F32B3","#386CB0","#2B83BA","#66C2A5"],flu:["#3F007D","#6A51A3","#807DBA","#9E9AC8","#BCBDDC"],rsv:["#00441B","#1B7837","#41AB5D","#78C679","#C2E699"]},sa={colors:ste,spacing:ate,typography:lte,colorScales:ute},nM={};function T_(e,t){e===void 0&&(e=nM),t===void 0&&(t=nM);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}const cte=/("(?:[^\\"]|\\.)*")|[:,]/g;function cS(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const u=JSON.stringify(s,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const d=u.replace(cte,(p,g)=>g||`${p} `);if(d.length<=f)return d}if(i!=null&&(s=JSON.parse(u),i=void 0),typeof s=="object"&&s!==null){const d=a+n,p=[];let g=0,y,v;if(Array.isArray(s)){y="[",v="]";const{length:x}=s;for(;g<x;g++)p.push(o(s[g],d,g===x-1?0:1)||"null")}else{y="{",v="}";const x=Object.keys(s),{length:w}=x;for(;g<w;g++){const S=x[g],E=`${JSON.stringify(S)}: `,C=o(s[S],d,E.length+(g===w-1?0:1));C!==void 0&&p.push(E+C)}}if(p.length>0)return[y,n+p.join(`,
${d}`),v].join(`
${a}`)}return u}(e,"",0)}function jr(e,t,n){return e.fields=t||[],e.fname=n,e}function Gt(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function cL(e){return e.length===1?fte(e[0]):dte(e)}const fte=e=>function(t){return t[e]},dte=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function re(e){throw Error(e)}function os(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||re("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&re("Access path missing closing bracket: "+e),r&&re("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Ci(e,t,n){const r=os(e);return e=r.length===1?r[0]:e,jr((n&&n.get||cL)(r),[e],t||e)}const zg=Ci("id"),er=jr(e=>e,[],"identity"),Xa=jr(()=>0,[],"zero"),Cd=jr(()=>1,[],"one"),$i=jr(()=>!0,[],"true"),Ba=jr(()=>!1,[],"false");function hte(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const fL=0,v3=1,x3=2,dL=3,hL=4;function b3(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hte,r=e||fL;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=v3&&n(t||"error","ERROR",arguments),this},warn(){return r>=x3&&n(t||"warn","WARN",arguments),this},info(){return r>=dL&&n(t||"log","INFO",arguments),this},debug(){return r>=hL&&n(t||"log","DEBUG",arguments),this}}}var ie=Array.isArray;function Ee(e){return e===Object(e)}const rM=e=>e!=="__proto__";function $d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=pte(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Ad(r,o,i[o],s)}return r},{})}function Ad(e,t,n,r){if(!rM(t))return;let i,o;if(Ee(n)&&!ie(n)){o=Ee(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Ad(o,i,n[i]):rM(i)&&(o[i]=n[i])}else e[t]=n}function pte(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function rt(e){return e[e.length-1]}function Yn(e){return e==null||e===""?null:+e}const pL=e=>t=>e*Math.exp(t),gL=e=>t=>Math.log(e*t),mL=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),yL=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,gy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function t2(e,t,n,r){const i=n(e[0]),o=n(rt(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function vL(e,t){return t2(e,t,Yn,er)}function xL(e,t){var n=Math.sign(e[0]);return t2(e,t,gL(n),pL(n))}function bL(e,t,n){return t2(e,t,gy(n),gy(1/n))}function wL(e,t,n){return t2(e,t,mL(n),yL(n))}function n2(e,t,n,r,i){const o=r(e[0]),s=r(rt(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function w3(e,t,n){return n2(e,t,n,Yn,er)}function S3(e,t,n){const r=Math.sign(e[0]);return n2(e,t,n,gL(r),pL(r))}function my(e,t,n,r){return n2(e,t,n,gy(r),gy(1/r))}function k3(e,t,n,r){return n2(e,t,n,mL(r),yL(r))}function SL(e){return 1+~~(new Date(e).getMonth()/3)}function kL(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Se(e){return e!=null?ie(e)?e:[e]:[]}function EL(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ge(e){return typeof e=="function"}const gte="descending";function E3(e,t,n){n=n||{},t=Se(t)||[];const r=[],i=[],o={},s=n.comparator||mte;return Se(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===gte?-1:1),i.push(a=Ge(a)?a:Ci(a,null,n)),(Kn(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:jr(s(i,r),Object.keys(o))}const jg=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),mte=(e,t)=>e.length===1?yte(e[0],t[0]):vte(e,t,e.length),yte=(e,t)=>function(n,r){return jg(e(n),e(r))*t},vte=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=jg(o(r),o(i));return s*t[a]});function tr(e){return Ge(e)?e:()=>e}function _3(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function He(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Xo(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function _L(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}function _e(e,t){return Object.hasOwn(e,t)}const W0={};function Rd(e){let t={},n;function r(o){return _e(t,o)&&t[o]!==W0}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===W0&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=W0),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==W0&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function CL(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=rt(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=s?r:f<=s?i:o}function ye(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),He(r,n)}function Ef(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Cl(e){return typeof e=="boolean"}function ol(e){return Object.prototype.toString.call(e)==="[object Date]"}function $L(e){return e&&Ge(e[Symbol.iterator])}function lt(e){return typeof e=="number"}function C3(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ke(e){return typeof e=="string"}function $3(e,t,n){e&&(e=t?Se(e).map(a=>a.replace(/\\(.)/g,"$1")):Se(e));const r=e&&e.length,i=n&&n.get||cL,o=a=>i(t?[a]:os(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return jr(s,e,"key")}function AL(e,t){const n=e[0],r=rt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const xte=1e4;function RL(e){e=+e||xte;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>_e(t,s)||_e(n,s),get:s=>_e(t,s)?t[s]:_e(n,s)?o(s,n[s]):void 0,set:(s,a)=>_e(t,s)?t[s]=a:o(s,a)}}function TL(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function xp(e,t){let n="";for(;--t>=0;)n+=e;return n}function NL(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?xp(i,s)+o:r==="center"?xp(i,~~(s/2))+o+xp(i,Math.ceil(s/2)):o+xp(i,s)}function Bg(e){return e&&rt(e)-e[0]||0}function ge(e){return ie(e)?"["+e.map(ge)+"]":Ee(e)||ke(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function A3(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const bte=e=>lt(e)||ol(e)?e:Date.parse(e);function R3(e,t){return t=t||bte,e==null||e===""?null:t(e)}function T3(e){return e==null||e===""?null:e+""}function ao(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function FL(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Wa(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var iM={},fS={},dS=34,Gh=10,hS=13;function ML(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function wte(e,t){var n=ML(e);return function(r,i){return t(n(r),i,e)}}function oM(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ar(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ste(e){return e<0?"-"+Ar(-e,6):e>9999?"+"+Ar(e,6):Ar(e,4)}function kte(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ste(e.getUTCFullYear())+"-"+Ar(e.getUTCMonth()+1,2)+"-"+Ar(e.getUTCDate(),2)+(i?"T"+Ar(t,2)+":"+Ar(n,2)+":"+Ar(r,2)+"."+Ar(i,3)+"Z":r?"T"+Ar(t,2)+":"+Ar(n,2)+":"+Ar(r,2)+"Z":n||t?"T"+Ar(t,2)+":"+Ar(n,2)+"Z":"")}function DL(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,p){var g,y,v=i(d,function(x,w){if(g)return g(x,w-1);y=x,g=p?wte(x,p):ML(x)});return v.columns=y||[],v}function i(d,p){var g=[],y=d.length,v=0,x=0,w,S=y<=0,E=!1;d.charCodeAt(y-1)===Gh&&--y,d.charCodeAt(y-1)===hS&&--y;function C(){if(S)return fS;if(E)return E=!1,iM;var R,A=v,N;if(d.charCodeAt(A)===dS){for(;v++<y&&d.charCodeAt(v)!==dS||d.charCodeAt(++v)===dS;);return(R=v)>=y?S=!0:(N=d.charCodeAt(v++))===Gh?E=!0:N===hS&&(E=!0,d.charCodeAt(v)===Gh&&++v),d.slice(A+1,R-1).replace(/""/g,'"')}for(;v<y;){if((N=d.charCodeAt(R=v++))===Gh)E=!0;else if(N===hS)E=!0,d.charCodeAt(v)===Gh&&++v;else if(N!==n)continue;return d.slice(A,R)}return S=!0,d.slice(A,y)}for(;(w=C())!==fS;){for(var $=[];w!==iM&&w!==fS;)$.push(w),w=C();p&&($=p($,x++))==null||g.push($)}return g}function o(d,p){return d.map(function(g){return p.map(function(y){return f(g[y])}).join(e)})}function s(d,p){return p==null&&(p=oM(d)),[p.map(f).join(e)].concat(o(d,p)).join(`
`)}function a(d,p){return p==null&&(p=oM(d)),o(d,p).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(f).join(e)}function f(d){return d==null?"":d instanceof Date?kte(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}var Ete=DL(","),_te=Ete.parse;function Cte(e){return e}function $te(e){if(e==null)return Cte;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,d=new Array(f);for(d[0]=(t+=a[0])*r+o,d[1]=(n+=a[1])*i+s;u<f;)d[u]=a[u],++u;return d}}function Ate(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Rte(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return sM(e,n)})}:sM(e,t)}function sM(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=OL(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function OL(e,t){var n=$te(e.transform),r=e.arcs;function i(f,d){d.length&&d.pop();for(var p=r[f<0?~f:f],g=0,y=p.length;g<y;++g)d.push(n(p[g],g));f<0&&Ate(d,y)}function o(f){return n(f)}function s(f){for(var d=[],p=0,g=f.length;p<g;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function a(f){for(var d=s(f);d.length<4;)d.push(d[0]);return d}function l(f){return f.map(a)}function u(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(u)};case"Point":p=o(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(o);break;case"LineString":p=s(f.arcs);break;case"MultiLineString":p=f.arcs.map(s);break;case"Polygon":p=l(f.arcs);break;case"MultiPolygon":p=f.arcs.map(l);break;default:return null}return{type:d,coordinates:p}}return u(t)}function Tte(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,f){var d=e.arcs[u<0?~u:u],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=t[++s],t[s]=u,t[f]=p)}),t.forEach(function(u){var f=a(u),d=f[0],p=f[1],g,y;if(g=i[d])if(delete i[g.end],g.push(u),g.end=p,y=r[p]){delete r[y.start];var v=y===g?g:g.concat(y);r[v.start=g.start]=i[v.end=y.end]=v}else r[g.start]=i[g.end]=g;else if(g=r[p])if(delete r[g.start],g.unshift(u),g.start=d,y=i[d]){delete i[y.end];var x=y===g?g:y.concat(g);r[x.start=y.start]=i[x.end=g.end]=x}else r[g.start]=i[g.end]=g;else g=[u],r[g.start=d]=i[g.end=p]=g});function a(u){var f=e.arcs[u<0?~u:u],d=f[0],p;return e.transform?(p=[0,0],f.forEach(function(g){p[0]+=g[0],p[1]+=g[1]})):p=f[f.length-1],u<0?[p,d]:[d,p]}function l(u,f){for(var d in u){var p=u[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(g){n[g<0?~g:g]=1}),o.push(p)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Nte(e){return OL(e,Fte.apply(this,arguments))}function Fte(e,t,n){var r,i,o;if(arguments.length>1)r=Mte(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Tte(e,r)}}function Mte(e,t,n){var r=[],i=[],o;function s(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:o})}function a(d){d.forEach(s)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function f(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return f(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}function Vs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dte(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Td(e){let t,n,r;e.length!==2?(t=Vs,n=(a,l)=>Vs(e(a),l),r=(a,l)=>e(a)-l):(t=e===Vs||e===Dte?e:Ote,n=e,r=e);function i(a,l,u=0,f=a.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(a[d],l)<0?u=d+1:f=d}while(u<f)}return u}function o(a,l,u=0,f=a.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(a[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function s(a,l,u=0,f=a.length){const d=i(a,l,u,f-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function Ote(){return 0}function PL(e){return e===null?NaN:+e}function*Pte(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const IL=Td(Vs),fl=IL.right,Ite=IL.left;Td(PL).center;function Lte(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function zte(e,t){const n=Lte(e,t);return n&&Math.sqrt(n)}class gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class aM extends Map{constructor(t,n=jL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(N_(this,t))}has(t){return super.has(N_(this,t))}set(t,n){return super.set(LL(this,t),n)}delete(t){return super.delete(zL(this,t))}}class yy extends Set{constructor(t,n=jL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(N_(this,t))}add(t){return super.add(LL(this,t))}delete(t){return super.delete(zL(this,t))}}function N_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function LL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function zL({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jte(e,t){return Array.from(t,n=>e[n])}function Bte(e=Vs){if(e===Vs)return BL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function BL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ute=Math.sqrt(50),qte=Math.sqrt(10),Wte=Math.sqrt(2);function vy(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Ute?10:o>=qte?5:o>=Wte?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?vy(e,t,n*2):[a,l,u]}function F_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?vy(t,e,n):vy(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function M_(e,t,n){return t=+t,e=+e,n=+n,vy(e,t,n)[2]}function dl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?M_(t,e,n):M_(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Tu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function D_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function UL(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?BL:Bte(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(t-u*d/l+p)),y=Math.min(r,Math.floor(t+(l-u)*d/l+p));UL(e,t,g,y,i)}const o=e[t];let s=n,a=r;for(Yh(e,n,t),i(e[r],o)>0&&Yh(e,n,r);s<a;){for(Yh(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Yh(e,n,a):(++a,Yh(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Yh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function O_(e,t,n){if(e=Float64Array.from(Pte(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return D_(e);if(t>=1)return Tu(e);var r,i=(r-1)*t,o=Math.floor(i),s=Tu(UL(e,o).subarray(0,o+1)),a=D_(e.subarray(o+1));return s+(a-s)*(i-o)}}function qL(e,t,n=PL){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Vte(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function WL(e,t){return O_(e,.5,t)}function*Hte(e){for(const t of e)yield*t}function VL(e){return Array.from(Hte(e))}function Kr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function HL(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Gte(e,...t){e=new yy(e),t=t.map(Yte);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Yte(e){return e instanceof yy?e:new yy(e)}function Xte(...e){const t=new yy;for(const n of e)for(const r of n)t.add(r);return t}function Kte(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Uf(e){return e=xy(Math.abs(e)),e?e[1]:NaN}function Qte(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Zte(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Jte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uu(e){if(!(t=Jte.exec(e)))throw new Error("invalid format: "+e);var t;return new N3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uu.prototype=N3.prototype;function N3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}N3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ene(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var GL;function tne(e,t){var n=xy(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(GL=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xy(e,Math.max(0,t+o-1))[0]}function lM(e,t){var n=xy(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Kte,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lM(e*100,t),r:lM,s:tne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cM(e){return e}var fM=Array.prototype.map,dM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function YL(e){var t=e.grouping===void 0||e.thousands===void 0?cM:Qte(fM.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?cM:Zte(fM.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Uu(d);var p=d.fill,g=d.align,y=d.sign,v=d.symbol,x=d.zero,w=d.width,S=d.comma,E=d.precision,C=d.trim,$=d.type;$==="n"?(S=!0,$="g"):uM[$]||(E===void 0&&(E=12),C=!0,$="g"),(x||p==="0"&&g==="=")&&(x=!0,p="0",g="=");var R=v==="$"?n:v==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",A=v==="$"?r:/[%p]/.test($)?s:"",N=uM[$],M=/[defgprs%]/.test($);E=E===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function I(P){var K=R,W=A,j,D,L;if($==="c")W=N(P)+W,P="";else{P=+P;var H=P<0||1/P<0;if(P=isNaN(P)?l:N(Math.abs(P),E),C&&(P=ene(P)),H&&+P==0&&y!=="+"&&(H=!1),K=(H?y==="("?y:a:y==="-"||y==="("?"":y)+K,W=($==="s"?dM[8+GL/3]:"")+W+(H&&y==="("?")":""),M){for(j=-1,D=P.length;++j<D;)if(L=P.charCodeAt(j),48>L||L>57){W=(L===46?i+P.slice(j+1):P.slice(j))+W,P=P.slice(0,j);break}}}S&&!x&&(P=t(P,1/0));var U=K.length+P.length+W.length,V=U<w?new Array(w-U+1).join(p):"";switch(S&&x&&(P=t(V+P,V.length?w-W.length:1/0),V=""),g){case"<":P=K+P+W+V;break;case"=":P=K+V+P+W;break;case"^":P=V.slice(0,U=V.length>>1)+K+P+W+V.slice(U);break;default:P=V+K+P+W;break}return o(P)}return I.toString=function(){return d+""},I}function f(d,p){var g=u((d=Uu(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Uf(p)/3)))*3,v=Math.pow(10,-y),x=dM[8+y/3];return function(w){return g(v*w)+x}}return{format:u,formatPrefix:f}}var V0,r2,F3;nne({thousands:",",grouping:[3],currency:["$",""]});function nne(e){return V0=YL(e),r2=V0.format,F3=V0.formatPrefix,V0}function XL(e){return Math.max(0,-Uf(Math.abs(e)))}function KL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Uf(t)/3)))*3-Uf(Math.abs(e)))}function QL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Uf(t)-Uf(e))+1}const pS=new Date,gS=new Date;function fn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>fn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(pS.setTime(+o),gS.setTime(+s),e(pS),e(gS),Math.floor(n(pS,gS))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const qf=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);qf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):qf);qf.range;const Is=1e3,bi=Is*60,Ls=bi*60,ea=Ls*24,M3=ea*7,hM=ea*30,mS=ea*365,zs=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCSeconds());zs.range;const i2=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getMinutes());i2.range;const o2=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getUTCMinutes());o2.range;const s2=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is-e.getMinutes()*bi)},(e,t)=>{e.setTime(+e+t*Ls)},(e,t)=>(t-e)/Ls,e=>e.getHours());s2.range;const a2=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ls)},(e,t)=>(t-e)/Ls,e=>e.getUTCHours());a2.range;const Hs=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bi)/ea,e=>e.getDate()-1);Hs.range;const sl=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ea,e=>e.getUTCDate()-1);sl.range;const ZL=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ea,e=>Math.floor(e/ea));ZL.range;function fc(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*bi)/M3)}const Nd=fc(0),by=fc(1),rne=fc(2),ine=fc(3),Wf=fc(4),one=fc(5),sne=fc(6);Nd.range;by.range;rne.range;ine.range;Wf.range;one.range;sne.range;function dc(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/M3)}const Fd=dc(0),wy=dc(1),ane=dc(2),lne=dc(3),Vf=dc(4),une=dc(5),cne=dc(6);Fd.range;wy.range;ane.range;lne.range;Vf.range;une.range;cne.range;const og=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());og.range;const sg=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sg.range;const Ko=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ko.range;const Qo=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qo.range;function JL(e,t,n,r,i,o){const s=[[zs,1,Is],[zs,5,5*Is],[zs,15,15*Is],[zs,30,30*Is],[o,1,bi],[o,5,5*bi],[o,15,15*bi],[o,30,30*bi],[i,1,Ls],[i,3,3*Ls],[i,6,6*Ls],[i,12,12*Ls],[r,1,ea],[r,2,2*ea],[n,1,M3],[t,1,hM],[t,3,3*hM],[e,1,mS]];function a(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const g=d&&typeof d.range=="function"?d:l(u,f,d),y=g?g.range(u,+f+1):[];return p?y.reverse():y}function l(u,f,d){const p=Math.abs(f-u)/d,g=Td(([,,x])=>x).right(s,p);if(g===s.length)return e.every(dl(u/mS,f/mS,d));if(g===0)return qf.every(Math.max(dl(u,f,d),1));const[y,v]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return y.every(v)}return[a,l]}const[fne,dne]=JL(Qo,sg,Fd,ZL,a2,o2),[hne,pne]=JL(Ko,og,Nd,Hs,s2,i2),Dn="year",Dr="quarter",Qn="month",ln="week",Or="date",Gn="day",Zo="dayofyear",ri="hours",ii="minutes",Ai="seconds",lo="milliseconds",D3=[Dn,Dr,Qn,ln,Or,Gn,Zo,ri,ii,Ai,lo],yS=D3.reduce((e,t,n)=>(e[t]=1+n,e),{});function O3(e){const t=Se(e).slice(),n={};return t.length||re("Missing time unit."),t.forEach(i=>{_e(yS,i)?n[i]=1:re(`Invalid time unit: ${i}.`)}),(n[ln]||n[Gn]?1:0)+(n[Dr]||n[Qn]||n[Or]?1:0)+(n[Zo]?1:0)>1&&re(`Incompatible time units: ${e}`),t.sort((i,o)=>yS[i]-yS[o]),t}const gne={[Dn]:"%Y ",[Dr]:"Q%q ",[Qn]:"%b ",[Or]:"%d ",[ln]:"W%U ",[Gn]:"%a ",[Zo]:"%j ",[ri]:"%H:00",[ii]:"00:%M",[Ai]:":%S",[lo]:".%L",[`${Dn}-${Qn}`]:"%Y-%m ",[`${Dn}-${Qn}-${Or}`]:"%Y-%m-%d ",[`${ri}-${ii}`]:"%H:%M"};function ez(e,t){const n=He({},gne,t),r=O3(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const xu=new Date;function P3(e){return xu.setFullYear(e),xu.setMonth(0),xu.setDate(1),xu.setHours(0,0,0,0),xu}function tz(e){return rz(new Date(e))}function nz(e){return P_(new Date(e))}function rz(e){return Hs.count(P3(e.getFullYear())-1,e)}function P_(e){return Nd.count(P3(e.getFullYear())-1,e)}function I_(e){return P3(e).getDay()}function mne(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function iz(e){return sz(new Date(e))}function oz(e){return L_(new Date(e))}function sz(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return sl.count(t-1,e)}function L_(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Fd.count(t-1,e)}function z_(e){return xu.setTime(Date.UTC(e,0,1)),xu.getUTCDay()}function yne(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function az(e,t,n,r,i){const o=t||1,s=rt(e),a=(w,S,E)=>(E=E||w,vne(n[E],r[E],w===s&&o,S)),l=new Date,u=ao(e),f=u[Dn]?a(Dn):tr(2012),d=u[Qn]?a(Qn):u[Dr]?a(Dr):Xa,p=u[ln]&&u[Gn]?a(Gn,1,ln+Gn):u[ln]?a(ln,1):u[Gn]?a(Gn,1):u[Or]?a(Or,1):u[Zo]?a(Zo,1):Cd,g=u[ri]?a(ri):Xa,y=u[ii]?a(ii):Xa,v=u[Ai]?a(Ai):Xa,x=u[lo]?a(lo):Xa;return function(w){l.setTime(+w);const S=f(l);return i(S,d(l),p(l,S),g(l),y(l),v(l),x(l))}}function vne(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Hf(e,t,n){return t+e*7-(n+6)%7}const xne={[Dn]:e=>e.getFullYear(),[Dr]:e=>Math.floor(e.getMonth()/3),[Qn]:e=>e.getMonth(),[Or]:e=>e.getDate(),[ri]:e=>e.getHours(),[ii]:e=>e.getMinutes(),[Ai]:e=>e.getSeconds(),[lo]:e=>e.getMilliseconds(),[Zo]:e=>rz(e),[ln]:e=>P_(e),[ln+Gn]:(e,t)=>Hf(P_(e),e.getDay(),I_(t)),[Gn]:(e,t)=>Hf(1,e.getDay(),I_(t))},bne={[Dr]:e=>3*e,[ln]:(e,t)=>Hf(e,0,I_(t))};function lz(e,t){return az(e,t||1,xne,bne,mne)}const wne={[Dn]:e=>e.getUTCFullYear(),[Dr]:e=>Math.floor(e.getUTCMonth()/3),[Qn]:e=>e.getUTCMonth(),[Or]:e=>e.getUTCDate(),[ri]:e=>e.getUTCHours(),[ii]:e=>e.getUTCMinutes(),[Ai]:e=>e.getUTCSeconds(),[lo]:e=>e.getUTCMilliseconds(),[Zo]:e=>sz(e),[ln]:e=>L_(e),[Gn]:(e,t)=>Hf(1,e.getUTCDay(),z_(t)),[ln+Gn]:(e,t)=>Hf(L_(e),e.getUTCDay(),z_(t))},Sne={[Dr]:e=>3*e,[ln]:(e,t)=>Hf(e,0,z_(t))};function uz(e,t){return az(e,t||1,wne,Sne,yne)}const kne={[Dn]:Ko,[Dr]:og.every(3),[Qn]:og,[ln]:Nd,[Or]:Hs,[Gn]:Hs,[Zo]:Hs,[ri]:s2,[ii]:i2,[Ai]:zs,[lo]:qf},Ene={[Dn]:Qo,[Dr]:sg.every(3),[Qn]:sg,[ln]:Fd,[Or]:sl,[Gn]:sl,[Zo]:sl,[ri]:a2,[ii]:o2,[Ai]:zs,[lo]:qf};function Md(e){return kne[e]}function Dd(e){return Ene[e]}function cz(e,t,n){return e?e.offset(t,n):void 0}function fz(e,t,n){return cz(Md(e),t,n)}function dz(e,t,n){return cz(Dd(e),t,n)}function hz(e,t,n,r){return e?e.range(t,n,r):void 0}function pz(e,t,n,r){return hz(Md(e),t,n,r)}function gz(e,t,n,r){return hz(Dd(e),t,n,r)}const bp=1e3,wp=bp*60,Sp=wp*60,l2=Sp*24,_ne=l2*7,pM=l2*30,j_=l2*365,mz=[Dn,Qn,Or,ri,ii,Ai,lo],kp=mz.slice(0,-1),Ep=kp.slice(0,-1),_p=Ep.slice(0,-1),Cne=_p.slice(0,-1),$ne=[Dn,ln],gM=[Dn,Qn],yz=[Dn],Xh=[[kp,1,bp],[kp,5,5*bp],[kp,15,15*bp],[kp,30,30*bp],[Ep,1,wp],[Ep,5,5*wp],[Ep,15,15*wp],[Ep,30,30*wp],[_p,1,Sp],[_p,3,3*Sp],[_p,6,6*Sp],[_p,12,12*Sp],[Cne,1,l2],[$ne,1,_ne],[gM,1,pM],[gM,3,3*pM],[yz,1,j_]];function vz(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Bg(t))/n;let i=Td(a=>a[2]).right(Xh,r),o,s;return i===Xh.length?(o=yz,s=dl(t[0]/j_,t[1]/j_,n)):i?(i=Xh[r/Xh[i-1][2]<Xh[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=mz,s=Math.max(dl(t[0],t[1],n),1)),{units:o,step:s}}function vS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function xS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function xz(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Qh(i),f=Zh(i),d=Qh(o),p=Zh(o),g=Qh(s),y=Zh(s),v=Qh(a),x=Zh(a),w=Qh(l),S=Zh(l),E={a:H,A:U,b:V,B:J,c:null,d:wM,e:wM,f:Kne,g:sre,G:lre,H:Gne,I:Yne,j:Xne,L:bz,m:Qne,M:Zne,p:z,q:G,Q:EM,s:_M,S:Jne,u:ere,U:tre,V:nre,w:rre,W:ire,x:null,X:null,y:ore,Y:are,Z:ure,"%":kM},C={a:xe,A:we,b:ve,B:Be,c:null,d:SM,e:SM,f:hre,g:kre,G:_re,H:cre,I:fre,j:dre,L:Sz,m:pre,M:gre,p:Je,q:Ye,Q:EM,s:_M,S:mre,u:yre,U:vre,V:xre,w:bre,W:wre,x:null,X:null,y:Sre,Y:Ere,Z:Cre,"%":kM},$={a:I,A:P,b:K,B:W,c:j,d:xM,e:xM,f:qne,g:vM,G:yM,H:bM,I:bM,j:zne,L:Une,m:Lne,M:jne,p:M,q:Ine,Q:Vne,s:Hne,S:Bne,u:Fne,U:Mne,V:Dne,w:Nne,W:One,x:D,X:L,y:vM,Y:yM,Z:Pne,"%":Wne};E.x=R(n,E),E.X=R(r,E),E.c=R(t,E),C.x=R(n,C),C.X=R(r,C),C.c=R(t,C);function R(le,Me){return function(We){var ce=[],Et=-1,et=0,Nt=le.length,Ut,In,ma;for(We instanceof Date||(We=new Date(+We));++Et<Nt;)le.charCodeAt(Et)===37&&(ce.push(le.slice(et,Et)),(In=mM[Ut=le.charAt(++Et)])!=null?Ut=le.charAt(++Et):In=Ut==="e"?" ":"0",(ma=Me[Ut])&&(Ut=ma(We,In)),ce.push(Ut),et=Et+1);return ce.push(le.slice(et,Et)),ce.join("")}}function A(le,Me){return function(We){var ce=Kh(1900,void 0,1),Et=N(ce,le,We+="",0),et,Nt;if(Et!=We.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Me&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(et=xS(Kh(ce.y,0,1)),Nt=et.getUTCDay(),et=Nt>4||Nt===0?wy.ceil(et):wy(et),et=sl.offset(et,(ce.V-1)*7),ce.y=et.getUTCFullYear(),ce.m=et.getUTCMonth(),ce.d=et.getUTCDate()+(ce.w+6)%7):(et=vS(Kh(ce.y,0,1)),Nt=et.getDay(),et=Nt>4||Nt===0?by.ceil(et):by(et),et=Hs.offset(et,(ce.V-1)*7),ce.y=et.getFullYear(),ce.m=et.getMonth(),ce.d=et.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Nt="Z"in ce?xS(Kh(ce.y,0,1)).getUTCDay():vS(Kh(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Nt+5)%7:ce.w+ce.U*7-(Nt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,xS(ce)):vS(ce)}}function N(le,Me,We,ce){for(var Et=0,et=Me.length,Nt=We.length,Ut,In;Et<et;){if(ce>=Nt)return-1;if(Ut=Me.charCodeAt(Et++),Ut===37){if(Ut=Me.charAt(Et++),In=$[Ut in mM?Me.charAt(Et++):Ut],!In||(ce=In(le,We,ce))<0)return-1}else if(Ut!=We.charCodeAt(ce++))return-1}return ce}function M(le,Me,We){var ce=u.exec(Me.slice(We));return ce?(le.p=f.get(ce[0].toLowerCase()),We+ce[0].length):-1}function I(le,Me,We){var ce=g.exec(Me.slice(We));return ce?(le.w=y.get(ce[0].toLowerCase()),We+ce[0].length):-1}function P(le,Me,We){var ce=d.exec(Me.slice(We));return ce?(le.w=p.get(ce[0].toLowerCase()),We+ce[0].length):-1}function K(le,Me,We){var ce=w.exec(Me.slice(We));return ce?(le.m=S.get(ce[0].toLowerCase()),We+ce[0].length):-1}function W(le,Me,We){var ce=v.exec(Me.slice(We));return ce?(le.m=x.get(ce[0].toLowerCase()),We+ce[0].length):-1}function j(le,Me,We){return N(le,t,Me,We)}function D(le,Me,We){return N(le,n,Me,We)}function L(le,Me,We){return N(le,r,Me,We)}function H(le){return s[le.getDay()]}function U(le){return o[le.getDay()]}function V(le){return l[le.getMonth()]}function J(le){return a[le.getMonth()]}function z(le){return i[+(le.getHours()>=12)]}function G(le){return 1+~~(le.getMonth()/3)}function xe(le){return s[le.getUTCDay()]}function we(le){return o[le.getUTCDay()]}function ve(le){return l[le.getUTCMonth()]}function Be(le){return a[le.getUTCMonth()]}function Je(le){return i[+(le.getUTCHours()>=12)]}function Ye(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var Me=R(le+="",E);return Me.toString=function(){return le},Me},parse:function(le){var Me=A(le+="",!1);return Me.toString=function(){return le},Me},utcFormat:function(le){var Me=R(le+="",C);return Me.toString=function(){return le},Me},utcParse:function(le){var Me=A(le+="",!0);return Me.toString=function(){return le},Me}}}var mM={"-":"",_:" ",0:"0"},En=/^\s*\d+/,Ane=/^%/,Rne=/[\\^$*+?|[\]().{}]/g;function ut(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Tne(e){return e.replace(Rne,"\\$&")}function Qh(e){return new RegExp("^(?:"+e.map(Tne).join("|")+")","i")}function Zh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Nne(e,t,n){var r=En.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Fne(e,t,n){var r=En.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Mne(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Dne(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function One(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function yM(e,t,n){var r=En.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vM(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pne(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ine(e,t,n){var r=En.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Lne(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xM(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zne(e,t,n){var r=En.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bM(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function jne(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Bne(e,t,n){var r=En.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Une(e,t,n){var r=En.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qne(e,t,n){var r=En.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wne(e,t,n){var r=Ane.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Vne(e,t,n){var r=En.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Hne(e,t,n){var r=En.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wM(e,t){return ut(e.getDate(),t,2)}function Gne(e,t){return ut(e.getHours(),t,2)}function Yne(e,t){return ut(e.getHours()%12||12,t,2)}function Xne(e,t){return ut(1+Hs.count(Ko(e),e),t,3)}function bz(e,t){return ut(e.getMilliseconds(),t,3)}function Kne(e,t){return bz(e,t)+"000"}function Qne(e,t){return ut(e.getMonth()+1,t,2)}function Zne(e,t){return ut(e.getMinutes(),t,2)}function Jne(e,t){return ut(e.getSeconds(),t,2)}function ere(e){var t=e.getDay();return t===0?7:t}function tre(e,t){return ut(Nd.count(Ko(e)-1,e),t,2)}function wz(e){var t=e.getDay();return t>=4||t===0?Wf(e):Wf.ceil(e)}function nre(e,t){return e=wz(e),ut(Wf.count(Ko(e),e)+(Ko(e).getDay()===4),t,2)}function rre(e){return e.getDay()}function ire(e,t){return ut(by.count(Ko(e)-1,e),t,2)}function ore(e,t){return ut(e.getFullYear()%100,t,2)}function sre(e,t){return e=wz(e),ut(e.getFullYear()%100,t,2)}function are(e,t){return ut(e.getFullYear()%1e4,t,4)}function lre(e,t){var n=e.getDay();return e=n>=4||n===0?Wf(e):Wf.ceil(e),ut(e.getFullYear()%1e4,t,4)}function ure(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ut(t/60|0,"0",2)+ut(t%60,"0",2)}function SM(e,t){return ut(e.getUTCDate(),t,2)}function cre(e,t){return ut(e.getUTCHours(),t,2)}function fre(e,t){return ut(e.getUTCHours()%12||12,t,2)}function dre(e,t){return ut(1+sl.count(Qo(e),e),t,3)}function Sz(e,t){return ut(e.getUTCMilliseconds(),t,3)}function hre(e,t){return Sz(e,t)+"000"}function pre(e,t){return ut(e.getUTCMonth()+1,t,2)}function gre(e,t){return ut(e.getUTCMinutes(),t,2)}function mre(e,t){return ut(e.getUTCSeconds(),t,2)}function yre(e){var t=e.getUTCDay();return t===0?7:t}function vre(e,t){return ut(Fd.count(Qo(e)-1,e),t,2)}function kz(e){var t=e.getUTCDay();return t>=4||t===0?Vf(e):Vf.ceil(e)}function xre(e,t){return e=kz(e),ut(Vf.count(Qo(e),e)+(Qo(e).getUTCDay()===4),t,2)}function bre(e){return e.getUTCDay()}function wre(e,t){return ut(wy.count(Qo(e)-1,e),t,2)}function Sre(e,t){return ut(e.getUTCFullYear()%100,t,2)}function kre(e,t){return e=kz(e),ut(e.getUTCFullYear()%100,t,2)}function Ere(e,t){return ut(e.getUTCFullYear()%1e4,t,4)}function _re(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Vf(e):Vf.ceil(e),ut(e.getUTCFullYear()%1e4,t,4)}function Cre(){return"+0000"}function kM(){return"%"}function EM(e){return+e}function _M(e){return Math.floor(+e/1e3)}var af,I3,Ez,L3,_z;$re({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $re(e){return af=xz(e),I3=af.format,Ez=af.parse,L3=af.utcFormat,_z=af.utcParse,af}function Cp(e){const t={};return n=>t[n]||(t[n]=e(n))}function Are(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Rre(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function Rre(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Cz(e){const t=Cp(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Uu(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Are(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Uu(s??",f");const a=dl(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=KL(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=QL(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=XL(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let B_;$z();function $z(){return B_=Cz({format:r2,formatPrefix:F3})}function Az(e){return Cz(YL(e))}function Sy(e){return arguments.length?B_=Az(e):B_}function CM(e,t,n){n=n||{},Ee(n)||re(`Invalid time multi-format specifier: ${n}`);const r=t(Ai),i=t(ii),o=t(ri),s=t(Or),a=t(ln),l=t(Qn),u=t(Dr),f=t(Dn),d=e(n[lo]||".%L"),p=e(n[Ai]||":%S"),g=e(n[ii]||"%I:%M"),y=e(n[ri]||"%I %p"),v=e(n[Or]||n[Gn]||"%a %d"),x=e(n[ln]||"%b %d"),w=e(n[Qn]||"%B"),S=e(n[Dr]||"%B"),E=e(n[Dn]||"%Y");return C=>(r(C)<C?d:i(C)<C?p:o(C)<C?g:s(C)<C?y:l(C)<C?a(C)<C?v:x:f(C)<C?u(C)<C?w:S:E)(C)}function Rz(e){const t=Cp(e.format),n=Cp(e.utcFormat);return{timeFormat:r=>ke(r)?t(r):CM(t,Md,r),utcFormat:r=>ke(r)?n(r):CM(n,Dd,r),timeParse:Cp(e.parse),utcParse:Cp(e.utcParse)}}let U_;Tz();function Tz(){return U_=Rz({format:I3,parse:Ez,utcFormat:L3,utcParse:_z})}function Nz(e){return Rz(xz(e))}function ag(e){return arguments.length?U_=Nz(e):U_}const q_=(e,t)=>He({},e,t);function Fz(e,t){const n=e?Az(e):Sy(),r=t?Nz(t):ag();return q_(n,r)}function z3(e,t){const n=arguments.length;return n&&n!==2&&re("defaultLocale expects either zero or two arguments."),n?q_(Sy(e),ag(t)):q_(Sy(),ag())}function Tre(){return $z(),Tz(),z3()}const Nre=/^(data:|([A-Za-z]+:)?\/\/)/,Fre=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Mre=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$M="file://";function Dre(e,t){return n=>({options:n||{},sanitize:Pre,load:Ore,fileAccess:!1,file:Ire(),http:zre(e)})}async function Ore(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Pre(e,t){t=He({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=Fre.test(e.replace(Mre,""));(e==null||typeof e!="string"||!a)&&re("Sanitize failure, invalid URI: "+ge(e));const l=Nre.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith($M))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice($M.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Ire(e){return Lre}async function Lre(){re("No file system access.")}function zre(e){return e?async function(t,n){const r=He({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ge(o[i])?o[i]():o.text():re(o.status+""+o.statusText)}:jre}async function jre(){re("No HTTP fetch method available.")}const Bre=e=>e!=null&&e===e,Ure=e=>e==="true"||e==="false"||e===!0||e===!1,qre=e=>!Number.isNaN(Date.parse(e)),Mz=e=>!Number.isNaN(+e)&&!(e instanceof Date),Wre=e=>Mz(e)&&Number.isInteger(+e),W_={boolean:A3,integer:Yn,number:Yn,date:R3,string:T3,unknown:er},H0=[Ure,Wre,Mz,qre],Vre=["boolean","integer","number","date"];function Dz(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=H0.length,i=H0.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&Bre(l)&&!H0[a](l)&&(i[a]=0,++s,s===H0.length))return"string";return Vre[i.reduce((o,s)=>o===0?s:o,0)-1]}function Oz(e,t){return t.reduce((n,r)=>(n[r]=Dz(e,r),n),{})}function AM(e){const t=function(n,r){const i={delimiter:e};return j3(n,r?He(r,i):i)};return t.responseType="text",t}function j3(e,t){return t.header&&(e=t.header.map(ge).join(t.delimiter)+`
`+e),DL(t.delimiter).parse(e+"")}j3.responseType="text";function Hre(e){return typeof Buffer=="function"&&Ge(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function B3(e,t){const n=t&&t.property?Ci(t.property):er;return Ee(e)&&!Hre(e)?Gre(n(e),t):n(JSON.parse(e))}B3.responseType="json";function Gre(e,t){return!ie(e)&&$L(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Yre={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Pz(e,t){let n,r,i,o;return e=B3(e,t),t&&t.feature?(n=Rte,i=t.feature):t&&t.mesh?(n=Nte,i=t.mesh,o=Yre[t.filter]):re("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):re("Invalid TopoJSON object: "+i),r&&r.features||[r]}Pz.responseType="json";const z1={dsv:j3,csv:AM(","),tsv:AM("	"),json:B3,topojson:Pz};function U3(e,t){return arguments.length>1?(z1[e]=t,this):_e(z1,e)?z1[e]:null}function Iz(e){const t=U3(e);return t&&t.responseType||"text"}function Lz(e,t,n,r){t=t||{};const i=U3(t.type||"json");return i||re("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Xre(e,t.parse,n,r),_e(e,"columns")&&delete e.columns,e}function Xre(e,t,n,r){if(!e.length)return;const i=ag();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,f,d;t==="auto"&&(t=Oz(e,o)),o=Object.keys(t);const p=o.map(g=>{const y=t[g];let v,x;if(y&&(y.startsWith("date:")||y.startsWith("utc:")))return v=y.split(/:(.+)?/,2),x=v[1],(x[0]==="'"&&x[x.length-1]==="'"||x[0]==='"'&&x[x.length-1]==='"')&&(x=x.slice(1,-1)),(v[0]==="utc"?r:n)(x);if(!W_[y])throw Error("Illegal format pattern: "+g+":"+y);return W_[y]});for(l=0,f=e.length,d=o.length;l<f;++l)for(s=e[l],u=0;u<d;++u)a=o[u],s[a]=p[u](s[a])}const u2=Dre(typeof fetch<"u"&&fetch);function c2(e){const t=e||er,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function j1(e,t){try{await t(e)}catch(n){e.error(n)}}const zz=Symbol("vega_id");let Kre=1;function f2(e){return!!(e&&Oe(e))}function Oe(e){return e[zz]}function jz(e,t){return e[zz]=t,e}function dt(e){const t=e===Object(e)?e:{data:e};return Oe(t)?t:jz(t,Kre++)}function q3(e){return d2(e,dt({}))}function d2(e,t){for(const n in e)t[n]=e[n];return t}function Bz(e,t){return jz(t,Oe(e))}function hc(e,t){return e?t?(n,r)=>e(n,r)||Oe(t(n))-Oe(t(r)):(n,r)=>e(n,r)||Oe(n)-Oe(r):null}function Uz(e){return e&&e.constructor===pc}function pc(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:pc,insert(a){const l=Se(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=Ge(a)?r:t,u=Se(a),f=u.length;for(let d=0;d<f;++d)l.push(u[d]);return this},modify(a,l,u){const f={field:l,value:tr(u)};return Ge(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return Ge(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},f={};let d,p,g,y,v,x;for(d=0,p=l.length;d<p;++d)u[Oe(l[d])]=1;for(d=0,p=t.length;d<p;++d)v=t[d],u[Oe(v)]=-1;for(d=0,p=r.length;d<p;++d)y=r[d],l.forEach(S=>{y(S)&&(u[Oe(S)]=-1)});for(d=0,p=e.length;d<p;++d)v=e[d],x=Oe(v),u[x]?u[x]=1:a.add.push(dt(e[d]));for(d=0,p=l.length;d<p;++d)v=l[d],u[Oe(v)]<0&&a.rem.push(v);function w(S,E,C){C?S[E]=C(S):a.encode=E,s||(f[Oe(S)]=S)}for(d=0,p=n.length;d<p;++d)g=n[d],v=g.tuple,y=g.field,x=u[Oe(v)],x>0&&(w(v,y,g.value),a.modifies(y));for(d=0,p=i.length;d<p;++d)g=i[d],y=g.filter,l.forEach(S=>{y(S)&&u[Oe(S)]>0&&w(S,g.field,g.value)}),a.modifies(g.field);if(s)a.mod=t.length||r.length?l.filter(S=>u[Oe(S)]>0):l.slice();else for(x in f)a.mod.push(f[x]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const B1="_:mod:_";function h2(){Object.defineProperty(this,B1,{writable:!0,value:{}})}h2.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[B1];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=ie(n)?1+n.length:-1),i},modified(e,t){const n=this[B1];if(arguments.length){if(ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[B1]={},this}};let Qre=0;const Zre="pulse",Jre=new h2,eie=1,tie=2;function St(e,t,n,r){this.id=++Qre,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function RM(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}St.prototype={targets(){return this._targets||(this._targets=c2(zg))},set(e){return this.value!==e?(this.value=e,1):0},skip:RM(eie),modified:RM(tie),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new h2,i=this._argops=this._argops||[],o=[];let s,a,l,u;const f=(d,p,g)=>{g instanceof St?(g!==this&&(t&&g.targets().add(this),o.push(g)),i.push({op:g,name:d,index:p})):r.set(d,p,g)};for(s in e)if(a=e[s],s===Zre)Se(a).forEach(d=>{d instanceof St?d!==this&&(d.targets().add(this),o.push(d)):re("Pulse parameters must be operator instances.")}),this.source=a;else if(ie(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)f(s,u,a[u]);else f(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||Jre,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function nie(e,t,n,r){let i=1,o;return e instanceof St?o=e:e&&e.prototype instanceof St?o=new e:Ge(e)?o=new St(null,e):(i=0,o=new St(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function rie(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let iie=0;function p2(e,t,n){this.id=++iie,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ua(e,t,n){return new p2(e,t,n)}p2.prototype={_filter:$i,_apply:er,targets(){return this._targets||(this._targets=c2(zg))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ua(e);return this.targets().add(t),t},apply(e){const t=Ua(null,e);return this.targets().add(t),t},merge(){const e=Ua();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ua();return this.targets().add(Ua(null,null,_3(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ua(null,null,()=>n=!0)),t.targets().add(Ua(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=$i,this._targets=null}};function oie(e,t,n,r){const i=this,o=Ua(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Se(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function sie(e,t){const n=this.locale();return Lz(e,t,n.timeParse,n.utcParse)}function aie(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function lie(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Iz(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function uie(e,t,n){const r=this,i=r._pending||cie(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove($i).insert(o.data||[])),i.done(),o}function cie(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const fie={skip:!0};function die(e,t,n,r,i){return(e instanceof St?pie:hie)(this,e,t,n,r,i),this}function hie(e,t,n,r,i,o){const s=He({},o,fie);let a,l;Ge(n)||(n=tr(n)),r===void 0?a=u=>e.touch(n(u)):Ge(r)?(l=new St(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),d=l.value;Uz(d)?e.pulse(f,d,o):e.update(f,d,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function pie(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new St(null,gie(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function gie(e,t){return t=Ge(t)?t:tr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function mie(e){e.rank=++this._rank}function yie(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&re("Cycle detected in dataflow graph.")}const ky={},Oo=1,Va=2,Fs=4,vie=Oo|Va,TM=Oo|Fs,lf=Oo|Va|Fs,NM=8,Jh=16,FM=32,MM=64;function al(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function bS(e,t){const n=[];return Wa(e,t,r=>n.push(r)),n}function DM(e,t){const n={};return e.visit(t,r=>{n[Oe(r)]=1}),r=>n[Oe(r)]?null:r}function G0(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}al.prototype={StopPropagation:ky,ADD:Oo,REM:Va,MOD:Fs,ADD_REM:vie,ADD_MOD:TM,ALL:lf,REFLOW:NM,SOURCE:Jh,NO_SOURCE:FM,NO_FIELDS:MM,fork(e){return new al(this.dataflow).init(this,e)},clone(){const e=this.fork(lf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(lf|Jh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new al(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&MM)&&(n.fields=e.fields),t&Oo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Va?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Fs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&FM?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||lf;return t&Oo&&this.add.length||t&Va&&this.rem.length||t&Fs&&this.mod.length},reflow(e){if(e)return this.fork(lf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Fs,DM(this,Oo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Oo&&(n.addF=G0(n.addF,t)),e&Va&&(n.remF=G0(n.remF,t)),e&Fs&&(n.modF=G0(n.modF,t)),e&Jh&&(n.srcF=G0(n.srcF,t)),n},materialize(e){e=e||lf;const t=this;return e&Oo&&t.addF&&(t.add=bS(t.add,t.addF),t.addF=null),e&Va&&t.remF&&(t.rem=bS(t.rem,t.remF),t.remF=null),e&Fs&&t.modF&&(t.mod=bS(t.mod,t.modF),t.modF=null),e&Jh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Jh)return Wa(n.source,n.srcF,r),n;e&Oo&&Wa(n.add,n.addF,r),e&Va&&Wa(n.rem,n.remF,r),e&Fs&&Wa(n.mod,n.modF,r);const i=n.source;if(e&NM&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Wa(i,DM(n,TM),r):Wa(i,n.srcF,r))}return n}};function W3(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ye(W3,al,{fork(e){const t=new al(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ie(e)?e.some(r=>n[r]):n[e]:0},filter(){re("MultiPulse does not support filtering.")},materialize(){re("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function xie(e,t,n){const r=this,i=[];if(r._pulse)return qz(r);if(r._pending&&await r._pending,t&&await j1(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new al(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=c2(zg);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=ky),l!==ky&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++s}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((d,p)=>p.priority-d.priority);r._postrun=[];for(let d=0;d<f.length;++d)await j1(r,f[d].callback)}return n&&await j1(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(d=>{try{d(r)}catch(p){r.error(p)}})})),r}async function bie(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function wie(e,t,n){return this._pulse?qz(this):(this.evaluate(e,t,n),this)}function Sie(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function qz(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function kie(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Eie(e,t){const n=e.source,r=this._clock;return n&&ie(n)?new W3(this,r,n.map(i=>i.pulse),t):this._input[e.id]||_ie(this._pulse,n&&n.pulse)}function _ie(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ky&&(e.source=t.source),e)}const V3={skip:!1,force:!1};function Cie(e,t){const n=t||V3;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function $ie(e,t,n){const r=n||V3;return(e.set(t)||r.force)&&this.touch(e,r),this}function Aie(e,t,n){this.touch(e,n||V3);const r=new al(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Rie(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Wz(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Tie(t,0,e)):r=n,r}}}function Wz(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function Tie(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,Wz(e,r,t,n)}function Nf(){this.logger(b3()),this.logLevel(v3),this._clock=0,this._rank=0,this._locale=z3();try{this._loader=u2()}catch{}this._touched=c2(zg),this._input={},this._pulse=null,this._heap=Rie((e,t)=>e.qrank-t.qrank),this._postrun=[]}function ep(e){return function(){return this._log[e].apply(this,arguments)}}Nf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:ep("error"),warn:ep("warn"),info:ep("info"),debug:ep("debug"),logLevel:ep("level"),cleanThreshold:1e4,add:nie,connect:rie,rank:mie,rerank:yie,pulse:Aie,touch:Cie,update:$ie,changeset:pc,ingest:aie,parse:sie,preload:uie,request:lie,events:oie,on:die,evaluate:xie,run:wie,runAsync:bie,runAfter:Sie,_enqueue:kie,_getPulse:Eie};function te(e,t){St.call(this,e,null,t)}ye(te,St,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Gf={};function Vz(e){const t=Hz(e);return t&&t.Definition||null}function Hz(e){return e=e&&e.toLowerCase(),_e(Gf,e)?Gf[e]:null}function*Gz(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function H3(e,t,n){const r=Float64Array.from(Gz(e,n));return r.sort(Vs),t.map(i=>qL(r,i))}function G3(e,t){return H3(e,[.25,.5,.75],t)}function Y3(e,t){const n=e.length,r=zte(e,t),i=G3(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Yz(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,f,d,p;const g=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(f=g/t,d=0,p=e.steps.length;d<p&&e.steps[d]<f;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(g)/r)-l));Math.ceil(g/a)>t;)a*=n;for(d=0,p=i.length;d<p;++d)f=a/i[d],f>=u&&g/f<=t&&(a=f)}f=Math.log(a);const y=f>=0?0:~~(-f/r)+1,v=Math.pow(n,-y-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/a+v)*a,o=o<f?f-a:f,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ri=Math.random;function Nie(e){Ri=e}function Xz(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Gz(e,r)),o=i.length,s=t;let a,l,u,f;for(u=0,f=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Ri()*o)];f[u]=a/o}return f.sort(Vs),[O_(f,n/2),O_(f,1-n/2)]}function Kz(e,t,n,r){r=r||(p=>p);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,f=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=f){for(u=(l+u)/2;s<a;++s)o[s]=u;f=d+t,l=d}u=d}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?Fie(o,t+t/4):o}function Fie(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function Mie(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Die(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Ri())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const Qz=Math.sqrt(2*Math.PI),Oie=Math.SQRT2;let tp=NaN;function g2(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(tp===tp)n=tp,tp=NaN;else{do n=Ri()*2-1,r=Ri()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,tp=r*o}return e+n*t}function X3(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Qz)}function m2(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function y2(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Oie*Pie(2*e-1)}function Pie(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function K3(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>g2(n,r),pdf:o=>X3(o,n,r),cdf:o=>m2(o,n,r),icdf:o=>y2(o,n,r)};return i.mean(e).stdev(t)}function Q3(e,t){const n=K3();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Y3(e)),i):t},sample(){return e[~~(Ri()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Z3(e,t){return e=e||0,t=t??1,Math.exp(e+g2()*t)}function J3(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Qz*e)}function eA(e,t,n){return m2(Math.log(e),t,n)}function tA(e,t,n){return Math.exp(y2(e,t,n))}function Zz(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Z3(n,r),pdf:o=>J3(o,n,r),cdf:o=>eA(o,n,r),icdf:o=>tA(o,n,r)};return i.mean(e).stdev(t)}function Jz(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ri();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function nA(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ri()}function rA(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function iA(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function oA(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function ej(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>nA(n,r),pdf:o=>rA(o,n,r),cdf:o=>iA(o,n,r),icdf:o=>oA(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function sA(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Ug(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function v2(e,t,n,r){e=e.filter(g=>{let y=t(g),v=n(g);return y!=null&&(y=+y)>=y&&v!=null&&(v=+v)>=v}),r&&e.sort((g,y)=>t(g)-t(y));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,f,d,p;for(p of e)o[a]=f=+t(p),s[a]=d=+n(p),++a,l+=(f-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function qg(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Od(e,t,n,r,i){let o=0,s=0;return qg(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;o+=u*u,s+=f*f}),1-o/s}function aA(e,t,n){let r=0,i=0,o=0,s=0,a=0;qg(e,t,n,(f,d)=>{++a,r+=(f-r)/a,i+=(d-i)/a,o+=(f*d-o)/a,s+=(f*f-s)/a});const l=Ug(r,i,o,s),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:Od(e,t,n,i,u)}}function tj(e,t,n){let r=0,i=0,o=0,s=0,a=0;qg(e,t,n,(f,d)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(d-i)/a,o+=(f*d-o)/a,s+=(f*f-s)/a});const l=Ug(r,i,o,s),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:Od(e,t,n,i,u)}}function nj(e,t,n){const[r,i,o,s]=v2(e,t,n);let a=0,l=0,u=0,f=0,d=0,p,g,y;qg(e,t,n,(S,E)=>{p=r[d++],g=Math.log(E),y=p*E,a+=(E*g-a)/d,l+=(y-l)/d,u+=(y*g-u)/d,f+=(p*y-f)/d});const[v,x]=Ug(l/s,a/s,u/s,f/s),w=S=>Math.exp(v+x*(S-o));return{coef:[Math.exp(v-x*o),x],predict:w,rSquared:Od(e,t,n,s,w)}}function rj(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;qg(e,t,n,(d,p)=>{const g=Math.log(d),y=Math.log(p);++l,r+=(g-r)/l,i+=(y-i)/l,o+=(g*y-o)/l,s+=(g*g-s)/l,a+=(p-a)/l});const u=Ug(r,i,o,s),f=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:Od(e,t,n,a,f)}}function lA(e,t,n){const[r,i,o,s]=v2(e,t,n),a=r.length;let l=0,u=0,f=0,d=0,p=0,g,y,v,x;for(g=0;g<a;)y=r[g],v=i[g++],x=y*y,l+=(x-l)/g,u+=(x*y-u)/g,f+=(x*x-f)/g,d+=(y*v-d)/g,p+=(x*v-p)/g;const w=f-l*l,S=l*w-u*u,E=(p*l-d*u)/S,C=(d*w-p*u)/S,$=-E*l,R=A=>(A=A-o,E*A*A+C*A+$+s);return{coef:[$-C*o+E*o*o+s,C-2*E*o,E],predict:R,rSquared:Od(e,t,n,s,R)}}function ij(e,t,n,r){if(r===0)return sA(e,t,n);if(r===1)return aA(e,t,n);if(r===2)return lA(e,t,n);const[i,o,s,a]=v2(e,t,n),l=i.length,u=[],f=[],d=r+1;let p,g,y,v,x;for(p=0;p<d;++p){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p)*o[y];for(u.push(v),x=new Float64Array(d),g=0;g<d;++g){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p+g);x[g]=v}f.push(x)}f.push(u);const w=Lie(f),S=E=>{E-=s;let C=a+w[0]+w[1]*E+w[2]*E*E;for(p=3;p<d;++p)C+=w[p]*Math.pow(E,p);return C};return{coef:Iie(d,w,-s,a),predict:S,rSquared:Od(e,t,n,a,S)}}function Iie(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function Lie(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const OM=2,PM=1e-12;function oj(e,t,n,r){const[i,o,s,a]=v2(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1);for(let g=-1;++g<=OM;){const y=[0,u-1];for(let x=0;x<l;++x){const w=i[x],S=y[0],E=y[1],C=w-i[S]>i[E]-w?S:E;let $=0,R=0,A=0,N=0,M=0;const I=1/Math.abs(i[C]-w||1);for(let W=S;W<=E;++W){const j=i[W],D=o[W],L=zie(Math.abs(w-j)*I)*p[W],H=j*L;$+=L,R+=H,A+=D*L,N+=D*H,M+=j*H}const[P,K]=Ug(R/$,A/$,N/$,M/$);f[x]=P+K*w,d[x]=Math.abs(o[x]-f[x]),jie(i,x+1,y)}if(g===OM)break;const v=WL(d);if(Math.abs(v)<PM)break;for(let x=0,w,S;x<l;++x)w=d[x]/(6*v),p[x]=w>=1?PM:(S=1-w*w)*S}return Bie(i,f,s,a)}function zie(e){return(e=1-e*e*e)*e*e}function jie(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function Bie(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const Uie=.5*Math.PI/180;function x2(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=v=>[v,e(v)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],f=[];if(n===r){for(let v=1;v<r;++v)u.push(i(o+v/n*a));return u.push(i(s)),u}else{f.push(i(s));for(let v=n;--v>0;)f.push(i(o+v/n*a))}let d=u[0],p=f[f.length-1];const g=1/a,y=qie(d[1],f);for(;p;){const v=i((d[0]+p[0])/2);v[0]-d[0]>=l&&Wie(d,v,p,g,y)>Uie?f.push(v):(d=p,u.push(p),f.pop()),p=f[f.length-1]}return u}function qie(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function Wie(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function Vie(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function V_(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Vie(e)}function sj(e,t,n){return n||e+(t?"_"+t:"")}const wS=()=>{},Hie={init:wS,add:wS,rem:wS,idx:0},lg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Wg=Object.keys(lg).filter(e=>e!=="__count__");function Gie(e,t){return(n,r)=>He({name:e,aggregate_param:r,out:n||e},Hie,t)}[...Wg,"__count__"].forEach(e=>{lg[e]=Gie(e,lg[e])});function aj(e,t,n){return lg[e](n,t)}function lj(e,t){return e.idx-t.idx}function Yie(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=lg[i]())})};return e.forEach(n),Object.values(t).sort(lj)}function Xie(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Kie(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Qie(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Zie(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function uj(e,t){const n=t||er,r=Yie(e),i=e.slice().sort(lj);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=Xie,o.prototype.add=Kie,o.prototype.rem=Qie,o.prototype.set=Zie,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function uA(e){this._key=e?Ci(e):Oe,this.reset()}const Pn=uA.prototype;Pn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Pn.add=function(e){this._add.push(e)};Pn.rem=function(e){this._rem.push(e)};Pn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Pn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",_e(n,o)||(n[o]=1,++i);return i};Pn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=_L(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Pn.argmin=function(e){return this.extent(e)[0]||{}};Pn.argmax=function(e){return this.extent(e)[1]||{}};Pn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Pn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Pn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=G3(this.values(),e),this._get=e),this._q};Pn.q1=function(e){return this.quartile(e)[0]};Pn.q2=function(e){return this.quartile(e)[1]};Pn.q3=function(e){return this.quartile(e)[2]};Pn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Xz(this.values(),1e3,.05,e),this._get=e),this._ci};Pn.ci0=function(e){return this.ci(e)[0]};Pn.ci1=function(e){return this.ci(e)[1]};function hl(e){te.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}hl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wg},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ye(hl,te,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,f,d;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][d=f[n[u]]]=d}o(e._prev),o(t);function s(a,l,u){const f=n[u],d=r[u++];for(const p in d){const g=a?a+"|"+p:p;l[f]=d[p],u<i?s(g,l,u):t[g]||e.cell(g,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(S){const E=Se(Kn(S)),C=E.length;let $=0,R;for(;$<C;++$)r[R=E[$]]||(r[R]=1,t.push(R))}this._dims=Se(e.groupby),this._dnames=this._dims.map(S=>{const E=Gt(S);return i(S),n.push(E),E}),this.cellkey=e.key?e.key:V_(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,f={};let d,p,g,y,v,x,w;for(u!==s.length&&re("Unmatched number of fields and aggregate ops."),w=0;w<u;++w){if(d=o[w],p=s[w],g=a[w]||null,d==null&&p!=="count"&&re("Null aggregate field specified."),v=Gt(d),x=sj(p,v,l[w]),n.push(x),p==="count"){this._counts.push(x);continue}y=f[v],y||(i(d),y=f[v]=[],y.field=d,this._measures.push(y)),p!=="count"&&(this._countOnly=!1),y.push(aj(p,g,x))}return this._measures=this._measures.map(S=>uj(S,S.field)),Object.create(null)},cellkey:V_(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new uA),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?Bz(t.tuple,o):dt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,f,d;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(f=0,d=this._alen;f<d;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,d=this._mlen;f<d;++f)l=n[f],(l.num===0&&i?s:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Jie=1e-14;function cA(e){te.call(this,null,e)}cA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ye(cA,te,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const d=r(f);f[a]=d,f[l]=d==null?null:i+o*(1+(d-i)/o)}:f=>f[a]=r(f)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Yz(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let f=Yn(t(u));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(Jie+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=jr(l,Kn(t),e.name||"bin_"+Gt(t))}});function cj(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!s[r(f)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?TL(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function fA(e){te.call(this,[],e)}fA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ye(fA,te,{transform(e,t){const n=t.fork(t.ALL),r=cj(Oe,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(hc(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function fj(e){St.call(this,null,eoe,e)}ye(fj,St);function eoe(e){return this.value&&!e.modified()?this.value:E3(e.fields,e.orders)}function dA(e){te.call(this,null,e)}dA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function toe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ye(dA,te,{transform(e,t){const n=d=>p=>{for(var g=toe(a(p),e.case,o)||[],y,v=0,x=g.length;v<x;++v)s.test(y=g[v])||d(y)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=dt({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function hA(e){te.call(this,null,e)}hA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ye(hA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=noe(a,i,o,e.filter||$i)):n.mod=a,n.source=this.value,n.modifies(r)}});function noe(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(dt(o)),o={},o[t]=u);return i}const IM={kde:Q3,mixture:Jz,normal:K3,lognormal:Zz,uniform:ej},roe="distributions",LM="function",ioe="field";function dj(e,t){const n=e[LM];_e(IM,n)||re("Unknown distribution function: "+n);const r=IM[n]();for(const i in e)i===ioe?r.data((e.from||t()).map(e[i])):i===roe?r[i](e[i].map(o=>dj(o,t))):typeof r[i]===LM&&r[i](e[i]);return r}function pA(e){te.call(this,null,e)}const hj=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ooe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:hj},{name:"weights",type:"number",array:!0}]};pA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:hj.concat(ooe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(pA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=dj(e.distribution,soe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&re("Invalid density method: "+s),!e.extent&&!r.data&&re("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Xo(r.data()),u=x2(s,l,i,o).map(f=>{const d={};return d[a[0]]=f[0],d[a[1]]=f[1],dt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function soe(e){return()=>e.materialize(e.SOURCE).source}function pj(e,t){return e?e.map((n,r)=>t[r]||Gt(n)):null}function gA(e,t,n){const r=[],i=d=>d(l);let o,s,a,l,u,f;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),f=o[u],f||(o[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const gj="bin";function mA(e){te.call(this,null,e)}mA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:gj}]};const aoe=(e,t)=>Bg(Xo(e,t))/30;ye(mA,te,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=gA(t.source,e.groupby,er),i=e.smooth||!1,o=e.field,s=e.step||aoe(n,o),a=hc((y,v)=>o(y)-o(v)),l=e.as||gj,u=r.length;let f=1/0,d=-1/0,p=0,g;for(;p<u;++p){const y=r[p].sort(a);g=-1;for(const v of Kz(y,s,i,o))v<f&&(f=v),v>d&&(d=v),y[++g][l]=v}return this.value={start:f,stop:d,step:s},t.reflow(!0).modifies(l)}});function mj(e){St.call(this,null,loe,e),this.modified(!0)}ye(mj,St);function loe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:jr(n=>t(n,e),Kn(t),Gt(t))}function yA(e){te.call(this,[void 0,void 0],e)}yA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ye(yA,te,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Yn(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Gt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function vA(e,t){St.call(this,e),this.parent=t,this.count=0}ye(vA,St,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function b2(e){te.call(this,{},e),this._keys=Rd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ye(b2,te,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=_e(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new vA(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Oe(l),f=o.get(u);f!==void 0&&(o.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(Oe(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Oe(l),f=o.get(u),d=r(l);f===d?a(d).mod(l):(o.set(u,d),a(f).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Oe(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Oe(l),f=o.get(u),d=r(l);f!==d&&(o.set(u,d),a(f).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function yj(e){St.call(this,null,uoe,e)}ye(yj,St);function uoe(e){return this.value&&!e.modified()?this.value:ie(e.name)?Se(e.name).map(t=>Ci(t)):Ci(e.name,e.as)}function xA(e){te.call(this,Rd(),e)}xA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ye(xA,te,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const p=Oe(d);r.has(p)?r.delete(p):s.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):r.set(Oe(d),1)});function f(d){const p=Oe(d),g=l(d,e),y=r.get(p);g&&y?(r.delete(p),o.push(d)):!g&&!y?(r.set(p,1),s.push(d)):u&&g&&!y&&a.push(d)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function bA(e){te.call(this,[],e)}bA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ye(bA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=pj(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(y=>y(a)),u=l.reduce((y,v)=>Math.max(y,v.length),0);let f=0,d,p,g;for(;f<u;++f){for(p=q3(a),d=0;d<s;++d)p[i[d]]=(g=l[d][f])==null?null:g;o&&(p[o]=f),n.add.push(p)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function wA(e){te.call(this,[],e)}wA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ye(wA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Gt),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,d;f<l;++f)d=q3(u),d[s]=i[f],d[a]=r[f](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function SA(e){te.call(this,null,e)}SA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ye(SA,te,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function vj(e){te.call(this,[],e)}ye(vj,te,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=dt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Y0={value:"value",median:WL,mean:Vte,min:D_,max:Tu},coe=[];function kA(e){te.call(this,[],e)}kA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function foe(e){var t=e.method||Y0.value,n;if(Y0[t]==null)re("Unrecognized imputation method: "+t);else return t===Y0.value?(n=e.value!==void 0?e.value:0,()=>n):Y0[t]}function doe(e){const t=e.field;return n=>n?t(n):NaN}ye(kA,te,{transform(e,t){var n=t.fork(t.ALL),r=foe(e),i=doe(e),o=Gt(e.field),s=Gt(e.key),a=(e.groupby||[]).map(Gt),l=hoe(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,d=l.domain.length,p,g,y,v,x,w,S,E,C,$;for(x=0,E=l.length;x<E;++x)for(p=l[x],y=p.values,g=NaN,S=0;S<d;++S)if(p[S]==null){for(v=l.domain[S],$={_impute:!0},w=0,C=y.length;w<C;++w)$[a[w]]=y[w];$[s]=v,$[o]=Number.isNaN(g)?g=r(p,i):g,u.push(dt($))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function hoe(e,t,n,r){var i=w=>w(x),o=[],s=r?r.slice():[],a={},l={},u,f,d,p,g,y,v,x;for(s.forEach((w,S)=>a[w]=S+1),p=0,v=e.length;p<v;++p)x=e[p],y=n(x),g=a[y]||(a[y]=s.push(y)),f=(u=t?t.map(i):coe)+"",(d=l[f])||(d=l[f]=[],o.push(d),d.values=u),d[g-1]=x;return o.domain=s,o}function EA(e){hl.call(this,e)}EA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ye(EA,hl,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{He(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function _A(e){te.call(this,null,e)}_A.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(_A,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=gA(r,e.groupby,e.field),o=(e.groupby||[]).map(Gt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,d=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&re("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=Xo(r,e.field)),d=p=e.steps||p),i.forEach(g=>{const y=Q3(g,s)[a],v=e.counts?g.length:1,x=f||Xo(g);x2(y,x,d,p).forEach(w=>{const S={};for(let E=0;E<o.length;++E)S[o[E]]=g.dims[E];S[l[0]]=w[0],S[l[1]]=w[1]*v,u.push(dt(S))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function xj(e){St.call(this,null,poe,e)}ye(xj,St);function poe(e){return this.value&&!e.modified()?this.value:$3(e.fields,e.flat)}function bj(e){te.call(this,[],e),this._pending=null}ye(bj,te,{transform(e,t){const n=t.dataflow;return this._pending?SS(this,t,this._pending):goe(e)?t.StopPropagation:e.values?SS(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Se(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>SS(this,t,Se(r.data)))}});function goe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function SS(e,t,n){n.forEach(dt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function CA(e){te.call(this,{},e)}CA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ye(CA,te,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,f=e.as,d,p,g;return i?(p=i.length,a>1&&!f&&re('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*p&&re('The "as" parameter has too few output field names.'),f=f||i.map(Gt),d=function(y){for(var v=0,x=0,w,S;v<a;++v)if(S=r.get(n[v](y)),S==null)for(w=0;w<p;++w,++x)y[f[x]]=o;else for(w=0;w<p;++w,++x)y[f[x]]=i[w](S)}):(f||re("Missing output field names."),d=function(y){for(var v=0,x;v<a;++v)x=r.get(n[v](y)),y[f[v]]=x??o}),s?u=t.reflow(!0):(g=n.some(y=>t.modified(y.fields)),l|=g?t.MOD:0),t.visit(l,d),u.modifies(f)}});function wj(e){St.call(this,null,moe,e)}ye(wj,St);function moe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function Sj(e){St.call(this,null,yoe,e)}ye(Sj,St);function yoe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function kj(e){te.call(this,null,e)}ye(kj,te,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $A(e){hl.call(this,e)}$A.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ye($A,hl,{_transform:hl.prototype.transform,transform(e,t){return this._transform(voe(e,t),t)}});function voe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Kn(n).concat(Kn(r)),s=boe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>xoe(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function xoe(e,t,n,r){return jr(i=>t(i)===e?n(i):NaN,r,e+"")}function boe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(jg),t?i.slice(0,t):i}function Ej(e){b2.call(this,e)}ye(Ej,b2,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Oe(o),n,t,o);return(e.modified("field")||r&&t.modified(Kn(r)))&&re("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(dt(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function AA(e){te.call(this,null,e)}AA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ye(AA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=pj(e.fields,e.as||[]),o=r?(a,l)=>woe(a,l,r,i):d2;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Oe(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,dt({}));s[Oe(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Oe(a)]))}),n}});function woe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function _j(e){te.call(this,null,e)}ye(_j,te,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function RA(e){te.call(this,null,e)}RA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Soe=1e-14;ye(RA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=gA(i,e.groupby,e.field),s=(e.groupby||[]).map(Gt),a=[],l=e.step||.01,u=e.probs||Kr(l/2,1-Soe,l),f=u.length;return o.forEach(d=>{const p=H3(d,u);for(let g=0;g<f;++g){const y={};for(let v=0;v<s.length;++v)y[s[v]]=d.dims[v];y[r[0]]=u[g],y[r[1]]=p[g],a.push(dt(y))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Cj(e){te.call(this,null,e)}ye(Cj,te,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Oe(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=q3(i);r[Oe(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Oe(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function TA(e){te.call(this,[],e),this.count=0}TA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ye(TA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,d)=>(f[Oe(d)]=1,f),{});let s=this.value,a=this.count,l=0;function u(f){let d,p;s.length<i?s.push(f):(p=~~((a+1)*Ri()),p<s.length&&p>=l&&(d=s[p],o[Oe(d)]&&n.rem.push(d),s[p]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const d=Oe(f);o[d]&&(o[d]=-1,n.rem.push(f)),--a}),s=s.filter(f=>o[Oe(f)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,f=>{o[Oe(f)]||u(f)}),l=-1),r&&s.length>i){const f=s.length-i;for(let d=0;d<f;++d)o[Oe(s[d])]=-1,n.rem.push(s[d]);s=s.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[Oe(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(f=>!o[Oe(f)])),this.count=a,this.value=n.source=s,n}});function NA(e){te.call(this,null,e)}NA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ye(NA,te,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,dt(o)}),n.add=t.add.concat(this.value),n}});function $j(e){te.call(this,null,e),this.modified(!0)}ye($j,te,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function FA(e){te.call(this,null,e)}const Aj=["unit0","unit1"];FA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:D3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Aj}]};ye(FA,te,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Dd:Md)(o.unit).offset,a=e.as||Aj,l=a[0],u=a[1],f=o.step;let d=o.start||1/0,p=o.stop||-1/0,g=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),g=t.SOURCE,d=1/0,p=-1/0),t.visit(g,y=>{const v=n(y);let x,w;v==null?(y[l]=null,r&&(y[u]=null)):(y[l]=x=w=o(v),r&&(y[u]=w=s(x,f)),x<d&&(d=x),w>p&&(p=w))}),o.start=d,o.stop=p,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:vz({extent:e.extent||Xo(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=O3(r),s=this.value||{},a=(n?uz:lz)(o,i);return a.unit=rt(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function Rj(e){te.call(this,Rd(),e)}ye(Rj,te,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Tj(e){te.call(this,null,e)}ye(Tj,te,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(hc(e.sort)):t.source).map(e.field))}});function koe(e,t,n,r){const i=ug[e](t,n);return{init:i.init||Xa,update:function(o,s){s[r]=i.next(o)}}}const ug={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=ug.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||re("ntile num must be greater than zero.");const n=ug.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||re("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Eoe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Eoe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const _oe=Object.keys(ug);function Nj(e){const t=Se(e.ops),n=Se(e.fields),r=Se(e.params),i=Se(e.aggregate_params),o=Se(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},f=[],d=[];let p=!0;function g(y){Se(Kn(y)).forEach(v=>l[v]=1)}g(e.sort),t.forEach((y,v)=>{const x=n[v],w=r[v],S=i[v]||null,E=Gt(x),C=sj(y,E,o[v]);if(g(x),s.push(C),_e(ug,y))a.push(koe(y,x,w,C));else{if(x==null&&y!=="count"&&re("Null aggregate field specified."),y==="count"){f.push(C);return}p=!1;let $=u[E];$||($=u[E]=[],$.field=x,d.push($)),$.push(aj(y,S,C))}}),(f.length||d.length)&&(this.cell=Coe(d,f,p)),this.inputs=Object.keys(l)}const Fj=Nj.prototype;Fj.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Fj.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function Coe(e,t,n){e=e.map(l=>uj(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new uA;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=o.length;u<f;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function MA(e){te.call(this,{},e),this._mlen=0,this._mods=[]}MA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_oe.concat(Wg)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ye(MA,te,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=hc(e.sort),i=V_(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new Nj(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)$oe(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=cj(Oe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function $oe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?Td(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||tr(-1)};t.init();for(let d=0;d<l;++d)Aoe(f,s,d,l),o&&Roe(f,u),t.update(f,a[d])}function Aoe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Roe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Toe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:hl,bin:cA,collect:fA,compare:fj,countpattern:dA,cross:hA,density:pA,dotbin:mA,expression:mj,extent:yA,facet:b2,field:yj,filter:xA,flatten:bA,fold:wA,formula:SA,generate:vj,impute:kA,joinaggregate:EA,kde:_A,key:xj,load:bj,lookup:CA,multiextent:wj,multivalues:Sj,params:kj,pivot:$A,prefacet:Ej,project:AA,proxy:_j,quantile:RA,relay:Cj,sample:TA,sequence:NA,sieve:$j,subflow:vA,timeunit:FA,tupleindex:Rj,values:Tj,window:MA},Symbol.toStringTag,{value:"Module"}));function ht(e){return function(){return e}}const zM=Math.abs,Un=Math.atan2,nu=Math.cos,Noe=Math.max,kS=Math.min,To=Math.sin,Eu=Math.sqrt,Wn=1e-12,Yf=Math.PI,Ey=Yf/2,Mj=2*Yf;function Foe(e){return e>1?0:e<-1?Yf:Math.acos(e)}function jM(e){return e>=1?Ey:e<=-1?-Ey:Math.asin(e)}const H_=Math.PI,G_=2*H_,gu=1e-6,Moe=G_-gu;function Dj(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Doe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dj;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let DA=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dj:Doe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,f=s-t,d=a-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>gu)if(!(Math.abs(d*l-u*f)>gu)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,y=i-a,v=l*l+u*u,x=g*g+y*y,w=Math.sqrt(v),S=Math.sqrt(p),E=o*Math.tan((H_-Math.acos((v+p-x)/(2*w*S)))/2),C=E/S,$=E/w;Math.abs(C-1)>gu&&this._append`L${t+C*f},${n+C*d}`,this._append`A${o},${o},0,0,${+(d*g>f*y)},${this._x1=t+$*l},${this._y1=n+$*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,d=1^s,p=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>gu||Math.abs(this._y1-f)>gu)&&this._append`L${u},${f}`,r&&(p<0&&(p=p%G_+G_),p>Moe?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:p>gu&&this._append`A${r},${r},0,${+(p>=H_)},${d},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function w2(){return new DA}w2.prototype=DA.prototype;function S2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new DA(t)}function Ooe(e){return e.innerRadius}function Poe(e){return e.outerRadius}function Ioe(e){return e.startAngle}function Loe(e){return e.endAngle}function zoe(e){return e&&e.padAngle}function joe(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,f=s-i,d=a-o,p=d*l-f*u;if(!(p*p<Wn))return p=(f*(t-o)-d*(e-i))/p,[e+p*l,t+p*u]}function X0(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Eu(a*a+l*l),f=u*l,d=-u*a,p=e+f,g=t+d,y=n+f,v=r+d,x=(p+y)/2,w=(g+v)/2,S=y-p,E=v-g,C=S*S+E*E,$=i-o,R=p*v-y*g,A=(E<0?-1:1)*Eu(Noe(0,$*$*C-R*R)),N=(R*E-S*A)/C,M=(-R*S-E*A)/C,I=(R*E+S*A)/C,P=(-R*S+E*A)/C,K=N-x,W=M-w,j=I-x,D=P-w;return K*K+W*W>j*j+D*D&&(N=I,M=P),{cx:N,cy:M,x01:-f,y01:-d,x11:N*(i/$-1),y11:M*(i/$-1)}}function Boe(){var e=Ooe,t=Poe,n=ht(0),r=null,i=Ioe,o=Loe,s=zoe,a=null,l=S2(u);function u(){var f,d,p=+e.apply(this,arguments),g=+t.apply(this,arguments),y=i.apply(this,arguments)-Ey,v=o.apply(this,arguments)-Ey,x=zM(v-y),w=v>y;if(a||(a=f=l()),g<p&&(d=g,g=p,p=d),!(g>Wn))a.moveTo(0,0);else if(x>Mj-Wn)a.moveTo(g*nu(y),g*To(y)),a.arc(0,0,g,y,v,!w),p>Wn&&(a.moveTo(p*nu(v),p*To(v)),a.arc(0,0,p,v,y,w));else{var S=y,E=v,C=y,$=v,R=x,A=x,N=s.apply(this,arguments)/2,M=N>Wn&&(r?+r.apply(this,arguments):Eu(p*p+g*g)),I=kS(zM(g-p)/2,+n.apply(this,arguments)),P=I,K=I,W,j;if(M>Wn){var D=jM(M/p*To(N)),L=jM(M/g*To(N));(R-=D*2)>Wn?(D*=w?1:-1,C+=D,$-=D):(R=0,C=$=(y+v)/2),(A-=L*2)>Wn?(L*=w?1:-1,S+=L,E-=L):(A=0,S=E=(y+v)/2)}var H=g*nu(S),U=g*To(S),V=p*nu($),J=p*To($);if(I>Wn){var z=g*nu(E),G=g*To(E),xe=p*nu(C),we=p*To(C),ve;if(x<Yf)if(ve=joe(H,U,xe,we,z,G,V,J)){var Be=H-ve[0],Je=U-ve[1],Ye=z-ve[0],le=G-ve[1],Me=1/To(Foe((Be*Ye+Je*le)/(Eu(Be*Be+Je*Je)*Eu(Ye*Ye+le*le)))/2),We=Eu(ve[0]*ve[0]+ve[1]*ve[1]);P=kS(I,(p-We)/(Me-1)),K=kS(I,(g-We)/(Me+1))}else P=K=0}A>Wn?K>Wn?(W=X0(xe,we,H,U,g,K,w),j=X0(z,G,V,J,g,K,w),a.moveTo(W.cx+W.x01,W.cy+W.y01),K<I?a.arc(W.cx,W.cy,K,Un(W.y01,W.x01),Un(j.y01,j.x01),!w):(a.arc(W.cx,W.cy,K,Un(W.y01,W.x01),Un(W.y11,W.x11),!w),a.arc(0,0,g,Un(W.cy+W.y11,W.cx+W.x11),Un(j.cy+j.y11,j.cx+j.x11),!w),a.arc(j.cx,j.cy,K,Un(j.y11,j.x11),Un(j.y01,j.x01),!w))):(a.moveTo(H,U),a.arc(0,0,g,S,E,!w)):a.moveTo(H,U),!(p>Wn)||!(R>Wn)?a.lineTo(V,J):P>Wn?(W=X0(V,J,z,G,p,-P,w),j=X0(H,U,xe,we,p,-P,w),a.lineTo(W.cx+W.x01,W.cy+W.y01),P<I?a.arc(W.cx,W.cy,P,Un(W.y01,W.x01),Un(j.y01,j.x01),!w):(a.arc(W.cx,W.cy,P,Un(W.y01,W.x01),Un(W.y11,W.x11),!w),a.arc(0,0,p,Un(W.cy+W.y11,W.cx+W.x11),Un(j.cy+j.y11,j.cx+j.x11),w),a.arc(j.cx,j.cy,P,Un(j.y11,j.x11),Un(j.y01,j.x01),!w))):a.arc(0,0,p,$,C,w)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Yf/2;return[nu(d)*f,To(d)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:ht(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:ht(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:ht(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ht(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:ht(+f),u):i},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:ht(+f),u):o},u.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:ht(+f),u):s},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function Oj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pj(e){this._context=e}Pj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function OA(e){return new Pj(e)}function Ij(e){return e[0]}function Lj(e){return e[1]}function zj(e,t){var n=ht(!0),r=null,i=OA,o=null,s=S2(a);e=typeof e=="function"?e:e===void 0?Ij:ht(e),t=typeof t=="function"?t:t===void 0?Lj:ht(t);function a(l){var u,f=(l=Oj(l)).length,d,p=!1,g;for(r==null&&(o=i(g=s())),u=0;u<=f;++u)!(u<f&&n(d=l[u],u,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(d,u,l),+t(d,u,l));if(g)return o=null,g+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ht(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ht(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ht(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function jj(e,t,n){var r=null,i=ht(!0),o=null,s=OA,a=null,l=S2(u);e=typeof e=="function"?e:e===void 0?Ij:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Lj:ht(+n);function u(d){var p,g,y,v=(d=Oj(d)).length,x,w=!1,S,E=new Array(v),C=new Array(v);for(o==null&&(a=s(S=l())),p=0;p<=v;++p){if(!(p<v&&i(x=d[p],p,d))===w)if(w=!w)g=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=p-1;y>=g;--y)a.point(E[y],C[y]);a.lineEnd(),a.areaEnd()}w&&(E[p]=+e(x,p,d),C[p]=+t(x,p,d),a.point(r?+r(x,p,d):E[p],n?+n(x,p,d):C[p]))}if(S)return a=null,S+""||null}function f(){return zj().defined(i).curve(s).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ht(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:ht(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:ht(!!d),u):i},u.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),u):s},u.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),u):o},u}const Uoe={draw(e,t){const n=Eu(t/Yf);e.moveTo(n,0),e.arc(0,0,n,0,Mj)}};function qoe(e,t){let n=null,r=S2(i);e=typeof e=="function"?e:ht(e||Uoe),t=typeof t=="function"?t:ht(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ht(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ht(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function pl(){}function _y(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function k2(e){this._context=e}k2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_y(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Woe(e){return new k2(e)}function Bj(e){this._context=e}Bj.prototype={areaStart:pl,areaEnd:pl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Voe(e){return new Bj(e)}function Uj(e){this._context=e}Uj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hoe(e){return new Uj(e)}function qj(e,t){this._basis=new k2(e),this._beta=t}qj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Goe=function e(t){function n(r){return t===1?new k2(r):new qj(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Cy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function PA(e,t){this._context=e,this._k=(1-t)/6}PA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Cy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yoe=function e(t){function n(r){return new PA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function IA(e,t){this._context=e,this._k=(1-t)/6}IA.prototype={areaStart:pl,areaEnd:pl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xoe=function e(t){function n(r){return new IA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LA(e,t){this._context=e,this._k=(1-t)/6}LA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Koe=function e(t){function n(r){return new LA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zA(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Wn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Wn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function Wj(e,t){this._context=e,this._alpha=t}Wj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:zA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qoe=function e(t){function n(r){return t?new Wj(r,t):new PA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vj(e,t){this._context=e,this._alpha=t}Vj.prototype={areaStart:pl,areaEnd:pl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:zA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zoe=function e(t){function n(r){return t?new Vj(r,t):new IA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Hj(e,t){this._context=e,this._alpha=t}Hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Joe=function e(t){function n(r){return t?new Hj(r,t):new LA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Gj(e){this._context=e}Gj.prototype={areaStart:pl,areaEnd:pl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ese(e){return new Gj(e)}function BM(e){return e<0?-1:1}function UM(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(BM(o)+BM(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function qM(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ES(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function $y(e){this._context=e}$y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ES(this,this._t0,qM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ES(this,qM(this,n=UM(this,e,t)),n);break;default:ES(this,this._t0,n=UM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Yj(e){this._context=new Xj(e)}(Yj.prototype=Object.create($y.prototype)).point=function(e,t){$y.prototype.point.call(this,t,e)};function Xj(e){this._context=e}Xj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function tse(e){return new $y(e)}function nse(e){return new Yj(e)}function Kj(e){this._context=e}Kj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=WM(e),i=WM(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WM(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function rse(e){return new Kj(e)}function E2(e,t){this._context=e,this._t=t}E2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ise(e){return new E2(e,.5)}function ose(e){return new E2(e,0)}function sse(e){return new E2(e,1)}function ll(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ase=()=>typeof Image<"u"?Image:null;function ss(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $l(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Y_=Symbol("implicit");function jA(){var e=new aM,t=[],n=[],r=Y_;function i(o){let s=e.get(o);if(s===void 0){if(r!==Y_)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new aM;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return jA(t,n).unknown(r)},ss.apply(i,arguments),i}function Pd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Al(){}var qu=.7,Xf=1/qu,Ff="\\s*([+-]?\\d+)\\s*",cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lse=/^#([0-9a-f]{3,8})$/,use=new RegExp(`^rgb\\(${Ff},${Ff},${Ff}\\)$`),cse=new RegExp(`^rgb\\(${qo},${qo},${qo}\\)$`),fse=new RegExp(`^rgba\\(${Ff},${Ff},${Ff},${cg}\\)$`),dse=new RegExp(`^rgba\\(${qo},${qo},${qo},${cg}\\)$`),hse=new RegExp(`^hsl\\(${cg},${qo},${qo}\\)$`),pse=new RegExp(`^hsla\\(${cg},${qo},${qo},${cg}\\)$`),VM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pd(Al,fg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HM,formatHex:HM,formatHex8:gse,formatHsl:mse,formatRgb:GM,toString:GM});function HM(){return this.rgb().formatHex()}function gse(){return this.rgb().formatHex8()}function mse(){return Qj(this).formatHsl()}function GM(){return this.rgb().formatRgb()}function fg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lse.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?YM(t):n===3?new yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?K0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?K0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=use.exec(e))?new yn(t[1],t[2],t[3],1):(t=cse.exec(e))?new yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fse.exec(e))?K0(t[1],t[2],t[3],t[4]):(t=dse.exec(e))?K0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hse.exec(e))?QM(t[1],t[2]/100,t[3]/100,1):(t=pse.exec(e))?QM(t[1],t[2]/100,t[3]/100,t[4]):VM.hasOwnProperty(e)?YM(VM[e]):e==="transparent"?new yn(NaN,NaN,NaN,0):null}function YM(e){return new yn(e>>16&255,e>>8&255,e&255,1)}function K0(e,t,n,r){return r<=0&&(e=t=n=NaN),new yn(e,t,n,r)}function BA(e){return e instanceof Al||(e=fg(e)),e?(e=e.rgb(),new yn(e.r,e.g,e.b,e.opacity)):new yn}function gl(e,t,n,r){return arguments.length===1?BA(e):new yn(e,t,n,r??1)}function yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Pd(yn,gl,Vg(Al,{brighter(e){return e=e==null?Xf:Math.pow(Xf,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yn(Nu(this.r),Nu(this.g),Nu(this.b),Ay(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XM,formatHex:XM,formatHex8:yse,formatRgb:KM,toString:KM}));function XM(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}`}function yse(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}${_u((isNaN(this.opacity)?1:this.opacity)*255)}`}function KM(){const e=Ay(this.opacity);return`${e===1?"rgb(":"rgba("}${Nu(this.r)}, ${Nu(this.g)}, ${Nu(this.b)}${e===1?")":`, ${e})`}`}function Ay(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _u(e){return e=Nu(e),(e<16?"0":"")+e.toString(16)}function QM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zi(e,t,n,r)}function Qj(e){if(e instanceof Zi)return new Zi(e.h,e.s,e.l,e.opacity);if(e instanceof Al||(e=fg(e)),!e)return new Zi;if(e instanceof Zi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Zi(s,a,l,e.opacity)}function Ry(e,t,n,r){return arguments.length===1?Qj(e):new Zi(e,t,n,r??1)}function Zi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Pd(Zi,Ry,Vg(Al,{brighter(e){return e=e==null?Xf:Math.pow(Xf,e),new Zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new Zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yn(_S(e>=240?e-240:e+120,i,r),_S(e,i,r),_S(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zi(ZM(this.h),Q0(this.s),Q0(this.l),Ay(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ay(this.opacity);return`${e===1?"hsl(":"hsla("}${ZM(this.h)}, ${Q0(this.s)*100}%, ${Q0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZM(e){return e=(e||0)%360,e<0?e+360:e}function Q0(e){return Math.max(0,Math.min(1,e||0))}function _S(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Zj=Math.PI/180,Jj=180/Math.PI,Ty=18,eB=.96422,tB=1,nB=.82521,rB=4/29,Mf=6/29,iB=3*Mf*Mf,vse=Mf*Mf*Mf;function oB(e){if(e instanceof Wo)return new Wo(e.l,e.a,e.b,e.opacity);if(e instanceof js)return sB(e);e instanceof yn||(e=BA(e));var t=RS(e.r),n=RS(e.g),r=RS(e.b),i=CS((.2225045*t+.7168786*n+.0606169*r)/tB),o,s;return t===n&&n===r?o=s=i:(o=CS((.4360747*t+.3850649*n+.1430804*r)/eB),s=CS((.0139322*t+.0971045*n+.7141733*r)/nB)),new Wo(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Ny(e,t,n,r){return arguments.length===1?oB(e):new Wo(e,t,n,r??1)}function Wo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Pd(Wo,Ny,Vg(Al,{brighter(e){return new Wo(this.l+Ty*(e??1),this.a,this.b,this.opacity)},darker(e){return new Wo(this.l-Ty*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=eB*$S(t),e=tB*$S(e),n=nB*$S(n),new yn(AS(3.1338561*t-1.6168667*e-.4906146*n),AS(-.9787684*t+1.9161415*e+.033454*n),AS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function CS(e){return e>vse?Math.pow(e,1/3):e/iB+rB}function $S(e){return e>Mf?e*e*e:iB*(e-rB)}function AS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function RS(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xse(e){if(e instanceof js)return new js(e.h,e.c,e.l,e.opacity);if(e instanceof Wo||(e=oB(e)),e.a===0&&e.b===0)return new js(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Jj;return new js(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fy(e,t,n,r){return arguments.length===1?xse(e):new js(e,t,n,r??1)}function js(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function sB(e){if(isNaN(e.h))return new Wo(e.l,0,0,e.opacity);var t=e.h*Zj;return new Wo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Pd(js,Fy,Vg(Al,{brighter(e){return new js(this.h,this.c,this.l+Ty*(e??1),this.opacity)},darker(e){return new js(this.h,this.c,this.l-Ty*(e??1),this.opacity)},rgb(){return sB(this).rgb()}}));var aB=-.14861,UA=1.78277,qA=-.29227,_2=-.90649,dg=1.97294,JM=dg*_2,eD=dg*UA,tD=UA*qA-_2*aB;function bse(e){if(e instanceof Fu)return new Fu(e.h,e.s,e.l,e.opacity);e instanceof yn||(e=BA(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(tD*r+JM*t-eD*n)/(tD+JM-eD),o=r-i,s=(dg*(n-i)-qA*o)/_2,a=Math.sqrt(s*s+o*o)/(dg*i*(1-i)),l=a?Math.atan2(s,o)*Jj-120:NaN;return new Fu(l<0?l+360:l,a,i,e.opacity)}function X_(e,t,n,r){return arguments.length===1?bse(e):new Fu(e,t,n,r??1)}function Fu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Pd(Fu,X_,Vg(Al,{brighter(e){return e=e==null?Xf:Math.pow(Xf,e),new Fu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new Fu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Zj,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new yn(255*(t+n*(aB*r+UA*i)),255*(t+n*(qA*r+_2*i)),255*(t+n*(dg*r)),this.opacity)}}));function lB(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function uB(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return lB((n-r/t)*t,s,i,o,a)}}function cB(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return lB((n-r/t)*t,i,o,s,a)}}const C2=e=>()=>e;function fB(e,t){return function(n){return e+n*t}}function wse(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $2(e,t){var n=t-e;return n?fB(e,n>180||n<-180?n-360*Math.round(n/360):n):C2(isNaN(e)?t:e)}function Sse(e){return(e=+e)==1?vn:function(t,n){return n-t?wse(t,n,e):C2(isNaN(t)?n:t)}}function vn(e,t){var n=t-e;return n?fB(e,n):C2(isNaN(e)?t:e)}const K_=function e(t){var n=Sse(t);function r(i,o){var s=n((i=gl(i)).r,(o=gl(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=vn(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function dB(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=gl(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var kse=dB(uB),Ese=dB(cB);function WA(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function hB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _se(e,t){return(hB(t)?WA:pB)(e,t)}function pB(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Rl(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function gB(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ki(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mB(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Rl(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Q_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TS=new RegExp(Q_.source,"g");function Cse(e){return function(){return e}}function $se(e){return function(t){return e(t)+""}}function yB(e,t){var n=Q_.lastIndex=TS.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Q_.exec(e))&&(i=TS.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ki(r,i)})),n=TS.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?$se(l[0].x):Cse(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)a[(d=l[f]).i]=d.x(u);return a.join("")})}function Rl(e,t){var n=typeof t,r;return t==null||n==="boolean"?C2(t):(n==="number"?Ki:n==="string"?(r=fg(t))?(t=r,K_):yB:t instanceof fg?K_:t instanceof Date?gB:hB(t)?WA:Array.isArray(t)?pB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mB:Ki)(e,t)}function Ase(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Rse(e,t){var n=$2(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Hg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var nD=180/Math.PI,Z_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vB(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*nD,skewX:Math.atan(l)*nD,scaleX:s,scaleY:a}}var Z0;function Tse(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Z_:vB(t.a,t.b,t.c,t.d,t.e,t.f)}function Nse(e){return e==null||(Z0||(Z0=document.createElementNS("http://www.w3.org/2000/svg","g")),Z0.setAttribute("transform",e),!(e=Z0.transform.baseVal.consolidate()))?Z_:(e=e.matrix,vB(e.a,e.b,e.c,e.d,e.e,e.f))}function xB(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,p,g,y){if(u!==d||f!==p){var v=g.push("translate(",null,t,null,n);y.push({i:v-4,x:Ki(u,d)},{i:v-2,x:Ki(f,p)})}else(d||p)&&g.push("translate("+d+t+p+n)}function s(u,f,d,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ki(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(u,f,d,p){u!==f?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ki(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,p,g,y){if(u!==d||f!==p){var v=g.push(i(g)+"scale(",null,",",null,")");y.push({i:v-4,x:Ki(u,d)},{i:v-2,x:Ki(f,p)})}else(d!==1||p!==1)&&g.push(i(g)+"scale("+d+","+p+")")}return function(u,f){var d=[],p=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,p),s(u.rotate,f.rotate,d,p),a(u.skewX,f.skewX,d,p),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,p),u=f=null,function(g){for(var y=-1,v=p.length,x;++y<v;)d[(x=p[y]).i]=x.x(g);return d.join("")}}}var Fse=xB(Tse,"px, ","px)","deg)"),Mse=xB(Nse,", ",")",")"),Dse=1e-12;function rD(e){return((e=Math.exp(e))+1/e)/2}function Ose(e){return((e=Math.exp(e))-1/e)/2}function Pse(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ise=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],d=s[1],p=s[2],g=f-a,y=d-l,v=g*g+y*y,x,w;if(v<Dse)w=Math.log(p/u)/t,x=function(A){return[a+A*g,l+A*y,u*Math.exp(t*A*w)]};else{var S=Math.sqrt(v),E=(p*p-u*u+r*v)/(2*u*n*S),C=(p*p-u*u-r*v)/(2*p*n*S),$=Math.log(Math.sqrt(E*E+1)-E),R=Math.log(Math.sqrt(C*C+1)-C);w=(R-$)/t,x=function(A){var N=A*w,M=rD($),I=u/(n*S)*(M*Pse(t*N+$)-Ose($));return[a+I*g,l+I*y,u*M/rD(t*N+$)]}}return x.duration=w*1e3*t/Math.SQRT2,x}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function bB(e){return function(t,n){var r=e((t=Ry(t)).h,(n=Ry(n)).h),i=vn(t.s,n.s),o=vn(t.l,n.l),s=vn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Lse=bB($2);var zse=bB(vn);function jse(e,t){var n=vn((e=Ny(e)).l,(t=Ny(t)).l),r=vn(e.a,t.a),i=vn(e.b,t.b),o=vn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function wB(e){return function(t,n){var r=e((t=Fy(t)).h,(n=Fy(n)).h),i=vn(t.c,n.c),o=vn(t.l,n.l),s=vn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Bse=wB($2);var Use=wB(vn);function SB(e){return function t(n){n=+n;function r(i,o){var s=e((i=X_(i)).h,(o=X_(o)).h),a=vn(i.s,o.s),l=vn(i.l,o.l),u=vn(i.opacity,o.opacity);return function(f){return i.h=s(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const qse=SB($2);var Wse=SB(vn);function VA(e,t){t===void 0&&(t=e,e=Rl);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Vse(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Hse=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Rl,interpolateArray:_se,interpolateBasis:uB,interpolateBasisClosed:cB,interpolateCubehelix:qse,interpolateCubehelixLong:Wse,interpolateDate:gB,interpolateDiscrete:Ase,interpolateHcl:Bse,interpolateHclLong:Use,interpolateHsl:Lse,interpolateHslLong:zse,interpolateHue:Rse,interpolateLab:jse,interpolateNumber:Ki,interpolateNumberArray:WA,interpolateObject:mB,interpolateRgb:K_,interpolateRgbBasis:kse,interpolateRgbBasisClosed:Ese,interpolateRound:Hg,interpolateString:yB,interpolateTransformCss:Fse,interpolateTransformSvg:Mse,interpolateZoom:Ise,piecewise:VA,quantize:Vse},Symbol.toStringTag,{value:"Module"}));function Gse(e){return function(){return e}}function J_(e){return+e}var iD=[0,1];function Fr(e){return e}function eC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Gse(isNaN(t)?NaN:.5)}function Yse(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Xse(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=eC(i,r),o=n(s,o)):(r=eC(r,i),o=n(o,s)),function(a){return o(r(a))}}function Kse(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=eC(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=fl(e,a,1,r)-1;return o[l](i[l](a))}}function Gg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function A2(){var e=iD,t=iD,n=Rl,r,i,o,s=Fr,a,l,u;function f(){var p=Math.min(e.length,t.length);return s!==Fr&&(s=Yse(e[0],e[p-1])),a=p>2?Kse:Xse,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?o:(l||(l=a(e.map(r),t,n)))(r(s(p)))}return d.invert=function(p){return s(i((u||(u=a(t,e.map(r),Ki)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,J_),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=Hg,f()},d.clamp=function(p){return arguments.length?(s=p?!0:Fr,f()):s!==Fr},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(o=p,d):o},function(p,g){return r=p,i=g,f()}}function kB(){return A2()(Fr,Fr)}function EB(e,t,n,r){var i=dl(e,t,n),o;switch(r=Uu(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=KL(i,s))&&(r.precision=o),F3(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=QL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=XL(i))&&(r.precision=o-(r.type==="%")*2);break}}return r2(r)}function gc(e){var t=e.domain;return e.ticks=function(n){var r=t();return F_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return EB(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,f=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);f-- >0;){if(u=M_(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function _B(){var e=kB();return e.copy=function(){return Gg(e,_B())},ss.apply(e,arguments),gc(e)}function CB(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,J_),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return CB(e).unknown(t)},e=arguments.length?Array.from(e,J_):[0,1],gc(n)}function $B(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function oD(e){return Math.log(e)}function sD(e){return Math.exp(e)}function Qse(e){return-Math.log(-e)}function Zse(e){return-Math.exp(-e)}function Jse(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eae(e){return e===10?Jse:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tae(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aD(e){return(t,n)=>-e(-t,n)}function HA(e){const t=e(oD,sD),n=t.domain;let r=10,i,o;function s(){return i=tae(r),o=eae(r),n()[0]<0?(i=aD(i),o=aD(o),e(Qse,Zse)):e(oD,sD),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=i(u),g=i(f),y,v;const x=a==null?10:+a;let w=[];if(!(r%1)&&g-p<x){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(y=1;y<r;++y)if(v=p<0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;w.push(v)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(v=p>0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;w.push(v)}w.length*2<x&&(w=F_(u,f,x))}else w=F_(p,g,Math.min(g-p,x)).map(o);return d?w.reverse():w},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Uu(l)).precision==null&&(l.trim=!0),l=r2(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return f=>{let d=f/o(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?l(f):""}},t.nice=()=>n($B(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function AB(){const e=HA(A2()).domain([1,10]);return e.copy=()=>Gg(e,AB()).base(e.base()),ss.apply(e,arguments),e}function lD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GA(e){var t=1,n=e(lD(t),uD(t));return n.constant=function(r){return arguments.length?e(lD(t=+r),uD(t)):t},gc(n)}function RB(){var e=GA(A2());return e.copy=function(){return Gg(e,RB()).constant(e.constant())},ss.apply(e,arguments)}function cD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nae(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rae(e){return e<0?-e*e:e*e}function YA(e){var t=e(Fr,Fr),n=1;function r(){return n===1?e(Fr,Fr):n===.5?e(nae,rae):e(cD(n),cD(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},gc(t)}function XA(){var e=YA(A2());return e.copy=function(){return Gg(e,XA()).exponent(e.exponent())},ss.apply(e,arguments),e}function iae(){return XA.apply(null,arguments).exponent(.5)}function TB(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=qL(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[fl(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Vs),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return TB().domain(e).range(t).unknown(r)},ss.apply(o,arguments)}function NB(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[fl(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return NB().domain([e,t]).range(i).unknown(o)},ss.apply(gc(s),arguments)}function FB(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[fl(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return FB().domain(e).range(t).unknown(n)},ss.apply(i,arguments)}function oae(e){return new Date(e)}function sae(e){return e instanceof Date?+e:+new Date(+e)}function KA(e,t,n,r,i,o,s,a,l,u){var f=kB(),d=f.invert,p=f.domain,g=u(".%L"),y=u(":%S"),v=u("%I:%M"),x=u("%I %p"),w=u("%a %d"),S=u("%b %d"),E=u("%B"),C=u("%Y");function $(R){return(l(R)<R?g:a(R)<R?y:s(R)<R?v:o(R)<R?x:r(R)<R?i(R)<R?w:S:n(R)<R?E:C)(R)}return f.invert=function(R){return new Date(d(R))},f.domain=function(R){return arguments.length?p(Array.from(R,sae)):p().map(oae)},f.ticks=function(R){var A=p();return e(A[0],A[A.length-1],R??10)},f.tickFormat=function(R,A){return A==null?$:u(A)},f.nice=function(R){var A=p();return(!R||typeof R.range!="function")&&(R=t(A[0],A[A.length-1],R??10)),R?p($B(A,R)):f},f.copy=function(){return Gg(f,KA(e,t,n,r,i,o,s,a,l,u))},f}function aae(){return ss.apply(KA(hne,pne,Ko,og,Nd,Hs,s2,i2,zs,I3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lae(){return ss.apply(KA(fne,dne,Qo,sg,Fd,sl,a2,o2,zs,L3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function R2(){var e=0,t=1,n,r,i,o,s=Fr,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s};function f(d){return function(p){var g,y;return arguments.length?([g,y]=p,s=d(g,y),u):[s(0),s(1)]}}return u.range=f(Rl),u.rangeRound=f(Hg),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function Tl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QA(){var e=gc(R2()(Fr));return e.copy=function(){return Tl(e,QA())},$l.apply(e,arguments)}function MB(){var e=HA(R2()).domain([1,10]);return e.copy=function(){return Tl(e,MB()).base(e.base())},$l.apply(e,arguments)}function DB(){var e=GA(R2());return e.copy=function(){return Tl(e,DB()).constant(e.constant())},$l.apply(e,arguments)}function ZA(){var e=YA(R2());return e.copy=function(){return Tl(e,ZA()).exponent(e.exponent())},$l.apply(e,arguments)}function uae(){return ZA.apply(null,arguments).exponent(.5)}function T2(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=Fr,f,d=!1,p;function g(v){return isNaN(v=+v)?p:(v=.5+((v=+f(v))-o)*(r*v<r*o?a:l),u(d?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([e,t,n]=v,i=f(e=+e),o=f(t=+t),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,g):[e,t,n]},g.clamp=function(v){return arguments.length?(d=!!v,g):d},g.interpolator=function(v){return arguments.length?(u=v,g):u};function y(v){return function(x){var w,S,E;return arguments.length?([w,S,E]=x,u=VA(v,[w,S,E]),g):[u(0),u(.5),u(1)]}}return g.range=y(Rl),g.rangeRound=y(Hg),g.unknown=function(v){return arguments.length?(p=v,g):p},function(v){return f=v,i=v(e),o=v(t),s=v(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,g}}function OB(){var e=gc(T2()(Fr));return e.copy=function(){return Tl(e,OB())},$l.apply(e,arguments)}function PB(){var e=HA(T2()).domain([.1,1,10]);return e.copy=function(){return Tl(e,PB()).base(e.base())},$l.apply(e,arguments)}function IB(){var e=GA(T2());return e.copy=function(){return Tl(e,IB()).constant(e.constant())},$l.apply(e,arguments)}function JA(){var e=YA(T2());return e.copy=function(){return Tl(e,JA()).exponent(e.exponent())},$l.apply(e,arguments)}function cae(){return JA.apply(null,arguments).exponent(.5)}function as(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const fae=as("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),dae=as("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),hae=as("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),pae=as("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),gae=as("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),mae=as("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),yae=as("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vae=as("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xae=as("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),bae=as("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function e5(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const wae="identity",Kf="linear",ta="log",Yg="pow",Xg="sqrt",N2="symlog",Wu="time",Vu="utc",Vo="sequential",Id="diverging",Qf="quantile",F2="quantize",M2="threshold",t5="ordinal",tC="point",LB="band",n5="bin-ordinal",dn="continuous",Kg="discrete",Qg="discretizing",Mi="interpolating",r5="temporal";function Sae(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function kae(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function i5(){const e=jA().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const d=t().length,p=r[1]<r[0],g=r[1-p],y=e5(d,a,l);let v=r[p-0];i=(g-v)/(y||1),s&&(i=Math.floor(i)),v+=(g-v-i*(d-a))*u,o=i*(1-a),s&&(v=Math.round(v),o=Math.round(o));const x=Kr(d).map(w=>v+i*w);return n(p?x.reverse():x)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],f()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,f()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),f()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const p=r[1]<r[0],g=p?n().reverse():n(),y=g.length-1;let v=+d[0],x=+d[1],w,S,E;if(!(v!==v||x!==x)&&(x<v&&(E=v,v=x,x=E),!(x<g[0]||v>r[1-p])))return w=Math.max(0,fl(g,v)-1),S=v===x?w:fl(g,x)-1,v-g[w]>o+1e-10&&++w,p&&(E=w,w=y-S,S=y-E),w>S?void 0:t().slice(w,S+1)},e.invert=function(d){const p=e.invertRange([d,d]);return p&&p[0]},e.copy=function(){return i5().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},f()}function zB(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return zB(t())},e}function Eae(){return zB(i5().paddingInner(1))}var _ae=Array.prototype.map;function Cae(e){return _ae.call(e,Yn)}const $ae=Array.prototype.slice;function jB(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(fl(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Cae(r),n):e.slice()},n.range=function(r){return arguments.length?(t=$ae.call(r),n):t.slice()},n.tickFormat=function(r,i){return EB(e[0],rt(e),r??10,i)},n.copy=function(){return jB().domain(n.domain()).range(n.range())},n}const My=new Map,BB=Symbol("vega_scale");function UB(e){return e[BB]=!0,e}function fD(e){return e&&e[BB]===!0}function Aae(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?Sae(o):o.invertExtent?kae(o):void 0),o.type=e,UB(o)};return r.metadata=ao(Se(n)),r}function ct(e,t,n){return arguments.length>1?(My.set(e,Aae(e,t,n)),this):qB(e)?My.get(e):void 0}ct(wae,CB);ct(Kf,_B,dn);ct(ta,AB,[dn,ta]);ct(Yg,XA,dn);ct(Xg,iae,dn);ct(N2,RB,dn);ct(Wu,aae,[dn,r5]);ct(Vu,lae,[dn,r5]);ct(Vo,QA,[dn,Mi]);ct(`${Vo}-${Kf}`,QA,[dn,Mi]);ct(`${Vo}-${ta}`,MB,[dn,Mi,ta]);ct(`${Vo}-${Yg}`,ZA,[dn,Mi]);ct(`${Vo}-${Xg}`,uae,[dn,Mi]);ct(`${Vo}-${N2}`,DB,[dn,Mi]);ct(`${Id}-${Kf}`,OB,[dn,Mi]);ct(`${Id}-${ta}`,PB,[dn,Mi,ta]);ct(`${Id}-${Yg}`,JA,[dn,Mi]);ct(`${Id}-${Xg}`,cae,[dn,Mi]);ct(`${Id}-${N2}`,IB,[dn,Mi]);ct(Qf,TB,[Qg,Qf]);ct(F2,NB,Qg);ct(M2,FB,Qg);ct(n5,jB,[Kg,Qg]);ct(t5,jA,Kg);ct(LB,i5,Kg);ct(tC,Eae,Kg);function qB(e){return My.has(e)}function mc(e,t){const n=My.get(e);return n&&n.metadata[t]}function o5(e){return mc(e,dn)}function Zf(e){return mc(e,Kg)}function nC(e){return mc(e,Qg)}function WB(e){return mc(e,ta)}function Rae(e){return mc(e,r5)}function VB(e){return mc(e,Mi)}function HB(e){return mc(e,Qf)}const Tae=["clamp","base","constant","exponent"];function GB(e,t){const n=t[0],r=rt(t)-n;return function(i){return e(n+i*r)}}function D2(e,t,n){return VA(s5(t||"rgb",n),e)}function YB(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function XB(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?tr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=ct(o)().domain([t,n]).range([0,1]),Tae.forEach(a=>e[a]?s[a](e[a]()):0),s)}function s5(e,t){const n=Hse[Nae(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Nae(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Fae={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Mae={accent:dae,category10:fae,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:hae,observable10:pae,paired:gae,pastel1:mae,pastel2:yae,set1:vae,set2:xae,set3:bae,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function KB(e){if(ie(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function QB(e,t){for(const n in e)a5(n,t(e[n]))}const dD={};QB(Mae,KB);QB(Fae,e=>D2(KB(e)));function a5(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(dD[e]=t,this):dD[e]}const U1="symbol",Dae="discrete",Oae="gradient",Pae=e=>ie(e)?e.map(t=>String(t)):String(e),Iae=(e,t)=>e[1]-t[1],Lae=(e,t)=>t[1]-e[1];function l5(e,t,n){let r;return lt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Bg(e.domain())/n||1)+1))),Ee(t)&&(r=t.step,t=t.interval),ke(t)&&(t=e.type===Wu?Md(t):e.type==Vu?Dd(t):re("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function ZB(e,t,n){let r=e.range(),i=r[0],o=rt(r),s=Iae;if(i>o&&(r=o,o=i,i=r,s=Lae),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],rt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function u5(e,t){return e.bins?ZB(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function JB(e,t,n,r,i,o){const s=t.type;let a=Pae;if(s===Wu||i===Wu)a=e.timeFormat(r);else if(s===Vu||i===Vu)a=e.utcFormat(r);else if(WB(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=eU(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function eU(e,t,n){const r=u5(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const rC={[Qf]:"quantiles",[F2]:"thresholds",[M2]:"domain"},tU={[Qf]:"quantiles",[F2]:"domain"};function nU(e,t){return e.bins?Bae(e.bins):e.type===ta?eU(e,t,!0):rC[e.type]?jae(e[rC[e.type]]()):u5(e,t)}function zae(e,t,n){const r=t[tU[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function jae(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Bae(e){const t=e.slice(0,-1);return t.max=rt(e),t}const Uae=e=>rC[e.type]||e.bins;function rU(e,t,n,r,i,o,s){const a=tU[t.type]&&o!==Wu&&o!==Vu?zae(e,t,i):JB(e,t,n,i,o,s);return r===U1&&Uae(t)?qae(a):r===Dae?Wae(a):Vae(a)}const qae=e=>(t,n,r)=>{const i=hD(r[n+1],hD(r.max,1/0)),o=pD(t,e),s=pD(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},hD=(e,t)=>e??t,Wae=e=>(t,n)=>n?e(t):null,Vae=e=>t=>e(t),pD=(e,t)=>Number.isFinite(e)?t(e):null;function Hae(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+rt(t),o=i-r;if(e.type===M2){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Gae(e,t,n,r){const i=r||t.type;return ke(n)&&Rae(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Wu?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Vu?e.utcFormat("%A, %d %B %Y, %X UTC"):rU(e,t,5,null,n,r,!0)}function iU(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Gae(e,t,n.format,n.formatType);if(nC(t.type)){const o=nU(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Zf(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(rt(o))}`}}let oU=0;function Yae(){oU=0}const Dy="p_";function c5(e){return e&&e.gradient}function sU(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Dy:"";return i||(i=e.id="gradient_"+oU++,r==="radial"?(e.x1=No(e.x1,.5),e.y1=No(e.y1,.5),e.r1=No(e.r1,0),e.x2=No(e.x2,.5),e.y2=No(e.y2,.5),e.r2=No(e.r2,.5),o=Dy):(e.x1=No(e.x1,0),e.y1=No(e.y1,0),e.x2=No(e.x2,1),e.y2=No(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function No(e,t){return e??t}function aU(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const gD={basis:{curve:Woe},"basis-closed":{curve:Voe},"basis-open":{curve:Hoe},bundle:{curve:Goe,tension:"beta",value:.85},cardinal:{curve:Yoe,tension:"tension",value:0},"cardinal-open":{curve:Koe,tension:"tension",value:0},"cardinal-closed":{curve:Xoe,tension:"tension",value:0},"catmull-rom":{curve:Qoe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Zoe,tension:"alpha",value:.5},"catmull-rom-open":{curve:Joe,tension:"alpha",value:.5},linear:{curve:OA},"linear-closed":{curve:ese},monotone:{horizontal:nse,vertical:tse},natural:{curve:rse},step:{curve:ise},"step-after":{curve:sse},"step-before":{curve:ose}};function f5(e,t,n){var r=_e(gD,e)&&gD[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Xae={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Kae=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Qae=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Zae=/^((\s+,?\s*)|(,\s*))/,Jae=/^[01]/;function Jf(e){const t=[];return(e.match(Kae)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=Xae[o],a=ele(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function ele(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?Jae:Qae,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Zae);l!==null&&(i+=l[0].length)}return r}const ml=Math.PI/180,tle=1e-14,bu=Math.PI/2,Lo=Math.PI*2,uf=Math.sqrt(3)/2;var NS={},FS={},lU=[].join;function nle(e,t,n,r,i,o,s,a,l){const u=lU.call(arguments);if(NS[u])return NS[u];const f=s*ml,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const g=p*(a-e)*.5+d*(l-t)*.5,y=p*(l-t)*.5-d*(a-e)*.5;let v=g*g/(n*n)+y*y/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);const x=p/n,w=d/n,S=-d/r,E=p/r,C=x*a+w*l,$=S*a+E*l,R=x*e+w*t,A=S*e+E*t;let M=1/((R-C)*(R-C)+(A-$)*(A-$))-.25;M<0&&(M=0);let I=Math.sqrt(M);o==i&&(I=-I);const P=.5*(C+R)-I*(A-$),K=.5*($+A)+I*(R-C),W=Math.atan2($-K,C-P);let D=Math.atan2(A-K,R-P)-W;D<0&&o===1?D+=Lo:D>0&&o===0&&(D-=Lo);const L=Math.ceil(Math.abs(D/(bu+.001))),H=[];for(let U=0;U<L;++U){const V=W+U*D/L,J=W+(U+1)*D/L;H[U]=[P,K,V,J,n,r,d,p]}return NS[u]=H}function rle(e){const t=lU.call(e);if(FS[t])return FS[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const f=u*s,d=-l*a,p=l*s,g=u*a,y=Math.cos(i),v=Math.sin(i),x=Math.cos(o),w=Math.sin(o),S=.5*(o-i),E=Math.sin(S*.5),C=8/3*E*E/Math.sin(S),$=n+y-C*v,R=r+v+C*y,A=n+x,N=r+w,M=A+C*w,I=N-C*x;return FS[t]=[f*$+d*R,p*$+g*R,f*M+d*I,p*M+g*I,f*A+d*N,p*A+g*N]}const hi=["l",0,0,0,0,0,0,0];function ile(e,t,n){const r=hi[0]=e[0];if(r==="a"||r==="A")hi[1]=t*e[1],hi[2]=n*e[2],hi[3]=e[3],hi[4]=e[4],hi[5]=e[5],hi[6]=t*e[6],hi[7]=n*e[7];else if(r==="h"||r==="H")hi[1]=t*e[1];else if(r==="v"||r==="V")hi[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)hi[i]=(i%2==1?t:n)*e[i];return hi}function hg(e,t,n,r,i,o){var s,a=null,l=0,u=0,f=0,d=0,p,g,y,v,x=0,w=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var S=0,E=t.length;S<E;++S){switch(s=t[S],(i!==1||o!==1)&&(s=ile(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],x=l,w=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],x=l,w=u,e.moveTo(l+n,u+r);break;case"c":p=l+s[5],g=u+s[6],f=l+s[3],d=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,f+n,d+r,p+n,g+r),l=p,u=g;break;case"C":l=s[5],u=s[6],f=s[3],d=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,f+n,d+r,l+n,u+r);break;case"s":p=l+s[3],g=u+s[4],f=2*l-f,d=2*u-d,e.bezierCurveTo(f+n,d+r,l+s[1]+n,u+s[2]+r,p+n,g+r),f=l+s[1],d=u+s[2],l=p,u=g;break;case"S":p=s[3],g=s[4],f=2*l-f,d=2*u-d,e.bezierCurveTo(f+n,d+r,s[1]+n,s[2]+r,p+n,g+r),l=p,u=g,f=s[1],d=s[2];break;case"q":p=l+s[3],g=u+s[4],f=l+s[1],d=u+s[2],e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g;break;case"Q":p=s[3],g=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,p+n,g+r),l=p,u=g,f=s[1],d=s[2];break;case"t":p=l+s[1],g=u+s[2],a[0].match(/[QqTt]/)===null?(f=l,d=u):a[0]==="t"?(f=2*l-y,d=2*u-v):a[0]==="q"&&(f=2*l-f,d=2*u-d),y=f,v=d,e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g,f=l+s[1],d=u+s[2];break;case"T":p=s[1],g=s[2],f=2*l-f,d=2*u-d,e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g;break;case"a":mD(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":mD(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=x,u=w,e.closePath();break}a=s}}function mD(e,t,n,r){const i=nle(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=rle(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const yD=.5773502691896257,vD={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Lo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n,i=r-n*yD,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n,i=r-n*yD;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=uf*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function uU(e){return _e(vD,e)?vD[e]:ole(e)}var MS={};function ole(e){if(!_e(MS,e)){const t=Jf(e);MS[e]={draw:function(n,r){hg(n,t,0,0,Math.sqrt(r)/2)}}}return MS[e]}const za=.448084975506;function sle(e){return e.x}function ale(e){return e.y}function lle(e){return e.width}function ule(e){return e.height}function $s(e){return typeof e=="function"?e:()=>+e}function J0(e,t,n){return Math.max(t,Math.min(e,n))}function cU(){var e=sle,t=ale,n=lle,r=ule,i=$s(0),o=i,s=i,a=i,l=null;function u(f,d,p){var g,y=d??+e.call(this,f),v=p??+t.call(this,f),x=+n.call(this,f),w=+r.call(this,f),S=Math.min(x,w)/2,E=J0(+i.call(this,f),0,S),C=J0(+o.call(this,f),0,S),$=J0(+s.call(this,f),0,S),R=J0(+a.call(this,f),0,S);if(l||(l=g=w2()),E<=0&&C<=0&&$<=0&&R<=0)l.rect(y,v,x,w);else{var A=y+x,N=v+w;l.moveTo(y+E,v),l.lineTo(A-C,v),l.bezierCurveTo(A-za*C,v,A,v+za*C,A,v+C),l.lineTo(A,N-R),l.bezierCurveTo(A,N-za*R,A-za*R,N,A-R,N),l.lineTo(y+$,N),l.bezierCurveTo(y+za*$,N,y,N-za*$,y,N-$),l.lineTo(y,v+E),l.bezierCurveTo(y,v+za*E,y+za*E,v,y+E,v),l.closePath()}if(g)return l=null,g+""||null}return u.x=function(f){return arguments.length?(e=$s(f),u):e},u.y=function(f){return arguments.length?(t=$s(f),u):t},u.width=function(f){return arguments.length?(n=$s(f),u):n},u.height=function(f){return arguments.length?(r=$s(f),u):r},u.cornerRadius=function(f,d,p,g){return arguments.length?(i=$s(f),o=d!=null?$s(d):i,a=p!=null?$s(p):i,s=g!=null?$s(g):o,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function fU(){var e,t,n,r,i=null,o,s,a,l;function u(d,p,g){const y=g/2;if(o){var v=a-p,x=d-s;if(v||x){var w=Math.hypot(v,x),S=(v/=w)*l,E=(x/=w)*l,C=Math.atan2(x,v);i.moveTo(s-S,a-E),i.lineTo(d-v*y,p-x*y),i.arc(d,p,y,C-Math.PI,C),i.lineTo(s+S,a+E),i.arc(s,a,l,C,C+Math.PI)}else i.arc(d,p,y,0,Lo);i.closePath()}else o=1;s=d,a=p,l=y}function f(d){var p,g=d.length,y,v=!1,x;for(i==null&&(i=x=w2()),p=0;p<=g;++p)!(p<g&&r(y=d[p],p,d))===v&&(v=!v)&&(o=0),v&&u(+e(y,p,d),+t(y,p,d),+n(y,p,d));if(x)return i=null,x+""||null}return f.x=function(d){return arguments.length?(e=d,f):e},f.y=function(d){return arguments.length?(t=d,f):t},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(r=d,f):r},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function Zg(e,t){return e??t}const Jg=e=>e.x||0,em=e=>e.y||0,cle=e=>e.width||0,fle=e=>e.height||0,dle=e=>(e.x||0)+(e.width||0),hle=e=>(e.y||0)+(e.height||0),ple=e=>e.startAngle||0,gle=e=>e.endAngle||0,mle=e=>e.padAngle||0,yle=e=>e.innerRadius||0,vle=e=>e.outerRadius||0,xle=e=>e.cornerRadius||0,ble=e=>Zg(e.cornerRadiusTopLeft,e.cornerRadius)||0,wle=e=>Zg(e.cornerRadiusTopRight,e.cornerRadius)||0,Sle=e=>Zg(e.cornerRadiusBottomRight,e.cornerRadius)||0,kle=e=>Zg(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Ele=e=>Zg(e.size,64),_le=e=>e.size||1,O2=e=>e.defined!==!1,Cle=e=>uU(e.shape||"circle"),$le=Boe().startAngle(ple).endAngle(gle).padAngle(mle).innerRadius(yle).outerRadius(vle).cornerRadius(xle),Ale=jj().x(Jg).y1(em).y0(hle).defined(O2),Rle=jj().y(em).x1(Jg).x0(dle).defined(O2),Tle=zj().x(Jg).y(em).defined(O2),Nle=cU().x(Jg).y(em).width(cle).height(fle).cornerRadius(ble,wle,Sle,kle),Fle=qoe().type(Cle).size(Ele),Mle=fU().x(Jg).y(em).defined(O2).size(_le);function d5(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Dle(e,t){return $le.context(e)(t)}function Ole(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Rle:Ale).curve(f5(r,n.orient,n.tension)).context(e)(t)}function Ple(e,t){const n=t[0],r=n.interpolate||"linear";return Tle.curve(f5(r,n.orient,n.tension)).context(e)(t)}function Ld(e,t,n,r){return Nle.context(e)(t,n,r)}function Ile(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Lle(e,t){return Fle.context(e)(t)}function zle(e,t){return Mle.context(e)(t)}var dU=1;function jle(){dU=1}function h5(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+dU++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ge(r)?s.path=r(null):d5(n)?s.path=Ld(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function nn(e){this.clear(),e&&this.union(e)}nn.prototype={clone(){return new nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*s+u,l*r+a*s+f,a*o-l*i+u,l*o+a*i+f,a*o-l*s+u,l*o+a*s+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function P2(e){this.mark=e,this.bounds=this.bounds||new nn}function I2(e){P2.call(this,e),this.items=this.items||[]}ye(I2,P2);class hU{constructor(t){this._pending=0,this._loader=t||u2()}pending(){return this._pending}sanitizeURL(t){const n=this;return xD(n),n._loader.sanitize(t,{context:"href"}).then(r=>(np(n),r)).catch(()=>(np(n),null))}loadImage(t){const n=this,r=ase();return xD(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=_e(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>np(n),s.onerror=()=>np(n),s.src=o,s}).catch(i=>(np(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function xD(e){e._pending+=1}function np(e){e._pending-=1}function aa(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Ble(t,r):0))}return e}function Ble(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Ule=Lo-1e-8;let L2,q1,W1,Cu,iC,V1,oC,sC;const Ka=(e,t)=>L2.add(e,t),H1=(e,t)=>Ka(q1=e,W1=t),bD=e=>Ka(e,L2.y1),wD=e=>Ka(L2.x1,e),wu=(e,t)=>iC*e+oC*t,Su=(e,t)=>V1*e+sC*t,DS=(e,t)=>Ka(wu(e,t),Su(e,t)),OS=(e,t)=>H1(wu(e,t),Su(e,t));function tm(e,t){return L2=e,t?(Cu=t*ml,iC=sC=Math.cos(Cu),V1=Math.sin(Cu),oC=-V1):(iC=sC=1,Cu=V1=oC=0),qle}const qle={beginPath(){},closePath(){},moveTo:OS,lineTo:OS,rect(e,t,n,r){Cu?(DS(e+n,t),DS(e+n,t+r),DS(e,t+r),OS(e,t)):(Ka(e+n,t+r),H1(e,t))},quadraticCurveTo(e,t,n,r){const i=wu(e,t),o=Su(e,t),s=wu(n,r),a=Su(n,r);SD(q1,i,s,bD),SD(W1,o,a,wD),H1(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=wu(e,t),a=Su(e,t),l=wu(n,r),u=Su(n,r),f=wu(i,o),d=Su(i,o);kD(q1,s,l,f,bD),kD(W1,a,u,d,wD),H1(f,d)},arc(e,t,n,r,i,o){if(r+=Cu,i+=Cu,q1=n*Math.cos(i)+e,W1=n*Math.sin(i)+t,Math.abs(i-r)>Ule)Ka(e-n,t-n),Ka(e+n,t+n);else{const s=u=>Ka(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Lo,r<0&&(r+=Lo),i=i%Lo,i<0&&(i+=Lo),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Lo,a=r-r%bu,l=0;l<4&&a>i;++l,a-=bu)s(a);else for(a=r-r%bu+bu,l=0;l<4&&a<i;++l,a=a+bu)s(a)}}};function SD(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function kD(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(o)>tle?(f=s*s+a*o,f>=0&&(f=Math.sqrt(f),l=(-s+f)/o,u=(-s-f)/o)):l=.5*a/s,0<l&&l<1&&i(ED(l,e,t,n,r)),0<u&&u<1&&i(ED(u,e,t,n,r))}function ED(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var ul=(ul=ll(1,1))?ul.getContext("2d"):null;const aC=new nn;function p5(e){return function(t,n){if(!ul)return!0;e(ul,t),aC.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=aC;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(ul.isPointInPath(l,a))return!0;return!1}}function g5(e,t){return t.contains(e.x||0,e.y||0)}function pU(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(aC.set(n,r,n+i,r+o))}function gU(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return _f(t,n,r,i,o)}function _f(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,f=i-n;let d=0,p=1,g,y,v,x;for(x=0;x<4;++x){if(x===0&&(g=-u,y=-(o-t)),x===1&&(g=u,y=a-t),x===2&&(g=-f,y=-(s-n)),x===3&&(g=f,y=l-n),Math.abs(g)<1e-10&&y<0)return!1;if(v=y/g,g<0){if(v>p)return!1;v>d&&(d=v)}else if(g>0){if(v<d)return!1;v<p&&(p=v)}}return!0}function ed(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vi(e,t){return e??t}function _D(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Wle(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Vi(t.x1,.5)*r,n.y1+Vi(t.y1,.5)*i,Math.max(r,i)*Vi(t.r1,0),n.x1+Vi(t.x2,.5)*r,n.y1+Vi(t.y2,.5)*i,Math.max(r,i)*Vi(t.r2,.5));else{const s=Vi(t.x1,0),a=Vi(t.y1,0),l=Vi(t.x2,1),u=Vi(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=ll(Math.ceil(r),Math.ceil(i)),d=f.getContext("2d");return d.scale(r,i),d.fillStyle=_D(d.createLinearGradient(s,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return _D(o,t.stops)}function mU(e,t,n){return c5(n)?Wle(e,n,t.bounds):n}function Oy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=mU(e,t,t.fill),!0):!1}var Vle=[];function td(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=mU(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Vle),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Hle(e,t){return e.zindex-t.zindex||e.index-t.index}function m5(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Hle)}function uo(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=m5(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Py(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=m5(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function y5(e){return function(t,n,r){uo(n,i=>{(!r||r.intersects(i.bounds))&&yU(e,t,i,i)})}}function Gle(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&yU(e,t,n.items[0],n.items)}}function yU(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ed(t,n),n.fill&&Oy(t,n,i)&&t.fill(),n.stroke&&td(t,n,i)&&t.stroke()))}function z2(e){return e=e||$i,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Py(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function nm(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,f;return l&&(u=s.strokeWidth,f=s.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function v5(e){return z2(nm(e))}function Mu(e,t){return"translate("+e+","+t+")"}function x5(e){return"rotate("+e+")"}function Yle(e,t){return"scale("+e+","+t+")"}function vU(e){return Mu(e.x||0,e.y||0)}function Xle(e){return Mu(e.x||0,e.y||0)+(e.angle?" "+x5(e.angle):"")}function Kle(e){return Mu(e.x||0,e.y||0)+(e.angle?" "+x5(e.angle):"")+(e.scaleX||e.scaleY?" "+Yle(e.scaleX||1,e.scaleY||1):"")}function b5(e,t,n){function r(s,a){s("transform",Xle(a)),s("d",t(null,a))}function i(s,a){return t(tm(s,a.angle),a),aa(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,f=a.angle||0;s.translate(l,u),f&&s.rotate(f*=ml),s.beginPath(),t(s,a),f&&s.rotate(-f),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:y5(o),pick:v5(o),isect:n||p5(o)}}var Qle=b5("arc",Dle);function Zle(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function Jle(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function eue(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function w5(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(tm(l),f),aa(l,f[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=nm(o);function a(l,u,f,d,p,g){var y=u.items,v=u.bounds;return!y||!y.length||v&&!v.contains(p,g)?null:(f*=l.pixelRatio,d*=l.pixelRatio,s(l,y,f,d)?y[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Gle(o),pick:a,isect:g5,tip:n}}var tue=w5("area",Ole,Zle);function nue(e,t){var n=t.clip;e.save(),Ge(n)?(e.beginPath(),n(e),e.clip()):xU(e,t.group)}function xU(e,t){e.beginPath(),d5(t)?Ld(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function bU(e){const t=Vi(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function rue(e,t){e("transform",vU(t))}function wU(e,t){const n=bU(t);e("d",Ld(null,t,n,n))}function iue(e,t){e("class","background"),e("aria-hidden",!0),wU(e,t)}function oue(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?wU(e,t):e("d","")}function sue(e,t,n){const r=t.clip?h5(n,t,t):null;e("clip-path",r)}function aue(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),aa(e,t),e.translate(t.x||0,t.y||0)}function pg(e,t,n,r){const i=bU(t);e.beginPath(),Ld(e,t,(n||0)+i,(r||0)+i)}const lue=nm(pg),uue=nm(pg,!1),cue=nm(pg,!0);function fue(e,t,n,r){uo(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(pg(e,i,o,s),ed(e,i),i.fill&&Oy(e,i,l)&&e.fill(),i.stroke&&!a&&td(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&xU(e,i),n&&n.translate(-o,-s),uo(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(pg(e,i,o,s),ed(e,i),td(e,i,l)&&e.stroke())})}function due(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Py(t,l=>{let u,f,d;const p=l.bounds;if(p&&!p.contains(i,o))return;f=l.x||0,d=l.y||0;const g=f+(l.width||0),y=d+(l.height||0),v=l.clip;if(v&&(i<f||i>g||o<d||o>y))return;if(e.save(),e.translate(f,d),f=i-f,d=o-d,v&&d5(l)&&!cue(e,l,s,a))return e.restore(),null;const x=l.strokeForeground,w=t.interactive!==!1;return w&&x&&l.stroke&&uue(e,l,s,a)?(e.restore(),l):(u=Py(l,S=>hue(S,f,d)?this.pick(S,n,r,f,d):null),!u&&w&&(l.fill||!x&&l.stroke)&&lue(e,l,s,a)&&(u=l),e.restore(),u||null)})}function hue(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var pue={type:"group",tag:"g",nested:!1,attr:rue,bound:aue,draw:fue,pick:due,isect:pU,content:sue,background:iue,foreground:oue},gg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function S5(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function k5(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function E5(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function j2(e,t){return e==="center"?t/2:e==="right"?t:0}function B2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function gue(e,t,n){const r=S5(t,n),i=k5(t,r),o=E5(t,r),s=(t.x||0)-j2(t.align,i),a=(t.y||0)-B2(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,gg["xmlns:xlink"],"xlink:href"),e("transform",Mu(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function mue(e,t){const n=t.image,r=k5(t,n),i=E5(t,n),o=(t.x||0)-j2(t.align,r),s=(t.y||0)-B2(t.baseline,i);return e.set(o,s,o+r,s+i)}function yue(e,t,n){uo(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=S5(r,this);let o=k5(r,i),s=E5(r,i);if(o===0||s===0)return;let a=(r.x||0)-j2(r.align,o),l=(r.y||0)-B2(r.baseline,s),u,f,d,p;r.aspect!==!1&&(f=i.width/i.height,d=r.width/r.height,f===f&&d===d&&f!==d&&(d<f?(p=o/f,l+=(s-p)/2,s=p):(p=s*f,a+=(o-p)/2,o=p))),(i.complete||i.toDataURL)&&(ed(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var vue={type:"image",tag:"image",nested:!1,attr:gue,bound:mue,draw:yue,pick:z2(),isect:$i,get:S5,xOffset:j2,yOffset:B2},xue=w5("line",Ple,Jle);function bue(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Kle(t)),e("d",t.path)}function G1(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*ml,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Jf(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),hg(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):hg(e,l,r,i,o,s)}function wue(e,t){return G1(tm(e,t.angle),t)?e.set(0,0,0,0):aa(e,t,!0)}var Sue={type:"path",tag:"path",nested:!1,attr:bue,bound:wue,draw:y5(G1),pick:v5(G1),isect:p5(G1)};function kue(e,t){e("d",Ld(null,t))}function Eue(e,t){var n,r;return aa(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function CD(e,t){e.beginPath(),Ld(e,t)}var _ue={type:"rect",tag:"path",nested:!1,attr:kue,bound:Eue,draw:y5(CD),pick:v5(CD),isect:pU};function Cue(e,t){e("transform",vU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function $ue(e,t){var n,r;return aa(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function SU(e,t,n){var r,i,o,s;return t.stroke&&td(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Aue(e,t,n){uo(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&SU(e,r,i)&&(ed(e,r),e.stroke())}})}function Rue(e,t,n,r){return e.isPointInStroke?SU(e,t,1)&&e.isPointInStroke(n,r):!1}var Tue={type:"rule",tag:"line",nested:!1,attr:Cue,bound:$ue,draw:Aue,pick:z2(Rue),isect:gU},Nue=b5("shape",Ile),Fue=b5("symbol",Lle,g5);const $D=RL();var Jr={height:ls,measureWidth:_5,estimateWidth:Iy,width:Iy,canvas:kU};kU(!0);function kU(e){Jr.width=e&&ul?_5:Iy}function Iy(e,t){return EU(vl(e,t),ls(e))}function EU(e,t){return~~(.8*e.length*t)}function _5(e,t){return ls(e)<=0||!(t=vl(e,t))?0:_U(t,U2(e))}function _U(e,t){const n=`(${t}) ${e}`;let r=$D.get(n);return r===void 0&&(ul.font=t,r=ul.measureText(e).width,$D.set(n,r)),r}function ls(e){return e.fontSize!=null?+e.fontSize||0:11}function yl(e){return e.lineHeight!=null?e.lineHeight:ls(e)+2}function Mue(e){return ie(e)?e.length>1?e:e[0]:e}function rm(e){return Mue(e.lineBreak&&e.text&&!ie(e.text)?e.text.split(e.lineBreak):e.text)}function C5(e){const t=rm(e);return(ie(t)?t.length-1:0)*yl(e)}function vl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Oue(e,n):n}function Due(e){if(Jr.width===_5){const t=U2(e);return n=>_U(n,t)}else if(Jr.width===Iy){const t=ls(e);return n=>EU(n,t)}else return t=>Jr.width(e,t)}function Oue(e,t){var n=+e.limit,r=Due(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function im(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function U2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ls(e)+"px "+im(e,t)}function $5(e){var t=e.baseline,n=ls(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*yl(e):t==="line-bottom"?.29*n-.5*yl(e):0)}const Pue={left:"start",center:"middle",right:"end"},Wp=new nn;function q2(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-bu,t+=r*Math.cos(i),n+=r*Math.sin(i)),Wp.x1=t,Wp.y1=n,Wp}function Iue(e,t){var n=t.dx||0,r=(t.dy||0)+$5(t),i=q2(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Pue[t.align]||"start"),a?(l=Mu(o,s)+" "+x5(a),(n||r)&&(l+=" "+Mu(n,r))):l=Mu(o+n,s+r),e("transform",l)}function A5(e,t,n){var r=Jr.height(t),i=t.align,o=q2(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+$5(t)-Math.round(.8*r),f=rm(t),d;if(ie(f)?(r+=yl(t)*(f.length-1),d=f.reduce((p,g)=>Math.max(p,Jr.width(t,g)),0)):d=Jr.width(t,f),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=s,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*ml,s,a);else if(n===2)return e.rotatedPoints(t.angle*ml,s,a);return e}function Lue(e,t,n){uo(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,f,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=U2(r),e.textAlign=r.align||"left",o=q2(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*ml),s=a=0),s+=r.dx||0,a+=(r.dy||0)+$5(r),f=rm(r),ed(e,r),ie(f))for(u=yl(r),l=0;l<f.length;++l)d=vl(r,f[l]),r.fill&&Oy(e,r,i)&&e.fillText(d,s,a),r.stroke&&td(e,r,i)&&e.strokeText(d,s,a),a+=u;else d=vl(r,f),r.fill&&Oy(e,r,i)&&e.fillText(d,s,a),r.stroke&&td(e,r,i)&&e.strokeText(d,s,a);r.angle&&e.restore()}})}function zue(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=q2(t),a=s.x1,l=s.y1,u=A5(Wp,t,1),f=-t.angle*ml,d=Math.cos(f),p=Math.sin(f),g=d*i-p*o+(a-d*a+p*l),y=p*i+d*o+(l-p*a-d*l);return u.contains(g,y)}function jue(e,t){const n=A5(Wp,e,2);return _f(t,n[0],n[1],n[2],n[3])||_f(t,n[0],n[1],n[4],n[5])||_f(t,n[4],n[5],n[6],n[7])||_f(t,n[2],n[3],n[6],n[7])}var Bue={type:"text",tag:"text",nested:!1,attr:Iue,bound:A5,draw:Lue,pick:z2(zue),isect:jue},Uue=w5("trail",zle,eue),oi={arc:Qle,area:tue,group:pue,image:vue,line:xue,path:Sue,rect:_ue,rule:Tue,shape:Nue,symbol:Fue,text:Bue,trail:Uue};function lC(e,t,n){var r=oi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new nn),e,n)}var AD={mark:null};function CU(e,t,n){var r=oi[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,f;if(r.nested)return s?u=o[0]:(AD.mark=e,u=AD),f=lC(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new nn,s)for(a=0,l=o.length;a<l;++a)t.union(lC(o[a],i,n));return e.bounds=t}const que=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function $U(e,t){return JSON.stringify(e,que,t)}function AU(e){const t=typeof e=="string"?JSON.parse(e):e;return RU(t)}function RU(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&RU(n[i]);return t&&CU(e),e}class TU{constructor(t){arguments.length?this.root=AU(t):(this.root=RD({marktype:"group",name:"root",role:"frame"}),this.root.items=[new I2(this.root)])}toJSON(t){return $U(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=RD(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function RD(e,t){const n={bounds:new nn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Qa(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function R5(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function an(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Qa(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function mi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function NU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function W2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Wue(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=oi[i.marktype]).tip){for(s=W2(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let T5=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||u2(),this._tooltip=n||Vue}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Qa(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Wue(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Vue(e,t,n,r){e.element().setAttribute("title",r||"")}class om{constructor(t){this._el=null,this._bgcolor=null,this._loader=new hU(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Hue="keydown",Gue="keypress",Yue="keyup",FU="dragenter",Y1="dragleave",MU="dragover",uC="pointerdown",Xue="pointerup",Ly="pointermove",X1="pointerout",DU="pointerover",cC="mousedown",Kue="mouseup",OU="mousemove",zy="mouseout",PU="mouseover",jy="click",Que="dblclick",Zue="wheel",IU="mousewheel",By="touchstart",Uy="touchmove",qy="touchend",Jue=[Hue,Gue,Yue,FU,Y1,MU,uC,Xue,Ly,X1,DU,cC,Kue,OU,zy,PU,jy,Que,Zue,IU,By,Uy,qy],fC=Ly,Vp=zy,dC=jy;class sm extends T5{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Jue,this.pointermove=ND([Ly,OU],[DU,PU],[X1,zy]),this.dragover=ND([MU],[FU],[Y1]),this.pointerout=FD([X1,zy]),this.dragleave=FD([Y1])}initialize(t,n,r){return this._canvas=t&&R5(t,"canvas"),[jy,cC,uC,Ly,X1,Y1].forEach(i=>TD(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(IU,t)}pointerdown(t){this._down=this._active,this.fire(uC,t)}mousedown(t){this._down=this._active,this.fire(cC,t)}click(t){this._down===this._active&&(this.fire(jy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(By,t,!0)}touchmove(t){this.fire(Uy,t,!0)}touchend(t){this.fire(qy,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===dC&&i&&i.href?this.handleHref(n,i,i.href):(t===fC||t===Vp)&&this.handleTooltip(n,i,t!==Vp),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(TD(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=W2(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return oi[t.marktype].pick.call(this,s,t,n,r,i,o)}}const ece=e=>e===By||e===Uy||e===qy?[By,Uy,qy]:[e];function TD(e,t){ece(t).forEach(n=>tce(e,n))}function tce(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function $p(e,t,n){t.forEach(r=>e.fire(r,n))}function ND(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?$p(this,e,r):((!i||!i.exit)&&$p(this,n,r),this._active=o,$p(this,t,r),$p(this,e,r))}}function FD(e){return function(t){$p(this,e,t),this._active=null}}function nce(){return typeof window<"u"&&window.devicePixelRatio||1}function rce(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?nce():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Wy extends om{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new nn,this._tempb=new nn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:ll(1,1,this._options.type),t&&this._canvas&&(mi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)rce(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||re("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=ice(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):oce(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=oi[n.marktype];n.clip&&nue(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const ice=(e,t,n)=>new nn().set(0,0,t,n).translate(-e[0],-e[1]);function oce(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class LU extends T5{constructor(t,n){super(t,n);const r=this;r._hrefHandler=PS(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=PS(r,(i,o)=>{r.handleTooltip(i,o,i.type!==Vp)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(dC,this._hrefHandler),i.removeEventListener(fC,this._tooltipHandler),i.removeEventListener(Vp,this._tooltipHandler)),this._svg=i=t&&R5(t,"svg"),i&&(i.addEventListener(dC,this._hrefHandler),i.addEventListener(fC,this._tooltipHandler),i.addEventListener(Vp,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:PS(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const PS=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},zU="aria-hidden",N5="aria-label",F5="role",M5="aria-roledescription",jU="graphics-object",D5="graphics-symbol",BU=(e,t,n)=>({[F5]:e,[M5]:t,[N5]:n||void 0}),sce=ao(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),MD={axis:{desc:"axis",caption:uce},legend:{desc:"legend",caption:cce},"title-text":{desc:"title",caption:e=>`Title text '${OD(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${OD(e)}'`}},DD={ariaRole:F5,ariaRoleDescription:M5,description:N5};function UU(e,t){const n=t.aria===!1;if(e(zU,n||void 0),n||t.description==null)for(const r in DD)e(DD[r],void 0);else{const r=t.mark.marktype;e(N5,t.description),e(F5,t.ariaRole||(r==="group"?jU:D5)),e(M5,t.ariaRoleDescription||`${r} mark`)}}function qU(e){return e.aria===!1?{[zU]:!0}:sce[e.role]?null:MD[e.role]?lce(e,MD[e.role]):ace(e)}function ace(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return BU(n?jU:D5,`${t} mark container`,e.description)}function lce(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return BU(t.role||D5,t.desc,n.description||r(n))}catch{return null}}function OD(e){return Se(e.text).join(" ")}function uce(e){const t=e.datum,n=e.orient,r=t.title?WU(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Zf(a)?"discrete":a} scale with ${iU(s,o,e)}`}function cce(e){const t=e.datum,n=t.title?WU(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return dce(r)+(n?` titled '${n}'`:"")+` for ${fce(o)} with ${iU(l,a,e)}`}function WU(e){try{return Se(rt(e.items).items[0].text).join(" ")}catch{return null}}function fce(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rt(e)}function dce(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const VU=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),hce=e=>VU(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function O5(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${hce(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];for(const p of f)for(const g in p)s(g,p[g]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=VU(l),a),toString:()=>e};return a}const HU=e=>GU(O5(),e)+"";function GU(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):GU(e,r)}return e.close()}const Vy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Hy={blend:"mix-blend-mode"},YU={fill:"none","stroke-miterlimit":10},rp=0,PD="http://www.w3.org/2000/xmlns/",sn=gg.xmlns;class P5 extends om{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=an(t,0,"svg",sn),this._svg.setAttributeNS(PD,"xmlns",sn),this._svg.setAttributeNS(PD,"xmlns:xlink",gg["xmlns:xlink"]),this._svg.setAttribute("version",gg.version),this._svg.setAttribute("class","marks"),mi(t,1),this._root=an(this._svg,rp,"g",sn),Za(this._root,YU),mi(this._svg,rp+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Za(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=an(t,rp,"rect",sn),Za(r,{width:this._width,height:this._height,fill:n}));const i=HU(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),mi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=oi[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ID(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ID(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=oi[s],l=n.interactive===!1?"none":null,u=a.tag==="g",f=LD(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return mi(f,0),n._svg;f.setAttribute("class",NU(n));const d=qU(n);for(const v in d)sr(f,v,d[v]);u||sr(f,"pointer-events",l),sr(f,"clip-path",n.clip?h5(this,n,n.group):null);let p=null,g=0;const y=v=>{const x=this.isDirty(v),w=LD(v,f,p,a.tag,o);x&&(this._update(a,w,v),u&&mce(this,w,v,i)),p=w,++g};return a.nested?n.items.length&&y(n.items[0]):uo(n,y),mi(f,g),f}_update(t,n,r){Bs=n,Hn=n.__values__,UU(Hp,r),t.attr(Hp,r,this);const i=vce[t.type];i&&i.call(this,t,n,r),Bs&&this.style(Bs,r)}style(t,n){if(n!=null){for(const r in Vy){let i=r==="font"?im(n):n[r];if(i===Hn[r])continue;const o=Vy[r];i==null?t.removeAttribute(o):(c5(i)&&(i=sU(i,this._defs.gradient,XU())),t.setAttribute(o,i+"")),Hn[r]=i}for(const r in Hy)K1(t,Hy[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=an(t,rp+1,"defs",sn)),i=pce(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=an(t,rp+1,"defs",sn)),i=gce(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):mi(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ID(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function pce(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=an(e,n++,"pattern",sn);Za(s,{id:Dy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=an(s,0,"rect",sn),Za(s,{width:1,height:1,fill:`url(${XU()}#${t.id})`}),e=an(e,n++,"radialGradient",sn),Za(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=an(e,n++,"linearGradient",sn),Za(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=an(e,r,"stop",sn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return mi(e,r),n}function gce(e,t,n){let r;return e=an(e,n,"clipPath",sn),e.setAttribute("id",t.id),t.path?(r=an(e,0,"path",sn),r.setAttribute("d",t.path)):(r=an(e,0,"rect",sn),Za(r,{x:0,y:0,width:t.width,height:t.height})),mi(e,1),n+1}function mce(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;uo(n,s=>{i=e.mark(t,s,i,r),++o}),mi(t,1+o)}function LD(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Qa(s,r,sn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Qa(s,"path",sn);o.appendChild(a),a.__data__=e;const l=Qa(s,"g",sn);o.appendChild(l),l.__data__=e;const u=Qa(s,"path",sn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||yce(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function yce(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bs=null,Hn=null;const vce={group(e,t,n){const r=Bs=t.childNodes[2];Hn=r.__values__,e.foreground(Hp,n,this),Hn=t.__values__,Bs=t.childNodes[1],e.content(Hp,n,this);const i=Bs=t.childNodes[0];e.background(Hp,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Hn.events&&(sr(r,"pointer-events",o),sr(i,"pointer-events",o),Hn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;sr(r,"display",null),this.style(i,n),sr(i,"stroke",null),s&&(n.fill=null),Hn=r.__values__,this.style(r,n),s&&(n.fill=s),Bs=null}else sr(r,"display","none")},image(e,t,n){n.smooth===!1?(K1(t,"image-rendering","optimizeSpeed"),K1(t,"image-rendering","pixelated")):K1(t,"image-rendering",null)},text(e,t,n){const r=rm(n);let i,o,s,a;ie(r)?(o=r.map(l=>vl(n,l)),i=o.join(`
`),i!==Hn.text&&(mi(t,0),s=t.ownerDocument,a=yl(n),o.forEach((l,u)=>{const f=Qa(s,"tspan",sn);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),Hn.text=i)):(o=vl(n,r),o!==Hn.text&&(t.textContent=o,Hn.text=o)),sr(t,"font-family",im(n)),sr(t,"font-size",ls(n)+"px"),sr(t,"font-style",n.fontStyle),sr(t,"font-variant",n.fontVariant),sr(t,"font-weight",n.fontWeight)}};function Hp(e,t,n){t!==Hn[e]&&(n?xce(Bs,e,t,n):sr(Bs,e,t),Hn[e]=t)}function K1(e,t,n){n!==Hn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Hn[t]=n)}function Za(e,t){for(const n in t)sr(e,n,t[n])}function sr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function xce(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function XU(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KU extends om{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=O5();n.open("svg",He({},gg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",YU,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=oi[n.marktype],i=r.tag,o=[UU,r.attr];t.open("g",{class:NU(n),"clip-path":n.clip?h5(this,n,n.group):null},qU(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=rm(a);if(ie(u)){const f={x:0,dy:yl(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?f:null).text(vl(a,u[d])).close()}else t.text(vl(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),uo(a,p=>this.mark(t,p)),t.close(),u&&d?(f&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):uo(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,f)=>{o[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&bce(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Dy+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function bce(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=im(t),e["font-size"]=ls(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Vy){let a=t[s];const l=Vy[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(c5(a)&&(a=sU(a,i.gradient,"")),e[l]=a)}for(const s in Hy){const a=t[s];a!=null&&(o=o||[],o.push(`${Hy[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Yi={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function wce(e){Yi.svgMarkTypes=e.svgMarkTypes??["text"],Yi.svgOnTop=e.svgOnTop??!0,Yi.debug=e.debug??!1}class hC extends om{constructor(t){super(t),this._svgRenderer=new P5(t),this._canvasRenderer=new Wy(t)}initialize(t,n,r,i,o){this._root_el=an(t,0,"div");const s=an(this._root_el,0,"div"),a=an(this._root_el,1,"div");return this._root_el.style.position="relative",Yi.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Yi.svgOnTop?a:s,this._canvasEl=Yi.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Yi.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Yi.svgMarkTypes.includes(o));this._svgRenderer.render(t,Yi.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Yi.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class QU extends sm{constructor(t,n){super(t,n)}initialize(t,n,r){const i=an(an(t,0,"div"),Yi.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const ZU="canvas",JU="hybrid",eq="png",tq="svg",nq="none",Ja={Canvas:ZU,PNG:eq,SVG:tq,Hybrid:JU,None:nq},Hu={};Hu[ZU]=Hu[eq]={renderer:Wy,headless:Wy,handler:sm};Hu[tq]={renderer:P5,headless:KU,handler:LU};Hu[JU]={renderer:hC,headless:hC,handler:QU};Hu[nq]={};function V2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Hu[e]=t,this):Hu[e]}function rq(e,t,n){const r=[],i=new nn().union(t),o=e.marktype;return o?iq(e,i,n,r):o==="group"?oq(e,i,n,r):re("Intersect scene must be mark node or group item.")}function iq(e,t,n,r){if(Sce(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)oq(i[a],t,n,r);else for(const l=oi[o].isect;a<s;++a){const u=i[a];sq(u,t,l)&&r.push(u)}}return r}function Sce(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function oq(e,t,n,r){n&&n(e.mark)&&sq(e,t,oi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)iq(i[l],t,n,r);t.translate(s,a)}return r}function sq(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const IS=new nn;function aq(e){const t=e.clip;if(Ge(t))t(tm(IS.clear()));else if(t)IS.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(IS)}const kce=1e-9;function I5(e,t,n){return e===t?!0:n==="path"?lq(e,t):e instanceof Date&&t instanceof Date?+e==+t:lt(e)&&lt(t)?Math.abs(e-t)<=kce:!e||!t||!Ee(e)&&!Ee(t)?e==t:Ece(e,t)}function lq(e,t){return I5(Jf(e),Jf(t))}function Ece(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!I5(e[i],t[i],i))return!1;return typeof e==typeof t}function _ce(){jle(),Yae()}const nd="top",Ji="left",eo="right",xl="bottom",Cce="top-left",$ce="top-right",Ace="bottom-left",Rce="bottom-right",L5="start",pC="middle",ar="end",Tce="x",Nce="y",H2="group",z5="axis",j5="title",Fce="frame",Mce="scope",B5="legend",uq="row-header",cq="row-footer",fq="row-title",dq="column-header",hq="column-footer",pq="column-title",Dce="padding",Oce="symbol",gq="fit",mq="fit-x",yq="fit-y",Pce="pad",U5="none",e1="all",gC="each",q5="flush",el="column",tl="row";function vq(e){te.call(this,null,e)}ye(vq,te,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=oi[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=t1(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===H2||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(t1(u,s))),r.role){case z5:case B5:case j5:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(t1(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(t1(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return aq(r),t.modifies("bounds")}});function t1(e,t,n){return t(e.bounds.clear(),e,n)}const zD=":vega_identifier:";function W5(e){te.call(this,0,e)}W5.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ye(W5,te,{transform(e,t){const n=Ice(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Ice(e){return e._signals[zD]||(e._signals[zD]=e.add(0))}function xq(e){te.call(this,null,e)}ye(xq,te,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Lce(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===H2?I2:P2;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Lce(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function bq(e){te.call(this,null,e)}const jD={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!wq(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},wq=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),BD=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(wq(i,o=e[n].bounds,t))return!0},zce=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},jce=(e,t,n)=>{var r=e.range(),i=new nn;return t===nd||t===xl?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},UD=e=>(e.forEach(t=>t.opacity=1),e),qD=(e,t)=>e.reflow(t.modified()).modifies("opacity");ye(bq,te,{transform(e,t){const n=jD[e.method]||jD.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(UD(i),t=qD(t,e)),t;if(i=i.filter(zce),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=UD(i),t=qD(t,e),o.length>=3&&BD(o,r)){do o=n(o,r);while(o.length>=3&&BD(o,r));o.length<3&&!rt(i).opacity&&(o.length>1&&(rt(o).opacity=0),rt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=jce(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Sq(e){te.call(this,null,e)}ye(Sq,te,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Vn=new nn;function Cf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Bce(e){var t=e.items[0].orient;return t===Ji||t===eo}function Uce(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function qce(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Uce(o),u=i.range,f=i.offset,d=i.position,p=i.minExtent,g=i.maxExtent,y=o.title&&i.items[l[2]].items[0],v=i.titlePadding,x=i.bounds,w=y&&C5(y),S=0,E=0,C,$;switch(Vn.clear().union(x),x.clear(),(C=l[0])>-1&&x.union(i.items[C].bounds),(C=l[1])>-1&&x.union(i.items[C].bounds),a){case nd:S=d||0,E=-f,$=Math.max(p,Math.min(g,-x.y1)),x.add(0,-$).add(u,0),y&&n1(e,y,$,v,w,0,-1,x);break;case Ji:S=-f,E=d||0,$=Math.max(p,Math.min(g,-x.x1)),x.add(-$,0).add(0,u),y&&n1(e,y,$,v,w,1,-1,x);break;case eo:S=n+f,E=d||0,$=Math.max(p,Math.min(g,x.x2)),x.add(0,0).add($,u),y&&n1(e,y,$,v,w,1,1,x);break;case xl:S=d||0,E=r+f,$=Math.max(p,Math.min(g,x.y2)),x.add(0,0).add(u,$),y&&n1(e,y,$,v,0,0,1,x);break;default:S=i.x,E=i.y}return aa(x.translate(S,E),i),Cf(i,"x",S+s)|Cf(i,"y",E+s)&&(i.bounds=Vn,e.dirty(i),i.bounds=x,e.dirty(i)),i.mark.bounds.clear().union(x)}function n1(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let f=0,d=0;e.dirty(t),o?f=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-d)),e.dirty(t)}a.union(l)}const WD=(e,t)=>Math.floor(Math.min(e,t)),VD=(e,t)=>Math.ceil(Math.max(e,t));function Wce(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===H2)switch(i.role){case z5:case B5:case j5:break;case uq:s.rowheaders.push(...o);break;case cq:s.rowfooters.push(...o);break;case dq:s.colheaders.push(...o);break;case hq:s.colfooters.push(...o);break;case fq:s.rowtitle=o[0];break;case pq:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Vce(e){return new nn().set(0,0,e.width||0,e.height||0)}function Hce(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Mt(e,t,n){const r=Ee(e)?e[t]:e;return r??(n!==void 0?n:0)}function HD(e){return e<0?Math.ceil(-e):0}function kq(e,t,n){var r=!n.nodirty,i=n.bounds===q5?Vce:Hce,o=Vn.set(0,0,0,0),s=Mt(n.align,el),a=Mt(n.align,tl),l=Mt(n.padding,el),u=Mt(n.padding,tl),f=n.columns||t.length,d=f<=0?1:Math.ceil(t.length/f),p=t.length,g=Array(p),y=Array(f),v=0,x=Array(p),w=Array(d),S=0,E=Array(p),C=Array(p),$=Array(p),R,A,N,M,I,P,K,W,j,D,L;for(A=0;A<f;++A)y[A]=0;for(A=0;A<d;++A)w[A]=0;for(A=0;A<p;++A)P=t[A],I=$[A]=i(P),P.x=P.x||0,E[A]=0,P.y=P.y||0,C[A]=0,N=A%f,M=~~(A/f),v=Math.max(v,K=Math.ceil(I.x2)),S=Math.max(S,W=Math.ceil(I.y2)),y[N]=Math.max(y[N],K),w[M]=Math.max(w[M],W),g[A]=l+HD(I.x1),x[A]=u+HD(I.y1),r&&e.dirty(t[A]);for(A=0;A<p;++A)A%f===0&&(g[A]=0),A<f&&(x[A]=0);if(s===gC)for(N=1;N<f;++N){for(L=0,A=N;A<p;A+=f)L<g[A]&&(L=g[A]);for(A=N;A<p;A+=f)g[A]=L+y[N-1]}else if(s===e1){for(L=0,A=0;A<p;++A)A%f&&L<g[A]&&(L=g[A]);for(A=0;A<p;++A)A%f&&(g[A]=L+v)}else for(s=!1,N=1;N<f;++N)for(A=N;A<p;A+=f)g[A]+=y[N-1];if(a===gC)for(M=1;M<d;++M){for(L=0,A=M*f,R=A+f;A<R;++A)L<x[A]&&(L=x[A]);for(A=M*f;A<R;++A)x[A]=L+w[M-1]}else if(a===e1){for(L=0,A=f;A<p;++A)L<x[A]&&(L=x[A]);for(A=f;A<p;++A)x[A]=L+S}else for(a=!1,M=1;M<d;++M)for(A=M*f,R=A+f;A<R;++A)x[A]+=w[M-1];for(j=0,A=0;A<p;++A)j=g[A]+(A%f?j:0),E[A]+=j-t[A].x;for(N=0;N<f;++N)for(D=0,A=N;A<p;A+=f)D+=x[A],C[A]+=D-t[A].y;if(s&&Mt(n.center,el)&&d>1)for(A=0;A<p;++A)I=s===e1?v:y[A%f],j=I-$[A].x2-t[A].x-E[A],j>0&&(E[A]+=j/2);if(a&&Mt(n.center,tl)&&f!==1)for(A=0;A<p;++A)I=a===e1?S:w[~~(A/f)],D=I-$[A].y2-t[A].y-C[A],D>0&&(C[A]+=D/2);for(A=0;A<p;++A)o.union($[A].translate(E[A],C[A]));switch(j=Mt(n.anchor,Tce),D=Mt(n.anchor,Nce),Mt(n.anchor,el)){case ar:j-=o.width();break;case pC:j-=o.width()/2}switch(Mt(n.anchor,tl)){case ar:D-=o.height();break;case pC:D-=o.height()/2}for(j=Math.round(j),D=Math.round(D),o.clear(),A=0;A<p;++A)t[A].mark.bounds.clear();for(A=0;A<p;++A)P=t[A],P.x+=E[A]+=j,P.y+=C[A]+=D,o.union(P.mark.bounds.union(P.bounds.translate(E[A],C[A]))),r&&e.dirty(P);return o}function Gce(e,t,n){var r=Wce(t),i=r.marks,o=n.bounds===q5?Yce:Xce,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,d,p,g,y,v,x;const w=kq(e,i,n);w.empty()&&w.set(0,0,0,0),r.rowheaders&&(v=Mt(n.headerBand,tl,null),f=r1(e,r.rowheaders,i,a,l,-Mt(s,"rowHeader"),WD,0,o,"x1",0,a,1,v)),r.colheaders&&(v=Mt(n.headerBand,el,null),d=r1(e,r.colheaders,i,a,a,-Mt(s,"columnHeader"),WD,1,o,"y1",0,1,a,v)),r.rowfooters&&(v=Mt(n.footerBand,tl,null),p=r1(e,r.rowfooters,i,a,l,Mt(s,"rowFooter"),VD,0,o,"x2",a-1,a,1,v)),r.colfooters&&(v=Mt(n.footerBand,el,null),g=r1(e,r.colfooters,i,a,a,Mt(s,"columnFooter"),VD,1,o,"y2",u-a,1,a,v)),r.rowtitle&&(y=Mt(n.titleAnchor,tl),x=Mt(s,"rowTitle"),x=y===ar?p+x:f-x,v=Mt(n.titleBand,tl,.5),GD(e,r.rowtitle,x,0,w,v)),r.coltitle&&(y=Mt(n.titleAnchor,el),x=Mt(s,"columnTitle"),x=y===ar?g+x:d-x,v=Mt(n.titleBand,el,.5),GD(e,r.coltitle,x,1,w,v))}function Yce(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Xce(e,t){return e.bounds[t]}function r1(e,t,n,r,i,o,s,a,l,u,f,d,p,g){var y=n.length,v=0,x=0,w,S,E,C,$,R,A,N,M;if(!y)return v;for(w=f;w<y;w+=d)n[w]&&(v=s(v,l(n[w],u)));if(!t.length)return v;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),v+=o,S=0,C=t.length;S<C;++S)e.dirty(t[S]),t[S].mark.bounds.clear();for(w=f,S=0,C=t.length;S<C;++S,w+=d){for(R=t[S],$=R.mark.bounds,E=w;E>=0&&(A=n[E])==null;E-=p);a?(N=g==null?A.x:Math.round(A.bounds.x1+g*A.bounds.width()),M=v):(N=v,M=g==null?A.y:Math.round(A.bounds.y1+g*A.bounds.height())),$.union(R.bounds.translate(N-(R.x||0),M-(R.y||0))),R.x=N,R.y=M,e.dirty(R),x=s(x,$[u])}return x}function GD(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Kce(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Qce(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Zce(e,t,n,r,i,o,s){const a=Kce(n,t),l=Qce(e,a("offset",0)),u=a("anchor",L5),f=u===ar?1:u===pC?.5:0,d={align:gC,bounds:a("bounds",q5),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Ji:d.anchor={x:Math.floor(r.x1)-l,column:ar,y:f*(s||r.height()+2*r.y1),row:u};break;case eo:d.anchor={x:Math.ceil(r.x2)+l,y:f*(s||r.height()+2*r.y1),row:u};break;case nd:d.anchor={y:Math.floor(i.y1)-l,row:ar,x:f*(o||i.width()+2*i.x1),column:u};break;case xl:d.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:u};break;case Cce:d.anchor={x:l,y:l};break;case $ce:d.anchor={x:o-l,y:l,column:ar};break;case Ace:d.anchor={x:l,y:s-l,row:ar};break;case Rce:d.anchor={x:o-l,y:s-l,column:ar,row:ar};break}return d}function Jce(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),tfe(e,n,n.items[0].items[0]),o=efe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===Oce&&nfe(n.items[0].items[0].items[0].items),i!==U5&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,aa(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function efe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function tfe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&ip(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,f=r-s.y;switch(s.orient){case Ji:i+=Math.ceil(s.bounds.width())+l;break;case eo:case xl:break;default:o+=s.bounds.height()+l}switch((i||o)&&ip(e,n,i,o),s.orient){case Ji:f+=cf(t,n,s,a,1,1);break;case eo:u+=cf(t,n,s,ar,0,0)+l,f+=cf(t,n,s,a,1,1);break;case xl:u+=cf(t,n,s,a,0,0),f+=cf(t,n,s,ar,-1,0,1)+l;break;default:u+=cf(t,n,s,a,0,0)}(u||f)&&ip(e,s,u,f),(u=Math.round(s.bounds.x1-r))<0&&(ip(e,n,-u,0),ip(e,s,-u,0))}}function cf(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,d=l&&o?f:0,p=l&&o?0:f,g=i<=0?0:C5(n);return Math.round(r===L5?d:r===ar?p-g:.5*(f-g))}function ip(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function nfe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function rfe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,f=o.padding,d=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],g=a===Ji||a===eo?r:n,y=0,v=0,x=0,w=0,S=0,E;if(s!==H2?a===Ji?(y=i.y2,g=i.y1):a===eo?(y=i.y1,g=i.y2):(y=i.x1,g=i.x2):a===Ji&&(y=r,g=0),E=l===L5?y:l===ar?g:(y+g)/2,p&&p.text){switch(a){case nd:case xl:S=d.bounds.height()+f;break;case Ji:w=d.bounds.width()+f;break;case eo:w=-d.bounds.width()-f;break}Vn.clear().union(p.bounds),Vn.translate(w-(p.x||0),S-(p.y||0)),Cf(p,"x",w)|Cf(p,"y",S)&&(e.dirty(p),p.bounds.clear().union(Vn),p.mark.bounds.clear().union(Vn),e.dirty(p)),Vn.clear().union(p.bounds)}else Vn.clear();switch(Vn.union(d.bounds),a){case nd:v=E,x=i.y1-Vn.height()-u;break;case Ji:v=i.x1-Vn.width()-u,x=E;break;case eo:v=i.x2+Vn.width()+u,x=E;break;case xl:v=E,x=i.y2+u;break;default:v=o.x,x=o.y}return Cf(o,"x",v)|Cf(o,"y",x)&&(Vn.translate(v,x),e.dirty(o),o.bounds.clear().union(Vn),t.bounds.clear().union(Vn),e.dirty(o)),o.bounds}function Eq(e){te.call(this,null,e)}ye(Eq,te,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Gce(n,r,e.layout),ofe(n,r,e)}),ife(e.mark.group)?t.reflow():t}});function ife(e){return e&&e.mark.role!=="legend-entry"}function ofe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new nn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],f,d,p,g,y,v;for(y=0,v=r.length;y<v;++y)switch(d=r[y],d.role){case z5:g=Bce(d)?a:l,g.union(qce(e,d,i,o));break;case j5:f=d;break;case B5:u.push(Jce(e,d));break;case Fce:case Mce:case uq:case cq:case fq:case dq:case hq:case pq:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(u.length){const x={};u.forEach(w=>{p=w.orient||eo,p!==U5&&(x[p]||(x[p]=[])).push(w)});for(const w in x){const S=x[w];kq(e,S,Zce(S,w,n.legends,a,l,i,o))}u.forEach(w=>{const S=w.bounds;if(S.equals(w._bounds)||(w.bounds=w._bounds,e.dirty(w),w.bounds=S,e.dirty(w)),n.autosize&&(n.autosize.type===gq||n.autosize.type===mq||n.autosize.type===yq))switch(w.orient){case Ji:case eo:s.add(S.x1,0).add(S.x2,0);break;case nd:case xl:s.add(0,S.y1).add(0,S.y2)}else s.union(S)})}s.union(a).union(l),f&&s.union(rfe(e,f,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),sfe(e,t,s,n)}function sfe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),g=Math.max(0,Math.ceil(n.y2-f));if(i.contains===Dce){const y=e.padding();s-=y.left+y.right,a-=y.top+y.bottom}o===U5?(u=0,d=0,l=s,f=a):o===gq?(l=Math.max(0,s-u-p),f=Math.max(0,a-d-g)):o===mq?(l=Math.max(0,s-u-p),a=f+d+g):o===yq?(s=l+u+p,f=Math.max(0,a-d-g)):o===Pce&&(s=l+u+p,a=f+d+g),e._resizeView(s,a,l,f,[u,d],i.resize)}const afe=Object.freeze(Object.defineProperty({__proto__:null,bound:vq,identifier:W5,mark:xq,overlap:bq,render:Sq,viewlayout:Eq},Symbol.toStringTag,{value:"Module"}));function _q(e){te.call(this,null,e)}ye(_q,te,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=l5(o,s,e.minstep),l=e.format||JB(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?ZB(o,e.values,a):u5(o,a);return i&&(r.rem=i),i=u.map((f,d)=>dt({index:d/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(dt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Cq(e){te.call(this,null,e)}function lfe(){return dt({})}function ufe(e){const t=Rd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ye(Cq,te,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||lfe,o=e.key||Oe,s=this.value;return ie(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&re("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=ufe(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function $q(e){te.call(this,null,e)}ye($q,te,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ie(o))if(n.changed()||o.every(d=>i[d]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Ba,l=i.enter||Ba,u=i.exit||Ba,f=(o&&!s?i[o]:a)||Ba;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),f!==Ba&&f!==a&&(t.visit(t.ADD,d=>{f(d,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==Ba&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),s||f!==Ba){const d=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(d,p=>{const g=l(p,e)||r;(f(p,e)||g)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(d,p=>{(f(p,e)||r)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function Aq(e){te.call(this,[],e)}ye(Aq,te,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||U1,s=e.scale,a=+e.limit,l=l5(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===U1,f=e.format||rU(n,s,l,o,e.formatSpecifier,e.formatType,u),d=e.values||nU(s,l),p,g,y,v,x;return i&&(r.rem=i),o===U1?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),x=!0):i=d,Ge(y=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),v=i.reduce((w,S)=>Math.max(w,y(S,e)),0)):y=tr(v=y||8),i=i.map((w,S)=>dt({index:S,label:f(w,S,i),value:w,offset:v,size:y(w,e)})),x&&(x=d[i.length],i.push(dt({index:i.length,label:`${d.length-i.length} entries`,value:x,offset:v,size:y(x,e)})))):o===Oae?(p=s.domain(),g=XB(s,p[0],rt(p)),d.length<3&&!e.values&&p[0]!==rt(p)&&(d=[p[0],rt(p)]),i=d.map((w,S)=>dt({index:S,label:f(w,S,d),value:w,perc:g(w)}))):(y=d.length-1,g=Hae(s),i=d.map((w,S)=>dt({index:S,label:f(w,S,d),value:w,perc:S?g(w):0,perc2:S===y?1:g(d[S+1])}))),r.source=i,r.add=i,this.value=i,r}});const cfe=e=>e.source.x,ffe=e=>e.source.y,dfe=e=>e.target.x,hfe=e=>e.target.y;function V5(e){te.call(this,{},e)}V5.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ye(V5,te,{transform(e,t){var n=e.sourceX||cfe,r=e.sourceY||ffe,i=e.targetX||dfe,o=e.targetY||hfe,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=YD.get(l+"-"+a)||YD.get(l);return u||re("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[s]=u(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(s)}});const Rq=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,pfe=(e,t,n,r)=>Rq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Tq=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},gfe=(e,t,n,r)=>Tq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Nq=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},mfe=(e,t,n,r)=>Nq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),yfe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,vfe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,xfe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},bfe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},wfe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Sfe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},YD=Rd({line:Rq,"line-radial":pfe,arc:Tq,"arc-radial":gfe,curve:Nq,"curve-radial":mfe,"orthogonal-horizontal":yfe,"orthogonal-vertical":vfe,"orthogonal-radial":xfe,"diagonal-horizontal":bfe,"diagonal-vertical":wfe,"diagonal-radial":Sfe});function H5(e){te.call(this,null,e)}H5.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ye(H5,te,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Cd,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),f=u.length,d=s,p=(a-s)/HL(u),g=Kr(f),y,v,x;for(e.sort&&g.sort((w,S)=>u[w]-u[S]),y=0;y<f;++y)x=u[g[y]],v=l[g[y]],v[r]=d,v[i]=d+=x*p;return this.value=u,t.reflow(e.modified()).modifies(n)}});const kfe=5;function Efe(e){const t=e.type;return!e.bins&&(t===Kf||t===Yg||t===Xg)}function Fq(e){return o5(e)&&e!==Vo}const _fe=ao(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Mq(e){te.call(this,null,e),this.modified(!0)}ye(Mq,te,{transform(e,t){var n=t.dataflow,r=this.value,i=Cfe(e);(!r||i!==r.type)&&(this.value=r=ct(i)());for(i in e)if(!_fe[i]){if(i==="padding"&&Fq(r.type))continue;Ge(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Ffe(r,e,Nfe(r,e,Afe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Cfe(e){var t=e.type,n="",r;return t===Vo?Vo+"-"+Kf:($fe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Vo+"-":r===3?Id+"-":""),(n+t||Kf).toLowerCase())}function $fe(e){const t=e.type;return o5(t)&&t!==Wu&&t!==Vu&&(e.scheme||e.range&&e.range.length&&e.range.every(ke))}function Afe(e,t,n){const r=Rfe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&Efe(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Fq(o)&&t.padding&&i[0]!==rt(i)&&(i=Tfe(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Dq(o,i,n)),o===t5&&e.unknown(t.domainImplicit?Y_:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&l5(e,t.nice)||null),i.length}function Rfe(e,t,n){return t?(e.domain(Dq(e.type,t,n)),t.length):-1}function Tfe(e,t,n,r,i,o){var s=Math.abs(rt(n)-n[0]),a=s/(s-2*r),l=e===ta?S3(t,null,a):e===Xg?my(t,null,a,.5):e===Yg?my(t,null,a,i||1):e===N2?k3(t,null,a,o||1):w3(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Dq(e,t,n){if(WB(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ge(t))}return t}function Nfe(e,t,n){let r=t.bins;if(r&&!ie(r)){const i=e.domain(),o=i[0],s=rt(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||re("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Kr(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===n5&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Ffe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Mfe(r,t,n);else if(t.scheme&&(o=Dfe(r,t,n),Ge(o))){if(e.interpolator)return e.interpolator(o);re(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&VB(r))return e.interpolator(D2(mC(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(s5(t.interpolate,t.interpolateGamma)):Ge(e.round)?e.round(i):Ge(e.rangeRound)&&e.interpolate(i?Hg:Rl),o&&e.range(mC(o,t.reverse))}function Mfe(e,t,n){e!==LB&&e!==tC&&re("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===tC?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*e5(n,i,r)]}function Dfe(e,t,n){var r=t.schemeExtent,i,o;return ie(t.scheme)?o=D2(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=a5(i),o||re(`Unrecognized scheme name: ${t.scheme}`)),n=e===M2?n+1:e===n5?n-1:e===Qf||e===F2?+t.schemeCount||kfe:n,VB(e)?XD(o,r,t.reverse):Ge(o)?YB(XD(o,r),n):e===t5?o:o.slice(0,n)}function XD(e,t,n){return Ge(e)&&(t||n)?GB(e,mC(t||[0,1],n)):e}function mC(e,t){return t?e.slice().reverse():e}function Oq(e){te.call(this,null,e)}ye(Oq,te,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(hc(e.sort)),this.modified(n),t}});const KD="zero",Pq="center",Iq="normalize",Lq=["y0","y1"];function G5(e){te.call(this,null,e)}G5.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:KD,values:[KD,Pq,Iq]},{name:"as",type:"string",array:!0,length:2,default:Lq}]};ye(G5,te,{transform(e,t){var n=e.as||Lq,r=n[0],i=n[1],o=hc(e.sort),s=e.field||Cd,a=e.offset===Pq?Ofe:e.offset===Iq?Pfe:Ife,l,u,f,d;for(l=Lfe(t.source,e.groupby,o,s),u=0,f=l.length,d=l.max;u<f;++u)a(l[u],d,s,r,i);return t.reflow(e.modified()).modifies(n)}});function Ofe(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function Pfe(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=s,f[i]=s=o*(u+=Math.abs(n(f)))}function Ife(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=s,f[i]=s+=u):(f[r]=o,f[i]=o+=u)}function Lfe(e,t,n,r){var i=[],o=v=>v(f),s,a,l,u,f,d,p,g,y;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)f=e[a],d=t.map(o),p=s[d],p||(s[d]=p=[],i.push(p)),p.push(f);for(d=0,y=0,u=i.length;d<u;++d){for(p=i[d],a=0,g=0,l=p.length;a<l;++a)g+=Math.abs(r(p[a]));p.sum=g,g>y&&(y=g),n&&p.sort(n)}return i.max=y,i}const zfe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:_q,datajoin:Cq,encode:$q,legendentries:Aq,linkpath:V5,pie:H5,scale:Mq,sortitems:Oq,stack:G5},Symbol.toStringTag,{value:"Module"}));var je=1e-6,yC=1e-12,Qe=Math.PI,Ht=Qe/2,Gy=Qe/4,yr=Qe*2,Kt=180/Qe,Xe=Qe/180,nt=Math.abs,zd=Math.atan,Ti=Math.atan2,Ie=Math.cos,i1=Math.ceil,zq=Math.exp,vC=Math.hypot,Yy=Math.log,LS=Math.pow,Pe=Math.sin,wi=Math.sign||function(e){return e>0?1:e<0?-1:0},vr=Math.sqrt,Y5=Math.tan;function jq(e){return e>1?0:e<-1?Qe:Math.acos(e)}function Pr(e){return e>1?Ht:e<-1?-Ht:Math.asin(e)}function Fn(){}function Xy(e,t){e&&ZD.hasOwnProperty(e.type)&&ZD[e.type](e,t)}var QD={Feature:function(e,t){Xy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Xy(n[r].geometry,t)}},ZD={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){xC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xC(n[r],t,0)},Polygon:function(e,t){JD(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JD(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Xy(n[r],t)}};function xC(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function JD(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)xC(e[n],t,1);t.polygonEnd()}function Os(e,t){e&&QD.hasOwnProperty(e.type)?QD[e.type](e,t):Xy(e,t)}var Ky=new gr,Qy=new gr,Bq,Uq,bC,wC,SC,Jo={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Ky=new gr,Jo.lineStart=jfe,Jo.lineEnd=Bfe},polygonEnd:function(){var e=+Ky;Qy.add(e<0?yr+e:e),this.lineStart=this.lineEnd=this.point=Fn},sphere:function(){Qy.add(yr)}};function jfe(){Jo.point=Ufe}function Bfe(){qq(Bq,Uq)}function Ufe(e,t){Jo.point=qq,Bq=e,Uq=t,e*=Xe,t*=Xe,bC=e,wC=Ie(t=t/2+Gy),SC=Pe(t)}function qq(e,t){e*=Xe,t*=Xe,t=t/2+Gy;var n=e-bC,r=n>=0?1:-1,i=r*n,o=Ie(t),s=Pe(t),a=SC*s,l=wC*o+a*Ie(i),u=a*r*Pe(i);Ky.add(Ti(u,l)),bC=e,wC=o,SC=s}function qfe(e){return Qy=new gr,Os(e,Jo),Qy*2}function Zy(e){return[Ti(e[1],e[0]),Pr(e[2])]}function Gu(e){var t=e[0],n=e[1],r=Ie(n);return[r*Ie(t),r*Pe(t),Pe(n)]}function o1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function s1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Jy(e){var t=vr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var zt,Tr,Wt,Yr,mu,Wq,Vq,Df,Gp,Ha,na,Ms={point:kC,lineStart:eO,lineEnd:tO,polygonStart:function(){Ms.point=Gq,Ms.lineStart=Wfe,Ms.lineEnd=Vfe,Gp=new gr,Jo.polygonStart()},polygonEnd:function(){Jo.polygonEnd(),Ms.point=kC,Ms.lineStart=eO,Ms.lineEnd=tO,Ky<0?(zt=-(Wt=180),Tr=-(Yr=90)):Gp>je?Yr=90:Gp<-1e-6&&(Tr=-90),na[0]=zt,na[1]=Wt},sphere:function(){zt=-(Wt=180),Tr=-(Yr=90)}};function kC(e,t){Ha.push(na=[zt=e,Wt=e]),t<Tr&&(Tr=t),t>Yr&&(Yr=t)}function Hq(e,t){var n=Gu([e*Xe,t*Xe]);if(Df){var r=rd(Df,n),i=[r[1],-r[0],0],o=rd(i,r);Jy(o),o=Zy(o);var s=e-mu,a=s>0?1:-1,l=o[0]*Kt*a,u,f=nt(s)>180;f^(a*mu<l&&l<a*e)?(u=o[1]*Kt,u>Yr&&(Yr=u)):(l=(l+360)%360-180,f^(a*mu<l&&l<a*e)?(u=-o[1]*Kt,u<Tr&&(Tr=u)):(t<Tr&&(Tr=t),t>Yr&&(Yr=t))),f?e<mu?Gr(zt,e)>Gr(zt,Wt)&&(Wt=e):Gr(e,Wt)>Gr(zt,Wt)&&(zt=e):Wt>=zt?(e<zt&&(zt=e),e>Wt&&(Wt=e)):e>mu?Gr(zt,e)>Gr(zt,Wt)&&(Wt=e):Gr(e,Wt)>Gr(zt,Wt)&&(zt=e)}else Ha.push(na=[zt=e,Wt=e]);t<Tr&&(Tr=t),t>Yr&&(Yr=t),Df=n,mu=e}function eO(){Ms.point=Hq}function tO(){na[0]=zt,na[1]=Wt,Ms.point=kC,Df=null}function Gq(e,t){if(Df){var n=e-mu;Gp.add(nt(n)>180?n+(n>0?360:-360):n)}else Wq=e,Vq=t;Jo.point(e,t),Hq(e,t)}function Wfe(){Jo.lineStart()}function Vfe(){Gq(Wq,Vq),Jo.lineEnd(),nt(Gp)>je&&(zt=-(Wt=180)),na[0]=zt,na[1]=Wt,Df=null}function Gr(e,t){return(t-=e)<0?t+360:t}function Hfe(e,t){return e[0]-t[0]}function nO(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Gfe(e){var t,n,r,i,o,s,a;if(Yr=Wt=-(zt=Tr=1/0),Ha=[],Os(e,Ms),n=Ha.length){for(Ha.sort(Hfe),t=1,r=Ha[0],o=[r];t<n;++t)i=Ha[t],nO(r,i[0])||nO(r,i[1])?(Gr(r[0],i[1])>Gr(r[0],r[1])&&(r[1]=i[1]),Gr(i[0],r[1])>Gr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Gr(r[1],i[0]))>s&&(s=a,zt=i[0],Wt=r[1])}return Ha=na=null,zt===1/0||Tr===1/0?[[NaN,NaN],[NaN,NaN]]:[[zt,Tr],[Wt,Yr]]}var Ap,ev,tv,nv,rv,iv,ov,sv,EC,_C,CC,Yq,Xq,lr,ur,cr,to={sphere:Fn,point:X5,lineStart:rO,lineEnd:iO,polygonStart:function(){to.lineStart=Kfe,to.lineEnd=Qfe},polygonEnd:function(){to.lineStart=rO,to.lineEnd=iO}};function X5(e,t){e*=Xe,t*=Xe;var n=Ie(t);am(n*Ie(e),n*Pe(e),Pe(t))}function am(e,t,n){++Ap,tv+=(e-tv)/Ap,nv+=(t-nv)/Ap,rv+=(n-rv)/Ap}function rO(){to.point=Yfe}function Yfe(e,t){e*=Xe,t*=Xe;var n=Ie(t);lr=n*Ie(e),ur=n*Pe(e),cr=Pe(t),to.point=Xfe,am(lr,ur,cr)}function Xfe(e,t){e*=Xe,t*=Xe;var n=Ie(t),r=n*Ie(e),i=n*Pe(e),o=Pe(t),s=Ti(vr((s=ur*o-cr*i)*s+(s=cr*r-lr*o)*s+(s=lr*i-ur*r)*s),lr*r+ur*i+cr*o);ev+=s,iv+=s*(lr+(lr=r)),ov+=s*(ur+(ur=i)),sv+=s*(cr+(cr=o)),am(lr,ur,cr)}function iO(){to.point=X5}function Kfe(){to.point=Zfe}function Qfe(){Kq(Yq,Xq),to.point=X5}function Zfe(e,t){Yq=e,Xq=t,e*=Xe,t*=Xe,to.point=Kq;var n=Ie(t);lr=n*Ie(e),ur=n*Pe(e),cr=Pe(t),am(lr,ur,cr)}function Kq(e,t){e*=Xe,t*=Xe;var n=Ie(t),r=n*Ie(e),i=n*Pe(e),o=Pe(t),s=ur*o-cr*i,a=cr*r-lr*o,l=lr*i-ur*r,u=vC(s,a,l),f=Pr(u),d=u&&-f/u;EC.add(d*s),_C.add(d*a),CC.add(d*l),ev+=f,iv+=f*(lr+(lr=r)),ov+=f*(ur+(ur=i)),sv+=f*(cr+(cr=o)),am(lr,ur,cr)}function Jfe(e){Ap=ev=tv=nv=rv=iv=ov=sv=0,EC=new gr,_C=new gr,CC=new gr,Os(e,to);var t=+EC,n=+_C,r=+CC,i=vC(t,n,r);return i<yC&&(t=iv,n=ov,r=sv,ev<je&&(t=tv,n=nv,r=rv),i=vC(t,n,r),i<yC)?[NaN,NaN]:[Ti(n,t)*Kt,Pr(r/i)*Kt]}function $C(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function AC(e,t){return nt(e)>Qe&&(e-=Math.round(e/yr)*yr),[e,t]}AC.invert=AC;function Qq(e,t,n){return(e%=yr)?t||n?$C(sO(e),aO(t,n)):sO(e):t||n?aO(t,n):AC}function oO(e){return function(t,n){return t+=e,nt(t)>Qe&&(t-=Math.round(t/yr)*yr),[t,n]}}function sO(e){var t=oO(e);return t.invert=oO(-e),t}function aO(e,t){var n=Ie(e),r=Pe(e),i=Ie(t),o=Pe(t);function s(a,l){var u=Ie(l),f=Ie(a)*u,d=Pe(a)*u,p=Pe(l),g=p*n+f*r;return[Ti(d*i-g*o,f*n-p*r),Pr(g*i+d*o)]}return s.invert=function(a,l){var u=Ie(l),f=Ie(a)*u,d=Pe(a)*u,p=Pe(l),g=p*i-d*o;return[Ti(d*i+p*o,f*n+g*r),Pr(g*n-f*r)]},s}function ede(e){e=Qq(e[0]*Xe,e[1]*Xe,e.length>2?e[2]*Xe:0);function t(n){return n=e(n[0]*Xe,n[1]*Xe),n[0]*=Kt,n[1]*=Kt,n}return t.invert=function(n){return n=e.invert(n[0]*Xe,n[1]*Xe),n[0]*=Kt,n[1]*=Kt,n},t}function tde(e,t,n,r,i,o){if(n){var s=Ie(t),a=Pe(t),l=r*n;i==null?(i=t+r*yr,o=t-l/2):(i=lO(s,i),o=lO(s,o),(r>0?i<o:i>o)&&(i+=r*yr));for(var u,f=i;r>0?f>o:f<o;f-=l)u=Zy([s,-a*Ie(f),-a*Pe(f)]),e.point(u[0],u[1])}}function lO(e,t){t=Gu(t),t[0]-=e,Jy(t);var n=jq(-t[1]);return((-t[2]<0?-n:n)+yr-je)%yr}function Zq(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Fn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Q1(e,t){return nt(e[0]-t[0])<je&&nt(e[1]-t[1])<je}function a1(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jq(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(y){if(!((v=y.length-1)<=0)){var v,x=y[0],w=y[v],S;if(Q1(x,w)){if(!x[2]&&!w[2]){for(i.lineStart(),a=0;a<v;++a)i.point((x=y[a])[0],x[1]);i.lineEnd();return}w[0]+=2*je}o.push(S=new a1(x,y,null,!0)),s.push(S.o=new a1(x,null,S,!1)),o.push(S=new a1(w,y,null,!1)),s.push(S.o=new a1(w,null,S,!0))}}),!!o.length){for(s.sort(t),uO(o),uO(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],f,d;;){for(var p=u,g=!0;p.v;)if((p=p.n)===u)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,l=f.length;a<l;++a)i.point((d=f[a])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(f=p.p.z,a=f.length-1;a>=0;--a)i.point((d=f[a])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function uO(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function jS(e){return nt(e[0])<=Qe?e[0]:wi(e[0])*((nt(e[0])+Qe)%yr-Qe)}function nde(e,t){var n=jS(t),r=t[1],i=Pe(r),o=[Pe(n),-Ie(n),0],s=0,a=0,l=new gr;i===1?r=Ht+je:i===-1&&(r=-Ht-je);for(var u=0,f=e.length;u<f;++u)if(p=(d=e[u]).length)for(var d,p,g=d[p-1],y=jS(g),v=g[1]/2+Gy,x=Pe(v),w=Ie(v),S=0;S<p;++S,y=C,x=R,w=A,g=E){var E=d[S],C=jS(E),$=E[1]/2+Gy,R=Pe($),A=Ie($),N=C-y,M=N>=0?1:-1,I=M*N,P=I>Qe,K=x*R;if(l.add(Ti(K*M*Pe(I),w*A+K*Ie(I))),s+=P?N+M*yr:N,P^y>=n^C>=n){var W=rd(Gu(g),Gu(E));Jy(W);var j=rd(o,W);Jy(j);var D=(P^N>=0?-1:1)*Pr(j[2]);(r>D||r===D&&(W[0]||W[1]))&&(a+=P^N>=0?1:-1)}}return(s<-1e-6||s<je&&l<-1e-12)^a&1}function eW(e,t,n,r){return function(i){var o=t(i),s=Zq(),a=t(s),l=!1,u,f,d,p={point:g,lineStart:v,lineEnd:x,polygonStart:function(){p.point=w,p.lineStart=S,p.lineEnd=E,f=[],u=[]},polygonEnd:function(){p.point=g,p.lineStart=v,p.lineEnd=x,f=VL(f);var C=nde(u,r);f.length?(l||(i.polygonStart(),l=!0),Jq(f,ide,C,n,i)):C&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(C,$){e(C,$)&&i.point(C,$)}function y(C,$){o.point(C,$)}function v(){p.point=y,o.lineStart()}function x(){p.point=g,o.lineEnd()}function w(C,$){d.push([C,$]),a.point(C,$)}function S(){a.lineStart(),d=[]}function E(){w(d[0][0],d[0][1]),a.lineEnd();var C=a.clean(),$=s.result(),R,A=$.length,N,M,I;if(d.pop(),u.push(d),d=null,!!A){if(C&1){if(M=$[0],(N=M.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),R=0;R<N;++R)i.point((I=M[R])[0],I[1]);i.lineEnd()}return}A>1&&C&2&&$.push($.pop().concat($.shift())),f.push($.filter(rde))}}return p}}function rde(e){return e.length>1}function ide(e,t){return((e=e.x)[0]<0?e[1]-Ht-je:Ht-e[1])-((t=t.x)[0]<0?t[1]-Ht-je:Ht-t[1])}const cO=eW(function(){return!0},ode,ade,[-Qe,-Ht]);function ode(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Qe:-Qe,l=nt(o-t);nt(l-Qe)<je?(e.point(t,n=(n+s)/2>0?Ht:-Ht),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Qe&&(nt(t-r)<je&&(t-=r*je),nt(o-a)<je&&(o-=a*je),n=sde(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function sde(e,t,n,r){var i,o,s=Pe(e-n);return nt(s)>je?zd((Pe(t)*(o=Ie(r))*Pe(n)-Pe(r)*(i=Ie(t))*Pe(e))/(i*o*s)):(t+r)/2}function ade(e,t,n,r){var i;if(e==null)i=n*Ht,r.point(-Qe,i),r.point(0,i),r.point(Qe,i),r.point(Qe,0),r.point(Qe,-i),r.point(0,-i),r.point(-Qe,-i),r.point(-Qe,0),r.point(-Qe,i);else if(nt(e[0]-t[0])>je){var o=e[0]<t[0]?Qe:-Qe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function lde(e){var t=Ie(e),n=2*Xe,r=t>0,i=nt(t)>je;function o(f,d,p,g){tde(g,e,n,p,f,d)}function s(f,d){return Ie(f)*Ie(d)>t}function a(f){var d,p,g,y,v;return{lineStart:function(){y=g=!1,v=1},point:function(x,w){var S=[x,w],E,C=s(x,w),$=r?C?0:u(x,w):C?u(x+(x<0?Qe:-Qe),w):0;if(!d&&(y=g=C)&&f.lineStart(),C!==g&&(E=l(d,S),(!E||Q1(d,E)||Q1(S,E))&&(S[2]=1)),C!==g)v=0,C?(f.lineStart(),E=l(S,d),f.point(E[0],E[1])):(E=l(d,S),f.point(E[0],E[1],2),f.lineEnd()),d=E;else if(i&&d&&r^C){var R;!($&p)&&(R=l(S,d,!0))&&(v=0,r?(f.lineStart(),f.point(R[0][0],R[0][1]),f.point(R[1][0],R[1][1]),f.lineEnd()):(f.point(R[1][0],R[1][1]),f.lineEnd(),f.lineStart(),f.point(R[0][0],R[0][1],3)))}C&&(!d||!Q1(d,S))&&f.point(S[0],S[1]),d=S,g=C,p=$},lineEnd:function(){g&&f.lineEnd(),d=null},clean:function(){return v|(y&&g)<<1}}}function l(f,d,p){var g=Gu(f),y=Gu(d),v=[1,0,0],x=rd(g,y),w=o1(x,x),S=x[0],E=w-S*S;if(!E)return!p&&f;var C=t*w/E,$=-t*S/E,R=rd(v,x),A=s1(v,C),N=s1(x,$);zS(A,N);var M=R,I=o1(A,M),P=o1(M,M),K=I*I-P*(o1(A,A)-1);if(!(K<0)){var W=vr(K),j=s1(M,(-I-W)/P);if(zS(j,A),j=Zy(j),!p)return j;var D=f[0],L=d[0],H=f[1],U=d[1],V;L<D&&(V=D,D=L,L=V);var J=L-D,z=nt(J-Qe)<je,G=z||J<je;if(!z&&U<H&&(V=H,H=U,U=V),G?z?H+U>0^j[1]<(nt(j[0]-D)<je?H:U):H<=j[1]&&j[1]<=U:J>Qe^(D<=j[0]&&j[0]<=L)){var xe=s1(M,(-I+W)/P);return zS(xe,A),[j,Zy(xe)]}}}function u(f,d){var p=r?e:Qe-e,g=0;return f<-p?g|=1:f>p&&(g|=2),d<-p?g|=4:d>p&&(g|=8),g}return eW(s,a,o,r?[0,-e]:[-Qe,e-Qe])}function ude(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],f=0,d=1,p=l-s,g=u-a,y;if(y=n-s,!(!p&&y>0)){if(y/=p,p<0){if(y<f)return;y<d&&(d=y)}else if(p>0){if(y>d)return;y>f&&(f=y)}if(y=i-s,!(!p&&y<0)){if(y/=p,p<0){if(y>d)return;y>f&&(f=y)}else if(p>0){if(y<f)return;y<d&&(d=y)}if(y=r-a,!(!g&&y>0)){if(y/=g,g<0){if(y<f)return;y<d&&(d=y)}else if(g>0){if(y>d)return;y>f&&(f=y)}if(y=o-a,!(!g&&y<0)){if(y/=g,g<0){if(y>d)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<d&&(d=y)}return f>0&&(e[0]=s+f*p,e[1]=a+f*g),d<1&&(t[0]=s+d*p,t[1]=a+d*g),!0}}}}}var l1=1e9,u1=-1e9;function tW(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,d,p){var g=0,y=0;if(u==null||(g=s(u,d))!==(y=s(f,d))||l(u,f)<0^d>0)do p.point(g===0||g===3?e:n,g>1?r:t);while((g=(g+d+4)%4)!==y);else p.point(f[0],f[1])}function s(u,f){return nt(u[0]-e)<je?f>0?0:3:nt(u[0]-n)<je?f>0?2:1:nt(u[1]-t)<je?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var d=s(u,1),p=s(f,1);return d!==p?d-p:d===0?f[1]-u[1]:d===1?u[0]-f[0]:d===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,d=Zq(),p,g,y,v,x,w,S,E,C,$,R,A={point:N,lineStart:K,lineEnd:W,polygonStart:I,polygonEnd:P};function N(D,L){i(D,L)&&f.point(D,L)}function M(){for(var D=0,L=0,H=g.length;L<H;++L)for(var U=g[L],V=1,J=U.length,z=U[0],G,xe,we=z[0],ve=z[1];V<J;++V)G=we,xe=ve,z=U[V],we=z[0],ve=z[1],xe<=r?ve>r&&(we-G)*(r-xe)>(ve-xe)*(e-G)&&++D:ve<=r&&(we-G)*(r-xe)<(ve-xe)*(e-G)&&--D;return D}function I(){f=d,p=[],g=[],R=!0}function P(){var D=M(),L=R&&D,H=(p=VL(p)).length;(L||H)&&(u.polygonStart(),L&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),H&&Jq(p,a,D,o,u),u.polygonEnd()),f=u,p=g=y=null}function K(){A.point=j,g&&g.push(y=[]),$=!0,C=!1,S=E=NaN}function W(){p&&(j(v,x),w&&C&&d.rejoin(),p.push(d.result())),A.point=N,C&&f.lineEnd()}function j(D,L){var H=i(D,L);if(g&&y.push([D,L]),$)v=D,x=L,w=H,$=!1,H&&(f.lineStart(),f.point(D,L));else if(H&&C)f.point(D,L);else{var U=[S=Math.max(u1,Math.min(l1,S)),E=Math.max(u1,Math.min(l1,E))],V=[D=Math.max(u1,Math.min(l1,D)),L=Math.max(u1,Math.min(l1,L))];ude(U,V,e,t,n,r)?(C||(f.lineStart(),f.point(U[0],U[1])),f.point(V[0],V[1]),H||f.lineEnd(),R=!1):H&&(f.lineStart(),f.point(D,L),R=!1)}S=D,E=L,C=H}return A}}function fO(e,t,n){var r=Kr(e,t-je,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function dO(e,t,n){var r=Kr(e,t-je,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function cde(){var e,t,n,r,i,o,s,a,l=10,u=l,f=90,d=360,p,g,y,v,x=2.5;function w(){return{type:"MultiLineString",coordinates:S()}}function S(){return Kr(i1(r/f)*f,n,f).map(y).concat(Kr(i1(a/d)*d,s,d).map(v)).concat(Kr(i1(t/l)*l,e,l).filter(function(E){return nt(E%f)>je}).map(p)).concat(Kr(i1(o/u)*u,i,u).filter(function(E){return nt(E%d)>je}).map(g))}return w.lines=function(){return S().map(function(E){return{type:"LineString",coordinates:E}})},w.outline=function(){return{type:"Polygon",coordinates:[y(r).concat(v(s).slice(1),y(n).reverse().slice(1),v(a).reverse().slice(1))]}},w.extent=function(E){return arguments.length?w.extentMajor(E).extentMinor(E):w.extentMinor()},w.extentMajor=function(E){return arguments.length?(r=+E[0][0],n=+E[1][0],a=+E[0][1],s=+E[1][1],r>n&&(E=r,r=n,n=E),a>s&&(E=a,a=s,s=E),w.precision(x)):[[r,a],[n,s]]},w.extentMinor=function(E){return arguments.length?(t=+E[0][0],e=+E[1][0],o=+E[0][1],i=+E[1][1],t>e&&(E=t,t=e,e=E),o>i&&(E=o,o=i,i=E),w.precision(x)):[[t,o],[e,i]]},w.step=function(E){return arguments.length?w.stepMajor(E).stepMinor(E):w.stepMinor()},w.stepMajor=function(E){return arguments.length?(f=+E[0],d=+E[1],w):[f,d]},w.stepMinor=function(E){return arguments.length?(l=+E[0],u=+E[1],w):[l,u]},w.precision=function(E){return arguments.length?(x=+E,p=fO(o,i,90),g=dO(t,e,x),y=fO(a,s,90),v=dO(r,n,x),w):x},w.extentMajor([[-180,-90+je],[180,90-je]]).extentMinor([[-180,-80-je],[180,80+je]])}const mg=e=>e;var BS=new gr,RC=new gr,nW,rW,TC,NC,Ps={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Ps.lineStart=fde,Ps.lineEnd=hde},polygonEnd:function(){Ps.lineStart=Ps.lineEnd=Ps.point=Fn,BS.add(nt(RC)),RC=new gr},result:function(){var e=BS/2;return BS=new gr,e}};function fde(){Ps.point=dde}function dde(e,t){Ps.point=iW,nW=TC=e,rW=NC=t}function iW(e,t){RC.add(NC*e-TC*t),TC=e,NC=t}function hde(){iW(nW,rW)}var id=1/0,av=id,yg=-id,lv=yg,uv={point:pde,lineStart:Fn,lineEnd:Fn,polygonStart:Fn,polygonEnd:Fn,result:function(){var e=[[id,av],[yg,lv]];return yg=lv=-(av=id=1/0),e}};function pde(e,t){e<id&&(id=e),e>yg&&(yg=e),t<av&&(av=t),t>lv&&(lv=t)}var FC=0,MC=0,Rp=0,cv=0,fv=0,$f=0,DC=0,OC=0,Tp=0,oW,sW,zo,jo,yi={point:Yu,lineStart:hO,lineEnd:pO,polygonStart:function(){yi.lineStart=yde,yi.lineEnd=vde},polygonEnd:function(){yi.point=Yu,yi.lineStart=hO,yi.lineEnd=pO},result:function(){var e=Tp?[DC/Tp,OC/Tp]:$f?[cv/$f,fv/$f]:Rp?[FC/Rp,MC/Rp]:[NaN,NaN];return FC=MC=Rp=cv=fv=$f=DC=OC=Tp=0,e}};function Yu(e,t){FC+=e,MC+=t,++Rp}function hO(){yi.point=gde}function gde(e,t){yi.point=mde,Yu(zo=e,jo=t)}function mde(e,t){var n=e-zo,r=t-jo,i=vr(n*n+r*r);cv+=i*(zo+e)/2,fv+=i*(jo+t)/2,$f+=i,Yu(zo=e,jo=t)}function pO(){yi.point=Yu}function yde(){yi.point=xde}function vde(){aW(oW,sW)}function xde(e,t){yi.point=aW,Yu(oW=zo=e,sW=jo=t)}function aW(e,t){var n=e-zo,r=t-jo,i=vr(n*n+r*r);cv+=i*(zo+e)/2,fv+=i*(jo+t)/2,$f+=i,i=jo*e-zo*t,DC+=i*(zo+e),OC+=i*(jo+t),Tp+=i*3,Yu(zo=e,jo=t)}function lW(e){this._context=e}lW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yr);break}}},result:Fn};var PC=new gr,US,uW,cW,Np,Fp,vg={point:Fn,lineStart:function(){vg.point=bde},lineEnd:function(){US&&fW(uW,cW),vg.point=Fn},polygonStart:function(){US=!0},polygonEnd:function(){US=null},result:function(){var e=+PC;return PC=new gr,e}};function bde(e,t){vg.point=fW,uW=Np=e,cW=Fp=t}function fW(e,t){Np-=e,Fp-=t,PC.add(vr(Np*Np+Fp*Fp)),Np=e,Fp=t}let gO,dv,mO,yO;class vO{constructor(t){this._append=t==null?dW:wde(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==mO||this._append!==dv){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,mO=r,dv=this._append,yO=this._,this._=i}this._+=yO;break}}}result(){const t=this._;return this._="",t.length?t:null}}function dW(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wde(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dW;if(t!==gO){const n=10**t;gO=t,dv=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return dv}function hW(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Os(a,i(o))),o.result()}return s.area=function(a){return Os(a,i(Ps)),Ps.result()},s.measure=function(a){return Os(a,i(vg)),vg.result()},s.bounds=function(a){return Os(a,i(uv)),uv.result()},s.centroid=function(a){return Os(a,i(yi)),yi.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,mg):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new vO(n)):new lW(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new vO(n)),s},s.projection(e).digits(n).context(t)}function G2(e){return function(t){var n=new IC;for(var r in e)n[r]=e[r];return n.stream=t,n}}function IC(){}IC.prototype={constructor:IC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function K5(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Os(n,e.stream(uv)),t(uv.result()),r!=null&&e.clipExtent(r),e}function Y2(e,t,n){return K5(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function Q5(e,t,n){return Y2(e,[[0,0],t],n)}function Z5(e,t,n){return K5(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function J5(e,t,n){return K5(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var xO=16,Sde=Ie(30*Xe);function bO(e,t){return+t?Ede(e,t):kde(e)}function kde(e){return G2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ede(e,t){function n(r,i,o,s,a,l,u,f,d,p,g,y,v,x){var w=u-r,S=f-i,E=w*w+S*S;if(E>4*t&&v--){var C=s+p,$=a+g,R=l+y,A=vr(C*C+$*$+R*R),N=Pr(R/=A),M=nt(nt(R)-1)<je||nt(o-d)<je?(o+d)/2:Ti($,C),I=e(M,N),P=I[0],K=I[1],W=P-r,j=K-i,D=S*W-w*j;(D*D/E>t||nt((w*W+S*j)/E-.5)>.3||s*p+a*g+l*y<Sde)&&(n(r,i,o,s,a,l,P,K,M,C/=A,$/=A,R,v,x),x.point(P,K),n(P,K,M,C,$,R,u,f,d,p,g,y,v,x))}}return function(r){var i,o,s,a,l,u,f,d,p,g,y,v,x={point:w,lineStart:S,lineEnd:C,polygonStart:function(){r.polygonStart(),x.lineStart=$},polygonEnd:function(){r.polygonEnd(),x.lineStart=S}};function w(N,M){N=e(N,M),r.point(N[0],N[1])}function S(){d=NaN,x.point=E,r.lineStart()}function E(N,M){var I=Gu([N,M]),P=e(N,M);n(d,p,f,g,y,v,d=P[0],p=P[1],f=N,g=I[0],y=I[1],v=I[2],xO,r),r.point(d,p)}function C(){x.point=w,r.lineEnd()}function $(){S(),x.point=R,x.lineEnd=A}function R(N,M){E(i=N,M),o=d,s=p,a=g,l=y,u=v,x.point=E}function A(){n(d,p,f,g,y,v,o,s,i,a,l,u,xO,r),x.lineEnd=C,C()}return x}}var _de=G2({point:function(e,t){this.stream.point(e*Xe,t*Xe)}});function Cde(e){return G2({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function $de(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function wO(e,t,n,r,i,o){if(!o)return $de(e,t,n,r,i);var s=Ie(o),a=Pe(o),l=s*e,u=a*e,f=s/e,d=a/e,p=(a*n-s*t)/e,g=(a*t+s*n)/e;function y(v,x){return v*=r,x*=i,[l*v-u*x+t,n-u*v-l*x]}return y.invert=function(v,x){return[r*(f*v-d*x+p),i*(g-d*v-f*x)]},y}function us(e){return pW(function(){return e})()}function pW(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,f,d=0,p=1,g=1,y=null,v=cO,x=null,w,S,E,C=mg,$=.5,R,A,N,M,I;function P(D){return N(D[0]*Xe,D[1]*Xe)}function K(D){return D=N.invert(D[0],D[1]),D&&[D[0]*Kt,D[1]*Kt]}P.stream=function(D){return M&&I===D?M:M=_de(Cde(f)(v(R(C(I=D)))))},P.preclip=function(D){return arguments.length?(v=D,y=void 0,j()):v},P.postclip=function(D){return arguments.length?(C=D,x=w=S=E=null,j()):C},P.clipAngle=function(D){return arguments.length?(v=+D?lde(y=D*Xe):(y=null,cO),j()):y*Kt},P.clipExtent=function(D){return arguments.length?(C=D==null?(x=w=S=E=null,mg):tW(x=+D[0][0],w=+D[0][1],S=+D[1][0],E=+D[1][1]),j()):x==null?null:[[x,w],[S,E]]},P.scale=function(D){return arguments.length?(n=+D,W()):n},P.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],W()):[r,i]},P.center=function(D){return arguments.length?(o=D[0]%360*Xe,s=D[1]%360*Xe,W()):[o*Kt,s*Kt]},P.rotate=function(D){return arguments.length?(a=D[0]%360*Xe,l=D[1]%360*Xe,u=D.length>2?D[2]%360*Xe:0,W()):[a*Kt,l*Kt,u*Kt]},P.angle=function(D){return arguments.length?(d=D%360*Xe,W()):d*Kt},P.reflectX=function(D){return arguments.length?(p=D?-1:1,W()):p<0},P.reflectY=function(D){return arguments.length?(g=D?-1:1,W()):g<0},P.precision=function(D){return arguments.length?(R=bO(A,$=D*D),j()):vr($)},P.fitExtent=function(D,L){return Y2(P,D,L)},P.fitSize=function(D,L){return Q5(P,D,L)},P.fitWidth=function(D,L){return Z5(P,D,L)},P.fitHeight=function(D,L){return J5(P,D,L)};function W(){var D=wO(n,0,0,p,g,d).apply(null,t(o,s)),L=wO(n,r-D[0],i-D[1],p,g,d);return f=Qq(a,l,u),A=$C(t,L),N=$C(f,A),R=bO(A,$),j()}function j(){return M=I=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&K,W()}}function eR(e){var t=0,n=Qe/3,r=pW(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Xe,n=o[1]*Xe):[t*Kt,n*Kt]},i}function Ade(e){var t=Ie(e);function n(r,i){return[r*t,Pe(i)/t]}return n.invert=function(r,i){return[r/t,Pr(i*t)]},n}function Rde(e,t){var n=Pe(e),r=(n+Pe(t))/2;if(nt(r)<je)return Ade(e);var i=1+n*(2*r-n),o=vr(i)/r;function s(a,l){var u=vr(i-2*r*Pe(l))/r;return[u*Pe(a*=r),o-u*Ie(a)]}return s.invert=function(a,l){var u=o-l,f=Ti(a,nt(u))*wi(u);return u*r<0&&(f-=Qe*wi(a)*wi(u)),[f/r,Pr((i-(a*a+u*u)*r*r)/(2*r))]},s}function hv(){return eR(Rde).scale(155.424).center([0,33.6442])}function gW(){return hv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tde(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Nde(){var e,t,n=gW(),r,i=hv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=hv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(p,g){l=[p,g]}};function f(p){var g=p[0],y=p[1];return l=null,r.point(g,y),l||(o.point(g,y),l)||(a.point(g,y),l)}f.invert=function(p){var g=n.scale(),y=n.translate(),v=(p[0]-y[0])/g,x=(p[1]-y[1])/g;return(x>=.12&&x<.234&&v>=-.425&&v<-.214?i:x>=.166&&x<.234&&v>=-.214&&v<-.115?s:n).invert(p)},f.stream=function(p){return e&&t===p?e:e=Tde([n.stream(t=p),i.stream(p),s.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),s.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),s.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var g=n.scale(),y=+p[0],v=+p[1];return r=n.translate(p).clipExtent([[y-.455*g,v-.238*g],[y+.455*g,v+.238*g]]).stream(u),o=i.translate([y-.307*g,v+.201*g]).clipExtent([[y-.425*g+je,v+.12*g+je],[y-.214*g-je,v+.234*g-je]]).stream(u),a=s.translate([y-.205*g,v+.212*g]).clipExtent([[y-.214*g+je,v+.166*g+je],[y-.115*g-je,v+.234*g-je]]).stream(u),d()},f.fitExtent=function(p,g){return Y2(f,p,g)},f.fitSize=function(p,g){return Q5(f,p,g)},f.fitWidth=function(p,g){return Z5(f,p,g)},f.fitHeight=function(p,g){return J5(f,p,g)};function d(){return e=t=null,f}return f.scale(1070)}function mW(e){return function(t,n){var r=Ie(t),i=Ie(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Pe(t),o*Pe(n)]}}function lm(e){return function(t,n){var r=vr(t*t+n*n),i=e(r),o=Pe(i),s=Ie(i);return[Ti(t*o,r*s),Pr(r&&n*o/r)]}}var yW=mW(function(e){return vr(2/(1+e))});yW.invert=lm(function(e){return 2*Pr(e/2)});function Fde(){return us(yW).scale(124.75).clipAngle(180-.001)}var vW=mW(function(e){return(e=jq(e))&&e/Pe(e)});vW.invert=lm(function(e){return e});function Mde(){return us(vW).scale(79.4188).clipAngle(180-.001)}function X2(e,t){return[e,Yy(Y5((Ht+t)/2))]}X2.invert=function(e,t){return[e,2*zd(zq(t))-Ht]};function Dde(){return xW(X2).scale(961/yr)}function xW(e){var t=us(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),f()):r()},t.translate=function(d){return arguments.length?(i(d),f()):i()},t.center=function(d){return arguments.length?(n(d),f()):n()},t.clipExtent=function(d){return arguments.length?(d==null?s=a=l=u=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),f()):s==null?null:[[s,a],[l,u]]};function f(){var d=Qe*r(),p=t(ede(t.rotate()).invert([0,0]));return o(s==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:e===X2?[[Math.max(p[0]-d,s),a],[Math.min(p[0]+d,l),u]]:[[s,Math.max(p[1]-d,a)],[l,Math.min(p[1]+d,u)]])}return f()}function c1(e){return Y5((Ht+e)/2)}function Ode(e,t){var n=Ie(e),r=e===t?Pe(e):Yy(n/Ie(t))/Yy(c1(t)/c1(e)),i=n*LS(c1(e),r)/r;if(!r)return X2;function o(s,a){i>0?a<-Ht+je&&(a=-Ht+je):a>Ht-je&&(a=Ht-je);var l=i/LS(c1(a),r);return[l*Pe(r*s),i-l*Ie(r*s)]}return o.invert=function(s,a){var l=i-a,u=wi(r)*vr(s*s+l*l),f=Ti(s,nt(l))*wi(l);return l*r<0&&(f-=Qe*wi(s)*wi(l)),[f/r,2*zd(LS(i/u,1/r))-Ht]},o}function Pde(){return eR(Ode).scale(109.5).parallels([30,30])}function pv(e,t){return[e,t]}pv.invert=pv;function Ide(){return us(pv).scale(152.63)}function Lde(e,t){var n=Ie(e),r=e===t?Pe(e):(n-Ie(t))/(t-e),i=n/r+e;if(nt(r)<je)return pv;function o(s,a){var l=i-a,u=r*s;return[l*Pe(u),i-l*Ie(u)]}return o.invert=function(s,a){var l=i-a,u=Ti(s,nt(l))*wi(l);return l*r<0&&(u-=Qe*wi(s)*wi(l)),[u/r,i-wi(r)*vr(s*s+l*l)]},o}function zde(){return eR(Lde).scale(131.154).center([0,13.9389])}var Yp=1.340264,Xp=-.081106,Kp=893e-6,Qp=.003796,gv=vr(3)/2,jde=12;function bW(e,t){var n=Pr(gv*Pe(t)),r=n*n,i=r*r*r;return[e*Ie(n)/(gv*(Yp+3*Xp*r+i*(7*Kp+9*Qp*r))),n*(Yp+Xp*r+i*(Kp+Qp*r))]}bW.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<jde&&(a=n*(Yp+Xp*r+i*(Kp+Qp*r))-t,l=Yp+3*Xp*r+i*(7*Kp+9*Qp*r),n-=s=a/l,r=n*n,i=r*r*r,!(nt(s)<yC));++o);return[gv*e*(Yp+3*Xp*r+i*(7*Kp+9*Qp*r))/Ie(n),Pr(Pe(n)/gv)]};function Bde(){return us(bW).scale(177.158)}function wW(e,t){var n=Ie(t),r=Ie(e)*n;return[n*Pe(e)/r,Pe(t)/r]}wW.invert=lm(zd);function Ude(){return us(wW).scale(144.049).clipAngle(60)}function qde(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,f,d,p=1,g=1,y=G2({point:function(C,$){var R=E([C,$]);this.stream.point(R[0],R[1])}}),v=mg,x,w;function S(){return p=e*r,g=e*i,x=w=null,E}function E(C){var $=C[0]*p,R=C[1]*g;if(o){var A=R*s-$*a;$=$*s+R*a,R=A}return[$+t,R+n]}return E.invert=function(C){var $=C[0]-t,R=C[1]-n;if(o){var A=R*s+$*a;$=$*s-R*a,R=A}return[$/p,R/g]},E.stream=function(C){return x&&w===C?x:x=y(v(w=C))},E.postclip=function(C){return arguments.length?(v=C,l=u=f=d=null,S()):v},E.clipExtent=function(C){return arguments.length?(v=C==null?(l=u=f=d=null,mg):tW(l=+C[0][0],u=+C[0][1],f=+C[1][0],d=+C[1][1]),S()):l==null?null:[[l,u],[f,d]]},E.scale=function(C){return arguments.length?(e=+C,S()):e},E.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],S()):[t,n]},E.angle=function(C){return arguments.length?(o=C%360*Xe,a=Pe(o),s=Ie(o),S()):o*Kt},E.reflectX=function(C){return arguments.length?(r=C?-1:1,S()):r<0},E.reflectY=function(C){return arguments.length?(i=C?-1:1,S()):i<0},E.fitExtent=function(C,$){return Y2(E,C,$)},E.fitSize=function(C,$){return Q5(E,C,$)},E.fitWidth=function(C,$){return Z5(E,C,$)},E.fitHeight=function(C,$){return J5(E,C,$)},E}function SW(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}SW.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(nt(i)>je&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Wde(){return us(SW).scale(175.295)}function kW(e,t){return[Ie(t)*Pe(e),Pe(t)]}kW.invert=lm(Pr);function Vde(){return us(kW).scale(249.5).clipAngle(90+je)}function EW(e,t){var n=Ie(t),r=1+Ie(e)*n;return[n*Pe(e)/r,Pe(t)/r]}EW.invert=lm(function(e){return 2*zd(e)});function Hde(){return us(EW).scale(250).clipAngle(142)}function _W(e,t){return[Yy(Y5((Ht+t)/2)),-e]}_W.invert=function(e,t){return[-t,2*zd(zq(e))-Ht]};function Gde(){var e=xW(_W),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Yde=Math.abs,LC=Math.cos,mv=Math.sin,Xde=1e-6,CW=Math.PI,zC=CW/2,SO=Kde(2);function kO(e){return e>1?zC:e<-1?-zC:Math.asin(e)}function Kde(e){return e>0?Math.sqrt(e):0}function Qde(e,t){var n=e*mv(t),r=30,i;do t-=i=(t+mv(t)-n)/(1+LC(t));while(Yde(i)>Xde&&--r>0);return t/2}function Zde(e,t,n){function r(i,o){return[e*i*LC(o=Qde(n,o)),t*mv(o)]}return r.invert=function(i,o){return o=kO(o/t),[i/(e*LC(o)),kO((2*o+mv(2*o))/n)]},r}var Jde=Zde(SO/zC,SO,CW);function ehe(){return us(Jde).scale(169.529)}const the=hW(),jC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function nhe(e,t){return function n(){const r=t();return r.type=e,r.path=hW().projection(r),r.copy=r.copy||function(){const i=n();return jC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},UB(r)}}function tR(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(yv[e]=nhe(e,t),this):yv[e]||null}function $W(e){return e&&e.path||the}const yv={albers:gW,albersusa:Nde,azimuthalequalarea:Fde,azimuthalequidistant:Mde,conicconformal:Pde,conicequalarea:hv,conicequidistant:zde,equalEarth:Bde,equirectangular:Ide,gnomonic:Ude,identity:qde,mercator:Dde,mollweide:ehe,naturalEarth1:Wde,orthographic:Vde,stereographic:Hde,transversemercator:Gde};for(const e in yv)tR(e,yv[e]);function rhe(){}const As=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function AW(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],d=[];return o(l,u,p=>{n(p,l,u),ihe(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var g=0,y=f.length,v;g<y;++g)if(ohe((v=f[g])[0],p)!==-1){v.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(l,u,f){var d=[],p=[],g,y,v,x,w,S;for(g=y=-1,x=l[0]>=u,As[x<<1].forEach(E);++g<e-1;)v=x,x=l[g+1]>=u,As[v|x<<1].forEach(E);for(As[x<<0].forEach(E);++y<t-1;){for(g=-1,x=l[y*e+e]>=u,w=l[y*e]>=u,As[x<<1|w<<2].forEach(E);++g<e-1;)v=x,x=l[y*e+e+g+1]>=u,S=w,w=l[y*e+g+1]>=u,As[v|x<<1|w<<2|S<<3].forEach(E);As[x|w<<3].forEach(E)}for(g=-1,w=l[y*e]>=u,As[w<<2].forEach(E);++g<e-1;)S=w,w=l[y*e+g+1]>=u,As[w<<2|S<<3].forEach(E);As[w<<3].forEach(E);function E(C){var $=[C[0][0]+g,C[0][1]+y],R=[C[1][0]+g,C[1][1]+y],A=s($),N=s(R),M,I;(M=p[A])?(I=d[N])?(delete p[M.end],delete d[I.start],M===I?(M.ring.push(R),f(M.ring)):d[M.start]=p[I.end]={start:M.start,end:I.end,ring:M.ring.concat(I.ring)}):(delete p[M.end],M.ring.push(R),p[M.end=N]=M):(M=d[N])?(I=p[A])?(delete d[M.start],delete p[I.end],M===I?(M.ring.push(R),f(M.ring)):d[I.start]=p[M.end]={start:I.start,end:M.end,ring:I.ring.concat(M.ring)}):(delete d[M.start],M.ring.unshift($),d[M.start=A]=M):d[A]=p[N]={start:A,end:N,ring:[$,R]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(d=>{var p=d[0],g=d[1],y=p|0,v=g|0,x,w=u[v*e+y];p>0&&p<e&&y===p&&(x=u[v*e+y-1],d[0]=p+(f-x)/(w-x)-.5),g>0&&g<t&&v===g&&(x=u[(v-1)*e+y],d[1]=g+(f-x)/(w-x)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||re("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:rhe,r):n===a},r}function ihe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function ohe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=she(e,t[n]))return i;return 0}function she(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],f=l[1],d=e[a],p=d[0],g=d[1];if(ahe(l,d,t))return 0;f>r!=g>r&&n<(p-u)*(r-f)/(g-f)+u&&(i=-i)}return i}function ahe(e,t,n){var r;return lhe(e,t,n)&&uhe(e[r=+(e[0]===t[0])],n[r],t[r])}function lhe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function uhe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function RW(e,t,n){return function(r){var i=Xo(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?dl(o,s,e):a/(e+1);return Kr(o+l,s,l)}}function nR(e){te.call(this,null,e)}nR.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ye(nR,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||er,o=AW().smooth(e.smooth!==!1),s=e.thresholds||che(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),d=o.size([f.width,f.height])(f.values,ie(s)?s:s(f.values));fhe(d,f,u,e),d.forEach(p=>{l.push(d2(u,dt(a!=null?{[a]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function che(e,t,n){const r=RW(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Tu(t(i).values)))}function fhe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ge(i)&&(i=i(n,r)),Ge(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(lt(i)?i:i[0])||1,a=(lt(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(TW(t,s,a,l,u))}function TW(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-o)*t+r,d[1]=(d[1]-s)*n+i}return function(d){return d.coordinates.forEach(l),d}}function EO(e,t,n){const r=e>=0?e:Y3(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function qS(e){return Ge(e)?e:tr(+e)}function NW(){var e=l=>l[0],t=l=>l[1],n=Cd,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const f=EO(r[0],l,e)>>s,d=EO(r[1],l,t)>>s,p=f?f+2:0,g=d?d+2:0,y=2*p+(i>>s),v=2*g+(o>>s),x=new Float32Array(y*v),w=new Float32Array(y*v);let S=x;l.forEach(C=>{const $=p+(+e(C)>>s),R=g+(+t(C)>>s);$>=0&&$<y&&R>=0&&R<v&&(x[$+R*y]+=+n(C))}),f>0&&d>0?(ff(y,v,x,w,f),df(y,v,w,x,d),ff(y,v,x,w,f),df(y,v,w,x,d),ff(y,v,x,w,f),df(y,v,w,x,d)):f>0?(ff(y,v,x,w,f),ff(y,v,w,x,f),ff(y,v,x,w,f),S=w):d>0&&(df(y,v,x,w,d),df(y,v,w,x,d),df(y,v,x,w,d),S=w);const E=u?Math.pow(2,-2*s):1/HL(S);for(let C=0,$=y*v;C<$;++C)S[C]*=E;return{values:S,scale:1<<s,width:y,height:v,x1:p,y1:g,x2:p+(i>>s),y2:g+(o>>s)}}return a.x=function(l){return arguments.length?(e=qS(l),a):e},a.y=function(l){return arguments.length?(t=qS(l),a):t},a.weight=function(l){return arguments.length?(n=qS(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],f=+l[1];return u>=0&&f>=0||re("invalid size"),i=u,o=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||re("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=Se(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&re("invalid bandwidth"),r=l,a):r},a}function ff(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function df(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function rR(e){te.call(this,null,e)}rR.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const dhe=["x","y","weight","size","cellSize","bandwidth"];function FW(e,t){return dhe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ye(rR,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=hhe(r,e.groupby),o=(e.groupby||[]).map(Gt),s=FW(NW(),e),a=e.as||"grid",l=[];function u(f,d){for(let p=0;p<o.length;++p)f[o[p]]=d[p];return f}return l=i.map(f=>dt(u({[a]:s(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function hhe(e,t){var n=[],r=f=>f(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function iR(e){te.call(this,null,e)}iR.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ye(iR,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=AW().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||RW(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=FW(NW(),e)(i,!0),l=TW(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=ie(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dt),n}});const BC="Feature",oR="FeatureCollection",phe="MultiPoint";function sR(e){te.call(this,null,e)}sR.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ye(sR,te,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&er,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Kn(a))||o&&t.modified(Kn(o))||s&&t.modified(Kn(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),o&&s&&(t.visit(l,f=>{var d=o(f),p=s(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&r.push([d,p])}),n=n.concat({type:BC,geometry:{type:phe,coordinates:r}})),this.value={type:oR,features:n}}});function aR(e){te.call(this,null,e)}aR.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ye(aR,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||er,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=$W(e.projection),n.materialize().reflow()):s=i===er||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=ghe(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function ghe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function lR(e){te.call(this,null,e)}lR.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ye(lR,te,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(f){const d=n([r(f),i(f)]);d?(f[s]=d[0],f[a]=d[1]):(f[s]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function uR(e){te.call(this,null,e)}uR.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ye(uR,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=mhe($W(e.projection),e.field||Ci("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function mhe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function cR(e){te.call(this,[],e),this.generator=cde()}cR.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ye(cR,te,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ge(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Bz(n[0],i)):t.add.push(dt(i)),n[0]=i,t}});function fR(e){te.call(this,null,e)}fR.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ye(fR,te,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||er,o=vhe(e.opacity,e),s=yhe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Tu(n.map(u=>Tu(i(u).values))):0};return n.forEach(u=>{const f=i(u),d=He({},u,l);r||(d.$max=Tu(f.values||[])),u[a]=xhe(f,d,s.dep?s:tr(s(d)),o.dep?o:tr(o(d)))}),t.reflow(!0).modifies(a)}});function yhe(e,t){let n;return Ge(e)?(n=r=>gl(e(r,t)),n.dep=MW(e)):n=tr(gl(e||"#888")),n}function vhe(e,t){let n;return Ge(e)?(n=r=>e(r,t),n.dep=MW(e)):e?n=tr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function MW(e){if(!Ge(e))return!1;const t=ao(Kn(e));return t.$x||t.$y||t.$value||t.$max}function xhe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,f=e.values,d=f?x=>f[x]:Xa,p=ll(l-s,u-a),g=p.getContext("2d"),y=g.getImageData(0,0,l-s,u-a),v=y.data;for(let x=a,w=0;x<u;++x){t.$y=x-a;for(let S=s,E=x*i;S<l;++S,w+=4){t.$x=S-s,t.$value=d(S+E);const C=n(t);v[w+0]=C.r,v[w+1]=C.g,v[w+2]=C.b,v[w+3]=~~(255*r(t))}}return g.putImageData(y,0,0),p}function DW(e){te.call(this,null,e),this.modified(!0)}ye(DW,te,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=whe(e.type),jC.forEach(r=>{e[r]!=null&&_O(n,r,e[r])})):jC.forEach(r=>{e.modified(r)&&_O(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&bhe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function bhe(e,t){const n=She(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function whe(e){const t=tR((e||"mercator").toLowerCase());return t||re("Unrecognized projection type: "+e),t()}function _O(e,t,n){Ge(e[t])&&e[t](n)}function She(e){return e=Se(e),e.length===1?e[0]:{type:oR,features:e.reduce((t,n)=>t.concat(khe(n)),[])}}function khe(e){return e.type===oR?e.features:Se(e).filter(t=>t!=null).map(t=>t.type===BC?t:{type:BC,geometry:t})}const Ehe=Object.freeze(Object.defineProperty({__proto__:null,contour:iR,geojson:sR,geopath:aR,geopoint:lR,geoshape:uR,graticule:cR,heatmap:fR,isocontour:nR,kde2d:rR,projection:DW},Symbol.toStringTag,{value:"Module"}));function _he(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Che(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return OW(this.cover(t,n),t,n,e)}function OW(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,d,p,g,y,v,x,w,S;if(!o)return e._root=s,e;for(;o.length;)if((v=t>=(d=(a+u)/2))?a=d:u=d,(x=n>=(p=(l+f)/2))?l=p:f=p,i=o,!(o=o[w=x<<1|v]))return i[w]=s,e;if(g=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===g&&n===y)return s.next=o,i?i[w]=s:e._root=s,e;do i=i?i[w]=new Array(4):e._root=new Array(4),(v=t>=(d=(a+u)/2))?a=d:u=d,(x=n>=(p=(l+f)/2))?l=p:f=p;while((w=x<<1|v)===(S=(y>=p)<<1|g>=d));return i[S]=o,i[w]=s,e}function $he(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>d&&(d=o));if(l>f||u>d)return this;for(this.cover(l,u).cover(f,d),n=0;n<r;++n)OW(this,s[n],a[n],e[n]);return this}function Ahe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Rhe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function The(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function fr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Nhe(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,f=this._x1,d=this._y1,p=[],g=this._root,y,v;for(g&&p.push(new fr(g,i,o,f,d)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,d=t+n,n*=n);y=p.pop();)if(!(!(g=y.node)||(s=y.x0)>f||(a=y.y0)>d||(l=y.x1)<i||(u=y.y1)<o))if(g.length){var x=(s+l)/2,w=(a+u)/2;p.push(new fr(g[3],x,w,l,u),new fr(g[2],s,w,x,u),new fr(g[1],x,a,l,w),new fr(g[0],s,a,x,w)),(v=(t>=w)<<1|e>=x)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-v],p[p.length-1-v]=y)}else{var S=e-+this._x.call(null,g.data),E=t-+this._y.call(null,g.data),C=S*S+E*E;if(C<n){var $=Math.sqrt(n=C);i=e-$,o=t-$,f=e+$,d=t+$,r=g.data}}return r}function Fhe(e){if(isNaN(f=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,f,d,p,g,y,v,x,w;if(!n)return this;if(n.length)for(;;){if((y=f>=(p=(s+l)/2))?s=p:l=p,(v=d>=(g=(a+u)/2))?a=g:u=g,t=n,!(n=n[x=v<<1|y]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(r=t,w=x)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[x]=o:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=o,this)}function Mhe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Dhe(){return this._root}function Ohe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Phe(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new fr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,f=(s+l)/2;(i=r[3])&&t.push(new fr(i,u,f,a,l)),(i=r[2])&&t.push(new fr(i,o,f,u,l)),(i=r[1])&&t.push(new fr(i,u,s,a,f)),(i=r[0])&&t.push(new fr(i,o,s,u,f))}return this}function Ihe(e){var t=[],n=[],r;for(this._root&&t.push(new fr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(s+l)/2,d=(a+u)/2;(o=i[0])&&t.push(new fr(o,s,a,f,d)),(o=i[1])&&t.push(new fr(o,f,a,l,d)),(o=i[2])&&t.push(new fr(o,s,d,f,u)),(o=i[3])&&t.push(new fr(o,f,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Lhe(e){return e[0]}function zhe(e){return arguments.length?(this._x=e,this):this._x}function jhe(e){return e[1]}function Bhe(e){return arguments.length?(this._y=e,this):this._y}function dR(e,t,n){var r=new hR(t??Lhe,n??jhe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function hR(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function CO(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var br=dR.prototype=hR.prototype;br.copy=function(){var e=new hR(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=CO(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=CO(r));return e};br.add=Che;br.addAll=$he;br.cover=Ahe;br.data=Rhe;br.extent=The;br.find=Nhe;br.remove=Fhe;br.removeAll=Mhe;br.root=Dhe;br.size=Ohe;br.visit=Phe;br.visitAfter=Ihe;br.x=zhe;br.y=Bhe;function hr(e){return function(){return e}}function nl(e){return(e()-.5)*1e-6}function Uhe(e){return e.x+e.vx}function qhe(e){return e.y+e.vy}function Whe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=hr(e==null?1:+e));function s(){for(var u,f=t.length,d,p,g,y,v,x,w=0;w<o;++w)for(d=dR(t,Uhe,qhe).visitAfter(a),u=0;u<f;++u)p=t[u],v=n[p.index],x=v*v,g=p.x+p.vx,y=p.y+p.vy,d.visit(S);function S(E,C,$,R,A){var N=E.data,M=E.r,I=v+M;if(N){if(N.index>p.index){var P=g-N.x-N.vx,K=y-N.y-N.vy,W=P*P+K*K;W<I*I&&(P===0&&(P=nl(r),W+=P*P),K===0&&(K=nl(r),W+=K*K),W=(I-(W=Math.sqrt(W)))/W*i,p.vx+=(P*=W)*(I=(M*=M)/(x+M)),p.vy+=(K*=W)*I,N.vx-=P*(I=1-I),N.vy-=K*I)}return}return C>g+I||R<g-I||$>y+I||A<y-I}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,d;for(n=new Array(f),u=0;u<f;++u)d=t[u],n[d.index]=+e(d,u,t)}}return s.initialize=function(u,f){t=u,r=f,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),l(),s):e},s}function Vhe(e){return e.index}function $O(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Hhe(e){var t=Vhe,n=d,r,i=hr(30),o,s,a,l,u,f=1;e==null&&(e=[]);function d(x){return 1/Math.min(a[x.source.index],a[x.target.index])}function p(x){for(var w=0,S=e.length;w<f;++w)for(var E=0,C,$,R,A,N,M,I;E<S;++E)C=e[E],$=C.source,R=C.target,A=R.x+R.vx-$.x-$.vx||nl(u),N=R.y+R.vy-$.y-$.vy||nl(u),M=Math.sqrt(A*A+N*N),M=(M-o[E])/M*x*r[E],A*=M,N*=M,R.vx-=A*(I=l[E]),R.vy-=N*I,$.vx+=A*(I=1-I),$.vy+=N*I}function g(){if(s){var x,w=s.length,S=e.length,E=new Map(s.map(($,R)=>[t($,R,s),$])),C;for(x=0,a=new Array(w);x<S;++x)C=e[x],C.index=x,typeof C.source!="object"&&(C.source=$O(E,C.source)),typeof C.target!="object"&&(C.target=$O(E,C.target)),a[C.source.index]=(a[C.source.index]||0)+1,a[C.target.index]=(a[C.target.index]||0)+1;for(x=0,l=new Array(S);x<S;++x)C=e[x],l[x]=a[C.source.index]/(a[C.source.index]+a[C.target.index]);r=new Array(S),y(),o=new Array(S),v()}}function y(){if(s)for(var x=0,w=e.length;x<w;++x)r[x]=+n(e[x],x,e)}function v(){if(s)for(var x=0,w=e.length;x<w;++x)o[x]=+i(e[x],x,e)}return p.initialize=function(x,w){s=x,u=w,g()},p.links=function(x){return arguments.length?(e=x,g(),p):e},p.id=function(x){return arguments.length?(t=x,p):t},p.iterations=function(x){return arguments.length?(f=+x,p):f},p.strength=function(x){return arguments.length?(n=typeof x=="function"?x:hr(+x),y(),p):n},p.distance=function(x){return arguments.length?(i=typeof x=="function"?x:hr(+x),v(),p):i},p}var Ghe={value:()=>{}};function PW(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Z1(n)}function Z1(e){this._=e}function Yhe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Z1.prototype=PW.prototype={constructor:Z1,on:function(e,t){var n=this._,r=Yhe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Xhe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=AO(n[i],e.name,t);else if(t==null)for(i in n)n[i]=AO(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Z1(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Xhe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function AO(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ghe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var od=0,Mp=0,op=0,IW=1e3,vv,Dp,xv=0,Xu=0,K2=0,xg=typeof performance=="object"&&performance.now?performance:Date,LW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pR(){return Xu||(LW(Khe),Xu=xg.now()+K2)}function Khe(){Xu=0}function bv(){this._call=this._time=this._next=null}bv.prototype=zW.prototype={constructor:bv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pR():+n)+(t==null?0:+t),!this._next&&Dp!==this&&(Dp?Dp._next=this:vv=this,Dp=this),this._call=e,this._time=n,UC()},stop:function(){this._call&&(this._call=null,this._time=1/0,UC())}};function zW(e,t,n){var r=new bv;return r.restart(e,t,n),r}function Qhe(){pR(),++od;for(var e=vv,t;e;)(t=Xu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--od}function RO(){Xu=(xv=xg.now())+K2,od=Mp=0;try{Qhe()}finally{od=0,Jhe(),Xu=0}}function Zhe(){var e=xg.now(),t=e-xv;t>IW&&(K2-=t,xv=e)}function Jhe(){for(var e,t=vv,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vv=n);Dp=e,UC(r)}function UC(e){if(!od){Mp&&(Mp=clearTimeout(Mp));var t=e-Xu;t>24?(e<1/0&&(Mp=setTimeout(RO,e-xg.now()-K2)),op&&(op=clearInterval(op))):(op||(xv=xg.now(),op=setInterval(Zhe,IW)),od=1,LW(RO))}}function epe(e,t,n){var r=new bv,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?pR():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const tpe=1664525,npe=1013904223,TO=4294967296;function rpe(){let e=1;return()=>(e=(tpe*e+npe)%TO)/TO}function ipe(e){return e.x}function ope(e){return e.y}var spe=10,ape=Math.PI*(3-Math.sqrt(5));function lpe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=zW(d),u=PW("tick","end"),f=rpe();e==null&&(e=[]);function d(){p(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function p(v){var x,w=e.length,S;v===void 0&&(v=1);for(var E=0;E<v;++E)for(n+=(o-n)*i,a.forEach(function(C){C(n)}),x=0;x<w;++x)S=e[x],S.fx==null?S.x+=S.vx*=s:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=s:(S.y=S.fy,S.vy=0);return t}function g(){for(var v=0,x=e.length,w;v<x;++v){if(w=e[v],w.index=v,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var S=spe*Math.sqrt(.5+v),E=v*ape;w.x=S*Math.cos(E),w.y=S*Math.sin(E)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function y(v){return v.initialize&&v.initialize(e,f),v}return g(),t={tick:p,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(v){return arguments.length?(e=v,g(),a.forEach(y),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(s=1-v,t):1-s},randomSource:function(v){return arguments.length?(f=v,a.forEach(y),t):f},force:function(v,x){return arguments.length>1?(x==null?a.delete(v):a.set(v,y(x)),t):a.get(v)},find:function(v,x,w){var S=0,E=e.length,C,$,R,A,N;for(w==null?w=1/0:w*=w,S=0;S<E;++S)A=e[S],C=v-A.x,$=x-A.y,R=C*C+$*$,R<w&&(N=A,w=R);return N},on:function(v,x){return arguments.length>1?(u.on(v,x),t):u.on(v)}}}function upe(){var e,t,n,r,i=hr(-30),o,s=1,a=1/0,l=.81;function u(g){var y,v=e.length,x=dR(e,ipe,ope).visitAfter(d);for(r=g,y=0;y<v;++y)t=e[y],x.visit(p)}function f(){if(e){var g,y=e.length,v;for(o=new Array(y),g=0;g<y;++g)v=e[g],o[v.index]=+i(v,g,e)}}function d(g){var y=0,v,x,w=0,S,E,C;if(g.length){for(S=E=C=0;C<4;++C)(v=g[C])&&(x=Math.abs(v.value))&&(y+=v.value,w+=x,S+=x*v.x,E+=x*v.y);g.x=S/w,g.y=E/w}else{v=g,v.x=v.data.x,v.y=v.data.y;do y+=o[v.data.index];while(v=v.next)}g.value=y}function p(g,y,v,x){if(!g.value)return!0;var w=g.x-t.x,S=g.y-t.y,E=x-y,C=w*w+S*S;if(E*E/l<C)return C<a&&(w===0&&(w=nl(n),C+=w*w),S===0&&(S=nl(n),C+=S*S),C<s&&(C=Math.sqrt(s*C)),t.vx+=w*g.value*r/C,t.vy+=S*g.value*r/C),!0;if(g.length||C>=a)return;(g.data!==t||g.next)&&(w===0&&(w=nl(n),C+=w*w),S===0&&(S=nl(n),C+=S*S),C<s&&(C=Math.sqrt(s*C)));do g.data!==t&&(E=o[g.data.index]*r/C,t.vx+=w*E,t.vy+=S*E);while(g=g.next)}return u.initialize=function(g,y){e=g,n=y,f()},u.strength=function(g){return arguments.length?(i=typeof g=="function"?g:hr(+g),f(),u):i},u.distanceMin=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.distanceMax=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}function cpe(e){var t=hr(.1),n,r,i;typeof e!="function"&&(e=hr(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:hr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),s(),o):e},o}function fpe(e){var t=hr(.1),n,r,i;typeof e!="function"&&(e=hr(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:hr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),s(),o):e},o}const NO={center:_he,collide:Whe,nbody:upe,link:Hhe,x:cpe,y:fpe},Op="forces",qC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],dpe=["static","iterations"],jW=["x","y","vx","vy"];function gR(e){te.call(this,null,e)}gR.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:jW}]};ye(gR,te,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(qC),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&BW(n,e,0,t)):(this.value=n=ppe(t.source,e),n.on("tick",hpe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(dpe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==Op||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(jW)}});function hpe(e,t){return()=>e.touch(t).run()}function ppe(e,t){const n=lpe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),BW(n,t,!0).on("end",()=>o=!0)}function BW(e,t,n,r){var i=Se(t.forces),o,s,a,l;for(o=0,s=qC.length;o<s;++o)a=qC[o],a!==Op&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=Op+o,a=n||t.modified(Op,o)?mpe(i[o]):r&&gpe(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Op+o,null);return e.numForces=i.length,e}function gpe(e,t){var n,r;for(n in e)if(Ge(r=e[n])&&t.modified(Kn(r)))return 1;return 0}function mpe(e){var t,n;_e(NO,e.force)||re("Unrecognized force: "+e.force),t=NO[e.force]();for(n in e)Ge(t[n])&&ype(t[n],e[n],e);return t}function ype(e,t,n){e(Ge(t)?r=>t(r,n):t)}const vpe=Object.freeze(Object.defineProperty({__proto__:null,force:gR},Symbol.toStringTag,{value:"Module"}));function xpe(e,t){return e.parent===t.parent?1:2}function bpe(e){return e.reduce(wpe,0)/e.length}function wpe(e,t){return e+t.x}function Spe(e){return 1+e.reduce(kpe,0)}function kpe(e,t){return Math.max(e,t.y)}function Epe(e){for(var t;t=e.children;)e=t[0];return e}function _pe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Cpe(){var e=xpe,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(p){var g=p.children;g?(p.x=bpe(g),p.y=Spe(g)):(p.x=s?a+=e(p,s):0,p.y=0,s=p)});var l=Epe(o),u=_pe(o),f=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*t,p.y=(1-(o.y?p.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function $pe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ape(){return this.eachAfter($pe)}function Rpe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Tpe(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Npe(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Fpe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Mpe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Dpe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ope(e){for(var t=this,n=Ppe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ppe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ipe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Lpe(){return Array.from(this)}function zpe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function jpe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Bpe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function mR(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Wpe)):t===void 0&&(t=qpe);for(var n=new sd(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new sd(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(UW)}function Upe(){return mR(this).eachBefore(Vpe)}function qpe(e){return e.children}function Wpe(e){return Array.isArray(e)?e[1]:null}function Vpe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UW(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function sd(e){this.data=e,this.depth=this.height=0,this.parent=null}sd.prototype=mR.prototype={constructor:sd,count:Ape,each:Rpe,eachAfter:Npe,eachBefore:Tpe,find:Fpe,sum:Mpe,sort:Dpe,path:Ope,ancestors:Ipe,descendants:Lpe,leaves:zpe,links:jpe,copy:Upe,[Symbol.iterator]:Bpe};function J1(e){return e==null?null:qW(e)}function qW(e){if(typeof e!="function")throw new Error;return e}function ku(){return 0}function wf(e){return function(){return e}}const Hpe=1664525,Gpe=1013904223,FO=4294967296;function Ype(){let e=1;return()=>(e=(Hpe*e+Gpe)%FO)/FO}function Xpe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kpe(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Qpe(e,t){for(var n=0,r=(e=Kpe(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&WW(s,o)?++n:(s=Jpe(i=Zpe(i,o)),n=0);return s}function Zpe(e,t){var n,r;if(WS(t,e))return[t];for(n=0;n<e.length;++n)if(f1(t,e[n])&&WS(Pp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(f1(Pp(e[n],e[r]),t)&&f1(Pp(e[n],t),e[r])&&f1(Pp(e[r],t),e[n])&&WS(VW(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function f1(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function WW(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function WS(e,t){for(var n=0;n<t.length;++n)if(!WW(e,t[n]))return!1;return!0}function Jpe(e){switch(e.length){case 1:return ege(e[0]);case 2:return Pp(e[0],e[1]);case 3:return VW(e[0],e[1],e[2])}}function ege(e){return{x:e.x,y:e.y,r:e.r}}function Pp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,f=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*f)/2,y:(r+s+u/d*f)/2,r:(d+i+a)/2}}function VW(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,f=n.y,d=n.r,p=r-s,g=r-u,y=i-a,v=i-f,x=l-o,w=d-o,S=r*r+i*i-o*o,E=S-s*s-a*a+l*l,C=S-u*u-f*f+d*d,$=g*y-p*v,R=(y*C-v*E)/($*2)-r,A=(v*x-y*w)/$,N=(g*E-p*C)/($*2)-i,M=(p*w-g*x)/$,I=A*A+M*M-1,P=2*(o+R*A+N*M),K=R*R+N*N-o*o,W=-(Math.abs(I)>1e-6?(P+Math.sqrt(P*P-4*I*K))/(2*I):K/P);return{x:r+R+A*W,y:i+N+M*W,r:W}}function MO(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function DO(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function OO(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function d1(e){this._=e,this.next=null,this.previous=null}function tge(e,t){if(!(o=(e=Xpe(e)).length))return 0;var n,r,i,o,s,a,l,u,f,d,p;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;MO(r,n,i=e[2]),n=new d1(n),r=new d1(r),i=new d1(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){MO(n._,r._,i=e[l]),i=new d1(i),u=r.next,f=n.previous,d=r._.r,p=n._.r;do if(d<=p){if(DO(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(DO(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}p+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=OO(n);(i=i.next)!==r;)(a=OO(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Qpe(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function nge(e){return Math.sqrt(e.value)}function rge(){var e=null,t=1,n=1,r=ku;function i(o){const s=Ype();return o.x=t/2,o.y=n/2,e?o.eachBefore(PO(e)).eachAfter(VS(r,.5,s)).eachBefore(IO(1)):o.eachBefore(PO(nge)).eachAfter(VS(ku,1,s)).eachAfter(VS(r,o.r/Math.min(t,n),s)).eachBefore(IO(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=J1(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:wf(+o),i):r},i}function PO(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function VS(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=tge(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function IO(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function HW(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function um(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function ige(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(HW),s}function o(s,a){return function(l){l.children&&um(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,f=l.y0,d=l.x1-n,p=l.y1-n;d<u&&(u=d=(u+d)/2),p<f&&(f=p=(f+p)/2),l.x0=u,l.y0=f,l.x1=d,l.y1=p}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var oge={depth:-1},LO={},HS={};function sge(e){return e.id}function age(e){return e.parentId}function zO(){var e=sge,t=age,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,f,d,p,g,y,v,x=new Map;if(n!=null){const w=o.map((C,$)=>lge(n(C,$,i))),S=w.map(jO),E=new Set(w).add("");for(const C of S)E.has(C)||(E.add(C),w.push(C),S.push(jO(C)),o.push(HS));s=(C,$)=>w[$],a=(C,$)=>S[$]}for(f=0,l=o.length;f<l;++f)u=o[f],g=o[f]=new sd(u),(y=s(u,f,i))!=null&&(y+="")&&(v=g.id=y,x.set(v,x.has(v)?LO:g)),(y=a(u,f,i))!=null&&(y+="")&&(g.parent=y);for(f=0;f<l;++f)if(g=o[f],y=g.parent){if(p=x.get(y),!p)throw new Error("missing: "+y);if(p===LO)throw new Error("ambiguous: "+y);p.children?p.children.push(g):p.children=[g],g.parent=p}else{if(d)throw new Error("multiple roots");d=g}if(!d)throw new Error("no root");if(n!=null){for(;d.data===HS&&d.children.length===1;)d=d.children[0],--l;for(let w=o.length-1;w>=0&&(g=o[w],g.data===HS);--w)g.data=null}if(d.parent=oge,d.eachBefore(function(w){w.depth=w.parent.depth+1,--l}).eachBefore(UW),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=J1(i),r):e},r.parentId=function(i){return arguments.length?(t=J1(i),r):t},r.path=function(i){return arguments.length?(n=J1(i),r):n},r}function lge(e){e=`${e}`;let t=e.length;return WC(e,t-1)&&!WC(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function jO(e){let t=e.length;if(t<2)return"";for(;--t>1&&!WC(e,t););return e.slice(0,t)}function WC(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function uge(e,t){return e.parent===t.parent?1:2}function GS(e){var t=e.children;return t?t[0]:e.t}function YS(e){var t=e.children;return t?t[t.length-1]:e.t}function cge(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function fge(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function dge(e,t,n){return e.a.parent===t.parent?e.a:n}function ey(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ey.prototype=Object.create(sd.prototype);function hge(e){for(var t=new ey(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new ey(o[s],s)),i.parent=n;return(t.parent=new ey(null,0)).children=[t],t}function pge(){var e=uge,t=1,n=1,r=null;function i(u){var f=hge(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(s),r)u.eachBefore(l);else{var d=u,p=u,g=u;u.eachBefore(function(S){S.x<d.x&&(d=S),S.x>p.x&&(p=S),S.depth>g.depth&&(g=S)});var y=d===p?1:e(d,p)/2,v=y-d.x,x=t/(p.x+y+v),w=n/(g.depth||1);u.eachBefore(function(S){S.x=(S.x+v)*x,S.y=S.depth*w})}return u}function o(u){var f=u.children,d=u.parent.children,p=u.i?d[u.i-1]:null;if(f){fge(u);var g=(f[0].z+f[f.length-1].z)/2;p?(u.z=p.z+e(u._,p._),u.m=u.z-g):u.z=g}else p&&(u.z=p.z+e(u._,p._));u.parent.A=a(u,p,u.parent.A||d[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,d){if(f){for(var p=u,g=u,y=f,v=p.parent.children[0],x=p.m,w=g.m,S=y.m,E=v.m,C;y=YS(y),p=GS(p),y&&p;)v=GS(v),g=YS(g),g.a=u,C=y.z+S-p.z-x+e(y._,p._),C>0&&(cge(dge(y,u,d),u,C),x+=C,w+=C),S+=y.m,x+=p.m,E+=v.m,w+=g.m;y&&!YS(g)&&(g.t=y,g.m+=S-w),p&&!GS(v)&&(v.t=p,v.m+=x-E,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function Q2(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var GW=(1+Math.sqrt(5))/2;function YW(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,f=0,d=0,p=a.length,g,y,v=t.value,x,w,S,E,C,$,R;f<p;){g=i-n,y=o-r;do x=a[d++].value;while(!x&&d<p);for(w=S=x,$=Math.max(y/g,g/y)/(v*e),R=x*x*$,C=Math.max(S/R,R/w);d<p;++d){if(x+=u=a[d].value,u<w&&(w=u),u>S&&(S=u),R=x*x*$,E=Math.max(S/R,R/w),E>C){x-=u;break}C=E}s.push(l={value:x,dice:g<y,children:a.slice(f,d)}),l.dice?um(l,n,r,i,v?r+=y*x/v:o):Q2(l,n,r,v?n+=g*x/v:i,o),v-=x,f=d}return s}const XW=function e(t){function n(r,i,o,s,a){YW(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(GW);function gge(){var e=XW,t=!1,n=1,r=1,i=[0],o=ku,s=ku,a=ku,l=ku,u=ku;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=r,p.eachBefore(d),i=[0],t&&p.eachBefore(HW),p}function d(p){var g=i[p.depth],y=p.x0+g,v=p.y0+g,x=p.x1-g,w=p.y1-g;x<y&&(y=x=(y+x)/2),w<v&&(v=w=(v+w)/2),p.x0=y,p.y0=v,p.x1=x,p.y1=w,p.children&&(g=i[p.depth+1]=o(p)/2,y+=u(p)-g,v+=s(p)-g,x-=a(p)-g,w-=l(p)-g,x<y&&(y=x=(y+x)/2),w<v&&(v=w=(v+w)/2),e(p,y,v,x,w))}return f.round=function(p){return arguments.length?(t=!!p,f):t},f.size=function(p){return arguments.length?(n=+p[0],r=+p[1],f):[n,r]},f.tile=function(p){return arguments.length?(e=qW(p),f):e},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:wf(+p),f):o},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:wf(+p),f):s},f.paddingRight=function(p){return arguments.length?(a=typeof p=="function"?p:wf(+p),f):a},f.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:wf(+p),f):l},f.paddingLeft=function(p){return arguments.length?(u=typeof p=="function"?p:wf(+p),f):u},f}function mge(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;f(0,a,e.value,t,n,r,i);function f(d,p,g,y,v,x,w){if(d>=p-1){var S=o[d];S.x0=y,S.y0=v,S.x1=x,S.y1=w;return}for(var E=u[d],C=g/2+E,$=d+1,R=p-1;$<R;){var A=$+R>>>1;u[A]<C?$=A+1:R=A}C-u[$-1]<u[$]-C&&d+1<$&&--$;var N=u[$]-E,M=g-N;if(x-y>w-v){var I=g?(y*M+x*N)/g:x;f(d,$,N,y,v,I,w),f($,p,M,I,v,x,w)}else{var P=g?(v*M+w*N)/g:w;f(d,$,N,y,v,x,P),f($,p,M,y,P,x,w)}}}function yge(e,t,n,r,i){(e.depth&1?Q2:um)(e,t,n,r,i)}const vge=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,d,p=-1,g,y=l.length,v=r.value;++p<y;){for(u=l[p],f=u.children,d=u.value=0,g=f.length;d<g;++d)u.value+=f[d].value;u.dice?um(u,i,o,s,v?o+=(a-o)*u.value/v:a):Q2(u,i,o,v?i+=(s-i)*u.value/v:s,a),v-=u.value}else r._squarify=l=YW(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(GW);function VC(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function yR(e){te.call(this,null,e)}yR.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const xge=e=>e.values;ye(yR,te,{transform(e,t){t.source||re("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&f2(s.data)&&i.rem.push(s.data)}),this.value=o=mR({values:Se(e.keys).reduce((s,a)=>(s.key(a),s),bge()).entries(i.source)},xge),n&&o.each(s=>{s.children&&(s=dt(s.data),i.add.push(s),i.source.push(s))}),VC(o,Oe,Oe)),i.source.root=o,i}});function bge(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let f=-1,d,p,g;for(;++f<s;)d=a(p=i[f])+"",(g=l[d])?g.push(p):l[d]=[p];for(d in l)u[d]=n(l[d],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function la(e){te.call(this,null,e)}const wge=(e,t)=>e.parent===t.parent?1:2;ye(la,te,{transform(e,t){(!t.source||!t.source.root)&&re(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(hc(e.sort,s=>s.data)),Sge(n,this.params,e),n.separation&&n.separation(e.separation!==!1?wge:Cd);try{this.value=n(i)}catch(s){re(s)}return i.each(s=>kge(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Sge(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function kge(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const HC=["x","y","r","depth","children"];function vR(e){la.call(this,e)}vR.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HC.length,default:HC}]};ye(vR,la,{layout:rge,params:["radius","size","padding"],fields:HC});const GC=["x0","y0","x1","y1","depth","children"];function xR(e){la.call(this,e)}xR.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GC.length,default:GC}]};ye(xR,la,{layout:ige,params:["size","round","padding"],fields:GC});function bR(e){te.call(this,null,e)}bR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ye(bR,te,{transform(e,t){t.source||re("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?VC(zO().id(e.key).parentId(e.parentKey)(i.source),e.key,$i):VC(zO()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const BO={tidy:pge,cluster:Cpe},YC=["x","y","depth","children"];function wR(e){la.call(this,e)}wR.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:YC.length,default:YC}]};ye(wR,la,{layout(e){const t=e||"tidy";if(_e(BO,t))return BO[t]();re("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:YC});function SR(e){te.call(this,[],e)}SR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ye(SR,te,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||re("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Oe(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Oe(a)]&&o[Oe(l)]&&i.add.push(dt({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Oe(s)]=1),n.forEach(s=>{(o[Oe(s.source)]||o[Oe(s.target)])&&i.mod.push(s)})),i}});const UO={binary:mge,dice:um,slice:Q2,slicedice:yge,squarify:XW,resquarify:vge},XC=["x0","y0","x1","y1","depth","children"];function kR(e){la.call(this,e)}kR.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XC.length,default:XC}]};ye(kR,la,{layout(){const e=gge();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(UO,t)?e.tile(UO[t]):re("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:XC});const Ege=Object.freeze(Object.defineProperty({__proto__:null,nest:yR,pack:vR,partition:xR,stratify:bR,tree:wR,treelinks:SR,treemap:kR},Symbol.toStringTag,{value:"Module"})),XS=4278190080;function _ge(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Cge(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=ll(o,s).getContext("2d"),u=ll(o,s).getContext("2d"),f=a&&ll(o,s).getContext("2d");n.forEach(N=>ty(l,N,!1)),ty(u,t,!1),a&&ty(f,t,!0);const d=KS(l,o,s),p=KS(u,o,s),g=a&&KS(f,o,s),y=e.bitmap(),v=a&&e.bitmap();let x,w,S,E,C,$,R,A;for(w=0;w<s;++w)for(x=0;x<o;++x)C=w*o+x,$=d[C]&XS,A=p[C]&XS,R=a&&g[C]&XS,($||R||A)&&(S=e(x),E=e(w),!i&&($||A)&&y.set(S,E),a&&($||R)&&v.set(S,E));return[y,v]}function KS(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function ty(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>ty(e,o.items,n))}):oi[r].draw(e,{items:n?t.map($ge):t})}function $ge(e){const t=d2(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Rs=5,ir=31,bg=32,Ga=new Uint32Array(bg+1),Qi=new Uint32Array(bg+1);Qi[0]=0;Ga[0]=~Qi[0];for(let e=1;e<=bg;++e)Qi[e]=Qi[e-1]<<1|1,Ga[e]=~Qi[e];function Age(e,t){const n=new Uint32Array(~~((e*t+bg)/bg));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Rs]&1<<(a&ir)},set:(o,s)=>{const a=s*e+o;r(a>>>Rs,1<<(a&ir))},clear:(o,s)=>{const a=s*e+o;i(a>>>Rs,~(1<<(a&ir)))},getRange:(o,s,a,l)=>{let u=l,f,d,p,g;for(;u>=s;--u)if(f=u*e+o,d=u*e+a,p=f>>>Rs,g=d>>>Rs,p===g){if(n[p]&Ga[f&ir]&Qi[(d&ir)+1])return!0}else{if(n[p]&Ga[f&ir]||n[g]&Qi[(d&ir)+1])return!0;for(let y=p+1;y<g;++y)if(n[y])return!0}return!1},setRange:(o,s,a,l)=>{let u,f,d,p,g;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,d=u>>>Rs,p=f>>>Rs,d===p)r(d,Ga[u&ir]&Qi[(f&ir)+1]);else for(r(d,Ga[u&ir]),r(p,Qi[(f&ir)+1]),g=d+1;g<p;++g)r(g,4294967295)},clearRange:(o,s,a,l)=>{let u,f,d,p,g;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,d=u>>>Rs,p=f>>>Rs,d===p)i(d,Qi[u&ir]|Ga[(f&ir)+1]);else for(i(d,Qi[u&ir]),i(p,Ga[(f&ir)+1]),g=d+1;g<p;++g)i(g,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function Rge(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Age(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Tge(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,f=Jr.width(s.datum,s.datum.text);let d=0,p,g,y,v,x,w,S;for(let E=0;E<l;++E)p=a[E].x,y=a[E].y,g=a[E].x2===void 0?p:a[E].x2,v=a[E].y2===void 0?y:a[E].y2,x=(p+g)/2,w=(y+v)/2,S=Math.abs(g-p+v-y),S>=d&&(d=S,s.x=x,s.y=w);return x=f/2,w=u/2,p=s.x-x,g=s.x+x,y=s.y-w,v=s.y+w,s.align="center",p<0&&g<=i?s.align="left":0<=p&&i<g&&(s.align="right"),s.baseline="middle",y<0&&v<=o?s.baseline="top":0<=y&&o<v&&(s.baseline="bottom"),!0}}function wv(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function rl(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),f=e(t+l),d=e(n-(o=o/2)),p=e(n+o);return s.outOfBounds(u,d,f,p)||s.getRange(u,d,f,p)||a&&a.getRange(u,d,f,p)}function Nge(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,f,d,p,g){const y=e.invert(u),v=e.invert(f);let x=d,w=o,S;if(!wv(y,v,p,g,i,o)&&!rl(e,y,v,g,p,x,s,a)&&!rl(e,y,v,g,p,g,s,null)){for(;w-x>=1;)S=(x+w)/2,rl(e,y,v,g,p,S,s,a)?w=S:x=S;if(x>d)return[y,v,x,!0]}}return function(u){const f=u.datum.datum.items[r].items,d=f.length,p=u.datum.fontSize,g=Jr.width(u.datum,u.datum.text);let y=n?p:0,v=!1,x=!1,w=0,S,E,C,$,R,A,N,M,I,P,K,W,j,D,L,H,U;for(let V=0;V<d;++V){for(S=f[V].x,C=f[V].y,E=f[V].x2===void 0?S:f[V].x2,$=f[V].y2===void 0?C:f[V].y2,S>E&&(U=S,S=E,E=U),C>$&&(U=C,C=$,$=U),I=e(S),K=e(E),P=~~((I+K)/2),W=e(C),D=e($),j=~~((W+D)/2),N=P;N>=I;--N)for(M=j;M>=W;--M)H=l(N,M,y,g,p),H&&([u.x,u.y,y,v]=H);for(N=P;N<=K;++N)for(M=j;M<=D;++M)H=l(N,M,y,g,p),H&&([u.x,u.y,y,v]=H);!v&&!n&&(L=Math.abs(E-S+$-C),R=(S+E)/2,A=(C+$)/2,L>=w&&!wv(R,A,g,p,i,o)&&!rl(e,R,A,p,g,p,s,null)&&(w=L,u.x=R,u.y=A,x=!0))}return v||x?(R=g/2,A=p/2,s.setRange(e(u.x-R),e(u.y-A),e(u.x+R),e(u.y+A)),u.align="center",u.baseline="middle",!0):!1}}const Fge=[-1,-1,1,1],Mge=[-1,1,-1,1];function Dge(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,d=f.length,p=u.datum.fontSize,g=Jr.width(u.datum,u.datum.text),y=[];let v=n?p:0,x=!1,w=!1,S=0,E,C,$,R,A,N,M,I,P,K,W,j;for(let D=0;D<d;++D){for(E=f[D].x,$=f[D].y,C=f[D].x2===void 0?E:f[D].x2,R=f[D].y2===void 0?$:f[D].y2,y.push([e((E+C)/2),e(($+R)/2)]);y.length;)if([M,I]=y.pop(),!(s.get(M,I)||a.get(M,I)||l.get(M,I))){l.set(M,I);for(let L=0;L<4;++L)A=M+Fge[L],N=I+Mge[L],l.outOfBounds(A,N,A,N)||y.push([A,N]);if(A=e.invert(M),N=e.invert(I),P=v,K=o,!wv(A,N,g,p,i,o)&&!rl(e,A,N,p,g,P,s,a)&&!rl(e,A,N,p,g,p,s,null)){for(;K-P>=1;)W=(P+K)/2,rl(e,A,N,p,g,W,s,a)?K=W:P=W;P>v&&(u.x=A,u.y=N,v=P,x=!0)}}!x&&!n&&(j=Math.abs(C-E+R-$),A=(E+C)/2,N=($+R)/2,j>=S&&!wv(A,N,g,p,i,o)&&!rl(e,A,N,p,g,p,s,null)&&(S=j,u.x=A,u.y=N,w=!0))}return x||w?(A=g/2,N=p/2,s.setRange(e(u.x-A),e(u.y-N),e(u.x+A),e(u.y+N)),u.align="center",u.baseline="middle",!0):!1}}const Oge=["right","center","left"],Pge=["bottom","middle","top"];function Ige(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,d=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let p=u.textWidth??0,g,y,v,x,w,S,E,C,$,R,A,N,M,I,P;for(let K=0;K<l;++K){if(g=(n[K]&3)-1,y=(n[K]>>>2&3)-1,v=g===0&&y===0||r[K]<0,x=g&&y?Math.SQRT1_2:1,w=r[K]<0?-1:1,S=f[1+g]+r[K]*g*x,A=f[4+y]+w*d*y/2+r[K]*y*x,C=A-d/2,$=A+d/2,N=e(S),I=e(C),P=e($),!p)if(qO(N,N,I,P,s,a,S,S,C,$,f,v))p=Jr.width(u.datum,u.datum.text);else continue;if(R=S+w*p*g/2,S=R-p/2,E=R+p/2,N=e(S),M=e(E),qO(N,M,I,P,s,a,S,E,C,$,f,v))return u.x=g?g*w<0?E:S:R,u.y=y?y*w<0?$:C:A,u.align=Oge[g*w+1],u.baseline=Pge[y*w+1],s.setRange(N,I,M,P),!0}return!1}}function qO(e,t,n,r,i,o,s,a,l,u,f,d){return!(i.outOfBounds(e,n,t,r)||(d&&o||i).getRange(e,n,t,r))}const QS=0,ZS=4,JS=8,ek=0,tk=1,nk=2,Lge={"top-left":QS+ek,top:QS+tk,"top-right":QS+nk,left:ZS+ek,middle:ZS+tk,right:ZS+nk,"bottom-left":JS+ek,bottom:JS+tk,"bottom-right":JS+nk},zge={naive:Tge,"reduced-search":Nge,floodfill:Dge};function jge(e,t,n,r,i,o,s,a,l,u,f){if(!e.length)return e;const d=Math.max(r.length,i.length),p=Bge(r,d),g=Uge(i,d),y=qge(e[0].datum),v=y==="group"&&e[0].datum.items[l].marktype,x=v==="area",w=Wge(y,v,a,l),S=u===null||u===1/0,E=x&&f==="naive";let C=-1,$=-1;const R=e.map(I=>{const P=S?Jr.width(I,I.text):void 0;return C=Math.max(C,P),$=Math.max($,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:w(I),textWidth:P}});u=u===null||u===1/0?Math.max(C,$)+Math.max(...r):u;const A=Rge(t[0],t[1],u);let N;if(!E){n&&R.sort((K,W)=>n(K.datum,W.datum));let I=!1;for(let K=0;K<g.length&&!I;++K)I=g[K]===5||p[K]<0;const P=(y&&s||x)&&e.map(K=>K.datum);N=o.length||P?Cge(A,P||[],o,I,x):_ge(A,s&&R)}const M=x?zge[f](A,N,s,l):Ige(A,N,g,p);return R.forEach(I=>I.opacity=+M(I)),R}function Bge(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Uge(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Lge[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function qge(e){return e&&e.mark&&e.mark.marktype}function Wge(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const KC=["x","y","opacity","align","baseline"],KW=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function ER(e){te.call(this,null,e)}ER.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:KW},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:KC.length,default:KC}]};ye(ER,te,{transform(e,t){function n(o){const s=e[o];return Ge(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&re("Size parameter should be specified as a [width, height] array.");const i=e.as||KC;return jge(t.materialize(t.SOURCE).source||[],e.size,e.sort,Se(e.offset==null?1:e.offset),Se(e.anchor||KW),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Vge=Object.freeze(Object.defineProperty({__proto__:null,label:ER},Symbol.toStringTag,{value:"Module"}));function QW(e,t){var n=[],r=function(f){return f(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function _R(e){te.call(this,null,e)}_R.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ye(_R,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=QW(r,e.groupby),o=(e.groupby||[]).map(Gt),s=o.length,a=e.as||[Gt(e.x),Gt(e.y)],l=[];i.forEach(u=>{oj(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const d={};for(let p=0;p<s;++p)d[o[p]]=u.dims[p];d[a[0]]=f[0],d[a[1]]=f[1],l.push(dt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const QC={constant:sA,linear:aA,log:tj,exp:nj,pow:rj,quad:lA,poly:ij},Hge=(e,t)=>e==="poly"?t:e==="quad"?2:1;function CR(e){te.call(this,null,e)}CR.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(QC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ye(CR,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=QW(r,e.groupby),o=(e.groupby||[]).map(Gt),s=e.method||"linear",a=e.order==null?3:e.order,l=Hge(s,a),u=e.as||[Gt(e.x),Gt(e.y)],f=QC[s],d=[];let p=e.extent;_e(QC,s)||re("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(g=>{if(g.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const v=f(g,e.x,e.y,a);if(e.params){d.push(dt({keys:g.dims,coef:v.coef,rSquared:v.rSquared}));return}const x=p||Xo(g,e.x),w=S=>{const E={};for(let C=0;C<o.length;++C)E[o[C]]=g.dims[C];E[u[0]]=S[0],E[u[1]]=S[1],d.push(dt(E))};s==="linear"||s==="constant"?x.forEach(S=>w([S,v.predict(S)])):x2(v.predict,x,25,200).forEach(w)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const Gge=Object.freeze(Object.defineProperty({__proto__:null,loess:_R,regression:CR},Symbol.toStringTag,{value:"Module"})),Gs=11102230246251565e-32,qn=134217729,Yge=(3+8*Gs)*Gs;function rk(e,t,n,r,i){let o,s,a,l,u=t[0],f=r[0],d=0,p=0;f>u==f>-u?(o=u,u=t[++d]):(o=f,f=r[++p]);let g=0;if(d<e&&p<n)for(f>u==f>-u?(s=u+o,a=o-(s-u),u=t[++d]):(s=f+o,a=o-(s-f),f=r[++p]),o=s,a!==0&&(i[g++]=a);d<e&&p<n;)f>u==f>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d]):(s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p]),o=s,a!==0&&(i[g++]=a);for(;d<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d],o=s,a!==0&&(i[g++]=a);for(;p<n;)s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p],o=s,a!==0&&(i[g++]=a);return(o!==0||g===0)&&(i[g++]=o),g}function Xge(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function cm(e){return new Float64Array(e)}const Kge=(3+16*Gs)*Gs,Qge=(2+12*Gs)*Gs,Zge=(9+64*Gs)*Gs*Gs,hf=cm(4),WO=cm(8),VO=cm(12),HO=cm(16),or=cm(4);function Jge(e,t,n,r,i,o,s){let a,l,u,f,d,p,g,y,v,x,w,S,E,C,$,R,A,N;const M=e-i,I=n-i,P=t-o,K=r-o;C=M*K,p=qn*M,g=p-(p-M),y=M-g,p=qn*K,v=p-(p-K),x=K-v,$=y*x-(C-g*v-y*v-g*x),R=P*I,p=qn*P,g=p-(p-P),y=P-g,p=qn*I,v=p-(p-I),x=I-v,A=y*x-(R-g*v-y*v-g*x),w=$-A,d=$-w,hf[0]=$-(w+d)+(d-A),S=C+w,d=S-C,E=C-(S-d)+(w-d),w=E-R,d=E-w,hf[1]=E-(w+d)+(d-R),N=S+w,d=N-S,hf[2]=S-(N-d)+(w-d),hf[3]=N;let W=Xge(4,hf),j=Qge*s;if(W>=j||-W>=j||(d=e-M,a=e-(M+d)+(d-i),d=n-I,u=n-(I+d)+(d-i),d=t-P,l=t-(P+d)+(d-o),d=r-K,f=r-(K+d)+(d-o),a===0&&l===0&&u===0&&f===0)||(j=Zge*s+Yge*Math.abs(W),W+=M*f+K*a-(P*u+I*l),W>=j||-W>=j))return W;C=a*K,p=qn*a,g=p-(p-a),y=a-g,p=qn*K,v=p-(p-K),x=K-v,$=y*x-(C-g*v-y*v-g*x),R=l*I,p=qn*l,g=p-(p-l),y=l-g,p=qn*I,v=p-(p-I),x=I-v,A=y*x-(R-g*v-y*v-g*x),w=$-A,d=$-w,or[0]=$-(w+d)+(d-A),S=C+w,d=S-C,E=C-(S-d)+(w-d),w=E-R,d=E-w,or[1]=E-(w+d)+(d-R),N=S+w,d=N-S,or[2]=S-(N-d)+(w-d),or[3]=N;const D=rk(4,hf,4,or,WO);C=M*f,p=qn*M,g=p-(p-M),y=M-g,p=qn*f,v=p-(p-f),x=f-v,$=y*x-(C-g*v-y*v-g*x),R=P*u,p=qn*P,g=p-(p-P),y=P-g,p=qn*u,v=p-(p-u),x=u-v,A=y*x-(R-g*v-y*v-g*x),w=$-A,d=$-w,or[0]=$-(w+d)+(d-A),S=C+w,d=S-C,E=C-(S-d)+(w-d),w=E-R,d=E-w,or[1]=E-(w+d)+(d-R),N=S+w,d=N-S,or[2]=S-(N-d)+(w-d),or[3]=N;const L=rk(D,WO,4,or,VO);C=a*f,p=qn*a,g=p-(p-a),y=a-g,p=qn*f,v=p-(p-f),x=f-v,$=y*x-(C-g*v-y*v-g*x),R=l*u,p=qn*l,g=p-(p-l),y=l-g,p=qn*u,v=p-(p-u),x=u-v,A=y*x-(R-g*v-y*v-g*x),w=$-A,d=$-w,or[0]=$-(w+d)+(d-A),S=C+w,d=S-C,E=C-(S-d)+(w-d),w=E-R,d=E-w,or[1]=E-(w+d)+(d-R),N=S+w,d=N-S,or[2]=S-(N-d)+(w-d),or[3]=N;const H=rk(L,VO,4,or,HO);return HO[H-1]}function h1(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=Kge*u?l:-Jge(e,t,n,r,i,o,u)}const GO=Math.pow(2,-52),p1=new Uint32Array(512);class Sv{static from(t,n=ime,r=ome){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new Sv(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let M=0;M<s;M++){const I=t[2*M],P=t[2*M+1];I<a&&(a=I),P<l&&(l=P),I>u&&(u=I),P>f&&(f=P),this._ids[M]=M}const d=(a+u)/2,p=(l+f)/2;let g,y,v;for(let M=0,I=1/0;M<s;M++){const P=ik(d,p,t[2*M],t[2*M+1]);P<I&&(g=M,I=P)}const x=t[2*g],w=t[2*g+1];for(let M=0,I=1/0;M<s;M++){if(M===g)continue;const P=ik(x,w,t[2*M],t[2*M+1]);P<I&&P>0&&(y=M,I=P)}let S=t[2*y],E=t[2*y+1],C=1/0;for(let M=0;M<s;M++){if(M===g||M===y)continue;const I=nme(x,w,S,E,t[2*M],t[2*M+1]);I<C&&(v=M,C=I)}let $=t[2*v],R=t[2*v+1];if(C===1/0){for(let P=0;P<s;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];Af(this._ids,this._dists,0,s-1);const M=new Uint32Array(s);let I=0;for(let P=0,K=-1/0;P<s;P++){const W=this._ids[P],j=this._dists[W];j>K&&(M[I++]=W,K=j)}this.hull=M.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(h1(x,w,S,E,$,R)<0){const M=y,I=S,P=E;y=v,S=$,E=R,v=M,$=I,R=P}const A=rme(x,w,S,E,$,R);this._cx=A.x,this._cy=A.y;for(let M=0;M<s;M++)this._dists[M]=ik(t[2*M],t[2*M+1],A.x,A.y);Af(this._ids,this._dists,0,s-1),this._hullStart=g;let N=3;r[g]=n[v]=y,r[y]=n[g]=v,r[v]=n[y]=g,i[g]=0,i[y]=1,i[v]=2,o.fill(-1),o[this._hashKey(x,w)]=g,o[this._hashKey(S,E)]=y,o[this._hashKey($,R)]=v,this.trianglesLen=0,this._addTriangle(g,y,v,-1,-1,-1);for(let M=0,I,P;M<this._ids.length;M++){const K=this._ids[M],W=t[2*K],j=t[2*K+1];if(M>0&&Math.abs(W-I)<=GO&&Math.abs(j-P)<=GO||(I=W,P=j,K===g||K===y||K===v))continue;let D=0;for(let J=0,z=this._hashKey(W,j);J<this._hashSize&&(D=o[(z+J)%this._hashSize],!(D!==-1&&D!==r[D]));J++);D=n[D];let L=D,H;for(;H=r[L],h1(W,j,t[2*L],t[2*L+1],t[2*H],t[2*H+1])>=0;)if(L=H,L===D){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,K,r[L],-1,-1,i[L]);i[K]=this._legalize(U+2),i[L]=U,N++;let V=r[L];for(;H=r[V],h1(W,j,t[2*V],t[2*V+1],t[2*H],t[2*H+1])<0;)U=this._addTriangle(V,K,H,i[K],-1,i[V]),i[K]=this._legalize(U+2),r[V]=V,N--,V=H;if(L===D)for(;H=n[L],h1(W,j,t[2*H],t[2*H+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(H,K,L,-1,i[L],i[H]),this._legalize(U+2),i[H]=U,r[L]=L,N--,L=H;this._hullStart=n[K]=L,r[L]=n[V]=K,r[K]=V,o[this._hashKey(W,j)]=K,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(N);for(let M=0,I=this._hullStart;M<N;M++)this.hull[M]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(eme(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=p1[--o];continue}const u=a-a%3,f=l+(t+1)%3,d=u+(a+2)%3,p=n[s],g=n[t],y=n[f],v=n[d];if(tme(i[2*p],i[2*p+1],i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1])){n[t]=v,n[a]=p;const w=r[d];if(w===-1){let E=this._hullStart;do{if(this._hullTri[E]===d){this._hullTri[E]=t;break}E=this._hullPrev[E]}while(E!==this._hullStart)}this._link(t,w),this._link(a,r[s]),this._link(s,d);const S=u+(a+1)%3;o<p1.length&&(p1[o++]=S)}else{if(o===0)break;t=p1[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function eme(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function ik(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function tme(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,f=n-s,d=r-a,p=i-s,g=o-a,y=l*l+u*u,v=f*f+d*d,x=p*p+g*g;return l*(d*x-v*g)-u*(f*x-v*p)+y*(f*g-d*p)<0}function nme(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,d=l*l+u*u,p=.5/(s*u-a*l),g=(u*f-a*d)*p,y=(s*d-l*f)*p;return g*g+y*y}function rme(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,d=l*l+u*u,p=.5/(s*u-a*l),g=e+(u*f-a*d)*p,y=t+(s*d-l*f)*p;return{x:g,y}}function Af(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;sp(e,i,o),t[e[n]]>t[e[r]]&&sp(e,n,r),t[e[o]]>t[e[r]]&&sp(e,o,r),t[e[n]]>t[e[o]]&&sp(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;sp(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Af(e,t,o,r),Af(e,t,n,s-1)):(Af(e,t,n,s-1),Af(e,t,o,r))}}function sp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ime(e){return e[0]}function ome(e){return e[1]}const YO=1e-6;class $u{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>YO||Math.abs(this._y1-o)>YO)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class ZC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let sme=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let v=0,x=0,w=r.length,S,E;v<w;v+=3,x+=2){const C=r[v]*2,$=r[v+1]*2,R=r[v+2]*2,A=t[C],N=t[C+1],M=t[$],I=t[$+1],P=t[R],K=t[R+1],W=M-A,j=I-N,D=P-A,L=K-N,H=(W*L-j*D)*2;if(Math.abs(H)<1e-9){if(o===void 0){o=s=0;for(const V of n)o+=t[V*2],s+=t[V*2+1];o/=n.length,s/=n.length}const U=1e9*Math.sign((o-A)*L-(s-N)*D);S=(A+P)/2-U*L,E=(N+K)/2+U*D}else{const U=1/H,V=W*W+j*j,J=D*D+L*L;S=A+(L*V-j*J)*U,E=N+(W*J-D*V)*U}a[x]=S,a[x+1]=E}let l=n[n.length-1],u,f=l*4,d,p=t[2*l],g,y=t[2*l+1];i.fill(0);for(let v=0;v<n.length;++v)l=n[v],u=f,d=p,g=y,f=l*4,p=t[2*l],y=t[2*l+1],i[u+2]=i[f]=g-y,i[u+3]=i[f+1]=p-d}render(t){const n=t==null?t=new $u:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let f=0,d=r.length;f<d;++f){const p=r[f];if(p<f)continue;const g=Math.floor(f/3)*2,y=Math.floor(p/3)*2,v=s[g],x=s[g+1],w=s[y],S=s[y+1];this._renderSegment(v,x,w,S,t)}let l,u=o[o.length-1];for(let f=0;f<o.length;++f){l=u,u=o[f];const d=Math.floor(i[u]/3)*2,p=s[d],g=s[d+1],y=l*4,v=this._project(p,g,a[y+2],a[y+3]);v&&this._renderSegment(p,g,v[0],v[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new $u:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new $u:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new ZC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),d,p=0;for(let g=0;g<r;g+=2)if(o=a,s=l,a=n[g],l=n[g+1],u=f,f=this._regioncode(a,l),u===0&&f===0)d=p,p=0,i?i.push(a,l):i=[a,l];else{let y,v,x,w,S;if(u===0){if((y=this._clipSegment(o,s,a,l,u,f))===null)continue;[v,x,w,S]=y}else{if((y=this._clipSegment(a,l,o,s,f,u))===null)continue;[w,S,v,x]=y,d=p,p=this._edgecode(v,x),d&&p&&this._edge(t,d,p,i,i.length),i?i.push(v,x):i=[v,x]}d=p,p=this._edgecode(w,S),d&&p&&this._edge(t,d,p,i,i.length),i?i.push(w,S):i=[w,S]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(t,d,p,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,f=o||s;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,d,p=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)d=p,p=this._edgecode(a[u],a[u+1]),d&&p&&(u=this._edge(t,d,p,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const ame=2*Math.PI,pf=Math.pow;function lme(e){return e[0]}function ume(e){return e[1]}function cme(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function fme(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class $R{static from(t,n=lme,r=ume,i){return new $R("length"in t?dme(t,n,r,i):Float64Array.from(hme(t,n,r,i)))}constructor(t){this._delaunator=new Sv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&cme(t)){this.collinear=Int32Array.from({length:n.length/2},(p,g)=>g).sort((p,g)=>n[2*p]-n[2*g]||n[2*p+1]-n[2*g+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,g=n.length/2;p<g;++p){const y=fme(n[2*p],n[2*p+1],d);n[2*p]=y[0],n[2*p+1]=y[1]}this._delaunator=new Sv(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||s[f]===-1)&&(s[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new sme(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const d=r[(i[t]+1)%r.length];d!==f&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,d=pf(n-u[t*2],2)+pf(r-u[t*2+1],2);const p=i[t];let g=p;do{let y=l[g];const v=pf(n-u[y*2],2)+pf(r-u[y*2+1],2);if(v<d&&(d=v,f=y),g=g%3===2?g-2:g+1,l[g]!==t)break;if(g=a[g],g===-1){if(g=o[(s[t]+1)%o.length],g!==y&&pf(n-u[g*2],2)+pf(r-u[g*2+1],2)<d)return g;break}}while(g!==p);return f}render(t){const n=t==null?t=new $u:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,f=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new $u:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,ame)}return r&&r.value()}renderHull(t){const n=t==null?t=new $u:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new ZC;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new $u:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new ZC;return this.renderTriangle(t,n),n.value()}}function dme(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*hme(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function AR(e){te.call(this,null,e)}AR.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const pme=[-1e5,-1e5,1e5,1e5];ye(AR,te,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:pme;const o=this.value=$R.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!mme(l)?gme(l):null}return t.reflow(e.modified()).modifies(n)}});function gme(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function mme(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const yme=Object.freeze(Object.defineProperty({__proto__:null,voronoi:AR},Symbol.toStringTag,{value:"Module"}));var ok=Math.PI/180,Ip=64,ny=2048;function vme(){var e=[256,256],t,n,r,i,o,s,a,l=ZW,u=[],f=Math.random,d={};d.layout=function(){for(var y=p(ll()),v=Eme((e[0]>>5)*e[1]),x=null,w=u.length,S=-1,E=[],C=u.map(R=>({text:t(R),font:n(R),style:i(R),weight:o(R),rotate:s(R),size:~~(r(R)+1e-14),padding:a(R),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:R})).sort((R,A)=>A.size-R.size);++S<w;){var $=C[S];$.x=e[0]*(f()+.5)>>1,$.y=e[1]*(f()+.5)>>1,xme(y,$,C,S),$.hasText&&g(v,$,x)&&(E.push($),x?wme(x,$):x=[{x:$.x+$.x0,y:$.y+$.y0},{x:$.x+$.x1,y:$.y+$.y1}],$.x-=e[0]>>1,$.y-=e[1]>>1)}return E};function p(y){y.width=y.height=1;var v=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Ip<<5)/v,y.height=ny/v;var x=y.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:v}}function g(y,v,x){for(var w=v.x,S=v.y,E=Math.hypot(e[0],e[1]),C=l(e),$=f()<.5?1:-1,R=-$,A,N,M;(A=C(R+=$))&&(N=~~A[0],M=~~A[1],!(Math.min(Math.abs(N),Math.abs(M))>=E));)if(v.x=w+N,v.y=S+M,!(v.x+v.x0<0||v.y+v.y0<0||v.x+v.x1>e[0]||v.y+v.y1>e[1])&&(!x||!bme(v,y,e[0]))&&(!x||Sme(v,x))){for(var I=v.sprite,P=v.width>>5,K=e[0]>>5,W=v.x-(P<<4),j=W&127,D=32-j,L=v.y1-v.y0,H=(v.y+v.y0)*K+(W>>5),U,V=0;V<L;V++){U=0;for(var J=0;J<=P;J++)y[H+J]|=U<<D|(J<P?(U=I[V*P+J])>>>j:0);H+=K}return v.sprite=null,!0}return!1}return d.words=function(y){return arguments.length?(u=y,d):u},d.size=function(y){return arguments.length?(e=[+y[0],+y[1]],d):e},d.font=function(y){return arguments.length?(n=ru(y),d):n},d.fontStyle=function(y){return arguments.length?(i=ru(y),d):i},d.fontWeight=function(y){return arguments.length?(o=ru(y),d):o},d.rotate=function(y){return arguments.length?(s=ru(y),d):s},d.text=function(y){return arguments.length?(t=ru(y),d):t},d.spiral=function(y){return arguments.length?(l=_me[y]||y,d):l},d.fontSize=function(y){return arguments.length?(r=ru(y),d):r},d.padding=function(y){return arguments.length?(a=ru(y),d):a},d.random=function(y){return arguments.length?(f=y,d):f},d}function xme(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Ip<<5)/o,ny/o);var s=0,a=0,l=0,u=n.length,f,d,p,g,y;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,p=t.size<<1,t.rotate){var v=Math.sin(t.rotate*ok),x=Math.cos(t.rotate*ok),w=f*x,S=f*v,E=p*x,C=p*v;f=Math.max(Math.abs(w+C),Math.abs(w-C))+31>>5<<5,p=~~Math.max(Math.abs(S+E),Math.abs(S-E))}else f=f+31>>5<<5;if(p>l&&(l=p),s+f>=Ip<<5&&(s=0,a+=l,l=0),a+p>=ny)break;i.translate((s+(f>>1))/o,(a+(p>>1))/o),t.rotate&&i.rotate(t.rotate*ok),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=p,t.xoff=s,t.yoff=a,t.x1=f>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var $=i.getImageData(0,0,(Ip<<5)/o,ny/o).data,R=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,d=f>>5,p=t.y1-t.y0,g=0;g<p*d;g++)R[g]=0;if(s=t.xoff,s==null)return;a=t.yoff;var A=0,N=-1;for(y=0;y<p;y++){for(g=0;g<f;g++){var M=d*y+(g>>5),I=$[(a+y)*(Ip<<5)+(s+g)<<2]?1<<31-g%32:0;R[M]|=I,A|=I}A?N=y:(t.y0++,p--,y--,a++)}t.y1=t.y0+N,t.sprite=R.slice(0,(t.y1-t.y0)*d)}}}function bme(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f,d=0;d<l;d++){f=0;for(var p=0;p<=i;p++)if((f<<a|(p<i?(f=r[d*i+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function wme(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Sme(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function ZW(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function kme(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Eme(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ru(e){return typeof e=="function"?e:function(){return e}}var _me={archimedean:ZW,rectangular:kme};const JW=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Cme=["text","font","rotate","fontSize","fontStyle","fontWeight"];function RR(e){te.call(this,vme(),e)}RR.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:JW}]};ye(RR,te,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&re("Wordcloud size dimensions must be non-zero.");function n(y){const v=e[y];return Ge(v)&&t.modified(v.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Cme.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||JW;let a=e.fontSize||14,l;if(Ge(a)?l=e.fontSizeRange:a=tr(a),l){const y=a,v=ct("sqrt")().domain(Xo(i,y)).range(l);a=x=>v(y(x))}i.forEach(y=>{y[s[0]]=NaN,y[s[1]]=NaN,y[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ri).layout(),f=o.size(),d=f[0]>>1,p=f[1]>>1,g=u.length;for(let y=0,v,x;y<g;++y)v=u[y],x=v.datum,x[s[0]]=v.x+d,x[s[1]]=v.y+p,x[s[2]]=v.font,x[s[3]]=v.size,x[s[4]]=v.style,x[s[5]]=v.weight,x[s[6]]=v.rotate;return t.reflow(r).modifies(s)}});const $me=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:RR},Symbol.toStringTag,{value:"Module"})),Ame=e=>new Uint8Array(e),Rme=e=>new Uint16Array(e),Zp=e=>new Uint32Array(e);function Tme(){let e=8,t=[],n=Zp(0),r=g1(0,e),i=g1(0,e);return{data:()=>t,seen:()=>n=Nme(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let f,d,p;for(d=0;!s[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(p=d;d<a;++d)f=t[d],s[d]?u[d]=-1:(u[d]=p,r[p]=r[d],i[p]=i[d],l[p]=f,f._index=p++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=g1(o,e,r),i=g1(o,e))}}}function Nme(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function g1(e,t,n){const r=(t<257?Ame:t<65537?Rme:Zp)(e);return n&&r.set(n),r}function XO(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],f=a[1],d=l.length;let p;for(p=0;p<u;++p)o[l[p]]|=r;for(p=f;p<d;++p)o[l[p]]|=r;return s}}}function KO(){let e=Zp(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,d=l.length,p=Zp(d);let g=Array(d),y,v,x;for(x=0;x<d;++x)g[x]=a(l[x]),p[x]=x;if(g=Fme(g,p),f)y=t,v=e,t=Array(f+d),e=Zp(f+d),Mme(u,y,v,f,g,p,d,t,e);else{if(u>0)for(x=0;x<d;++x)p[x]+=u;t=g,e=p}return n=f+d,{index:p,value:g}}function i(a,l){const u=n;let f,d,p;for(d=0;!l[e[d]]&&d<u;++d);for(p=d;d<u;++d)l[f=e[d]]||(e[p]=f,t[p]=t[d],++p);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[Ite(l,a[0],0,u),fl(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Fme(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),jte(e,t)}function Mme(e,t,n,r,i,o,s,a,l){let u=0,f=0,d;for(d=0;u<r&&f<s;++d)t[u]<i[f]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[f],l[d]=o[f++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;f<s;++f,++d)a[d]=i[f],l[d]=o[f]+e}function TR(e){te.call(this,Tme(),e),this._indices=null,this._dims=null}TR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ye(TR,te,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=KO()),o.push(XO(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),d=n.rem=n.add,p=n.mod,g=i.length,y={};let v,x,w,S,E,C,$,R,A;if(u.set(l),t.rem.length&&(E=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(C={},S=t.mod,$=0,R=S.length;$<R;++$)C[S[$]._index]=1;for($=0;$<g;++$)A=r[$],(!s[$]||e.modified("fields",$)||t.modified(A.fields))&&(w=A.fname,(v=y[w])||(o[w]=x=KO(),y[w]=v=x.insert(A,t.source,0)),s[$]=XO(x,$,i[$]).onAdd(v,l));for($=0,R=a.data().length;$<R;++$)E[$]||(u[$]!==l[$]?d.push($):C[$]&&l[$]!==f&&p.push($));return a.mask=(1<<g)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,d=o.length;let p=i.size(),g,y,v;i.resize(f,d),i.add(r);const x=i.curr(),w=i.prev(),S=i.all();for(g=0;g<d;++g)y=a[g].fname,v=l[y]||(l[y]=s[y].insert(a[g],r,p)),o[g].onAdd(v,x);for(;p<f;++p)w[p]=S,x[p]!==S&&u.push(p)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let d,p,g,y;for(d=0,p=f.length;d<p;++d)g=f[d]._index,l[g]=1,s[g]=y=o[g],o[g]=a,y!==a&&u.push(g);for(g in r)r[g].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),d=f[0],p=f[1],g=u[0],y=u[1],v=e.one;let x,w,S;if(d<g)for(x=d,w=Math.min(g,p);x<w;++x)S=l[x],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;else if(d>g)for(x=g,w=Math.min(d,y);x<w;++x)S=l[x],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;if(p>y)for(x=Math.max(d,y),w=p;x<w;++x)S=l[x],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;else if(p<y)for(x=Math.max(g,p),w=y;x<w;++x)S=l[x],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],d=a[0],p=a[1],g=e.one;let y,v,x;if(u<d)for(y=u,v=Math.min(d,f);y<v;++y)x=s[y],o[x]^=g,n.push(x);else if(u>d)for(y=d,v=Math.min(u,p);y<v;++y)x=s[y],o[x]^=g,r.push(x);if(f>p)for(y=Math.max(u,p),v=f;y<v;++y)x=s[y],o[x]^=g,n.push(x);else if(f<p)for(y=Math.max(d,f),v=p;y<v;++y)x=s[y],o[x]^=g,r.push(x);e.range=t.slice()}});function NR(e){te.call(this,null,e)}NR.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ye(NR,te,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:s[f];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,f=>{const d=a[f]&n;return!d&&d^l[f]&n?s[f]:null}),o.filter(o.REM,f=>{const d=a[f]&n;return d&&!(d^(d^l[f]&n))?s[f]:null})):(o.filter(o.ADD,u),o.filter(o.REM,f=>(a[f]&n)===i?s[f]:null)),o.filter(o.SOURCE,f=>u(f._index))}});const Dme=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:TR,resolvefilter:NR},Symbol.toStringTag,{value:"Module"})),Ome="RawCode",Ku="Literal",Pme="Property",Ime="Identifier",Lme="ArrayExpression",zme="BinaryExpression",eV="CallExpression",jme="ConditionalExpression",Bme="LogicalExpression",Ume="MemberExpression",qme="ObjectExpression",Wme="UnaryExpression";function yo(e){this.type=e}yo.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Vme(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Vme(e){switch(e.type){case Lme:return e.elements;case zme:case Bme:return[e.left,e.right];case eV:return[e.callee].concat(e.arguments);case jme:return[e.test,e.consequent,e.alternate];case Ume:return[e.object,e.property];case qme:return e.properties;case Pme:return[e.key,e.value];case Wme:return[e.argument];case Ime:case Ku:case Ome:default:return[]}}var cs,Te,ne,Zn,vt,Z2=1,fm=2,Qu=3,Nl=4,J2=5,yc=6,Rr=7,dm=8,Hme=9;cs={};cs[Z2]="Boolean";cs[fm]="<end>";cs[Qu]="Identifier";cs[Nl]="Keyword";cs[J2]="Null";cs[yc]="Numeric";cs[Rr]="Punctuator";cs[dm]="String";cs[Hme]="RegularExpression";var Gme="ArrayExpression",Yme="BinaryExpression",Xme="CallExpression",Kme="ConditionalExpression",tV="Identifier",Qme="Literal",Zme="LogicalExpression",Jme="MemberExpression",e0e="ObjectExpression",t0e="Property",n0e="UnaryExpression",xn="Unexpected token %0",r0e="Unexpected number",i0e="Unexpected string",o0e="Unexpected identifier",s0e="Unexpected reserved word",a0e="Unexpected end of input",JC="Invalid regular expression",sk="Invalid regular expression: missing /",nV="Octal literals are not allowed in strict mode.",l0e="Duplicate data property in object literal not allowed in strict mode",Mn="ILLEGAL",wg="Disabled.",u0e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),c0e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ex(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ds(e){return e>=48&&e<=57}function FR(e){return"0123456789abcdefABCDEF".includes(e)}function Jp(e){return"01234567".includes(e)}function f0e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Sg(e){return e===10||e===13||e===8232||e===8233}function hm(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&u0e.test(String.fromCharCode(e))}function kv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&c0e.test(String.fromCharCode(e))}const d0e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function rV(){for(;ne<Zn;){const e=Te.charCodeAt(ne);if(f0e(e)||Sg(e))++ne;else break}}function e$(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ne<Zn&&FR(Te[ne])?(r=Te[ne++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):at({},xn,Mn);return String.fromCharCode(i)}function h0e(){var e,t,n,r;for(e=Te[ne],t=0,e==="}"&&at({},xn,Mn);ne<Zn&&(e=Te[ne++],!!FR(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&at({},xn,Mn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function iV(){var e,t;for(e=Te.charCodeAt(ne++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(ne)!==117&&at({},xn,Mn),++ne,e=e$("u"),(!e||e==="\\"||!hm(e.charCodeAt(0)))&&at({},xn,Mn),t=e);ne<Zn&&(e=Te.charCodeAt(ne),!!kv(e));)++ne,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(ne)!==117&&at({},xn,Mn),++ne,e=e$("u"),(!e||e==="\\"||!kv(e.charCodeAt(0)))&&at({},xn,Mn),t+=e);return t}function p0e(){var e,t;for(e=ne++;ne<Zn;){if(t=Te.charCodeAt(ne),t===92)return ne=e,iV();if(kv(t))++ne;else break}return Te.slice(e,ne)}function g0e(){var e,t,n;return e=ne,t=Te.charCodeAt(ne)===92?iV():p0e(),t.length===1?n=Qu:d0e.hasOwnProperty(t)?n=Nl:t==="null"?n=J2:t==="true"||t==="false"?n=Z2:n=Qu,{type:n,value:t,start:e,end:ne}}function ak(){var e=ne,t=Te.charCodeAt(ne),n,r=Te[ne],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ne,{type:Rr,value:String.fromCharCode(t),start:e,end:ne};default:if(n=Te.charCodeAt(ne+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ne+=2,{type:Rr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ne};case 33:case 61:return ne+=2,Te.charCodeAt(ne)===61&&++ne,{type:Rr,value:Te.slice(e,ne),start:e,end:ne}}}if(s=Te.substr(ne,4),s===">>>=")return ne+=4,{type:Rr,value:s,start:e,end:ne};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ne+=3,{type:Rr,value:o,start:e,end:ne};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ne+=2,{type:Rr,value:i,start:e,end:ne};if(i==="//"&&at({},xn,Mn),"<>=!+-*%&|^/".includes(r))return++ne,{type:Rr,value:r,start:e,end:ne};at({},xn,Mn)}function m0e(e){let t="";for(;ne<Zn&&FR(Te[ne]);)t+=Te[ne++];return t.length===0&&at({},xn,Mn),hm(Te.charCodeAt(ne))&&at({},xn,Mn),{type:yc,value:parseInt("0x"+t,16),start:e,end:ne}}function y0e(e){let t="0"+Te[ne++];for(;ne<Zn&&Jp(Te[ne]);)t+=Te[ne++];return(hm(Te.charCodeAt(ne))||Ds(Te.charCodeAt(ne)))&&at({},xn,Mn),{type:yc,value:parseInt(t,8),octal:!0,start:e,end:ne}}function QO(){var e,t,n;if(n=Te[ne],ex(Ds(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ne,e="",n!=="."){if(e=Te[ne++],n=Te[ne],e==="0"){if(n==="x"||n==="X")return++ne,m0e(t);if(Jp(n))return y0e(t);n&&Ds(n.charCodeAt(0))&&at({},xn,Mn)}for(;Ds(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="."){for(e+=Te[ne++];Ds(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="e"||n==="E")if(e+=Te[ne++],n=Te[ne],(n==="+"||n==="-")&&(e+=Te[ne++]),Ds(Te.charCodeAt(ne)))for(;Ds(Te.charCodeAt(ne));)e+=Te[ne++];else at({},xn,Mn);return hm(Te.charCodeAt(ne))&&at({},xn,Mn),{type:yc,value:parseFloat(e),start:t,end:ne}}function v0e(){var e="",t,n,r,i,o=!1;for(t=Te[ne],ex(t==="'"||t==='"',"String literal must starts with a quote"),n=ne,++ne;ne<Zn;)if(r=Te[ne++],r===t){t="";break}else if(r==="\\")if(r=Te[ne++],!r||!Sg(r.charCodeAt(0)))switch(r){case"u":case"x":Te[ne]==="{"?(++ne,e+=h0e()):e+=e$(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Jp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),ne<Zn&&Jp(Te[ne])&&(o=!0,i=i*8+"01234567".indexOf(Te[ne++]),"0123".includes(r)&&ne<Zn&&Jp(Te[ne])&&(i=i*8+"01234567".indexOf(Te[ne++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Te[ne]===`
`&&++ne;else{if(Sg(r.charCodeAt(0)))break;e+=r}return t!==""&&at({},xn,Mn),{type:dm,value:e,octal:o,start:n,end:ne}}function x0e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";at({},JC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{at({},JC)}try{return new RegExp(e,t)}catch{return null}}function b0e(){var e,t,n,r,i;for(e=Te[ne],ex(e==="/","Regular expression literal must start with a slash"),t=Te[ne++],n=!1,r=!1;ne<Zn;)if(e=Te[ne++],t+=e,e==="\\")e=Te[ne++],Sg(e.charCodeAt(0))&&at({},sk),t+=e;else if(Sg(e.charCodeAt(0)))at({},sk);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||at({},sk),i=t.substr(1,t.length-2),{value:i,literal:t}}function w0e(){var e,t,n;for(t="",n="";ne<Zn&&(e=Te[ne],!!kv(e.charCodeAt(0)));)++ne,e==="\\"&&ne<Zn?at({},xn,Mn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&at({},JC,n),{value:n,literal:t}}function S0e(){var e,t,n,r;return vt=null,rV(),e=ne,t=b0e(),n=w0e(),r=x0e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ne}}function k0e(e){return e.type===Qu||e.type===Nl||e.type===Z2||e.type===J2}function oV(){if(rV(),ne>=Zn)return{type:fm,start:ne,end:ne};const e=Te.charCodeAt(ne);return hm(e)?g0e():e===40||e===41||e===59?ak():e===39||e===34?v0e():e===46?Ds(Te.charCodeAt(ne+1))?QO():ak():Ds(e)?QO():ak()}function Nr(){const e=vt;return ne=e.end,vt=oV(),ne=e.end,e}function sV(){const e=ne;vt=oV(),ne=e}function E0e(e){const t=new yo(Gme);return t.elements=e,t}function ZO(e,t,n){const r=new yo(e==="||"||e==="&&"?Zme:Yme);return r.operator=e,r.left=t,r.right=n,r}function _0e(e,t){const n=new yo(Xme);return n.callee=e,n.arguments=t,n}function C0e(e,t,n){const r=new yo(Kme);return r.test=e,r.consequent=t,r.alternate=n,r}function MR(e){const t=new yo(tV);return t.name=e,t}function Lp(e){const t=new yo(Qme);return t.value=e.value,t.raw=Te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function JO(e,t,n){const r=new yo(Jme);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function $0e(e){const t=new yo(e0e);return t.properties=e,t}function eP(e,t,n){const r=new yo(t0e);return r.key=t,r.value=n,r.kind=e,r}function A0e(e,t){const n=new yo(n0e);return n.operator=e,n.argument=t,n.prefix=!0,n}function at(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(ex(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=ne,n.description=i,n}function tx(e){e.type===fm&&at(e,a0e),e.type===yc&&at(e,r0e),e.type===dm&&at(e,i0e),e.type===Qu&&at(e,o0e),e.type===Nl&&at(e,s0e),at(e,xn,e.value)}function Jn(e){const t=Nr();(t.type!==Rr||t.value!==e)&&tx(t)}function Rt(e){return vt.type===Rr&&vt.value===e}function lk(e){return vt.type===Nl&&vt.value===e}function R0e(){const e=[];for(ne=vt.start,Jn("[");!Rt("]");)Rt(",")?(Nr(),e.push(null)):(e.push(Zu()),Rt("]")||Jn(","));return Nr(),E0e(e)}function tP(){ne=vt.start;const e=Nr();return e.type===dm||e.type===yc?(e.octal&&at(e,nV),Lp(e)):MR(e.value)}function T0e(){var e,t,n,r;if(ne=vt.start,e=vt,e.type===Qu)return n=tP(),Jn(":"),r=Zu(),eP("init",n,r);if(e.type===fm||e.type===Rr)tx(e);else return t=tP(),Jn(":"),r=Zu(),eP("init",t,r)}function N0e(){var e=[],t,n,r,i={},o=String;for(ne=vt.start,Jn("{");!Rt("}");)t=T0e(),t.key.type===tV?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?at({},l0e):i[r]=!0,e.push(t),Rt("}")||Jn(",");return Jn("}"),$0e(e)}function F0e(){Jn("(");const e=DR();return Jn(")"),e}const M0e={if:1};function D0e(){var e,t,n;if(Rt("("))return F0e();if(Rt("["))return R0e();if(Rt("{"))return N0e();if(e=vt.type,ne=vt.start,e===Qu||M0e[vt.value])n=MR(Nr().value);else if(e===dm||e===yc)vt.octal&&at(vt,nV),n=Lp(Nr());else{if(e===Nl)throw new Error(wg);e===Z2?(t=Nr(),t.value=t.value==="true",n=Lp(t)):e===J2?(t=Nr(),t.value=null,n=Lp(t)):Rt("/")||Rt("/=")?(n=Lp(S0e()),sV()):tx(Nr())}return n}function O0e(){const e=[];if(Jn("("),!Rt(")"))for(;ne<Zn&&(e.push(Zu()),!Rt(")"));)Jn(",");return Jn(")"),e}function P0e(){ne=vt.start;const e=Nr();return k0e(e)||tx(e),MR(e.value)}function I0e(){return Jn("."),P0e()}function L0e(){Jn("[");const e=DR();return Jn("]"),e}function z0e(){var e,t,n;for(e=D0e();;)if(Rt("."))n=I0e(),e=JO(".",e,n);else if(Rt("("))t=O0e(),e=_0e(e,t);else if(Rt("["))n=L0e(),e=JO("[",e,n);else break;return e}function nP(){const e=z0e();if(vt.type===Rr&&(Rt("++")||Rt("--")))throw new Error(wg);return e}function ry(){var e,t;if(vt.type!==Rr&&vt.type!==Nl)t=nP();else{if(Rt("++")||Rt("--"))throw new Error(wg);if(Rt("+")||Rt("-")||Rt("~")||Rt("!"))e=Nr(),t=ry(),t=A0e(e.value,t);else{if(lk("delete")||lk("void")||lk("typeof"))throw new Error(wg);t=nP()}}return t}function rP(e){let t=0;if(e.type!==Rr&&e.type!==Nl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function j0e(){var e,t,n,r,i,o,s,a,l,u;if(e=vt,l=ry(),r=vt,i=rP(r),i===0)return l;for(r.prec=i,Nr(),t=[e,vt],s=ry(),o=[l,r,s];(i=rP(vt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=ZO(a,l,s),o.push(n);r=Nr(),r.prec=i,o.push(r),t.push(vt),n=ry(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=ZO(o[u-1].value,o[u-2],n),u-=2;return n}function Zu(){var e,t,n;return e=j0e(),Rt("?")&&(Nr(),t=Zu(),Jn(":"),n=Zu(),e=C0e(e,t,n)),e}function DR(){const e=Zu();if(Rt(","))throw new Error(wg);return e}function OR(e){Te=e,ne=0,Zn=Te.length,vt=null,sV();const t=DR();if(vt.type!==fm)throw new Error("Unexpect token after expression.");return t}var aV={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function lV(e){function t(s,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&re("Missing arguments to clamp function."),s.length>3&&re("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&re("Missing arguments to if function."),s.length>3&&re("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function B0e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function uV(e){e=e||{};const t=e.allowed?ao(e.allowed):{},n=e.forbidden?ao(e.forbidden):{},r=e.constants||aV,i=(e.functions||lV)(d),o=e.globalvar,s=e.fieldvar,a=Ge(o)?o:y=>`${o}["${y}"]`;let l={},u={},f=0;function d(y){if(ke(y))return y;const v=p[y.type];return v==null&&re("Unsupported type: "+y.type),v(y)}const p={Literal:y=>y.raw,Identifier:y=>{const v=y.name;return f>0?v:_e(n,v)?re("Illegal identifier: "+v):_e(r,v)?r[v]:_e(t,v)?v:(l[v]=1,a(v))},MemberExpression:y=>{const v=!y.computed,x=d(y.object);v&&(f+=1);const w=d(y.property);return x===s&&(u[B0e(w)]=1),v&&(f-=1),x+(v?"."+w:"["+w+"]")},CallExpression:y=>{y.callee.type!=="Identifier"&&re("Illegal callee type: "+y.callee.type);const v=y.callee.name,x=y.arguments,w=_e(i,v)&&i[v];return w||re("Unrecognized function: "+v),Ge(w)?w(x):w+"("+x.map(d).join(",")+")"},ArrayExpression:y=>"["+y.elements.map(d).join(",")+"]",BinaryExpression:y=>"("+d(y.left)+" "+y.operator+" "+d(y.right)+")",UnaryExpression:y=>"("+y.operator+d(y.argument)+")",ConditionalExpression:y=>"("+d(y.test)+"?"+d(y.consequent)+":"+d(y.alternate)+")",LogicalExpression:y=>"("+d(y.left)+y.operator+d(y.right)+")",ObjectExpression:y=>"{"+y.properties.map(d).join(",")+"}",Property:y=>{f+=1;const v=d(y.key);return f-=1,v+":"+d(y.value)}};function g(y){const v={code:d(y),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},v}return g.functions=i,g.constants=r,g}const iP=Symbol("vega_selection_getter");function cV(e){return(!e.getter||!e.getter[iP])&&(e.getter=Ci(e.field),e.getter[iP]=!0),e.getter}const PR="intersect",oP="union",U0e="vlMulti",q0e="vlPoint",sP="or",W0e="and",Io="_vgsid_",kg=Ci(Io),V0e="E",H0e="R",G0e="R-E",Y0e="R-LE",X0e="R-RE",K0e="E-LT",Q0e="E-LTE",Z0e="E-GT",J0e="E-GTE",e1e="E-VALID",t1e="E-ONE",Ev="index:unit";function aP(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=cV(a)(e),ol(s)&&(s=Yn(s)),ol(r[o])&&(r[o]=Yn(r[o])),ie(r[o])&&ol(r[o][0])&&(r[o]=r[o].map(Yn)),a.type===V0e){if(ie(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===H0e){if(!Ef(s,r[o]))return!1}else if(a.type===X0e){if(!Ef(s,r[o],!0,!1))return!1}else if(a.type===G0e){if(!Ef(s,r[o],!1,!1))return!1}else if(a.type===Y0e){if(!Ef(s,r[o],!1,!0))return!1}else if(a.type===K0e){if(s>=r[o])return!1}else if(a.type===Q0e){if(s>r[o])return!1}else if(a.type===Z0e){if(s<=r[o])return!1}else if(a.type===J0e){if(s<r[o])return!1}else if(a.type===e1e){if(s===null||isNaN(s))return!1}else if(a.type===t1e&&r[o].indexOf(s)===-1)return!1;return!0}function n1e(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[Ev]&&r[Ev].value:void 0,s=n===PR,a=i.length,l=0,u,f,d,p,g;l<a;++l)if(u=i[l],o&&s){if(f=f||{},d=f[p=u.unit]||0,d===-1)continue;if(g=aP(t,u),f[p]=g?-1:++d,g&&o.size===1)return!0;if(!g&&d===o.get(p).count)return!1}else if(g=aP(t,u),s^g)return g;return a&&s}const fV=Td(kg),r1e=fV.left,i1e=fV.right;function o1e(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[Ev]&&r[Ev].value:void 0,s=n===PR,a=kg(t),l=r1e(i,a);if(l===i.length||kg(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(i1e(i,a)-l<o.size)return!1}return!0}function s1e(e,t){return e.map(n=>He(t.fields?{values:t.fields.map(r=>cV(r)(n.datum))}:{[Io]:kg(n.datum)},t))}function a1e(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,f,d,p,g,y,v,x,w,S,E=o.length,C=0,$,R;C<E;++C)if(u=o[C],p=u.unit,f=u.fields,d=u.values,f&&d){for($=0,R=f.length;$<R;++$)g=f[$],v=s[g.field]||(s[g.field]={}),x=v[p]||(v[p]=[]),l[g.field]=w=g.type.charAt(0),S=uk[`${w}_union`],v[p]=S(x,Se(d[$]));n&&(x=a[p]||(a[p]=[]),x.push(Se(d).reduce((A,N,M)=>(A[f[M].field]=N,A),{})))}else g=Io,y=kg(u),v=s[g]||(s[g]={}),x=v[p]||(v[p]=[]),x.push(y),n&&(x=a[p]||(a[p]=[]),x.push({[Io]:y}));if(t=t||oP,s[Io]?s[Io]=uk[`${Io}_${t}`](...Object.values(s[Io])):Object.keys(s).forEach(A=>{s[A]=Object.keys(s[A]).map(N=>s[A][N]).reduce((N,M)=>N===void 0?M:uk[`${l[A]}_${t}`](N,M))}),o=Object.keys(a),n&&o.length){const A=r?q0e:U0e;s[A]=t===oP?{[sP]:o.reduce((N,M)=>(N.push(...a[M]),N),[])}:{[W0e]:o.map(N=>({[sP]:a[N]}))}}return s}var uk={[`${Io}_union`]:Xte,[`${Io}_intersect`]:Gte,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Yn(t[0]),r=Yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Yn(t[0]),r=Yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const l1e=":",u1e="@";function IR(e,t,n,r){t[0].type!==Ku&&re("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&rt(t).value,s="unit",a=u1e+s,l=l1e+i;o===PR&&!_e(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),_e(r,l)||(r[l]=n.getData(i).tuplesRef())}function dV(e){const t=this.context.data[e];return t?t.values.value:[]}function c1e(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function f1e(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove($i).insert(t)),1}function d1e(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const pm=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},h1e=pm("format"),hV=pm("timeFormat"),p1e=pm("utcFormat"),g1e=pm("timeParse"),m1e=pm("utcParse"),m1=new Date(2e3,0,1);function nx(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(m1.setYear(2e3),m1.setMonth(e),m1.setDate(t),hV.call(this,m1,n))}function y1e(e){return nx.call(this,e,1,"%B")}function v1e(e){return nx.call(this,e,1,"%b")}function x1e(e){return nx.call(this,0,2+e,"%A")}function b1e(e){return nx.call(this,0,2+e,"%a")}const w1e=":",S1e="@",t$="%",pV="$";function LR(e,t,n,r){t[0].type!==Ku&&re("First argument to data functions must be a string literal.");const i=t[0].value,o=w1e+i;if(!_e(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function k1e(e,t,n,r){t[0].type!==Ku&&re("First argument to indata must be a string literal."),t[1].type!==Ku&&re("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=S1e+o;_e(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function mr(e,t,n,r){if(t[0].type===Ku)lP(n,r,t[0].value);else for(e in n.scales)lP(n,r,e)}function lP(e,t,n){const r=t$+n;if(!_e(t,r))try{t[r]=e.scaleRef(n)}catch{}}function fs(e,t){if(ke(e)){const n=t.scales[e];return n&&fD(n.value)?n.value:void 0}else if(Ge(e))return fD(e)?e:void 0}function E1e(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=mr,n._range=mr,n._scale=mr;const r=i=>"_["+(i.type===Ku?ge(t$+i.value):ge(t$)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function zR(e,t){return function(n,r,i){if(n){const o=fs(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const _1e=zR("area",qfe),C1e=zR("bounds",Gfe),$1e=zR("centroid",Jfe);function A1e(e,t){const n=fs(e,(t||this).context);return n&&n.scale()}function R1e(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function jR(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function T1e(){return jR(this.context.dataflow,"warn",arguments)}function N1e(){return jR(this.context.dataflow,"info",arguments)}function F1e(){return jR(this.context.dataflow,"debug",arguments)}function ck(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function n$(e){const t=gl(e),n=ck(t.r),r=ck(t.g),i=ck(t.b);return .2126*n+.7152*r+.0722*i}function M1e(e,t){const n=n$(e),r=n$(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function D1e(){const e=[].slice.call(arguments);return e.unshift({}),He(...e)}function gV(e,t){return e===t||e!==e&&t!==t?!0:ie(e)?ie(t)&&e.length===t.length?O1e(e,t):!1:Ee(e)&&Ee(t)?mV(e,t):!1}function O1e(e,t){for(let n=0,r=e.length;n<r;++n)if(!gV(e[n],t[n]))return!1;return!0}function mV(e,t){for(const n in e)if(!gV(e[n],t[n]))return!1;return!0}function uP(e){return t=>mV(e,t)}function P1e(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let f=a.changes,d,p;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=s.changeset(),f.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(d=n===!0?$i:ie(n)||f2(n)?n:uP(n),f.remove(d)),t&&f.insert(t),r&&(d=uP(r),l.value.some(d)?f.remove(d):f.insert(r)),i)for(p in o)f.modify(i,p,o[p]);return 1}function I1e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function L1e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const cP={};function z1e(e,t){const n=cP[t]||(cP[t]=Ci(t));return ie(e)?e.map(n):n(e)}function rx(e){return ie(e)||ArrayBuffer.isView(e)?e:null}function BR(e){return rx(e)||(ke(e)?e:null)}function j1e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rx(e).join(...n)}function B1e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BR(e).indexOf(...n)}function U1e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BR(e).lastIndexOf(...n)}function q1e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BR(e).slice(...n)}function W1e(e,t,n){return Ge(n)&&re("Function argument passed to replace."),!ke(t)&&!C3(t)&&re("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function V1e(e){return rx(e).slice().reverse()}function H1e(e){return rx(e).slice().sort(jg)}function G1e(e,t,n){return e5(e||0,t||0,n||0)}function Y1e(e,t){const n=fs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function X1e(e,t){const n=fs(e,(t||this).context);return n?n.copy():void 0}function K1e(e,t){const n=fs(e,(t||this).context);return n?n.domain():[]}function Q1e(e,t,n){const r=fs(e,(n||this).context);return r?ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Z1e(e,t){const n=fs(e,(t||this).context);return n&&n.range?n.range():[]}function J1e(e,t,n){const r=fs(e,(n||this).context);return r?r(t):void 0}function eye(e,t,n,r,i){e=fs(e,(i||this).context);const o=aU(t,n);let s=e.domain(),a=s[0],l=rt(s),u=er;return l-a?u=XB(e,a,l):e=(e.interpolator?ct("sequential")().interpolator(e.interpolator()):ct("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==rt(s)&&s.push(l)),s.forEach(f=>o.stop(u(f),e(f))),o}function tye(e,t,n){const r=fs(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function nye(e){let t=null;return function(n){return n?hg(n,t=t||Jf(e)):e}}const yV=e=>e.data;function vV(e,t){const n=dV.call(t,e);return n.root&&n.root.lookup||{}}function rye(e,t,n){const r=vV(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(yV):void 0}function iye(e,t){const n=vV(e,this)[t];return n?n.ancestors().map(yV):void 0}const xV=()=>typeof window<"u"&&window||null;function oye(){const e=xV();return e?e.screen:{}}function sye(){const e=xV();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function aye(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bV(e,t,n){if(!e)return[];const[r,i]=e,o=new nn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return rq(s,o,lye(t))}function lye(e){let t=null;if(e){const n=Se(e.marktype),r=Se(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function uye(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Se(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function cye(e){return Se(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function fye(e,t,n){const{x:r,y:i,mark:o}=n,s=new nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),bV([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>dye(l.x,l.y,t))}function dye(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const Eg={random(){return Ri()},cumulativeNormal:m2,cumulativeLogNormal:eA,cumulativeUniform:iA,densityNormal:X3,densityLogNormal:J3,densityUniform:rA,quantileNormal:y2,quantileLogNormal:tA,quantileUniform:oA,sampleNormal:g2,sampleLogNormal:Z3,sampleUniform:nA,isArray:ie,isBoolean:Cl,isDate:ol,isDefined(e){return e!==void 0},isNumber:lt,isObject:Ee,isRegExp:C3,isString:ke,isTuple:f2,isValid(e){return e!=null&&e===e},toBoolean:A3,toDate(e){return R3(e)},toNumber:Yn,toString:T3,indexof:B1e,join:j1e,lastindexof:U1e,replace:W1e,reverse:V1e,sort:H1e,slice:q1e,flush:CL,lerp:AL,merge:D1e,pad:NL,peek:rt,pluck:z1e,span:Bg,inrange:Ef,truncate:FL,rgb:gl,lab:Ny,hcl:Fy,hsl:Ry,luminance:n$,contrast:M1e,sequence:Kr,format:h1e,utcFormat:p1e,utcParse:m1e,utcOffset:dz,utcSequence:gz,timeFormat:hV,timeParse:g1e,timeOffset:fz,timeSequence:pz,timeUnitSpecifier:ez,monthFormat:y1e,monthAbbrevFormat:v1e,dayFormat:x1e,dayAbbrevFormat:b1e,quarter:SL,utcquarter:kL,week:nz,utcweek:oz,dayofyear:tz,utcdayofyear:iz,warn:T1e,info:N1e,debug:F1e,extent(e){return Xo(e)},inScope:R1e,intersect:bV,clampRange:EL,pinchDistance:I1e,pinchAngle:L1e,screen:oye,containerSize:aye,windowSize:sye,bandspace:G1e,setdata:f1e,pathShape:nye,panLinear:vL,panLog:xL,panPow:bL,panSymlog:wL,zoomLinear:w3,zoomLog:S3,zoomPow:my,zoomSymlog:k3,encode:d1e,modify:P1e,lassoAppend:uye,lassoPath:cye,intersectLasso:fye},hye=["view","item","group","xy","x","y"],pye="event.vega.",wV="this.",UR={},SV={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(pV+e)}]`,functions:gye,constants:aV,visitors:UR},r$=uV(SV);function gye(e){const t=lV(e);hye.forEach(n=>t[n]=pye+n);for(const n in Eg)t[n]=wV+n;return He(t,E1e(e,Eg,UR)),t}function Jt(e,t,n){return arguments.length===1?Eg[e]:(Eg[e]=t,n&&(UR[e]=n),r$&&(r$.functions[e]=wV+e),this)}Jt("bandwidth",Y1e,mr);Jt("copy",X1e,mr);Jt("domain",K1e,mr);Jt("range",Z1e,mr);Jt("invert",Q1e,mr);Jt("scale",J1e,mr);Jt("gradient",eye,mr);Jt("geoArea",_1e,mr);Jt("geoBounds",C1e,mr);Jt("geoCentroid",$1e,mr);Jt("geoShape",tye,mr);Jt("geoScale",A1e,mr);Jt("indata",c1e,k1e);Jt("data",dV,LR);Jt("treePath",rye,LR);Jt("treeAncestors",iye,LR);Jt("vlSelectionTest",n1e,IR);Jt("vlSelectionIdTest",o1e,IR);Jt("vlSelectionResolve",a1e,IR);Jt("vlSelectionTuples",s1e);function es(e,t){const n={};let r;try{e=ke(e)?e:ge(e)+"",r=OR(e)}catch{re("Expression parse error: "+e)}r.visit(o=>{if(o.type!==eV)return;const s=o.callee.name,a=SV.visitors[s];a&&a(s,o.arguments,t,n)});const i=r$(r);return i.globals.forEach(o=>{const s=pV+o;!_e(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:He({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function mye(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const yye=ao(["rule"]),fP=ao(["group","image","rect"]);function vye(e,t){let n="";return yye[t]||(e.x2&&(e.x?(fP[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(fP[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function qR(e){return(e+"").toLowerCase()}function xye(e){return qR(e)==="operator"}function bye(e){return qR(e)==="collect"}function ap(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function wye(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Sye={operator:(e,t)=>ap(e,["_"],t.code),parameter:(e,t)=>ap(e,["datum","_"],t.code),event:(e,t)=>ap(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return ap(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+ge(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=vye(r,n),i+="return m;",ap(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ge).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),wye(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function kye(e){const t=this;xye(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Eye(e){const t=this;if(e.params){const n=t.get(e.id);n||re("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function _ye(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ie(i)?i.map(o=>dP(o,n,t)):dP(i,n,t)}return t}function dP(e,t,n){if(!e||!Ee(e))return e;for(let r=0,i=hP.length,o;r<i;++r)if(o=hP[r],_e(e,o.key))return o.parse(e,t,n);return e}var hP=[{key:"$ref",parse:Cye},{key:"$key",parse:Aye},{key:"$expr",parse:$ye},{key:"$field",parse:Rye},{key:"$encode",parse:Nye},{key:"$compare",parse:Tye},{key:"$context",parse:Fye},{key:"$subflow",parse:Mye},{key:"$tupleid",parse:Dye}];function Cye(e,t){return t.get(e.$ref)||re("Operator not defined: "+e.$ref)}function $ye(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=jr(t.parameterExpression(e.$expr),e.$fields))}function Aye(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$3(e.$key,e.$flat,t.expr.codegen))}function Rye(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ci(e.$field,e.$name,t.expr.codegen))}function Tye(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Se(e.$compare).map(i=>i&&i.$tupleid?Oe:i);return t.fn[n]||(t.fn[n]=E3(r,e.$order,t.expr.codegen))}function Nye(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=jr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Fye(e,t){return t}function Mye(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function Dye(){return Oe}function Oye(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&re("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Pye(e){var t=this,n=Ee(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||re("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Iye={skip:!0};function Lye(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function zye(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Iye)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove($i).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function kV(e,t,n,r){return new EV(e,t,n,r)}function EV(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Sye,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function pP(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}EV.prototype=pP.prototype={fork(){const e=new pP(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),bye(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[qR(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:mye,parseOperator:kye,parseOperatorParameters:Eye,parseParameters:_ye,parseStream:Oye,parseUpdate:Pye,getState:Lye,setState:zye};function jye(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),_V(t,e.description()))}function _V(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Bye(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fk="default";function Uye(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fk,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?ke(i)?i:i.user:fk,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ke(r)||(i=r.item,r=r.user),i$(e,r&&r!==fk?r:i||r),i},{cursor:t})}function i$(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function _v(e,t){var n=e._runtime.data;return _e(n,t)||re("Unrecognized data set: "+t),n[t]}function qye(e,t){return arguments.length<2?_v(this,e).values.value:ix.call(this,e,pc().remove($i).insert(t))}function ix(e,t){Uz(t)||re("Second argument to changes must be a changeset.");const n=_v(this,e);return n.modified=!0,this.pulse(n.input,t)}function Wye(e,t){return ix.call(this,e,pc().insert(t))}function Vye(e,t){return ix.call(this,e,pc().remove(t))}function CV(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function $V(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function ox(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Hye(e){var t=ox(e),n=CV(e),r=$V(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Gye(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=ox(e),s=t.changedTouches?t.changedTouches[0]:t,o=W2(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Yye(e,n,o),t}function Yye(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;ke(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:tr(e),item:tr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const gP="view",Xye="timer",Kye="window",Qye={trap:!1};function Zye(e){const t=He({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ie(r[o])&&(r[o]=ao(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function AV(e,t,n,r){e._eventListeners.push({type:n,sources:Se(t),handler:r})}function Jye(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function y1(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ee(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function eve(e,t,n){var r=this,i=new p2(n),o=function(u,f){r.runAsync(null,()=>{e===gP&&Jye(r,t)&&u.preventDefault(),i.receive(Gye(r,u,f))})},s;if(e===Xye)y1(r,"timer",t)&&r.timer(o,t);else if(e===gP)y1(r,"view",t)&&r.addEventListener(t,o,Qye);else if(e===Kye?y1(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&y1(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);AV(r,s,t,o)}return i}function mP(e){return e.item}function yP(e){return e.item.mark.source}function vP(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function tve(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",mP),yP,vP(e)),this.on(this.events("view","pointerout",mP),yP,vP(t)),this}function nve(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ei(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const rve="vega-bind",ive="vega-bind-name",ove="vega-bind-radio";function sve(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=_3(r.debounce,i.update))),(r.input==null&&r.element?ave:uve)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function ave(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),AV(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(lve(i))}}function lve(e){return typeof Event<"u"?new Event(e):{type:e}}function uve(e,t,n,r){const i=r.signal(n.signal),o=ei("div",{class:rve}),s=n.input==="radio"?o:o.appendChild(ei("label"));s.appendChild(ei("span",{class:ive},n.name||n.signal)),t.appendChild(o);let a=cve;switch(n.input){case"checkbox":a=fve;break;case"select":a=dve;break;case"radio":a=hve;break;case"range":a=pve;break}a(e,s,n,i)}function cve(e,t,n,r){const i=ei("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function fve(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=ei("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function dve(e,t,n,r){const i=ei("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};Cv(s,r)&&(l.selected=!0),i.appendChild(ei("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(Cv(n.options[a],s)){i.selectedIndex=a;return}}}function hve(e,t,n,r){const i=ei("span",{class:ove}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};Cv(s,r)&&(l.checked=!0);const u=ei("input",l);u.addEventListener("change",()=>e.update(s));const f=ei("label",{},(o[a]||s)+"");return f.prepend(u),i.appendChild(f),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Cv(a[u].value,s)&&(a[u].checked=!0)}}function pve(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||dl(o,i,100),a=ei("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=ei("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function Cv(e,t){return e===t||e+""==t+""}function RV(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,CV(e),$V(e),ox(e),i,o).background(e.background())}function WR(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function gve(e,t,n,r){const i=new r(e.loader(),WR(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,ox(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function mve(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=V2(r);e=n._el=e?dk(n,e,!0):null,jye(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||sm,a=e?o.renderer:o.headless;return n._renderer=a?RV(n,n._renderer,e,a):null,n._handler=gve(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dk(n,t,!0):e.appendChild(ei("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=dk(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{sve(n,l.element||t,l)})),n}function dk(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const lp=e=>+e||0,yve=e=>({top:e,bottom:e,left:e,right:e});function xP(e){return Ee(e)?{top:lp(e.top),bottom:lp(e.bottom),left:lp(e.left),right:lp(e.right)}:yve(lp(e))}async function VR(e,t,n,r){const i=V2(t),o=i&&i.headless;return o||re("Unrecognized renderer type: "+t),await e.runAsync(),RV(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function vve(e,t){e!==Ja.Canvas&&e!==Ja.SVG&&e!==Ja.PNG&&re("Unrecognized image type: "+e);const n=await VR(this,e,t);return e===Ja.SVG?xve(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function xve(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function bve(e,t){return(await VR(this,Ja.Canvas,e,t)).canvas()}async function wve(e){return(await VR(this,Ja.SVG,e)).svg()}function Sve(e,t,n){return kV(e,Gf,Eg,n).parse(t)}function kve(e){var t=this._runtime.scales;return _e(t,e)||re("Unrecognized scale or projection: "+e),t[e].value}var TV="width",NV="height",HR="padding",bP={skip:!0};function FV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===HR?r.left+r.right:0)}function MV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===HR?r.top+r.bottom:0)}function Eve(e){var t=e._signals,n=t[TV],r=t[NV],i=t[HR];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=FV(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=MV(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function _ve(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(TV,n,bP),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(NV,r,bP),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Cve(e){return this._runtime.getState(e||{data:$ve,signals:Ave,recurse:!0})}function $ve(e,t){return t.modified&&ie(t.input.value)&&!e.startsWith("_:vega:_")}function Ave(e,t){return!(e==="parent"||t instanceof Gf.proxy)}function Rve(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Tve(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(epe(n,t))}function Nve(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Fve(r))}function Fve(e){return e==null?"":ie(e)?DV(e):Ee(e)&&!ol(e)?Mve(e):e+""}function Mve(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ie(n)?DV(n):OV(n))}).join(`
`)}function DV(e){return"["+e.map(OV).join(", ")+"]"}function OV(e){return ie(e)?"[]":Ee(e)&&!ol(e)?"{}":e}function Dve(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function PV(e,t){const n=this;if(t=t||{},Nf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=He({},e.locale,t.locale);n.locale(Fz(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Ja.Canvas,n._scenegraph=new TU;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Nve,n._redraw=!0,n._handler=new sm().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Zye(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Sve(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:He({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=FV(n,n._width),n._viewHeight=MV(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Eve(n),Bye(n),Uye(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function v1(e,t){return _e(e._signals,t)?e._signals[t]:re("Unrecognized signal name: "+ge(t))}function IV(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function wP(e,t,n,r){let i=IV(n,r);return i||(i=WR(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function SP(e,t,n){const r=IV(t,n);return r&&t._targets.remove(r),e}ye(PV,Nf,{async evaluate(e,t,n){if(await Nf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Hye(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&j1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&_V(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=v1(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",xP(e)):xP(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(V2(e)||re("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Nf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(v1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:_ve,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=WR(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return wP(this,e,v1(this,e),t)},removeSignalListener(e,t){return SP(this,v1(this,e),t)},addDataListener(e,t){return wP(this,e,_v(this,e).values,t)},removeDataListener(e,t){return SP(this,_v(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=i$(this,null);this._globalCursor=!!e,t&&i$(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Tve,events:eve,finalize:nve,hover:tve,data:qye,change:ix,insert:Wye,remove:Vye,scale:kve,initialize:mve,toImageURL:vve,toCanvas:bve,toSVG:wve,getState:Cve,setState:Rve,_watchPixelRatio:Dve});const Ove="view",$v="[",Av="]",LV="{",zV="}",Pve=":",jV=",",Ive="@",Lve=">",zve=/[[\]{}]/,jve={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let BV,UV;function Fl(e,t,n){return BV=t||Ove,UV=n||jve,qV(e.trim()).map(o$)}function Bve(e){return UV[e]}function eg(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.includes(a)?--s:r&&r.includes(a)&&++s}return t}function qV(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=eg(e,i,jV,$v+LV,Av+zV),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function o$(e){return e[0]==="["?Uve(e):qve(e)}function Uve(e){const t=e.length;let n=1,r;if(n=eg(e,n,Av,$v,Av),n===t)throw"Empty between selector: "+e;if(r=qV(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Lve)throw"Expected '>' after between selector: "+e;r=r.map(o$);const i=o$(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function qve(e){const t={source:BV},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===zV){if(a=e.lastIndexOf(LV),a>=0){try{r=Wve(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Ive&&(i=++a),l=eg(e,a,Pve),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=eg(e,a,$v),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=eg(e,a,Av),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==$v)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||zve.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Bve(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Wve(e){const t=e.split(jV);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Vve(e){return Ee(e)?e:{type:e||"pad"}}const up=e=>+e||0,Hve=e=>({top:e,bottom:e,left:e,right:e});function Gve(e){return Ee(e)?e.signal?e:{top:up(e.top),bottom:up(e.bottom),left:up(e.left),right:up(e.right)}:Hve(up(e))}const bn=e=>Ee(e)&&!ie(e)?He({},e):{value:e};function kP(e,t,n,r){return n!=null?(Ee(n)&&!ie(n)||ie(n)&&n.length&&Ee(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function On(e,t,n){for(const r in t)kP(e,r,t[r]);for(const r in n)kP(e,r,n[r],"update")}function jd(e,t,n){for(const r in t)n&&_e(n,r)||(e[r]=He(e[r]||{},t[r]));return e}function Sf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const GR="mark",YR="frame",XR="scope",Yve="axis",Xve="axis-domain",Kve="axis-grid",Qve="axis-label",Zve="axis-tick",Jve="axis-title",e2e="legend",t2e="legend-band",n2e="legend-entry",r2e="legend-gradient",WV="legend-label",i2e="legend-symbol",o2e="legend-title",s2e="title",a2e="title-text",l2e="title-subtitle";function u2e(e,t,n,r,i){const o={},s={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!Sf(l,e)&&hk(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===YR?i.group:n===GR?He({},i.mark,i[t]):null;for(l in f)u=Sf(l,e)||(l==="fill"||l==="stroke")&&(Sf("fill",e)||Sf("stroke",e)),u||hk(o,l,f[l]);Se(r).forEach(d=>{const p=i.style&&i.style[d];for(const g in p)Sf(g,e)||hk(o,g,p[g])}),e=He({},e);for(l in o)f=o[l],f.signal?(a=a||{})[l]=f:s[l]=f;return e.enter=He(s,e.enter),a&&(e.update=He(a,e.update)),e}function hk(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const VV=e=>ke(e)?ge(e):e.signal?`(${e.signal})`:HV(e);function sx(e){if(e.gradient!=null)return f2e(e);let t=e.signal?`(${e.signal})`:e.color?c2e(e.color):e.field!=null?HV(e.field):e.value!==void 0?ge(e.value):void 0;return e.scale!=null&&(t=d2e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${iy(e.exponent)})`),e.mult!=null&&(t+=`*${iy(e.mult)}`),e.offset!=null&&(t+=`+${iy(e.offset)}`),e.round&&(t=`round(${t})`),t}const x1=(e,t,n,r)=>`(${e}(${[t,n,r].map(sx).join(",")})+'')`;function c2e(e){return e.c?x1("hcl",e.h,e.c,e.l):e.h||e.s?x1("hsl",e.h,e.s,e.l):e.l||e.a?x1("lab",e.l,e.a,e.b):e.r||e.g||e.b?x1("rgb",e.r,e.g,e.b):null}function f2e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ge(n));for(;t.length&&rt(t)==null;)t.pop();return t.unshift(VV(e.gradient)),`gradient(${t.join(",")})`}function iy(e){return Ee(e)?"("+sx(e)+")":e}function HV(e){return GV(Ee(e)?e:{datum:e})}function GV(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):re("Invalid field reference: "+ge(e));return e.signal||(r=ke(r)?os(r).map(ge).join("]["):GV(r)),t+"["+r+"]"}function d2e(e,t){const n=VV(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+iy(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function h2e(e){let t="";return e.forEach(n=>{const r=sx(n);t+=n.test?`(${n.test})?${r}:`:r}),rt(t)===":"&&(t+="null"),t}function YV(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=u2e(e,t,n,r,i.config);for(const a in e)s[a]=p2e(e[a],t,o,i);return o}function p2e(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=m2e(g2e(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function g2e(e){return ie(e)?h2e(e):sx(e)}function m2e(e,t,n,r){const i=es(e,t);return i.$fields.forEach(o=>r[o]=1),He(n,i.$params),i.$expr}const y2e="outer",v2e=["value","update","init","react","bind"];function EP(e,t){re(e+' for "outer" push: '+ge(t))}function XV(e,t){const n=e.name;if(e.push===y2e)t.signals[n]||EP("No prior signal definition",n),v2e.forEach(r=>{e[r]!==void 0&&EP("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function s$(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function ax(e,t,n,r){return new s$(e,t,n,r)}function Rv(e,t){return ax("operator",e,t)}function De(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function _g(e,t){return t?{$field:e,$name:t}:{$field:e}}const a$=_g("key");function _P(e,t){return{$compare:e,$order:t}}function x2e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const b2e="ascending",w2e="descending";function S2e(e){return Ee(e)?(e.order===w2e?"-":"+")+lx(e.op,e.field):""}function lx(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const KR="scope",l$="view";function cn(e){return e&&e.signal}function k2e(e){return e&&e.expr}function oy(e){if(cn(e))return!0;if(Ee(e)){for(const t in e)if(oy(e[t]))return!0}return!1}function Xi(e,t){return e??t}function Du(e){return e&&e.signal||e}const CP="timer";function Cg(e,t){return(e.merge?_2e:e.stream?C2e:e.type?$2e:re("Invalid stream specification: "+ge(e)))(e,t)}function E2e(e){return e===KR?l$:e||l$}function _2e(e,t){const n=e.merge.map(i=>Cg(i,t)),r=QR({merge:n},e,t);return t.addStream(r).id}function C2e(e,t){const n=Cg(e.stream,t),r=QR({stream:n},e,t);return t.addStream(r).id}function $2e(e,t){let n;e.type===CP?(n=t.event(CP,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(E2e(e.source),e.type);const r=QR({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function QR(e,t,n){let r=t.between;return r&&(r.length!==2&&re('Stream "between" parameter must have 2 entries: '+ge(t)),e.between=[Cg(r[0],n),Cg(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(A2e(t.marktype,t.markname,t.markrole)),t.source===KR&&r.push("inScope(event.item)"),r.length&&(e.filter=es("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function A2e(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const R2e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function T2e(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||re("Signal update missing events specification."),ke(o)&&(o=Fl(o,t.isSubscope()?KR:l$)),o=Se(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[F2e(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&re("Signal encode and update are mutually exclusive."),s="encode(item(),"+ge(r)+")"),i.update=ke(s)?es(s,t):s.expr!=null?es(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:R2e,$params:{$value:t.signalRef(s.signal)}}:re("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(He(N2e(l,t),i)))}function N2e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Cg(e,t)}}function F2e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function M2e(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?re("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=es(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>T2e(i,t,n.id))}const wt=e=>(t,n,r)=>ax(e,n,t||void 0,r),KV=wt("aggregate"),D2e=wt("axisticks"),QV=wt("bound"),vo=wt("collect"),$P=wt("compare"),O2e=wt("datajoin"),ZV=wt("encode"),P2e=wt("expression"),I2e=wt("facet"),L2e=wt("field"),z2e=wt("key"),j2e=wt("legendentries"),B2e=wt("load"),U2e=wt("mark"),q2e=wt("multiextent"),W2e=wt("multivalues"),V2e=wt("overlap"),H2e=wt("params"),JV=wt("prefacet"),G2e=wt("projection"),Y2e=wt("proxy"),X2e=wt("relay"),eH=wt("render"),K2e=wt("scale"),vc=wt("sieve"),Q2e=wt("sortitems"),tH=wt("viewlayout"),Z2e=wt("values");let J2e=0;const nH={min:"min",max:"max",count:"sum"};function exe(e,t){const n=e.type||"linear";qB(n)||re("Unrecognized scale type: "+ge(n)),t.addScale(e.name,{type:n,domain:void 0})}function txe(e,t){const n=t.getScale(e.name).params;let r;n.domain=rH(e.domain,e,t),e.range!=null&&(n.range=oH(e,t,n)),e.interpolate!=null&&fxe(e.interpolate,n),e.nice!=null&&(n.nice=cxe(e.nice,t)),e.bins!=null&&(n.bins=uxe(e.bins,t));for(r in e)_e(n,r)||r==="name"||(n[r]=Si(e[r],t))}function Si(e,t){return Ee(e)?e.signal?t.signalRef(e.signal):re("Unsupported object: "+ge(e)):e}function sy(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Si(n,t))}function ux(e){re("Can not find data set: "+ge(e))}function rH(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&re("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ie(e)?nxe:e.fields?ixe:rxe)(e,t,n)}function nxe(e,t,n){return e.map(r=>Si(r,n))}function rxe(e,t,n){const r=n.getData(e.data);return r||ux(e.data),Zf(t.type)?r.valuesRef(n,e.field,iH(e.sort,!1)):HB(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ixe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=ke(s)?{data:r,field:s}:ie(s)||s.signal?oxe(s,n):s,o.push(s),o),[]);return(Zf(t.type)?sxe:HB(t.type)?axe:lxe)(e,n,i)}function oxe(e,t){const n="_:vega:_"+J2e++,r=vo({});if(ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ge(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,vc({})]),{data:n,field:"data"}}function sxe(e,t,n){const r=iH(e.sort,!0);let i,o;const s=n.map(u=>{const f=t.getData(u.data);return f||ux(u.data),f.countsRef(t,u.field,r)}),a={groupby:a$,pulse:s};r&&(i=r.op||"count",o=r.field?lx(i,r.field):"count",a.ops=[nH[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(KV(a));const l=t.add(vo({pulse:De(i)}));return o=t.add(Z2e({field:a$,sort:t.sortRef(r),pulse:De(l)})),De(o)}function iH(e,t){return e&&(!e.field&&!e.op?Ee(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?re("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!nH[e.op]&&re("Multiple domain scales can not be sorted using "+e.op)),e}function axe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||ux(i.data),o.domainRef(t,i.field)});return De(t.add(W2e({values:r})))}function lxe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||ux(i.data),o.extentRef(t,i.field)});return De(t.add(q2e({extents:r})))}function uxe(e,t){return e.signal||ie(e)?sy(e,t):t.objectProperty(e)}function cxe(e,t){return e.signal?t.signalRef(e.signal):Ee(e)?{interval:Si(e.interval),step:Si(e.step)}:Si(e)}function fxe(e,t){t.interpolate=Si(e.type||e),e.gamma!=null&&(t.interpolateGamma=Si(e.gamma))}function oH(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ke(i)){if(r&&_e(r,i))return e=He({},e,{range:r[i]}),oH(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Zf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:re("Unrecognized scale range value: "+ge(i))}else if(i.scheme){n.scheme=ie(i.scheme)?sy(i.scheme,t):Si(i.scheme,t),i.extent&&(n.schemeExtent=sy(i.extent,t)),i.count&&(n.schemeCount=Si(i.count,t));return}else if(i.step){n.rangeStep=Si(i.step,t);return}else{if(Zf(e.type)&&!ie(i))return rH(i,e,t);ie(i)||re("Unsupported range type: "+ge(i))}return i.map(o=>(ie(o)?sy:Si)(o,t))}function dxe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=u$(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=u$(n[i],i,t));t.addProjection(e.name,r)}function u$(e,t,n){return ie(e)?e.map(r=>u$(r,t,n)):Ee(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:re("Unsupported parameter object: "+ge(e)):e}const xo="top",Bd="left",Ud="right",bl="bottom",sH="center",hxe="vertical",pxe="start",gxe="middle",mxe="end",c$="index",ZR="label",yxe="offset",ad="perc",vxe="perc2",Ei="value",gm="guide-label",JR="guide-title",xxe="group-title",bxe="group-subtitle",AP="symbol",ay="gradient",f$="discrete",d$="size",wxe="shape",Sxe="fill",kxe="stroke",Exe="strokeWidth",_xe="strokeDash",Cxe="opacity",eT=[d$,wxe,Sxe,kxe,Exe,_xe,Cxe],mm={name:1,style:1,interactive:1},it={value:0},_i={value:1},cx="group",aH="rect",tT="rule",$xe="symbol",xc="text";function $g(e){return e.type=cx,e.interactive=e.interactive||!1,e}function Br(e,t){const n=(r,i)=>Xi(e[r],Xi(t[r],i));return n.isVertical=r=>hxe===Xi(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xi(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xi(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xi(e.columns,Xi(t.columns,+n.isVertical(!0))),n}function lH(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Axe(e,t,n){const r=t.config.style[n];return r&&r[e]}function fx(e,t,n){return`item.anchor === '${pxe}' ? ${e} : item.anchor === '${mxe}' ? ${t} : ${n}`}const nT=fx(ge(Bd),ge(Ud),ge(sH));function Rxe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ee(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function uH(e,t){return t?e?Ee(e)?Object.assign({},e,{offset:uH(e.offset,t)}):{value:e,offset:t}:t:e}function si(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=jd(e.encode,t,mm)):e.interactive=!1,e}function Txe(e,t,n,r){const i=Br(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,f,d,p;o?(u=[0,1],f=[0,0],d=s,p=a):(u=[0,0],f=[1,0],d=a,p=s);const g={enter:l={opacity:it,x:it,y:it,width:bn(d),height:bn(p)},update:He({},l,{opacity:_i,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:it}};return On(g,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),si({type:aH,role:r2e,encode:g},r)}function Nxe(e,t,n,r,i){const o=Br(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,f,d,p,g="";s?(u="y",d="y2",f="x",p="width",g="1-"):(u="x",d="x2",f="y",p="height");const y={opacity:it,fill:{scale:t,field:Ei}};y[u]={signal:g+"datum."+ad,mult:l},y[f]=it,y[d]={signal:g+"datum."+vxe,mult:l},y[p]=bn(a);const v={enter:y,update:He({},y,{opacity:_i}),exit:{opacity:it}};return On(v,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),si({type:aH,role:t2e,key:Ei,from:i,encode:v},r)}const Fxe=`datum.${ad}<=0?"${Bd}":datum.${ad}>=1?"${Ud}":"${sH}"`,Mxe=`datum.${ad}<=0?"${bl}":datum.${ad}>=1?"${xo}":"${gxe}"`;function RP(e,t,n,r){const i=Br(e,t),o=i.isVertical(),s=bn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,d,p,g="";const y={enter:u={opacity:it},update:f={opacity:_i,text:{field:ZR}},exit:{opacity:it}};return On(y,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Xi(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=f.baseline={signal:Mxe},d="y",p="x",g="1-"):(u.align=f.align={signal:Fxe},u.baseline={value:"top"},d="x",p="y"),u[d]=f[d]={signal:g+"datum."+ad,mult:a},u[p]=f[p]=s,s.offset=Xi(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+c$}:void 0,si({type:xc,role:WV,style:gm,key:Ei,from:r,encode:y,overlap:l},n)}function Dxe(e,t,n,r,i){const o=Br(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),f=o("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${yxe} : datum.${d$}`,g=u?bn(u):{field:d$},y=`datum.${c$}`,v=`max(1, ${i})`;let x,w,S,E,C;g.mult=.5,x={enter:w={opacity:it,x:{signal:p,mult:.5,offset:f},y:g},update:S={opacity:_i,x:w.x,y:w.y},exit:{opacity:it}};let $=null,R=null;e.fill||($=t.symbolBaseFillColor,R=t.symbolBaseStrokeColor),On(x,{fill:o("symbolFillColor",$),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",R),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),eT.forEach(I=>{e[I]&&(S[I]=w[I]={scale:e[I],field:Ei})});const A=si({type:$xe,role:i2e,key:Ei,from:d,clip:u?!0:void 0,encode:x},n.symbols),N=bn(f);N.offset=o("labelOffset"),x={enter:w={opacity:it,x:{signal:p,offset:N},y:g},update:S={opacity:_i,text:{field:ZR},x:w.x,y:w.y},exit:{opacity:it}},On(x,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const M=si({type:xc,role:WV,style:gm,key:Ei,from:d,encode:x},n.labels);return x={enter:{noBound:{value:!u},width:it,height:u?bn(u):it,opacity:it},exit:{opacity:it},update:S={opacity:_i,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(E=`ceil(item.mark.items.length / ${v})`,S.row.signal=`${y}%${E}`,S.column.signal=`floor(${y} / ${E})`,C={field:["row",y]}):(S.row.signal=`floor(${y} / ${v})`,S.column.signal=`${y} % ${v}`,C={field:y}),S.column.signal=`(${i})?${S.column.signal}:${y}`,r={facet:{data:r,name:"value",groupby:c$}},$g({role:XR,from:r,encode:jd(x,s,mm),marks:[A,M],name:l,interactive:a,sort:C})}function Oxe(e,t){const n=Br(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const rT='item.orient === "left"',iT='item.orient === "right"',dx=`(${rT} || ${iT})`,Pxe=`datum.vgrad && ${dx}`,Ixe=fx('"top"','"bottom"','"middle"'),Lxe=fx('"right"','"left"','"center"'),zxe=`datum.vgrad && ${iT} ? (${Lxe}) : (${dx} && !(datum.vgrad && ${rT})) ? "left" : ${nT}`,jxe=`item._anchor || (${dx} ? "middle" : "start")`,Bxe=`${Pxe} ? (${rT} ? -90 : 90) : 0`,Uxe=`${dx} ? (datum.vgrad ? (${iT} ? "bottom" : "top") : ${Ixe}) : "top"`;function qxe(e,t,n,r){const i=Br(e,t),o={enter:{opacity:it},update:{opacity:_i,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:it}};return On(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:jxe},angle:{signal:Bxe},align:{signal:zxe},baseline:{signal:Uxe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),si({type:xc,role:o2e,style:JR,from:r,encode:o},n)}function Wxe(e,t){let n;return Ee(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+TP(e.path)+")":e.sphere&&(n="geoShape("+TP(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function TP(e){return Ee(e)&&e.signal?e.signal:ge(e)}function cH(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===cx?XR:t||GR}function Vxe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||cH(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Hxe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function oT(e,t){const n=Vz(e.type);n||re("Unrecognized transform type: "+ge(e.type));const r=ax(n.type.toLowerCase(),null,fH(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function fH(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Gxe(s,t,n)}return r}function Gxe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Yxe(e,t,n);if(i===void 0){e.required&&re("Missing required "+ge(t.type)+" parameter: "+ge(e.name));return}else{if(r==="param")return Xxe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!cn(i)?i.map(o=>NP(e,o,n)):NP(e,i,n)}function NP(e,t,n){const r=e.type;if(cn(t))return MP(r)?re("Expression references can not be signals."):pk(r)?n.fieldRef(t):DP(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pk(r);return i&&Kxe(t)?n.exprRef(t.expr,t.as):i&&Qxe(t)?_g(t.field,t.as):MP(r)?es(t,n):Zxe(r)?De(n.getData(t).values):pk(r)?_g(t):DP(r)?n.compareRef(t):t}}function Yxe(e,t,n){return ke(t.from)||re('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Xxe(e,t,n){const r=t[e.name];return e.array?(ie(r)||re("Expected an array of sub-parameters. Instead: "+ge(r)),r.map(i=>FP(e,i,n))):FP(e,r,n)}function FP(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||re("Unsupported parameter: "+ge(t));const o=He(fH(i,t,n),i.key);return De(n.add(H2e(o)))}const Kxe=e=>e&&e.expr,Qxe=e=>e&&e.field,Zxe=e=>e==="data",MP=e=>e==="expr",pk=e=>e==="field",DP=e=>e==="compare";function Jxe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||re("Only group marks can be faceted."),r.field!=null?s=a=ly(r,n):(e.data?a=De(n.getData(e.data).aggregate):(o=oT(He({type:"aggregate",groupby:Se(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=ly(r,n),s=a=De(n.add(o))),i=n.keyRef(r.groupby,!0))):s=De(n.add(vo(null,[{}]))),s||(s=ly(e,n)),{key:i,pulse:s,parent:a}}function ly(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:De(t.getData(e.data).output)}function Ju(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Ju.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=De(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Ju(e,o,i,r,s)};function dH(e){return ke(e)?e:null}function OP(e,t,n){const r=lx(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function cp(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=S2e(o);let u=dH(i),f,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const p=o?{field:a$,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:De(t.output)};l&&(p.sort=e.sortRef(o)),d=e.add(ax(r,void 0,p)),s&&(t.index[i]=d),f=De(d),u!=null&&(a[u]=f)}return f}Ju.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=dH(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&OP(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:De(r.output)},n&&n.field&&OP(e,l,n),a=e.add(KV(l)),s=e.add(vo({pulse:De(a)})),s={agg:a,ref:De(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return De(this.values)},extentRef(e,t){return cp(e,this,"extent","extent",t,!1)},domainRef(e,t){return cp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return cp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return cp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return cp(e,this,"indata","tupleindex",t,!0,!0)}};function ebe(e,t,n){const r=e.from.facet,i=r.name,o=ly(r,t);let s;r.name||re("Facet must have a name: "+ge(r)),r.data||re("Facet must reference a data set: "+ge(r)),r.field?s=t.add(JV({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(I2e({key:t.keyRef(r.groupby),group:De(t.proxy(n.parent)),pulse:o})):re("Facet must specify groupby or field: "+ge(r));const a=t.fork(),l=a.add(vo()),u=a.add(vc({pulse:De(l)}));a.addData(i,new Ju(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function tbe(e,t,n){const r=t.add(JV({pulse:n.pulse})),i=t.fork();i.add(vc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function hH(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Rv()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(d=>d??"null").join(",")+"),0)",f=es(u,t);l.update=f.$expr,l.params=f.$params}function hx(e,t){const n=cH(e),r=e.type===cx,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===XR||n===YR,a,l,u,f,d,p,g;const y=n===GR||s||i,v=Jxe(e.from,r,t);l=t.add(O2e({key:v.key||(e.key?_g(e.key):void 0),pulse:v.pulse,clean:!r}));const x=De(l);l=u=t.add(vo({pulse:x})),l=t.add(U2e({markdef:Vxe(e),interactive:Hxe(e.interactive,t),clip:Wxe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:De(l)}));const w=De(l);l=f=t.add(ZV(YV(e.encode,e.type,n,e.style,t,{mod:!1,pulse:w}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(R=>{const A=oT(R,t),N=A.metadata;(N.generates||N.changes)&&re("Mark transforms should not generate new data."),N.nomod||(f.params.mod=!0),A.params.pulse=De(l),t.add(l=A)}),e.sort&&(l=t.add(Q2e({sort:t.compareRef(e.sort),pulse:De(l)})));const S=De(l);(i||s)&&(s=t.add(tH({layout:t.objectProperty(e.layout),legends:t.legends,mark:w,pulse:S})),p=De(s));const E=t.add(QV({mark:w,pulse:p||S}));g=De(E),r&&(y&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(S,p||g,x),i?ebe(e,t,v):y?tbe(e,t,v):t.parse(e),t.popState(),y&&(s&&a.push(s),a.push(E))),o&&(g=nbe(o,g,t));const C=t.add(eH({pulse:g})),$=t.add(vc({pulse:De(C)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Ju(t,u,C,$)),e.on&&e.on.forEach(R=>{(R.insert||R.remove||R.toggle)&&re("Marks only support modify triggers."),hH(R,t,d)}))}function nbe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:cn(o)?n.signalRef(o.signal):o,method:cn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=cn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return De(n.add(V2e(s)))}function rbe(e,t){const n=t.config.legend,r=e.encode||{},i=Br(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let f=0,d,p,g;eT.forEach(E=>e[E]?(u[E]=e[E],f=f||e[E]):0),f||re("Missing valid scale for legend.");const y=ibe(e,t.scaleType(f)),v={title:e.title!=null,scales:u,type:y,vgrad:y!=="symbol"&&i.isVertical()},x=De(t.add(vo(null,[v]))),w={enter:{x:{value:0},y:{value:0}}},S=De(t.add(j2e(p={type:y,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return y===ay?(g=[Txe(e,f,n,r.gradient),RP(e,n,r.labels,S)],p.count=p.count||t.signalRef(`max(2,2*floor((${Du(i.gradientLength())})/100))`)):y===f$?g=[Nxe(e,f,n,r.gradient,S),RP(e,n,r.labels,S)]:(d=Oxe(e,n),g=[Dxe(e,n,r,S,Du(d.columns))],p.size=abe(e,t,g[0].marks)),g=[$g({role:n2e,from:x,encode:w,marks:g,layout:d,interactive:a})],v.title&&g.push(qxe(e,n,r.title,x)),hx($g({role:e2e,from:x,encode:jd(sbe(i,e,n),o,mm),marks:g,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function ibe(e,t){let n=e.type||AP;return!e.type&&obe(e)===1&&(e.fill||e.stroke)&&(n=o5(t)?ay:nC(t)?f$:AP),n!==ay?n:nC(t)?f$:ay}function obe(e){return eT.reduce((t,n)=>t+(e[n]?1:0),0)}function sbe(e,t,n){const r={enter:{},update:{}};return On(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function abe(e,t,n){const r=Du(PP("size",e,n)),i=Du(PP("strokeWidth",e,n)),o=Du(lbe(n[1].encode,t,gm));return es(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function PP(e,t,n){return t[e]?`scale("${t[e]}",datum)`:lH(e,n[0].encode)}function lbe(e,t,n){return lH("fontSize",e)||Axe("fontSize",t,n)}const ube=`item.orient==="${Bd}"?-90:item.orient==="${Ud}"?90:0`;function cbe(e,t){e=ke(e)?{text:e}:e;const n=Br(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},f=De(t.add(vo(null,[u])));return l.push(hbe(e,n,fbe(e),f)),e.subtitle&&l.push(pbe(e,n,r.subtitle,f)),hx($g({role:s2e,from:f,encode:dbe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function fbe(e){const t=e.encode;return t&&t.title||He({name:e.name,interactive:e.interactive,style:e.style},t)}function dbe(e,t){const n={enter:{},update:{}};return On(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:nT},angle:{signal:ube},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),jd(n,t,mm)}function hbe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return On(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),si({type:xc,role:a2e,style:xxe,from:r,encode:s},n)}function pbe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return On(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),si({type:xc,role:l2e,style:bxe,from:r,encode:s},n)}function gbe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(oT(r,t))}),e.on&&e.on.forEach(r=>{hH(r,t,e.name)}),t.addDataPipeline(e.name,mbe(e,t,n))}function mbe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,f,d;for(e.values?cn(e.values)||oy(e.format)?(r.push(IP(t,e)),r.push(i=iu())):r.push(i=iu({$ingest:e.values,$format:e.format})):e.url?oy(e.url)||oy(e.format)?(r.push(IP(t,e)),r.push(i=iu())):r.push(i=iu({$request:e.url,$format:e.format})):e.source&&(i=a=Se(e.source).map(p=>De(t.getData(p).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],d=f.metadata,!i&&!d.source&&r.push(i=iu()),r.push(f),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?i=f:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=X2e({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,iu())),i||r.push(iu()),r.push(vc({})),r}function iu(e){const t=vo({},e);return t.metadata={source:!0},t}function IP(e,t){return B2e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const pH=e=>e===bl||e===xo,px=(e,t,n)=>cn(e)?bbe(e.signal,t,n):e===Bd||e===xo?t:n,wn=(e,t,n)=>cn(e)?vbe(e.signal,t,n):pH(e)?t:n,io=(e,t,n)=>cn(e)?xbe(e.signal,t,n):pH(e)?n:t,gH=(e,t,n)=>cn(e)?wbe(e.signal,t,n):e===xo?{value:t}:{value:n},ybe=(e,t,n)=>cn(e)?Sbe(e.signal,t,n):e===Ud?{value:t}:{value:n},vbe=(e,t,n)=>mH(`${e} === '${xo}' || ${e} === '${bl}'`,t,n),xbe=(e,t,n)=>mH(`${e} !== '${xo}' && ${e} !== '${bl}'`,t,n),bbe=(e,t,n)=>sT(`${e} === '${Bd}' || ${e} === '${xo}'`,t,n),wbe=(e,t,n)=>sT(`${e} === '${xo}'`,t,n),Sbe=(e,t,n)=>sT(`${e} === '${Ud}'`,t,n),mH=(e,t,n)=>(t=t!=null?bn(t):t,n=n!=null?bn(n):n,LP(t)&&LP(n)?(t=t?t.signal||ge(t.value):null,n=n?n.signal||ge(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[He({test:e},t)].concat(n||[])),LP=e=>e==null||Object.keys(e).length===1,sT=(e,t,n)=>({signal:`${e} ? (${Rf(t)}) : (${Rf(n)})`}),kbe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Bd}' ? (${Rf(r)}) : `:"")+(n!=null?`${e} === '${bl}' ? (${Rf(n)}) : `:"")+(i!=null?`${e} === '${Ud}' ? (${Rf(i)}) : `:"")+(t!=null?`${e} === '${xo}' ? (${Rf(t)}) : `:"")+"(null)"}),Rf=e=>cn(e)?e.signal:e==null?null:ge(e),Ebe=(e,t)=>t===0?0:cn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Of=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function gf(e,t,n,r){let i;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[JR][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[gm][i]}return null}function zP(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function _be(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(cn(s)){const d=zP([n.axisX,n.axisY]),p=zP([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=wn(s,gf(u,n.axisX,i,r),gf(u,n.axisY,i,r));l={};for(u of p)l[u]=kbe(s.signal,gf(u,n.axisTop,i,r),gf(u,n.axisBottom,i,r),gf(u,n.axisLeft,i,r),gf(u,n.axisRight,i,r))}else a=s===xo||s===bl?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?He({},i,a,l,o):i}function Cbe(e,t,n,r){const i=Br(e,t),o=e.orient;let s,a;const l={enter:s={opacity:it},update:a={opacity:_i},exit:{opacity:it}};On(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=jP(e,0),f=jP(e,1);return s.x=a.x=wn(o,u,it),s.x2=a.x2=wn(o,f),s.y=a.y=io(o,u,it),s.y2=a.y2=io(o,f),si({type:tT,role:Xve,from:r,encode:l},n)}function jP(e,t){return{scale:e.scale,range:t}}function $be(e,t,n,r,i){const o=Br(e,t),s=e.orient,a=e.gridScale,l=px(s,1,-1),u=Abe(e.offset,l);let f,d,p;const g={enter:f={opacity:it},update:p={opacity:_i},exit:d={opacity:it}};On(g,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const y={scale:e.scale,field:Ei,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},v=wn(s,{signal:"height"},{signal:"width"}),x=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},w=a?{scale:a,range:1,mult:l,offset:u}:He(v,{mult:l,offset:u});return f.x=p.x=wn(s,y,x),f.y=p.y=io(s,y,x),f.x2=p.x2=io(s,w),f.y2=p.y2=wn(s,w),d.x=wn(s,y),d.y=io(s,y),si({type:tT,role:Kve,key:Ei,from:r,encode:g},n)}function Abe(e,t){if(t!==1)if(!Ee(e))e=cn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=He({},e);for(;n.mult!=null;)if(Ee(n.mult))n=n.mult=He({},n.mult);else return n.mult=cn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Rbe(e,t,n,r,i,o){const s=Br(e,t),a=e.orient,l=px(a,-1,1);let u,f,d;const p={enter:u={opacity:it},update:d={opacity:_i},exit:f={opacity:it}};On(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const g=bn(i);g.mult=l;const y={scale:e.scale,field:Ei,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=u.y=wn(a,it,y),d.y2=u.y2=wn(a,g),f.x=wn(a,y),d.x=u.x=io(a,it,y),d.x2=u.x2=io(a,g),f.y=io(a,y),si({type:tT,role:Zve,key:Ei,from:r,encode:p},n)}function gk(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Tbe(e,t,n,r,i,o){const s=Br(e,t),a=e.orient,l=e.scale,u=px(a,-1,1),f=Du(s("labelFlush")),d=Du(s("labelFlushOffset")),p=s("labelAlign"),g=s("labelBaseline");let y=f===0||!!f,v;const x=bn(i);x.mult=u,x.offset=bn(s("labelPadding")||0),x.offset.mult=u;const w={scale:l,field:Ei,band:.5,offset:uH(o.offset,s("labelOffset"))},S=wn(a,y?gk(l,f,'"left"','"right"','"center"'):{value:"center"},ybe(a,"left","right")),E=wn(a,gH(a,"bottom","top"),y?gk(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),C=gk(l,f,`-(${d})`,d,0);y=y&&d;const $={opacity:it,x:wn(a,w,x),y:io(a,w,x)},R={enter:$,update:v={opacity:_i,text:{field:ZR},x:$.x,y:$.y,align:S,baseline:E},exit:{opacity:it,x:$.x,y:$.y}};On(R,{dx:!p&&y?wn(a,C):null,dy:!g&&y?io(a,C):null}),On(R,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:g});const A=s("labelBound");let N=s("labelOverlap");return N=N||A?{separation:s("labelSeparation"),method:N,order:"datum.index",bound:A?{scale:l,orient:a,tolerance:A}:null}:void 0,v.align!==S&&(v.align=Of(v.align,S)),v.baseline!==E&&(v.baseline=Of(v.baseline,E)),si({type:xc,role:Qve,style:gm,key:Ei,from:r,encode:R,overlap:N},n)}function Nbe(e,t,n,r){const i=Br(e,t),o=e.orient,s=px(o,-1,1);let a,l;const u={enter:a={opacity:it,anchor:bn(i("titleAnchor",null)),align:{signal:nT}},update:l=He({},a,{opacity:_i,text:bn(e.title)}),exit:{opacity:it}},f={signal:`lerp(range("${e.scale}"), ${fx(0,1,.5)})`};return l.x=wn(o,f),l.y=io(o,f),a.angle=wn(o,it,Ebe(s,90)),a.baseline=wn(o,gH(o,bl,xo),{value:bl}),l.angle=a.angle,l.baseline=a.baseline,On(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Fbe(i,o,u,n),u.update.align=Of(u.update.align,a.align),u.update.angle=Of(u.update.angle,a.angle),u.update.baseline=Of(u.update.baseline,a.baseline),si({type:xc,role:Jve,style:JR,from:r,encode:u},n)}function Fbe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Of(bn(a),n.update[l]),!1):!Sf(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?bn(s):wn(t,bn(s),bn(o))}function Mbe(e,t){const n=_be(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Br(e,n),u=Rxe(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=De(t.add(vo({},[f]))),p=De(t.add(D2e({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),g=[];let y;return f.grid&&g.push($be(e,n,r.grid,p,u)),f.ticks&&(y=l("tickSize"),g.push(Rbe(e,n,r.ticks,p,y,u))),f.labels&&(y=f.ticks?y:0,g.push(Tbe(e,n,r.labels,p,y,u))),f.domain&&g.push(Cbe(e,n,r.domain,d)),f.title&&g.push(Nbe(e,n,r.title,d)),hx($g({role:Yve,from:d,encode:jd(Dbe(l,e),i,mm),marks:g,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function Dbe(e,t){const n={enter:{},update:{}};return On(n,{orient:e("orient"),offset:e("offset")||0,position:Xi(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function yH(e,t,n){const r=Se(e.signals),i=Se(e.scales);return n||r.forEach(o=>XV(o,t)),Se(e.projections).forEach(o=>dxe(o,t)),i.forEach(o=>exe(o,t)),Se(e.data).forEach(o=>gbe(o,t)),i.forEach(o=>txe(o,t)),(n||r).forEach(o=>M2e(o,t)),Se(e.axes).forEach(o=>Mbe(o,t)),Se(e.marks).forEach(o=>hx(o,t)),Se(e.legends).forEach(o=>rbe(o,t)),e.title&&cbe(e.title,t),t.parseLambdas(),t}const Obe=e=>jd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Pbe(e,t){const n=t.config,r=De(t.root=t.add(Rv())),i=Ibe(e,n);i.forEach(u=>XV(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(vo()),s=t.add(ZV(YV(Obe(e.encode),cx,YR,e.style,t,{pulse:De(o)}))),a=t.add(tH({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:De(s)}));t.operators.pop(),t.pushState(De(s),De(a),null),yH(e,t,i),t.operators.push(a);let l=t.add(QV({mark:r,pulse:De(a)}));return l=t.add(eH({pulse:De(l)})),l=t.add(vc({pulse:De(l)})),t.addData("root",new Ju(t,o,o,l)),t}function fp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Ibe(e,t){const n=s=>Xi(e[s],t[s]),r=[fp("background",n("background")),fp("autosize",Vve(n("autosize"))),fp("padding",Gve(n("padding"))),fp("width",n("width")||0),fp("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Se(e.signals).forEach(s=>{_e(i,s.name)?s=He(i[s.name],s):r.push(s),o[s.name]=s}),Se(t.signals).forEach(s=>{!_e(o,s.name)&&!_e(i,s.name)&&r.push(s)}),r}function vH(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function BP(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}vH.prototype=BP.prototype={parse(e){return yH(e,this)},fork(){return new BP(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof s$?De(e):e;return this.add(Y2e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(De(this.add(vc({pulse:e})))),this._parent.push(t),this._lookup.push(n?De(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return rt(this._parent)},encode(){return rt(this._encode)},lookup(){return rt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ke(e))return _g(e,t);e.signal||re("Unsupported field reference: "+ge(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=De(this.add(L2e(i)))}return r},compareRef(e){let t=!1;const n=o=>cn(o)?(t=!0,this.signalRef(o.signal)):k2e(o)?(t=!0,this.exprRef(o.expr)):o,r=Se(e.field).map(n),i=Se(e.order).map(n);return t?De(this.add($P({fields:r,orders:i}))):_P(r,i)},keyRef(e,t){let n=!1;const r=o=>cn(o)?(n=!0,De(i[o.signal])):o,i=this.signals;return e=Se(e).map(r),n?De(this.add(z2e({fields:e,flat:t}))):x2e(e,t)},sortRef(e){if(!e)return e;const t=lx(e.op,e.field),n=e.order||b2e;return n.signal?De(this.add($P({fields:t,orders:this.signalRef(n.signal)}))):_P(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&re("Duplicate signal name: "+ge(e));const n=t instanceof s$?t:this.add(Rv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||re("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?De(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(Rv(null))),De(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=es(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ee(e)?e:this.signalRef(e.signal||aT(e))},exprRef(e,t){const n={expr:es(e,this)};return t&&(n.expr.$name=t),De(this.add(P2e(n)))},addBinding(e,t){this.bindings||re("Nested signals do not support binding: "+ge(e)),this.bindings.push(He({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&re("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,K2e(t))},addProjection(e,t){this.addScaleProj(e,G2e(t))},getScale(e){return this.scales[e]||re("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return De(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&re("Duplicate data set name: "+ge(e)),this.data[e]=t},getData(e){return this.data[e]||re("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&re("Duplicate data set name: "+ge(e)),this.addData(e,Ju.fromEntries(this,t))}};function aT(e){return(ie(e)?Lbe:zbe)(e)}function Lbe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ee(i)?i.signal||aT(i):ge(i))}return n+"]"}function zbe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ge(r)+":"+(Ee(i)?i.signal||aT(i):ge(i));return t+"}"}function jbe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Bbe(e,t,n){return Ee(e)||re("Input Vega specification must be an object."),t=$d(jbe(),t,e.config),Pbe(e,new vH(t,n)).toRuntime()}var Ube="6.1.2";He(Gf,Toe,afe,zfe,Ehe,vpe,Vge,Ege,Gge,yme,$me,Dme);const qbe=Ube,Wbe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:nn,CanvasHandler:sm,CanvasRenderer:Wy,DATE:Or,DAY:Gn,DAYOFYEAR:Zo,Dataflow:Nf,Debug:hL,Error:v3,EventStream:p2,Gradient:aU,GroupItem:I2,HOURS:ri,Handler:T5,HybridHandler:QU,HybridRenderer:hC,Info:dL,Item:P2,MILLISECONDS:lo,MINUTES:ii,MONTH:Qn,Marks:oi,MultiPulse:W3,None:fL,Operator:St,Parameters:h2,Pulse:al,QUARTER:Dr,RenderType:Ja,Renderer:om,ResourceLoader:hU,SECONDS:Ai,SVGHandler:LU,SVGRenderer:P5,SVGStringRenderer:KU,Scenegraph:TU,TIME_UNITS:D3,Transform:te,View:PV,WEEK:ln,Warn:x3,YEAR:Dn,accessor:jr,accessorFields:Kn,accessorName:Gt,array:Se,ascending:jg,bandwidthNRD:Y3,bin:Yz,bootstrapCI:Xz,boundClip:aq,boundContext:tm,boundItem:lC,boundMark:CU,boundStroke:aa,changeset:pc,clampRange:EL,codegenExpression:uV,compare:E3,constant:tr,cumulativeLogNormal:eA,cumulativeNormal:m2,cumulativeUniform:iA,dayofyear:tz,debounce:_3,defaultLocale:z3,definition:Vz,densityLogNormal:J3,densityNormal:X3,densityUniform:rA,domChild:an,domClear:mi,domCreate:Qa,domFind:R5,dotbin:Kz,error:re,expressionFunction:Jt,extend:He,extent:Xo,extentIndex:_L,falsy:Ba,fastmap:Rd,field:Ci,flush:CL,font:U2,fontFamily:im,fontSize:ls,format:z1,formatLocale:Sy,formats:U3,hasOwnProperty:_e,id:zg,identity:er,inferType:Dz,inferTypes:Oz,ingest:dt,inherits:ye,inrange:Ef,interpolate:s5,interpolateColors:D2,interpolateRange:GB,intersect:rq,intersectBoxLine:_f,intersectPath:p5,intersectPoint:g5,intersectRule:gU,isArray:ie,isBoolean:Cl,isDate:ol,isFunction:Ge,isIterable:$L,isNumber:lt,isObject:Ee,isRegExp:C3,isString:ke,isTuple:f2,key:$3,lerp:AL,lineHeight:yl,loader:u2,locale:Fz,logger:b3,lruCache:RL,markup:O5,merge:TL,mergeConfig:$d,multiLineOffset:C5,one:Cd,pad:NL,panLinear:vL,panLog:xL,panPow:bL,panSymlog:wL,parse:Bbe,parseExpression:OR,parseSelector:Fl,path:w2,pathCurves:f5,pathEqual:lq,pathParse:Jf,pathRectangle:cU,pathRender:hg,pathSymbols:uU,pathTrail:fU,peek:rt,point:W2,projection:tR,quantileLogNormal:tA,quantileNormal:y2,quantileUniform:oA,quantiles:H3,quantizeInterpolator:YB,quarter:SL,quartiles:G3,get random(){return Ri},randomInteger:Die,randomKDE:Q3,randomLCG:Mie,randomLogNormal:Zz,randomMixture:Jz,randomNormal:K3,randomUniform:ej,read:Lz,regressionConstant:sA,regressionExp:nj,regressionLinear:aA,regressionLoess:oj,regressionLog:tj,regressionPoly:ij,regressionPow:rj,regressionQuad:lA,renderModule:V2,repeat:xp,resetDefaultLocale:Tre,resetSVGDefIds:_ce,responseType:Iz,runtimeContext:kV,sampleCurve:x2,sampleLogNormal:Z3,sampleNormal:g2,sampleUniform:nA,scale:ct,sceneEqual:I5,sceneFromJSON:AU,scenePickVisit:Py,sceneToJSON:$U,sceneVisit:uo,sceneZOrder:m5,scheme:a5,serializeXML:HU,setHybridRendererOptions:wce,setRandom:Nie,span:Bg,splitAccessPath:os,stringValue:ge,textMetrics:Jr,timeBin:vz,timeFloor:lz,timeFormatLocale:ag,timeInterval:Md,timeOffset:fz,timeSequence:pz,timeUnitSpecifier:ez,timeUnits:O3,toBoolean:A3,toDate:R3,toNumber:Yn,toSet:ao,toString:T3,transform:Hz,transforms:Gf,truncate:FL,truthy:$i,tupleid:Oe,typeParsers:W_,utcFloor:uz,utcInterval:Dd,utcOffset:dz,utcSequence:gz,utcdayofyear:iz,utcquarter:kL,utcweek:oz,version:qbe,visitArray:Wa,week:nz,writeConfig:Ad,zero:Xa,zoomLinear:w3,zoomLog:S3,zoomPow:my,zoomSymlog:k3},Symbol.toStringTag,{value:"Module"}));function qd(e,t,n){return e.fields=t||[],e.fname=n,e}function Vbe(e){return e.length===1?Hbe(e[0]):Gbe(e)}const Hbe=e=>function(t){return t[e]},Gbe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function mk(e){throw Error(e)}function Ybe(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||mk("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&mk("Access path missing closing bracket: "+e),r&&mk("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Xbe(e,t,n){const r=Ybe(e);return e=r.length===1?r[0]:e,qd(Vbe(r),[e],e)}Xbe("id");qd(e=>e,[],"identity");qd(()=>0,[],"zero");qd(()=>1,[],"one");qd(()=>!0,[],"true");qd(()=>!1,[],"false");var Kbe=Array.isArray;function UP(e){return e===Object(e)}const Qbe=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function Zbe(e){return typeof e=="string"}function Jbe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ewe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},twe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},nwe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const rwe=Array.prototype.slice,ou=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,rwe.call(t,1))},iwe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var owe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:iwe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return ou("join",arguments)},indexof:function(){return ou("indexOf",arguments)},lastindexof:function(){return ou("lastIndexOf",arguments)},slice:function(){return ou("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Qbe),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return ou("substring",arguments,String)},split:function(){return ou("split",arguments,String)},replace:function(){return ou("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const swe=["view","item","group","xy","x","y"],h$=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&h$.add(setImmediate);const awe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ewe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),h$.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||owe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>twe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>nwe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,h$.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function dp(e,t,n,r,i,o){const s=a=>awe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,swe.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var lwe={operator(e,t){const n=t.ast,r=e.functions;return i=>dp(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>dp(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>dp(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return dp(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,f;for(const d in r)f=dp(r[d].ast,i,a,l,void 0,s),s[d]!==f&&(s[d]=f,u=1);return n!=="rule"&&Jbe(s,r,o),u}}},uwe="6.1.0",cwe={version:uwe};function lT(e){return fe(e,"or")}function uT(e){return fe(e,"and")}function cT(e){return fe(e,"not")}function uy(e,t){if(cT(e))uy(e.not,t);else if(uT(e))for(const n of e.and)uy(n,t);else if(lT(e))for(const n of e.or)uy(n,t);else t(e)}function Pf(e,t){return cT(e)?{not:Pf(e.not,t)}:uT(e)?{and:e.and.map(n=>Pf(n,t))}:lT(e)?{or:e.or.map(n=>Pf(n,t))}:t(e)}const qe=structuredClone;function xH(e){throw new Error(e)}function ld(e,t){const n={};for(const r of t)_e(e,r)&&(n[r]=e[r]);return n}function ti(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>pt(e)).join(",")})`};function tt(e){if(lt(e))return e;const t=ke(e)?e:pt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function p$(e){return e===!1||e===null}function Ze(e,t){return e.includes(t)}function ud(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function fT(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function bH(e,...t){for(const n of t)fwe(e,n??{});return e}function fwe(e,t){for(const n of ue(t))Ad(e,n,t[n],!0)}function Bo(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function dwe(e,t){const n=ue(e),r=ue(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function wH(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function dT(e,t){for(const n of e)if(t.has(n))return!0;return!1}function g$(e){const t=new Set;for(const n of e){const i=os(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function hT(e,t){return e===void 0||t===void 0?!0:dT(g$(e),g$(t))}function kt(e){return ue(e).length===0}const ue=Object.keys,tn=Object.values,wl=Object.entries;function Ag(e){return e===!0||e===!1}function Dt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function tg(e,t){return cT(e)?`!(${tg(e.not,t)})`:uT(e)?`(${e.and.map(n=>tg(n,t)).join(") && (")})`:lT(e)?`(${e.or.map(n=>tg(n,t)).join(") || (")})`:t(e)}function Tv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Tv(e[n],t)&&delete e[n],kt(e)}function ym(e){return e.charAt(0).toUpperCase()+e.substr(1)}function pT(e,t="datum"){const n=os(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(ge).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function SH(e,t="datum"){return`${t}[${ge(os(e).join("."))}]`}function yt(e){return`datum['${e.replaceAll("'","\\'")}']`}function hwe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ni(e){return`${os(e).map(hwe).join("\\.")}`}function ec(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Wd(e){return`${os(e).join(".")}`}function cd(e){return e?os(e).length:0}function Qt(...e){return e.find(t=>t!==void 0)}let kH=42;function EH(e){const t=++kH;return e?String(e)+t:t}function pwe(){kH=42}function _H(e){return CH(e)?e:`__${e}`}function CH(e){return e.startsWith("__")}function Rg(e){if(e!==void 0)return(e%360+360)%360}function gx(e){return lt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qP=Object.getPrototypeOf(structuredClone({}));function Qr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Qr(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qP.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qP.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Qr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function pt(e){const t=[];return function n(r){if(r!=null&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?`${r}`:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return`${o}]`}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=`${JSON.stringify(l)}:${u}`)}return t.splice(s,1),`{${o}}`}(e)}function fe(e,t){return Ee(e)&&_e(e,t)&&e[t]!==void 0}const Ys="row",Xs="column",mx="facet",Pt="x",_n="y",bo="x2",ds="y2",Ml="xOffset",Vd="yOffset",wo="radius",ua="radius2",Di="theta",ca="theta2",So="latitude",ko="longitude",Eo="latitude2",Fi="longitude2",Dl="time",Ir="color",hs="fill",ps="stroke",Lr="shape",fa="size",bc="angle",da="opacity",Ol="fillOpacity",Pl="strokeOpacity",Il="strokeWidth",Ll="strokeDash",vm="text",fd="order",xm="detail",yx="key",tc="tooltip",vx="href",xx="url",bx="description",gwe={x:1,y:1,x2:1,y2:1},$H={theta:1,theta2:1,radius:1,radius2:1};function AH(e){return _e($H,e)}const gT={longitude:1,longitude2:1,latitude:1,latitude2:1};function RH(e){switch(e){case So:return"y";case Eo:return"y2";case ko:return"x";case Fi:return"x2"}}function TH(e){return _e(gT,e)}const mwe=ue(gT),mT={...gwe,...$H,...gT,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function If(e){return e===Ir||e===hs||e===ps}const NH={row:1,column:1,facet:1},ki=ue(NH),yT={...mT,...NH},ywe=ue(yT),{order:qNe,detail:WNe,tooltip:VNe,...vwe}=yT,{row:HNe,column:GNe,facet:YNe,...xwe}=vwe;function bwe(e){return _e(xwe,e)}function FH(e){return _e(yT,e)}const wwe=[bo,ds,Eo,Fi,ca,ua];function MH(e){return wc(e)!==e}function wc(e){switch(e){case bo:return Pt;case ds:return _n;case Eo:return So;case Fi:return ko;case ca:return Di;case ua:return wo}return e}function Sl(e){if(AH(e))switch(e){case Di:return"startAngle";case ca:return"endAngle";case wo:return"outerRadius";case ua:return"innerRadius"}return e}function gs(e){switch(e){case Pt:return bo;case _n:return ds;case So:return Eo;case ko:return Fi;case Di:return ca;case wo:return ua}}function zr(e){switch(e){case Pt:case bo:return"width";case _n:case ds:return"height"}}function DH(e){switch(e){case Pt:return"xOffset";case _n:return"yOffset";case bo:return"x2Offset";case ds:return"y2Offset";case Di:return"thetaOffset";case wo:return"radiusOffset";case ca:return"theta2Offset";case ua:return"radius2Offset"}}function vT(e){switch(e){case Pt:return"xOffset";case _n:return"yOffset"}}function Swe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const kwe=ue(mT),{x:XNe,y:KNe,x2:QNe,y2:ZNe,xOffset:JNe,yOffset:e4e,latitude:t4e,longitude:n4e,latitude2:r4e,longitude2:i4e,theta:o4e,theta2:s4e,radius:a4e,radius2:l4e,...xT}=mT,Ewe=ue(xT),bT={x:1,y:1},ha=ue(bT);function Zt(e){return _e(bT,e)}const wT={theta:1,radius:1},_we=ue(wT);function wx(e){return e==="width"?Pt:_n}const OH={xOffset:1,yOffset:1};function bm(e){return _e(OH,e)}const Cwe={time:1};function yk(e){return e in Cwe}const{text:u4e,tooltip:c4e,href:f4e,url:d4e,description:h4e,detail:p4e,key:g4e,order:m4e,...PH}=xT,$we=ue(PH);function Awe(e){return _e(xT,e)}function Rwe(e){switch(e){case Ir:case hs:case ps:case fa:case Lr:case da:case Il:case Ll:return!0;case Ol:case Pl:case bc:case Dl:return!1}}const IH={...bT,...wT,...OH,...PH},ST=ue(IH);function ms(e){return _e(IH,e)}function Twe(e,t){return Fwe(e)[t]}const LH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:y4e,...Nwe}=LH;function Fwe(e){switch(e){case Ir:case hs:case ps:case bx:case xm:case yx:case tc:case vx:case fd:case da:case Ol:case Pl:case Il:case mx:case Ys:case Xs:return LH;case Pt:case _n:case Ml:case Vd:case So:case ko:case Dl:return Nwe;case bo:case ds:case Eo:case Fi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case fa:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ll:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Lr:return{point:"always",geoshape:"always"};case vm:return{text:"always"};case bc:return{point:"always",square:"always",text:"always"};case xx:return{image:"always"};case Di:return{text:"always",arc:"always"};case wo:return{text:"always",arc:"always"};case ca:case ua:return{arc:"always"}}}function vk(e){switch(e){case Pt:case _n:case Di:case wo:case Ml:case Vd:case fa:case bc:case Il:case da:case Ol:case Pl:case Dl:case bo:case ds:case ca:case ua:return;case mx:case Ys:case Xs:case Lr:case Ll:case vm:case tc:case vx:case xx:case bx:return"discrete";case Ir:case hs:case ps:return"flexible";case So:case ko:case Eo:case Fi:case xm:case yx:case fd:return}}const Mwe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Dwe={count:1,min:1,max:1};function ra(e){return fe(e,"argmin")}function zl(e){return fe(e,"argmax")}function kT(e){return ke(e)&&_e(Mwe,e)}const Owe=new Set(["count","valid","missing","distinct"]);function Sx(e){return ke(e)&&Owe.has(e)}function Pwe(e){return ke(e)&&Ze(["min","max"],e)}const Iwe=new Set(["count","sum","distinct","valid","missing"]),Lwe=new Set(["mean","average","median","q1","q3","min","max"]);function zH(e){return Cl(e)&&(e=Dx(e,void 0)),`bin${ue(e).map(t=>kx(e[t])?Dt(`_${t}_${wl(e[t])}`):Dt(`_${t}_${e[t]}`)).join("")}`}function Ct(e){return e===!0||Sc(e)&&!e.binned}function An(e){return e==="binned"||Sc(e)&&e.binned===!0}function Sc(e){return Ee(e)}function kx(e){return fe(e,"param")}function WP(e){switch(e){case Ys:case Xs:case fa:case Ir:case hs:case ps:case Il:case da:case Ol:case Pl:case Lr:return 6;case Ll:return 4;default:return 10}}function wm(e){return fe(e,"expr")}function Rn(e,{level:t}={level:0}){const n=ue(e||{}),r={};for(const i of n)r[i]=t===0?Xr(e[i]):Rn(e[i],{level:t-1});return r}function jH(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:d,subtitleFontWeight:p,subtitleLineHeight:g,subtitlePadding:y,...v}=e,x={...v,...a?{fill:a}:{}},w={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},S={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...d?{subtitleFontStyle:d}:{},...p?{subtitleFontWeight:p}:{},...g?{subtitleLineHeight:g}:{},...y?{subtitlePadding:y}:{}},E=ld(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:x,subtitleMarkConfig:E,nonMarkTitleProperties:w,subtitle:S}}function Ya(e){return ke(e)||ie(e)&&ke(e[0])}function Ne(e){return fe(e,"signal")}function kc(e){return fe(e,"step")}function zwe(e){return ie(e)?!1:fe(e,"fields")&&!fe(e,"data")}function jwe(e){return ie(e)?!1:fe(e,"fields")&&fe(e,"data")}function Us(e){return ie(e)?!1:fe(e,"field")&&fe(e,"data")}const Bwe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Uwe=ue(Bwe),qwe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},m$=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function BH(e){const t=ie(e.condition)?e.condition.map(VP):VP(e.condition);return{...Xr(e),condition:t}}function Xr(e){if(wm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function VP(e){if(wm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(wm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ne(e)?e:e!==void 0?{value:e}:void 0}function Wwe(e){return Ne(e)?e.signal:ge(e)}function HP(e){return Ne(e)?e.signal:ge(e.value)}function no(e){return Ne(e)?e.signal:e==null?null:ge(e)}function Vwe(e,t,n){for(const r of n){const i=ts(r,t.markDef,t.config);i!==void 0&&(e[r]=Tt(i))}return e}function UH(e){return[].concat(e.type,e.style??[])}function bt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&fe(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:ts(e,t,n,r)}function ts(e,t,n,{vgChannel:r}={}){const i=y$(e,t,n.style);return Qt(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function y$(e,t,n){return qH(e,UH(t),n)}function qH(e,t,n){t=Se(t);let r;for(const i of t){const o=n[i];fe(o,e)&&(r=o[e])}return r}function WH(e,t){return Se(e).reduce((n,r)=>(n.field.push(be(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function VH(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Qr(i,r))return;n.push(r)}),n}function HH(e,t){return Qr(e,t)||!t?e:e?[...Se(e),...Se(t)].join(", "):t}function GH(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ya(n)||Ne(n))&&(Ya(r)||Ne(r)))return{explicit:e.explicit,value:HH(n,r)};if(Ya(n)||Ne(n))return{explicit:e.explicit,value:n};if(Ya(r)||Ne(r))return{explicit:e.explicit,value:r};if(!Ya(n)&&!Ne(n)&&!Ya(r)&&!Ne(r))return{explicit:e.explicit,value:VH(n,r)};throw new Error("It should never reach here")}function ET(e){return`Invalid specification ${pt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Hwe='Autosize "fit" only works for single views and layered views.';function GP(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function YP(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function XP(e){return e?`Dropping "fit-${e}" because spec has discrete ${zr(e)}.`:'Dropping "fit" because spec has discrete size.'}function _T(e){return`Unknown field for ${e}. Cannot calculate view size.`}function KP(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Gwe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Ywe(e){return`The "nearest" transform is not supported for ${e} marks.`}function YH(e){return`Selection not supported for ${e} yet.`}function Xwe(e){return`Cannot find a selection named "${e}".`}const Kwe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Qwe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Zwe="Legend bindings are only supported for selections over an individual field or encoding channel.";function Jwe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function eSe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const tSe="The same selection must be used to override scale domains in a layered view.",nSe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function rSe(e){return`Unknown repeated value "${e}".`}function QP(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const iSe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",CT="Animation involving facet, layer, or concat is currently unsupported.";function oSe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(e)}.`}function sSe(e,t,n,r){return`${e.length?"Multiple ":"No "}matching ${ge(t)} encoding found for selection ${ge(n.param)}. Using "field": ${ge(r)}.`}const aSe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function lSe(e){return`Unrecognized parse "${e}".`}function ZP(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const uSe="Attempt to add the same child twice.";function cSe(e){return`Ignoring an invalid transform: ${pt(e)}.`}const fSe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function JP(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function dSe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${pt(t)} is overridden by a child projection ${pt(n)}.`}const hSe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function pSe(e){return`${e}Offset dropped because ${e} is continuous`}function gSe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${pt(n)}}.`}function XH(e){return`Invalid field type "${e}".`}function mSe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function ySe(e){return`Invalid aggregation operator "${e}".`}function KH(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function vSe(e){return`Position range does not support relative band size for ${e}.`}function v$(e,t){return`Dropping ${pt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const xSe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ex(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function bSe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function wSe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function SSe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function kSe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function xk(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function ESe(e){return`The ${e} for range marks cannot be an expression`}function _Se(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function CSe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function $Se(e){return`Cannot use the scale property "${e}" with non-color channel.`}function ASe(e){return`Cannot use the relative band size with ${e} scale.`}function RSe(e){return`Using unaggregated domain with raw field has no effect (${pt(e)}).`}function TSe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function NSe(e){return`Unaggregated domain is currently unsupported for log scale (${pt(e)}).`}function FSe(e){return`Cannot apply size to non-oriented mark "${e}".`}function MSe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function DSe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function QH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function ZH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function OSe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(r)}). Using ${pt(n)}.`}function PSe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(r)}). Using the union of the two domains.`}function ISe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function LSe(e){return`Dropping sort property ${pt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const e8="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",zSe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",jSe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",BSe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function USe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function qSe(e){return`Stack is applied to a non-linear scale (${e}).`}function WSe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Nv(e,t){return`Invalid ${e}: ${pt(t)}.`}function VSe(e){return`Dropping day from datetime ${pt(e)} as day cannot be combined with other units.`}function HSe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function GSe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function YSe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function t8(e){return`1D error band does not support ${e}.`}function JH(e){return`Channel ${e} is required for "binned" bin.`}function XSe(e){return`Channel ${e} should not be used with "binned" bin.`}function KSe(e){return`Domain for ${e} is required for threshold scale.`}const eG=b3(x3);let nc=eG;function QSe(e){return nc=e,nc}function ZSe(){return nc=eG,nc}function $T(...e){nc.error(...e)}function he(...e){nc.warn(...e)}function JSe(...e){nc.debug(...e)}function Ec(e){if(e&&Ee(e)){for(const t of RT)if(fe(e,t))return!0}return!1}const tG=["january","february","march","april","may","june","july","august","september","october","november","december"],eke=tG.map(e=>e.substr(0,3)),nG=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],tke=nG.map(e=>e.substr(0,3));function nke(e){if(gx(e)&&(e=+e),lt(e))return e>4&&he(Nv("quarter",e)),e-1;throw new Error(Nv("quarter",e))}function rke(e){if(gx(e)&&(e=+e),lt(e))return e-1;{const t=e.toLowerCase(),n=tG.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=eke.indexOf(r);if(i!==-1)return i;throw new Error(Nv("month",e))}}function ike(e){if(gx(e)&&(e=+e),lt(e))return e%7;{const t=e.toLowerCase(),n=nG.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=tke.indexOf(r);if(i!==-1)return i;throw new Error(Nv("day",e))}}function AT(e,t){const n=[];if(t&&e.day!==void 0&&ue(e).length>1&&(he(VSe(e)),e=qe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?rke(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?nke(e.quarter):e.quarter;n.push(lt(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?ike(e.day):e.day;n.push(lt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function rc(e){const n=AT(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function oke(e){const n=AT(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ske(e){const t=AT(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const rG={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},RT=ue(rG);function ake(e){return _e(rG,e)}function _c(e){return Ee(e)?e.binned:iG(e)}function iG(e){return e==null?void 0:e.startsWith("binned")}function TT(e){return e.startsWith("utc")}function lke(e){return e.substring(3)}const uke={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _x(e){return RT.filter(t=>sG(e,t))}function oG(e){const t=_x(e);return t[t.length-1]}function sG(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function cke(e,t,{end:n}={end:!1}){const r=pT(t),i=TT(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of RT)sG(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),oke(a)}function aG(e){if(!e)return;const t=_x(e);return`timeUnitSpecifier(${pt(t)}, ${pt(uke)})`}function fke(e,t,n){if(!e)return;const r=aG(e);return`${n||TT(e)?"utc":"time"}Format(${t}, ${r})`}function Sn(e){if(!e)return;let t;return ke(e)?iG(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ee(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),TT(t.unit)&&(t.utc=!0,t.unit=lke(t.unit)),t}function dke(e){const{utc:t,...n}=Sn(e);return n.unit?(t?"utc":"")+ue(n).map(r=>Dt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):`${t?"utc":""}timeunit${ue(n).map(r=>Dt(`_${r}_${n[r]}`)).join("")}`}function lG(e,t=n=>n){const n=Sn(e),r=oG(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=uG(r,n.step),a={...i,[s]:+i[s]+o};return`${t(rc(a))} - ${t(rc(i))}`}}const hke={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function pke(e){return _e(hke,e)}function uG(e,t=1){if(pke(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function gke(e){return fe(e,"param")}function NT(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function FT(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function MT(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function DT(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function OT(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function PT(e){if(e!=null&&e.field){if(ie(e.range)&&e.range.length===2)return!0;if(Ne(e.range))return!0}return!1}function IT(e){return!!(e!=null&&e.field)&&(ie(e.oneOf)||ie(e.in))}function mke(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function cG(e){return IT(e)||NT(e)||PT(e)||FT(e)||DT(e)||MT(e)||OT(e)}function Do(e,t){return Ox(e,{timeUnit:t,wrapTime:!0})}function yke(e,t){return e.map(n=>Do(n,t))}function fG(e,t=!0){const{field:n}=e,r=Sn(e.timeUnit),{unit:i,binned:o}=r||{},s=be(e,{expr:"datum"}),a=i?`time(${o?s:cke(i,n)})`:s;if(NT(e))return`${a}===${Do(e.equal,i)}`;if(FT(e)){const l=e.lt;return`${a}<${Do(l,i)}`}else if(DT(e)){const l=e.gt;return`${a}>${Do(l,i)}`}else if(MT(e)){const l=e.lte;return`${a}<=${Do(l,i)}`}else if(OT(e)){const l=e.gte;return`${a}>=${Do(l,i)}`}else{if(IT(e))return`indexof([${yke(e.oneOf,i).join(",")}], ${a}) !== -1`;if(mke(e))return Cx(a,e.valid);if(PT(e)){const{range:l}=Rn(e),u=Ne(l)?{signal:`${l.signal}[0]`}:l[0],f=Ne(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return`inrange(${a}, [${Do(u,i)}, ${Do(f,i)}])`;const d=[];return u!==null&&d.push(`${a} >= ${Do(u,i)}`),f!==null&&d.push(`${a} <= ${Do(f,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${pt(e)}`)}function Cx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function vke(e){return cG(e)&&e.timeUnit?{...e,timeUnit:Sn(e.timeUnit)}:e}const Sm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function xke(e){return e==="quantitative"||e==="temporal"}function dG(e){return e==="ordinal"||e==="nominal"}const ic=Sm.quantitative,LT=Sm.ordinal,dd=Sm.temporal,zT=Sm.nominal,Hd=Sm.geojson;function bke(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ic:return"quantitative";case"t":case dd:return"temporal";case"o":case LT:return"ordinal";case"n":case zT:return"nominal";case Hd:return"geojson"}}const Tn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},x$={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function wke(e,t){const n=x$[e],r=x$[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Ske={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function n8(e){return Ske[e]}const hG=new Set(["linear","log","pow","sqrt","symlog"]),pG=new Set([...hG,"time","utc"]);function gG(e){return hG.has(e)}const mG=new Set(["quantile","quantize","threshold"]),kke=new Set([...pG,...mG,"sequential","identity"]),Eke=new Set(["ordinal","bin-ordinal","point","band"]);function kn(e){return Eke.has(e)}function co(e){return kke.has(e)}function Uo(e){return pG.has(e)}function hd(e){return mG.has(e)}const _ke={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Cke(e){return!ke(e)&&fe(e,"name")}function yG(e){return fe(e,"param")}function $ke(e){return fe(e,"unionWith")}function Ake(e){return Ee(e)&&"field"in e}const Rke={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:v4e,domain:x4e,range:b4e,rangeMax:w4e,rangeMin:S4e,scheme:k4e,...Tke}=Rke,Nke=ue(Tke);function b$(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Uo(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Uo(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Uo(e);case"nice":return Uo(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return co(e)&&!Ze(["log","time","utc","threshold","quantile"],e)}}function vG(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return If(e)?void 0:$Se(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Fke(e,t){return Ze([LT,zT],t)?e===void 0||kn(e):t===dd?Ze([Tn.TIME,Tn.UTC,void 0],e):t===ic?gG(e)||hd(e)||e===void 0:!0}function Mke(e,t,n=!1){if(!ms(e))return!1;switch(e){case Pt:case _n:case Ml:case Vd:case Di:case wo:return Uo(t)||t==="band"?!0:t==="point"?!n:!1;case Dl:return Ze(["linear","band"],t);case fa:case Il:case da:case Ol:case Pl:case bc:return Uo(t)||hd(t)||Ze(["band","point","ordinal"],t);case Ir:case hs:case ps:return t!=="band";case Ll:case Lr:return t==="ordinal"||hd(t)}}function Dke(e){return Ee(e)&&"value"in e}const wr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},xG=wr.arc,$x=wr.area,Ax=wr.bar,Oke=wr.image,Rx=wr.line,Tx=wr.point,Pke=wr.rect,Fv=wr.rule,bG=wr.text,jT=wr.tick,Ike=wr.trail,BT=wr.circle,UT=wr.square,wG=wr.geoshape;function jl(e){return["line","area","trail"].includes(e)}function Tg(e){return["rect","bar","image","arc","tick"].includes(e)}const Lke=new Set(ue(wr));function ns(e){return fe(e,"type")}const zke=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],jke=["fill","fillOpacity"],Bke=[...zke,...jke],Uke={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},r8=ue(Uke),bk=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],qke={area:["line","point"],bar:bk,rect:bk,line:["point"],tick:["bandSize","thickness",...bk]},Wke={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Vke={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},SG=ue(Vke);function oc(e){return fe(e,"band")}const Hke={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Gke=5,qT={binSpacing:0,continuousBandSize:Gke,minBandSize:.25,timeUnitBandPosition:.5},Yke={...qT,binSpacing:1},Xke={...qT,thickness:1};function Kke(e){return ns(e)?e.type:e}function kG(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function WT({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!co(r)||i)return"always-valid";const o=kG(bt("invalid",e,t),{isPath:jl(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function Qke(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function EG({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function _G({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var f;const s=n==null?void 0:n.get("type"),a=ho(t),l=Sx(a==null?void 0:a.aggregate),u=WT({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const d=((f=o.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:Cx(be(a,{expr:"datum"}),!1),...Zke(d,n,r)}}}function Zke(e,t,n){if(Dke(e)){const{value:r}=e;return Ne(r)?{signal:r.signal}:{value:r}}return EG({scale:t,scaleName:n,mode:"zeroOrMin"})}function VT(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=wc(t),l=HT(e),u=_G({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function Jke(e){const{datum:t}=e;return Ec(t)?rc(t):`${pt(t)}`}function Ou(e,t,n,r){const i={};if(t&&(i.scale=t),ys(e)){const{datum:o}=e;Ec(o)?i.signal=rc(o):Ne(o)?i.signal=o.signal:wm(o)?i.signal=o.expr:i.value=o}else i.field=be(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function Mv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!Ne(s)&&0<s&&s<1?"datum":void 0,l=be(t,{expr:a,suffix:i}),u=n!==void 0?be(n,{expr:a}):be(t,{suffix:o,expr:a}),f={};if(s===0||s===1){f.scale=e;const d=s===0?l:u;f.field=d}else{const d=Ne(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;f.signal=`scale("${e}", ${d})`}return r&&(f.offset=r),f}function eEe({scaleName:e,fieldDef:t}){const n=be(t,{expr:"datum"}),r=be(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function HT({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Ve(t)){const d=s==null?void 0:s.get("type");if(xr(t)){f??(f=kl({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:p,timeUnit:g,type:y}=t;if(Ct(p)||f&&g&&y===dd)return a!=null&&a.impute?Ou(t,o,{binSuffix:"mid"},{offset:l}):f&&!kn(d)?Mv({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):Ou(t,o,$m(t,e)?{binSuffix:"range"}:{},{offset:l});if(An(p)){if(pe(n))return Mv({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});he(JH(e===Pt?bo:ds))}}return Ou(t,o,kn(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?f??t.bandPosition??.5:void 0})}else if(fo(t)){const d=t.value,p=l?{offset:l}:{};return{...ng(e,d),...p}}}return Ge(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function ng(e,t){return Ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function sc(e){return e&&e!=="number"&&e!=="time"}function CG(e,t,n){return`${e}(${t}${n?`, ${pt(n)}`:""})`}const tEe="  ";function GT({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(sc(n))return ro({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=$G(e,r,i),a=pd(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return ro({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ro({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&pe(e)&&e.timeUnit===void 0)return ro({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(md(e)){const f=rEe({field:s,timeUnit:pe(e)?(l=Sn(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Cc(e)&&((u=e.scale)==null?void 0:u.type)===Tn.UTC});return f?{signal:f}:void 0}if(t=w$({type:a,specifiedFormat:t,config:o,normalizeStack:i}),pe(e)&&Ct(e.bin)){const f=be(e,{expr:r,binSuffix:"end"});return{signal:km(s,f,t,n,o)}}else return t||pd(e)==="quantitative"?{signal:`${TG(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function $G(e,t,n){return pe(e)?n?`${be(e,{expr:t,suffix:"end"})}-${be(e,{expr:t,suffix:"start"})}`:be(e,{expr:t}):Jke(e)}function ro({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=$G(e,r,i)),s!=="datum.value"&&pe(e)&&Ct(e.bin)){const a=be(e,{expr:r,binSuffix:"end"});return{signal:km(s,a,t,n,o)}}return{signal:CG(n,s,t)}}function AG(e,t,n,r,i,o){var s;if(!(ke(r)&&sc(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&pd(e)==="quantitative"&&(i.normalizedNumberFormatType&&gd(e)&&e.stack==="normalize"||i.numberFormatType))){if(gd(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return w$({type:"quantitative",config:i,normalizeStack:!0});if(md(e)){const a=pe(e)?(s=Sn(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:nEe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return w$({type:t,specifiedFormat:n,config:i})}}function RG(e,t,n){var r;if(e&&(Ne(e)||e==="number"||e==="time"))return e;if(md(t)&&n!=="time"&&n!=="utc")return pe(t)&&((r=Sn(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function w$({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ke(t))return t;if(e===ic)return r?n.normalizedNumberFormat:n.numberFormat}function nEe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:aG(t)}:r?void 0:n.timeFormat)}function TG(e,t){return`format(${e}, "${t||""}")`}function i8(e,t,n,r){return sc(n)?CG(n,e,t):TG(e,(ke(t)?t:void 0)??r.numberFormat)}function km(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return km(e,t,i.numberFormat,i.numberFormatType,i);const o=i8(e,n,r,i),s=i8(t,n,r,i);return`${Cx(e,!1)} ? "null" : ${o} + "${tEe}" + ${s}`}function rEe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, ${pt(n)})`:(n=ke(n)?n:i,`${o?"utc":"time"}Format(${e}, ${pt(n)})`):fke(t,e,o)}const Nx="min",iEe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function o8(e){return _e(iEe,e)}function oEe(e){return fe(e,"encoding")}function Ks(e){return e&&(e.op==="count"||fe(e,"field"))}function NG(e){return e&&ie(e)}function Em(e){return fe(e,"row")||fe(e,"column")}function YT(e){return fe(e,"header")}function Fx(e){return fe(e,"facet")}function sEe(e){return fe(e,"param")}function aEe(e){return!ke(e)&&fe(e,"repeat")}function s8(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function XT(e){return fe(e,"sort")}function kl({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ve(e)&&e.bandPosition!==void 0)return e.bandPosition;if(pe(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return ts("timeUnitBandPosition",n,r);if(Ct(o))return .5}}function FG({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,f,d;const a=zr(e),l=bt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(pe(t)){const{timeUnit:p,bin:g}=t;if(p&&!n)return{band:ts("timeUnitBandSize",r,i)};if(Ct(g)&&!kn(o))return{band:1}}if(Tg(r.type))return o?kn(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function MG(e,t,n,r){return Ct(e.bin)||e.timeUnit&&xr(e)&&e.type==="temporal"?kl({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function DG(e){return fe(e,"sort")&&!fe(e,"field")}function _m(e){return fe(e,"condition")}function Mx(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&pe(t)}function Cm(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&Ve(t)}function lEe(e){const t=e==null?void 0:e.condition;return!!t&&(ie(t)||fo(t))}function pe(e){return fe(e,"field")||(e==null?void 0:e.aggregate)==="count"}function pd(e){return e==null?void 0:e.type}function ys(e){return fe(e,"datum")}function il(e){return xr(e)&&!Ov(e)||Dv(e)}function a8(e){return xr(e)&&e.type==="quantitative"&&!e.bin||Dv(e)}function Dv(e){return ys(e)&&lt(e.datum)}function Ve(e){return pe(e)||ys(e)}function xr(e){return e&&(fe(e,"field")||e.aggregate==="count")&&fe(e,"type")}function fo(e){return fe(e,"value")}function Cc(e){return fe(e,"scale")||fe(e,"sort")}function gd(e){return fe(e,"axis")||fe(e,"stack")||fe(e,"impute")}function OG(e){return fe(e,"legend")}function PG(e){return fe(e,"format")||fe(e,"formatType")}function uEe(e){return ti(e,["legend","axis","header","scale"])}function cEe(e){return fe(e,"op")}function be(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(dEe(e))n=_H("count");else{let s;if(!t.nofn)if(cEe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Ct(a)?(s=zH(a),i=(t.binSuffix??"")+(t.suffix??"")):l?zl(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):ra(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!_c(u)&&(s=dke(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Wd(n):t.expr?SH(n,t.expr)+o:Ni(n)+o}function Ov(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return pe(e)&&!!e.bin;case"temporal":return!1}throw new Error(XH(e.type))}function fEe(e){var t;return Cc(e)&&hd((t=e.scale)==null?void 0:t.type)}function dEe(e){return e.aggregate==="count"}function hEe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Ct(r))return`${n} (binned)`;if(i&&!_c(i)){const a=(s=Sn(i))==null?void 0:s.unit;if(a)return`${n} (${_x(a).join("-")})`}else if(o)return zl(o)?`${n} for max ${o.argmax}`:ra(o)?`${n} for min ${o.argmin}`:`${ym(o)} of ${n}`;return n}function pEe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(zl(t))return`${i} for argmax(${t.argmax})`;if(ra(t))return`${i} for argmin(${t.argmin})`;const o=r&&!_c(r)?Sn(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Ct(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const IG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return pEe(e);default:return hEe(e,t)}};let LG=IG;function zG(e){LG=e}function gEe(){zG(IG)}function Lf(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=KT(e))==null?void 0:a.title;if(!pe(e))return i??e.title;const o=e,s=r?QT(o,t):void 0;return n?Qt(i,o.title,s):i??o.title??s}function KT(e){if(gd(e)&&e.axis)return e.axis;if(OG(e)&&e.legend)return e.legend;if(YT(e)&&e.header)return e.header}function QT(e,t){return LG(e,t)}function Pv(e){if(PG(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=KT(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function mEe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(XT(e)&&ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!zl(n)&&!ra(n))return"quantitative";if(Cc(e)&&((o=e.scale)!=null&&o.type))switch(x$[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ho(e){if(pe(e))return e;if(Mx(e))return e.condition}function un(e){if(Ve(e))return e;if(Cm(e))return e.condition}function jG(e,t,n,r={}){if(ke(e)||lt(e)||Cl(e)){const i=ke(e)?"string":lt(e)?"number":"boolean";return he(gSe(t,i,e)),{value:e}}return Ve(e)?Iv(e,t,n,r):Cm(e)?{...e,condition:Iv(e.condition,t,n,r)}:e}function Iv(e,t,n,r){if(PG(e)){const{format:i,formatType:o,...s}=e;if(sc(o)&&!n.customFormatTypes)return he(JP(t)),Iv(s,t,n,r)}else{const i=gd(e)?"axis":OG(e)?"legend":YT(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(sc(s)&&!n.customFormatTypes)return he(JP(t)),Iv({...e,[i]:a},t,n,r)}}return pe(e)?ZT(e,t,r):yEe(e)}function yEe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lt(n)?"quantitative":ke(n)?"nominal":Ec(n)?"temporal":void 0,{...e,type:t}}function ZT(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!kT(r)&&!zl(r)&&!ra(r)&&(he(ySe(r)),delete a.aggregate),i&&(a.timeUnit=Sn(i)),s&&(a.field=`${s}`),Ct(o)&&(a.bin=Dx(o,t)),An(o)&&!Zt(t)&&he(XSe(t)),xr(a)){const{type:l}=a,u=bke(l);l!==u&&(a.type=u),l!=="quantitative"&&Sx(r)&&(he(mSe(l,r)),a.type="quantitative")}else if(!MH(t)){const l=mEe(a,t);a.type=l}if(xr(a)){const{compatible:l,warning:u}=vEe(a,t)||{};l===!1&&he(u)}if(XT(a)&&ke(a.sort)){const{sort:l}=a;if(o8(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&o8(u))return{...a,sort:{encoding:u,order:"descending"}}}if(YT(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function Dx(e,t){return Cl(e)?{maxbins:WP(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:WP(t)}:e}const mf={compatible:!0};function vEe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Ys:case Xs:case mx:return Ov(e)?mf:{compatible:!1,warning:wSe(t)};case Pt:case _n:case Ml:case Vd:case Ir:case hs:case ps:case vm:case xm:case yx:case tc:case vx:case xx:case bc:case Di:case wo:case bx:return mf;case ko:case Fi:case So:case Eo:return n!==ic?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:mf;case da:case Ol:case Pl:case Il:case fa:case ca:case ua:case bo:case ds:case Dl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:mf;case Lr:case Ll:return!Ov(e)&&!fEe(e)?{compatible:!1,warning:SSe(t)}:mf;case fd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:mf}}function md(e){const{formatType:t}=Pv(e);return t==="time"||!t&&xEe(e)}function xEe(e){return e&&(e.type==="temporal"||pe(e)&&!!e.timeUnit)}function Ox(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=Sn(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return wm(e)?a=e.expr:Ne(e)?a=e.signal:Ec(e)?(s=!0,a=rc(e)):(ke(e)||lt(e))&&s&&(a=`datetime(${pt(e)})`,ake(o)&&(lt(e)&&e<1e4||ke(e)&&isNaN(Date.parse(e)))&&(a=rc({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:pt(e)}function BG(e,t){const{type:n}=e;return t.map(r=>{const i=pe(e)&&!_c(e.timeUnit)?e.timeUnit:void 0,o=Ox(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function $m(e,t){return Ct(e.bin)?ms(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const l8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Am(e){return e==null?void 0:e.condition}const UG=["domain","grid","labels","ticks","title"],bEe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},qG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},wEe={...qG,style:1,labelExpr:1,encoding:1};function u8(e){return _e(wEe,e)}const SEe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},WG=ue(SEe);function pa(e){return fe(e,"mark")}class Px{constructor(t,n){ee(this,"name");ee(this,"run");this.name=t,this.run=n}hasMatchingType(t){return pa(t)?Kke(t.mark)===this.name:!1}}function Pu(e,t){const n=e==null?void 0:e[t];return n?ie(n)?ud(n,r=>!!r.field):pe(n)||Mx(n):!1}function VG(e,t){const n=e==null?void 0:e[t];return n?ie(n)?ud(n,r=>!!r.field):pe(n)||ys(n)||Cm(n):!1}function HG(e,t){if(Zt(t)){const n=e[t];if((pe(n)||ys(n))&&(dG(n.type)||pe(n)&&n.timeUnit)){const r=vT(t);return VG(e,r)}}return!1}function GG(e){return ud(ywe,t=>{if(Pu(e,t)){const n=e[t];if(ie(n))return ud(n,r=>!!r.aggregate);{const r=ho(n);return r&&!!r.aggregate}}return!1})}function YG(e,t){const n=[],r=[],i=[],o=[],s={};return JT(e,(a,l)=>{if(pe(a)){const{field:u,aggregate:f,bin:d,timeUnit:p,...g}=a;if(f||p||d){const y=KT(a),v=y==null?void 0:y.title;let x=be(a,{forAs:!0});const w={...v?[]:{title:Lf(a,t,{allowDisabling:!0})},...g,field:x};if(f){let S;if(zl(f)?(S="argmax",x=be({op:"argmax",field:f.argmax},{forAs:!0}),w.field=`${x}.${u}`):ra(f)?(S="argmin",x=be({op:"argmin",field:f.argmin},{forAs:!0}),w.field=`${x}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(S=f),S){const E={op:S,as:x};u&&(E.field=u),o.push(E)}}else if(n.push(x),xr(a)&&Ct(d)){if(r.push({bin:d,field:u,as:x}),n.push(be(a,{binSuffix:"end"})),$m(a,l)&&n.push(be(a,{binSuffix:"range"})),Zt(l)){const S={field:`${x}_end`};s[`${l}2`]=S}w.bin="binned",MH(l)||(w.type=ic)}else if(p&&!_c(p)){i.push({timeUnit:p,field:u,as:x});const S=xr(a)&&a.type!==dd&&"time";S&&(l===vm||l===tc?w.formatType=S:Awe(l)?w.legend={formatType:S,...w.legend}:Zt(l)&&(w.axis={formatType:S,...w.axis}))}s[l]=w}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function kEe(e,t,n){const r=Twe(t,n);if(r){if(r==="binned"){const i=e[t===bo?Pt:_n];return!!(pe(i)&&pe(e[t])&&An(i.bin))}}else return!1;return!0}function EEe(e,t,n,r){const i={};for(const o of ue(e))FH(o)||he(bSe(o));for(let o of kwe){if(!e[o])continue;const s=e[o];if(bm(o)){const a=Swe(o),l=i[a];if(pe(l)&&xke(l.type)&&pe(s)&&!l.timeUnit){he(pSe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(he(hSe),o=Di),!kEe(e,o,t)){he(Ex(o,t));continue}if(o===fa&&t==="line"){const a=ho(e[o]);if(a!=null&&a.aggregate){he(xSe);continue}}if(o===Ir&&(n?"fill"in e:"stroke"in e)){he(KH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===xm||o===fd&&!ie(s)&&!fo(s)||o===tc&&ie(s)){if(s){if(o===fd){const a=e[o];if(DG(a)){i[o]=a;continue}}i[o]=Se(s).reduce((a,l)=>(pe(l)?a.push(ZT(l,o)):he(v$(l,o)),a),[])}}else{if(o===tc&&s===null)i[o]=null;else if(!pe(s)&&!ys(s)&&!fo(s)&&!_m(s)&&!Ne(s)){he(v$(s,o));continue}i[o]=jG(s,o,r)}}return i}function Ix(e,t){const n={};for(const r of ue(e)){const i=jG(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function _Ee(e){const t=[];for(const n of ue(e))if(Pu(e,n)){const r=e[n],i=Se(r);for(const o of i)pe(o)?t.push(o):Mx(o)&&t.push(o.condition)}return t}function JT(e,t,n){if(e)for(const r of ue(e)){const i=e[r];if(ie(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function CEe(e,t,n,r){return e?ue(e).reduce((i,o)=>{const s=e[o];return ie(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function XG(e,t){return ue(t).reduce((n,r)=>{switch(r){case Pt:case _n:case vx:case bx:case xx:case bo:case ds:case Ml:case Vd:case Di:case ca:case wo:case ua:case Dl:case So:case ko:case Eo:case Fi:case vm:case Lr:case bc:case tc:return n;case fd:if(e==="line"||e==="trail")return n;case xm:case yx:{const i=t[r];if(ie(i)||pe(i))for(const o of Se(i))o.aggregate||n.push(be(o,{}));return n}case fa:if(e==="trail")return n;case Ir:case hs:case ps:case da:case Ol:case Pl:case Ll:case Il:{const i=ho(t[r]);return i&&!i.aggregate&&n.push(be(i,{})),n}}},[])}function $Ee(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ie(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function S$(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${eN(t)}`:"";return{field:s+t.field,type:t.type,title:Ne(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=_Ee(n).map(uEe);return{tooltip:[...i,...Bo(o,tt)]}}function eN(e){const{title:t,field:n}=e;return Qt(t,n)}function tN(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:d={}})=>{const p=eN(n);return KG(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...ke(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...d}})}}function KG(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...ns(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Cl(e[t])?{}:e[t]}}]:[]}function QG(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:b1(o,n),continuousAxisChannelDef2:b1(s,n),continuousAxisChannelDefError:b1(a,n),continuousAxisChannelDefError2:b1(l,n),continuousAxis:i}}function b1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&he(YSe(n,t)),r}else return e}function ZG(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ns(n)&&n.orient)return n.orient;if(il(i)){if(il(o)){const s=pe(i)&&i.aggregate,a=pe(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return md(o)&&!md(i)?"horizontal":"vertical"}return"horizontal"}else{if(il(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Lv="boxplot",AEe=["box","median","outliers","rule","ticks"],REe=new Px(Lv,eY);function JG(e){return lt(e)?"tukey":e}function eY(e,{config:t}){e={...e,encoding:Ix(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=ns(n)?n:{type:n};i&&he(YH("boxplot"));const l=a.extent??t.boxplot.extent,u=bt("size",a,t),f=a.invalid,d=JG(l),{bins:p,timeUnits:g,transform:y,continuousAxisChannelDef:v,continuousAxis:x,groupby:w,aggregate:S,encodingWithoutContinuousAxis:E,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:R}=TEe(e,l,t),A=Wd(v.field),{color:N,size:M,...I}=E,P=In=>tN(a,x,v,In,t.boxplot),K=P(I),W=P(E),j=(Ee(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",D=P({...I,...M?{size:M}:{},color:{condition:{test:`${yt(`lower_box_${v.field}`)} >= ${yt(`upper_box_${v.field}`)}`,...N||{value:j}}}}),L=S$([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],v,E),H={type:"tick",color:"black",opacity:1,orient:C,invalid:f,aria:!1},U=d==="min-max"?L:S$([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,E),V=[...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...K({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:U}),...K({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:U})],J=[...d!=="tukey"?V:[],...W({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:$,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...D({partName:"median",mark:{type:"tick",invalid:f,...Ee(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(d==="min-max")return{...s,transform:(s.transform??[]).concat(y),layer:J};const z=yt(`lower_box_${v.field}`),G=yt(`upper_box_${v.field}`),xe=`(${G} - ${z})`,we=`${z} - ${l} * ${xe}`,ve=`${G} + ${l} * ${xe}`,Be=yt(v.field),Je={joinaggregate:tY(v.field),groupby:w},Ye={transform:[{filter:`(${we} <= ${Be}) && (${Be} <= ${ve})`},{aggregate:[{op:"min",field:v.field,as:`lower_whisker_${A}`},{op:"max",field:v.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${v.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${v.field}`,as:`upper_box_${A}`},...S],groupby:w}],layer:V},{tooltip:le,...Me}=I,{scale:We,axis:ce}=v,Et=eN(v),et=KG(a,"outliers",t.boxplot,{transform:[{filter:`(${Be} < ${we}) || (${Be} > ${ve})`}],mark:"point",encoding:{[x]:{field:v.field,type:v.type,...Et!==void 0?{title:Et}:{},...We!==void 0?{scale:We}:{},...ce!==void 0?{axis:ce}:{}},...Me,...N?{color:N}:{},...R?{tooltip:R}:{}}})[0];let Nt;const Ut=[...p,...g,Je];return et?Nt={transform:Ut,layer:[et,Ye]}:(Nt=Ye,Nt.transform.unshift(...Ut)),{...s,layer:[Nt,{transform:y,layer:J}]}}function tY(e){const t=Wd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function TEe(e,t,n){const r=ZG(e,Lv),{continuousAxisChannelDef:i,continuousAxis:o}=QG(e,r,Lv),s=i.field,a=Wd(s),l=JG(t),u=[...tY(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${yt(`upper_box_${a}`)} - ${yt(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${yt(`upper_box_${a}`)} + ${yt(`iqr_${a}`)} * ${t}, ${yt(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${yt(`lower_box_${a}`)} - ${yt(`iqr_${a}`)} * ${t}, ${yt(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:d,...p}=e.encoding,{customTooltipWithoutAggregatedField:g,filteredEncoding:y}=$Ee(p),{bins:v,timeUnits:x,aggregate:w,groupby:S,encoding:E}=YG(y,n),C=r==="vertical"?"horizontal":"vertical",$=r,R=[...v,...x,{aggregate:[...w,...u],groupby:S},...f];return{bins:v,timeUnits:x,transform:R,groupby:S,aggregate:w,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:E,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:g}}const nN="errorbar",NEe=["ticks","rule"],FEe=new Px(nN,nY);function nY(e,{config:t}){e={...e,encoding:Ix(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=rY(e,nN,t);delete o.size;const f=tN(a,i,r,o,t.errorbar),d=a.thickness,p=a.size,g={type:"tick",orient:s,aria:!1,...d!==void 0?{thickness:d}:{},...p!==void 0?{size:p}:{}},y=[...f({partName:"ticks",mark:g,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:g,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...y.length>1?{layer:y}:{...y[0]}}}function MEe(e,t){const{encoding:n}=e;if(DEe(n))return{orient:ZG(e,t),inputType:"raw"};const r=OEe(n),i=PEe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Ve(a)&&Ve(l))throw new Error(`${t} cannot have both x2 and y2`);if(Ve(a)){if(il(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ve(l)){if(il(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Ve(l)&&!Ve(a))throw new Error(`${t} cannot have xError2 without xError`);if(Ve(f)&&!Ve(u))throw new Error(`${t} cannot have yError2 without yError`);if(Ve(a)&&Ve(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ve(a)){if(il(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ve(u)){if(il(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function DEe(e){return(Ve(e.x)||Ve(e.y))&&!Ve(e.x2)&&!Ve(e.y2)&&!Ve(e.xError)&&!Ve(e.xError2)&&!Ve(e.yError)&&!Ve(e.yError2)}function OEe(e){return Ve(e.x2)||Ve(e.y2)}function PEe(e){return Ve(e.xError)||Ve(e.xError2)||Ve(e.yError)||Ve(e.yError2)}function rY(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=ns(r)?r:{type:r};o&&he(YH(t));const{orient:u,inputType:f}=MEe(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:p,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:y,continuousAxis:v}=QG(e,u,t),{errorBarSpecificAggregate:x,postAggregateCalculates:w,tooltipSummary:S,tooltipTitleWithFieldName:E}=IEe(l,d,p,g,y,f,t,n),{[v]:C,[v==="x"?"x2":"y2"]:$,[v==="x"?"xError":"yError"]:R,[v==="x"?"xError2":"yError2"]:A,...N}=i,{bins:M,timeUnits:I,aggregate:P,groupby:K,encoding:W}=YG(N,n),j=[...P,...x],D=f!=="raw"?[]:K,L=S$(S,d,W,E);return{transform:[...a.transform??[],...M,...I,...j.length===0?[]:[{aggregate:j,groupby:D}],...w],groupby:D,continuousAxisChannelDef:d,continuousAxis:v,encodingWithoutContinuousAxis:W,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:L}}function IEe(e,t,n,r,i,o,s,a){let l=[],u=[];const f=t.field;let d,p=!1;if(o==="raw"){const g=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,y=e.extent?e.extent:g==="mean"?"stderr":"iqr";if(g==="median"!=(y==="iqr")&&he(GSe(g,y,s)),y==="stderr"||y==="stdev")l=[{op:y,field:f,as:`extent_${f}`},{op:g,field:f,as:`center_${f}`}],u=[{calculate:`${yt(`center_${f}`)} + ${yt(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${yt(`center_${f}`)} - ${yt(`extent_${f}`)}`,as:`lower_${f}`}],d=[{fieldPrefix:"center_",titlePrefix:ym(g)},{fieldPrefix:"upper_",titlePrefix:c8(g,y,"+")},{fieldPrefix:"lower_",titlePrefix:c8(g,y,"-")}],p=!0;else{let v,x,w;y==="ci"?(v="mean",x="ci0",w="ci1"):(v="median",x="q1",w="q3"),l=[{op:x,field:f,as:`lower_${f}`},{op:w,field:f,as:`upper_${f}`},{op:v,field:f,as:`center_${f}`}],d=[{fieldPrefix:"upper_",titlePrefix:Lf({field:f,aggregate:w,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Lf({field:f,aggregate:x,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Lf({field:f,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&he(HSe(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:yt(n.field),as:`upper_${f}`},{calculate:yt(f),as:`lower_${f}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${yt(f)} + ${yt(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${yt(f)} + ${yt(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${yt(f)} - ${yt(r.field)}`,as:`lower_${f}`}));for(const g of u)d.push({fieldPrefix:g.as.substring(0,6),titlePrefix:ec(ec(g.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:p}}function c8(e,t,n){return`${ym(e)} ${n} ${t}`}const rN="errorband",LEe=["band","borders"],zEe=new Px(rN,iY);function iY(e,{config:t}){e={...e,encoding:Ix(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=rY(e,rN,t),u=s,f=tN(u,i,r,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:d?"area":"rect"},g={type:d?"line":"rule"};const y={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(p={...p,...y,ariaRoleDescription:"errorband"},g={...g,...y,aria:!1}):u.interpolate?he(t8("interpolate")):u.tension&&he(t8("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:l})]}}const oY={};function iN(e,t,n){const r=new Px(e,t);oY[e]={normalizer:r,parts:n}}function jEe(){return ue(oY)}iN(Lv,eY,AEe);iN(nN,nY,NEe);iN(rN,iY,LEe);const BEe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],sY={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},aY={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},UEe=ue(sY),qEe=ue(aY),WEe={header:1,headerRow:1,headerColumn:1,headerFacet:1},lY=ue(WEe),uY=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],VEe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},HEe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},po="_vgsid_",GEe={point:{on:"click",fields:[po],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function oN(e){return e==="legend"||!!(e!=null&&e.legend)}function wk(e){return oN(e)&&Ee(e)}function sN(e){return!!(e!=null&&e.select)}function cY(e){const t=[];for(const n of e||[]){if(sN(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function YEe(e){return Lx(e)||lN(e)||aN(e)}function aN(e){return fe(e,"concat")}function Lx(e){return fe(e,"vconcat")}function lN(e){return fe(e,"hconcat")}function fY({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rs(e){return fe(e,"step")}function f8(e){return fe(e,"view")||fe(e,"width")||fe(e,"height")}const d8=20,XEe={align:1,bounds:1,center:1,columns:1,spacing:1},KEe=ue(XEe);function QEe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(Fx(e)&&!Em(e.facet)||aN(e))&&(i.columns=s),Lx(e)&&(i.columns=1);for(const a of KEe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=lt(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function k$(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function E$(e,t){const n=zv(e,t);return rs(n)?n.step:dY}function zv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Qt(n,{step:e.step})}const dY=20,ZEe={continuousWidth:300,continuousHeight:300,step:dY},JEe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:ZEe,mark:Wke,arc:{},area:{},bar:Yke,circle:{},geoshape:{},image:{},line:{},point:{},rect:qT,rule:{color:"black"},square:{},text:{color:"black"},tick:Xke,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_ke,projection:{},legend:VEe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:GEe,style:{},title:{},facet:{spacing:d8},concat:{spacing:d8},normalizedNumberFormat:".0%"},Ts=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],h8={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},p8={blue:Ts[0],orange:Ts[1],red:Ts[2],teal:Ts[3],green:Ts[4],yellow:Ts[5],purple:Ts[6],pink:Ts[7],brown:Ts[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function e_e(e={}){return{signals:[{name:"color",value:Ee(e)?{...p8,...e}:p8}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function t_e(e){return{signals:[{name:"fontSize",value:Ee(e)?{...h8,...e}:h8}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function n_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function hY(e){const t=ue(e||{}),n={};for(const r of t){const i=e[r];n[r]=Am(i)?BH(i):Xr(i)}return n}function r_e(e){const t=ue(e),n={};for(const r of t)n[r]=hY(e[r]);return n}const i_e=[...SG,...WG,...lY,"background","padding","legend","lineBreak","scale","style","title","view"];function pY(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=$d({},qe(JEe),n?n_e(n):{},t?e_e(t):{},r?t_e(r):{},o||{});i&&Ad(s,"selection",i,!0);const a=ti(s,i_e);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Xr(s[l]));for(const l of SG)s[l]&&(a[l]=Rn(s[l]));for(const l of WG)s[l]&&(a[l]=hY(s[l]));for(const l of lY)s[l]&&(a[l]=Rn(s[l]));if(s.legend&&(a.legend=Rn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,f=Rn(l,{level:1});a.scale={...Rn(u),...ue(f).length>0?{invalid:f}:{}}}return s.style&&(a.style=r_e(s.style)),s.title&&(a.title=Rn(s.title)),s.view&&(a.view=Rn(s.view)),a}const o_e=new Set(["view",...Lke]),s_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],a_e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...qke};function l_e(e){e=qe(e);for(const t of s_e)delete e[t];if(e.axis)for(const t in e.axis)Am(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of BEe)delete e.legend[t];if(e.mark){for(const t of r8)delete e.mark[t];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(cY(e.params)),delete e.params);for(const t of o_e){for(const r of r8)delete e[t][r];const n=a_e[t];if(n)for(const r of n)delete e[t][r];c_e(e,t)}for(const t of jEe())delete e[t];u_e(e);for(const t in e)Ee(e[t])&&kt(e[t])&&delete e[t];return kt(e)?void 0:e}function u_e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=jH(e.title);kt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),kt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),kt(r)?delete e.title:e.title=r}function c_e(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};kt(o)||(e.style[n??t]=o),delete e[t]}function zx(e){return fe(e,"layer")}function f_e(e){return fe(e,"repeat")}function d_e(e){return!ie(e.repeat)&&fe(e.repeat,"layer")}class uN{map(t,n){return Fx(t)?this.mapFacet(t,n):f_e(t)?this.mapRepeat(t,n):lN(t)?this.mapHConcat(t,n):Lx(t)?this.mapVConcat(t,n):aN(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(zx(t))return this.mapLayer(t,n);if(pa(t))return this.mapUnit(t,n);throw new Error(ET(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const h_e={zero:1,center:1,normalize:1};function p_e(e){return _e(h_e,e)}const g_e=new Set([xG,Ax,$x,Fv,Tx,BT,UT,Rx,bG,jT]),m_e=new Set([Ax,$x,xG]);function yf(e){return pe(e)&&pd(e)==="quantitative"&&!e.bin}function g8(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(pe(s)&&pe(a))if(yf(s)&&yf(a)){if(s.stack)return t;if(a.stack)return i;const l=pe(s)&&!!s.aggregate,u=pe(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(yf(s))return t;if(yf(a))return i}else{if(yf(s))return o&&n==="vertical"?void 0:t;if(yf(a))return o&&n==="horizontal"?void 0:i}}function y_e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function gY(e,t){var v,x;const n=ns(e)?e:{type:e},r=n.type;if(!g_e.has(r))return null;const i=g8(t,"x",n)||g8(t,"theta",n);if(!i)return null;const o=t[i],s=pe(o)?be(o,{}):void 0,a=y_e(i),l=[],u=new Set;if(t[a]){const w=t[a],S=pe(w)?be(w,{}):void 0;S&&S!==s&&(l.push(a),u.add(S))}const f=a==="x"?"xOffset":"yOffset",d=t[f],p=pe(d)?be(d,{}):void 0;p&&p!==s&&(l.push(f),u.add(p));const g=Ewe.reduce((w,S)=>{if(S!=="tooltip"&&Pu(t,S)){const E=t[S];for(const C of Se(E)){const $=ho(C);if($.aggregate)continue;const R=be($,{});(!R||!u.has(R))&&w.push({channel:S,fieldDef:$})}}return w},[]);let y;return o.stack!==void 0?Cl(o.stack)?y=o.stack?"zero":null:y=o.stack:m_e.has(r)&&(y="zero"),!y||!p_e(y)||GG(t)&&g.length===0?null:((v=o==null?void 0:o.scale)!=null&&v.type&&((x=o==null?void 0:o.scale)==null?void 0:x.type)!==Tn.LINEAR&&o!=null&&o.stack&&he(qSe(o.scale.type)),Ve(t[gs(i)])?(o.stack!==void 0&&he(USe(i)),null):(pe(o)&&o.aggregate&&!Iwe.has(o.aggregate)&&he(WSe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:jl(r),stackBy:g,offset:y}))}function mY(e,t,n){const r=Rn(e),i=bt("orient",r,n);if(r.orient=w_e(r.type,t,i),i!==void 0&&i!==r.orient&&he(CSe(r.orient,i)),r.type==="bar"&&r.orient){const l=bt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Hke[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=bt("opacity",r,n),s=bt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=x_e(r.type,t)),bt("cursor",r,n)===void 0&&(r.cursor=v_e(r,t,n)),r}function v_e(e,t,n){return t.href||e.href||bt("href",e,n)?"pointer":e.cursor}function x_e(e,t){if(Ze([Tx,jT,BT,UT],e)&&!GG(t))return .7}function b_e(e,t,{graticule:n}){if(n)return!1;const r=ts("filled",e,t),i=e.type;return Qt(r,i!==Tx&&i!==Rx&&i!==Fv)}function w_e(e,t,n){switch(e){case Tx:case BT:case UT:case bG:case Pke:case Oke:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case Ax:if(pe(r)&&(An(r.bin)||pe(i)&&i.aggregate&&!r.aggregate))return"vertical";if(pe(i)&&(An(i.bin)||pe(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(pe(r)&&r.type===ic&&!Ct(r.bin)||Dv(r))&&pe(i)&&An(i.bin)?"horizontal":"vertical";if(!s)return(pe(i)&&i.type===ic&&!Ct(i.bin)||Dv(i))&&pe(r)&&An(r.bin)?"vertical":"horizontal"}case Fv:if(o&&!(pe(r)&&An(r.bin))&&s&&!(pe(i)&&An(i.bin)))return;case $x:if(s)return pe(i)&&An(i.bin)?"horizontal":"vertical";if(o)return pe(r)&&An(r.bin)?"vertical":"horizontal";if(e===Fv){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Rx:case jT:{const a=a8(r),l=a8(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=xr(r)&&r.type===dd,f=xr(i)&&i.type===dd;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function S_e(e){const{point:t,line:n,...r}=e;return ue(r).length>1?r:r.type}function k_e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ti(e[t],["point","line"])});return e}function Sk(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ee(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function m8(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class E_e{constructor(){ee(this,"name","path-overlay")}hasMatchingType(t,n){if(pa(t)){const{mark:r,encoding:i}=t,o=ns(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!Sk(o,n[o.type],i);case"area":return!!Sk(o,n[o.type],i)||!!m8(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...f}=t,d=Ix(u,i),p=ns(a)?a:{type:a},g=Sk(p,i[p.type],d),y=p.type==="area"&&m8(p,i[p.type]),v=[{name:l,...o?{params:o}:{},mark:S_e({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ti(d,["shape"])}],x=gY(mY(p,d,i),d);let w=d;if(x){const{fieldChannel:S,offset:E}=x;w={...d,[S]:{...d[S],...E?{stack:E}:{}}}}return w=ti(w,["y2","x2"]),y&&v.push({...s?{projection:s}:{},mark:{type:"line",...ld(p,["clip","interpolate","tension","tooltip"]),...y},encoding:w}),g&&v.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...ld(p,["clip","tooltip"]),...g},encoding:w}),r({...f,layer:v},{...n,config:k_e(i)})}}function __e(e,t){return t?Em(e)?vY(e,t):yY(e,t):e}function kk(e,t){return t?vY(e,t):e}function _$(e,t,n){const r=t[e];if(aEe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};he(rSe(r.repeat));return}return t}function yY(e,t){if(e=_$("field",e,t),e!==void 0){if(e===null)return null;if(XT(e)&&Ks(e.sort)){const n=_$("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function y8(e,t){if(pe(e))return yY(e,t);{const n=_$("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function v8(e,t){if(Ve(e)){const n=y8(e,t);if(n)return n;if(_m(e))return{condition:e.condition}}else{if(Cm(e)){const n=y8(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function vY(e,t){const n={};for(const r in e)if(fe(e,r)){const i=e[r];if(ie(i))n[r]=i.map(o=>v8(o,t)).filter(o=>o);else{const o=v8(i,t);o!==void 0&&(n[r]=o)}}return n}class C_e{constructor(){ee(this,"name","RuleForRangedLine")}hasMatchingType(t){if(pa(t)){const{encoding:n,mark:r}=t;if(r==="line"||ns(r)&&r.type==="line")for(const i of wwe){const o=wc(i),s=n[o];if(n[i]&&(pe(s)&&!An(s.bin)||ys(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return he(_Se(!!i.x2,!!i.y2)),r({...t,mark:Ee(o)?{...o,type:"rule"}:"rule"},n)}}class $_e extends uN{constructor(){super(...arguments);ee(this,"nonFacetUnitNormalizers",[REe,FEe,zEe,new E_e,new C_e])}map(n,r){if(pa(n)){const i=Pu(n.encoding,Ys),o=Pu(n.encoding,Xs),s=Pu(n.encoding,mx);if(i||o||s)return this.mapFacetedUnit(n,r)}return super.map(n,r)}mapUnit(n,r){const{parentEncoding:i,parentProjection:o}=r,s=kk(n.encoding,r.repeater),a={...n,...n.name?{name:[r.repeaterPrefix,n.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(i||o)return this.mapUnitWithParentEncodingOrProjection(a,r);const l=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(a,r.config))return u.run(a,r,l);return a}mapRepeat(n,r){return d_e(n)?this.mapLayerRepeat(n,r):this.mapNonLayerRepeat(n,r)}mapLayerRepeat(n,r){const{repeat:i,spec:o,...s}=n,{row:a,column:l,layer:u}=i,{repeater:f={},repeaterPrefix:d=""}=r;return a||l?this.mapRepeat({...n,repeat:{...a?{row:a}:{},...l?{column:l}:{}},spec:{repeat:{layer:u},spec:o}},r):{...s,layer:u.map(p=>{const g={...f,layer:p},y=`${(o.name?`${o.name}_`:"")+d}child__layer_${Dt(p)}`,v=this.mapLayerOrUnit(o,{...r,repeater:g,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(n,r){const{repeat:i,spec:o,data:s,...a}=n;!ie(i)&&n.columns&&(n=ti(n,["columns"]),he(QP("repeat")));const l=[],{repeater:u={},repeaterPrefix:f=""}=r,d=!ie(i)&&i.row||[u?u.row:null],p=!ie(i)&&i.column||[u?u.column:null],g=ie(i)&&i||[u?u.repeat:null];for(const v of g)for(const x of d)for(const w of p){const S={repeat:v,row:x,column:w,layer:u.layer},E=`${(o.name?`${o.name}_`:"")+f}child__${ie(i)?`${Dt(v)}`:(i.row?`row_${Dt(x)}`:"")+(i.column?`column_${Dt(w)}`:"")}`,C=this.map(o,{...r,repeater:S,repeaterPrefix:E});C.name=E,l.push(ti(C,["data"]))}const y=ie(i)?n.columns:i.column?i.column.length:1;return{data:o.data??s,align:"all",...a,columns:y,concat:l}}mapFacet(n,r){const{facet:i}=n;return Em(i)&&n.columns&&(n=ti(n,["columns"]),he(QP("facet"))),super.mapFacet(n,r)}mapUnitWithParentEncodingOrProjection(n,r){const{encoding:i,projection:o}=n,{parentEncoding:s,parentProjection:a,config:l}=r,u=b8({parentProjection:a,projection:o}),f=x8({parentEncoding:s,encoding:kk(i,r.repeater)});return this.mapUnit({...n,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(n,r){const{row:i,column:o,facet:s,...a}=n.encoding,{mark:l,width:u,projection:f,height:d,view:p,params:g,encoding:y,...v}=n,{facetMapping:x,layout:w}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},r),S=kk(a,r.repeater);return this.mapFacet({...v,...w,facet:x,spec:{...u?{width:u}:{},...d?{height:d}:{},...p?{view:p}:{},...f?{projection:f}:{},mark:l,encoding:S,...g?{params:g}:{}}},r)}getFacetMappingAndLayout(n,r){const{row:i,column:o,facet:s}=n;if(i||o){s&&he(kSe([...i?[Ys]:[],...o?[Xs]:[]]));const a={},l={};for(const u of[Ys,Xs]){const f=n[u];if(f){const{align:d,center:p,spacing:g,columns:y,...v}=f;a[u]=v;for(const x of["align","center","spacing"])f[x]!==void 0&&(l[x]??(l[x]={}),l[x][u]=f[x])}}return{facetMapping:a,layout:l}}else{const{align:a,center:l,spacing:u,columns:f,...d}=s;return{facetMapping:__e(d,r.repeater),layout:{...a?{align:a}:{},...l?{center:l}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(n,{parentEncoding:r,parentProjection:i,...o}){const{encoding:s,projection:a,...l}=n,u={...o,parentEncoding:x8({parentEncoding:r,encoding:s,layer:!0}),parentProjection:b8({parentProjection:i,projection:a})};return super.mapLayer({...l,...n.name?{name:[u.repeaterPrefix,n.name].filter(f=>f).join("_")}:{}},u)}}function x8({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ue(e),...ue(t)]);for(const o of i){const s=t[o],a=e[o];if(Ve(s)){const l={...a,...s};r[o]=l}else Cm(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||fo(a)||Ne(a)||Ve(a)||ie(a))&&(r[o]=a)}}else r=t;return!r||kt(r)?void 0:r}function b8(e){const{parentProjection:t,projection:n}=e;return t&&n&&he(dSe({parentProjection:t,projection:n})),n??t}function cN(e){return fe(e,"filter")}function A_e(e){return fe(e,"stop")}function xY(e){return fe(e,"lookup")}function R_e(e){return fe(e,"data")}function T_e(e){return fe(e,"param")}function N_e(e){return fe(e,"pivot")}function F_e(e){return fe(e,"density")}function M_e(e){return fe(e,"quantile")}function D_e(e){return fe(e,"regression")}function O_e(e){return fe(e,"loess")}function P_e(e){return fe(e,"sample")}function I_e(e){return fe(e,"window")}function L_e(e){return fe(e,"joinaggregate")}function z_e(e){return fe(e,"flatten")}function j_e(e){return fe(e,"calculate")}function bY(e){return fe(e,"bin")}function B_e(e){return fe(e,"impute")}function U_e(e){return fe(e,"timeUnit")}function q_e(e){return fe(e,"aggregate")}function W_e(e){return fe(e,"stack")}function V_e(e){return fe(e,"fold")}function H_e(e){return fe(e,"extent")&&!fe(e,"density")&&!fe(e,"regression")}function G_e(e){return e.map(t=>cN(t)?{filter:Pf(t.filter,vke)}:t)}class Y_e extends uN{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=w8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=w8(t,n),t.encoding){const r={};for(const[i,o]of wl(t.encoding))r[i]=wY(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:wl(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...f}=s;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=u!=="none";for(const d of tn(n.selectionPredicates[o]??{}))d.empty=u!=="none";return{name:o,value:a,select:f,bind:l}})}:t}}function w8(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(cN(o))return{filter:C$(o,t)};if(bY(o)&&Sc(o.bin))return{...o,bin:SY(o.bin)};if(xY(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function wY(e,t){var r,i;const n=qe(e);if(pe(n)&&Sc(n.bin)&&(n.bin=SY(n.bin)),Cc(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(_m(n))if(ie(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:C$(o,t)}});else{const{selection:o,param:s,test:a,...l}=wY(n.condition,t);n.condition=s?n.condition:{...l,test:C$(n.condition,t)}}return n}function SY(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function C$(e,t){const n=r=>Pf(r,i=>{var a;const o=t.emptySelections[i]??!0,s={param:i,empty:o};return(a=t.selectionPredicates)[i]??(a[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):Pf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class $$ extends uN{map(t,n){const r=n.selections??[];if(t.params&&!pa(t)){const i=[];for(const o of t.params)sN(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(ke(a)&&(a===t.name||i.includes(a))||ie(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=$$.prototype[e];$$.prototype[e]=function(n,r){return t.call(this,n,X_e(n,r))}}function X_e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function kY(e,t){t===void 0&&(t=pY(e.config));const n=J_e(e,t),{width:r,height:i}=e,o=eCe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const K_e=new $_e,Q_e=new Y_e,Z_e=new $$;function J_e(e,t={}){const n={config:t};return Z_e.map(K_e.map(Q_e.map(e,n),n),n)}function S8(e){return ke(e)?{type:e}:e??{}}function eCe(e,t,n){let{width:r,height:i}=t;const o=pa(e)||zx(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(he(GP("width")),r=void 0),i=="container"&&(he(GP("height")),i=void 0));const a={type:"pad",...s,...n?S8(n.autosize):{},...S8(e.autosize)};if(a.type==="fit"&&!o&&(he(Hwe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&he(YP("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&he(YP("height")),!Qr(a,{type:"pad"}))return a}function tCe(e){return["fit","fit-x","fit-y"].includes(e)}function nCe(e){return e?`fit-${wx(e)}`:"fit"}const rCe=["background","padding"];function k8(e,t){const n={};for(const r of rCe)e&&e[r]!==void 0&&(n[r]=Xr(e[r]));return t&&(n.params=e.params),n}class ga{constructor(t={},n={}){ee(this,"explicit");ee(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new ga(qe(this.explicit),qe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Qt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ue(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Po(e){return{explicit:!0,value:e}}function Hr(e){return{explicit:!1,value:e}}function EY(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:jx(t,n,r,i)}}function jx(e,t,n,r){return e.explicit&&t.explicit&&he(OSe(n,r,e.value,t.value)),e}function El(e,t,n,r,i=jx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Qr(e.value,t.value)?e:i(e,t,n,r)}class iCe extends ga{constructor(n={},r={},i=!1){super(n,r);ee(this,"explicit");ee(this,"implicit");ee(this,"parseNothing");this.explicit=n,this.implicit=r,this.parseNothing=i}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function yd(e){return fe(e,"url")}function Ng(e){return fe(e,"values")}function _Y(e){return fe(e,"name")&&!yd(e)&&!Ng(e)&&!cl(e)}function cl(e){return e&&(CY(e)||$Y(e)||fN(e))}function CY(e){return fe(e,"sequence")}function $Y(e){return fe(e,"sphere")}function fN(e){return fe(e,"graticule")}var Bt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Bt||(Bt={}));function AY({invalid:e,isPath:t}){switch(kG(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function oCe(e){const{marks:t,scales:n}=AY(e);return t===n?Bt.Main:n==="include-invalid-values"?Bt.PreFilterInvalid:Bt.PostFilterInvalid}class xt{constructor(t,n){ee(this,"debugName");ee(this,"_children",[]);ee(this,"_parent",null);ee(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){he(uSe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Mr extends xt{constructor(n,r,i,o){super(n,r);ee(this,"type");ee(this,"refCounts");ee(this,"_source");ee(this,"_name");this.type=i,this.refCounts=o,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${EH()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function Ek(e){return e.as!==void 0}function E8(e){return`${e}_end`}class Ho extends xt{constructor(n,r){super(n);ee(this,"timeUnits");this.timeUnits=r}clone(){return new Ho(null,qe(this.timeUnits))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{const{field:l,timeUnit:u}=s;if(u){let f;if(_c(u)){if(jt(r)){const{mark:d,markDef:p,config:g}=r,y=kl({fieldDef:s,markDef:p,config:g});(Tg(d)||y)&&(f={timeUnit:Sn(u),field:l})}}else f={as:be(s,{forAs:!0}),field:l,timeUnit:u};if(jt(r)){const{mark:d,markDef:p,config:g}=r,y=kl({fieldDef:s,markDef:p,config:g});Tg(d)&&Zt(a)&&y!==.5&&(f.rectBandPosition=y)}f&&(o[tt(f)]=f)}return o},{});return kt(i)?null:new Ho(n,i)}static makeFromTransform(n,r){const{timeUnit:i,...o}={...r},s=Sn(i),a={...o,timeUnit:s};return new Ho(n,{[tt(a)]:a})}merge(n){this.timeUnits={...this.timeUnits};for(const r in n.timeUnits)this.timeUnits[r]||(this.timeUnits[r]=n.timeUnits[r]);for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}removeFormulas(n){const r={};for(const[i,o]of wl(this.timeUnits)){const s=Ek(o)?o.as:`${o.field}_end`;n.has(s)||(r[i]=o)}this.timeUnits=r}producedFields(){return new Set(tn(this.timeUnits).map(n=>Ek(n)?n.as:E8(n.field)))}dependentFields(){return new Set(tn(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${tt(this.timeUnits)}`}assemble(){const n=[];for(const r of tn(this.timeUnits)){const{rectBandPosition:i}=r,o=Sn(r.timeUnit);if(Ek(r)){const{field:s,as:a}=r,{unit:l,utc:u,...f}=o,d=[a,`${a}_end`];n.push({field:Ni(s),type:"timeunit",...l?{units:_x(l)}:{},...u?{timezone:"utc"}:{},...f,as:d}),n.push(..._8(d,i,o))}else if(r){const{field:s}=r,a=s.replaceAll("\\.","."),l=RY({timeUnit:o,field:a}),u=E8(a);n.push({type:"formula",expr:l,as:u}),n.push(..._8([a,u],i,o))}}return n}}const Bx="offsetted_rect_start",Ux="offsetted_rect_end";function RY({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=oG(r),{part:s,step:a}=uG(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${yt(t)}, ${n?-a:a})`}function _8([e,t],n,r){if(n!==void 0&&n!==.5){const i=yt(e),o=yt(t);return[{type:"formula",expr:C8([RY({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Bx}`},{type:"formula",expr:C8([i,o],n+.5),as:`${e}_${Ux}`}]}return[]}function C8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Rm="_tuple_fields";class sCe{constructor(...t){ee(this,"hasChannel");ee(this,"hasField");ee(this,"hasSelectionId");ee(this,"timeUnit");ee(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const aCe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new sCe),o={},s={},a=new Set,l=(y,v)=>{const x=v==="visual"?y.channel:y.field;let w=Dt(`${r}_${x}`);for(let S=1;a.has(w);S++)w=Dt(`${r}_${x}_${S}`);return a.add(w),{[v]:w}},u=t.type,f=e.config.selection[u],d=n.value!==void 0?Se(n.value):null;let{fields:p,encodings:g}=Ee(n.select)?n.select:{};if(!p&&!g&&d){for(const y of d)if(Ee(y))for(const v of ue(y))bwe(v)?(g||(g=[])).push(v):u==="interval"?(he(nSe),g=f.encodings):(p??(p=[])).push(v)}!p&&!g&&(g=f.encodings,"fields"in f&&(p=f.fields));for(const y of g??[]){const v=e.fieldDef(y);if(v){let x=v.field;if(v.aggregate){he(Gwe(y,v.aggregate));continue}else if(!x){he(KP(y));continue}if(v.timeUnit&&!_c(v.timeUnit)){x=e.vgField(y);const w={timeUnit:v.timeUnit,as:x,field:v.field};s[tt(w)]=w}if(!o[x]){const w=u==="interval"&&ms(y)&&co(e.getScaleComponent(y).get("type"))?"R":v.bin?"R-RE":"E",S={field:x,channel:y,type:w,index:i.items.length};S.signals={...l(S,"data"),...l(S,"visual")},i.items.push(o[x]=S),i.hasField[x]=o[x],i.hasSelectionId=i.hasSelectionId||x===po,TH(y)?(S.geoChannel=y,S.channel=RH(y),i.hasChannel[S.channel]=o[x]):i.hasChannel[y]=o[x]}}else he(KP(y))}for(const y of p??[]){if(i.hasField[y])continue;const v={type:"E",field:y,index:i.items.length};v.signals={...l(v,"data")},i.items.push(v),i.hasField[y]=v,i.hasSelectionId=i.hasSelectionId||y===po}d&&(t.init=d.map(y=>i.items.map(v=>Ee(y)?y[v.geoChannel||v.channel]!==void 0?y[v.geoChannel||v.channel]:y[v.field]:y))),kt(s)||(i.timeUnit=new Ho(null,s))},signals:(e,t,n)=>{const r=t.name+Rm;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(MY)})}},TY="_curr",cy="anim_value",kf="anim_clock",A$="eased_anim_clock",NY="min_extent",FY="max_range_extent",_k="last_tick_at",Ck="is_playing",lCe=1/60*1e3,uCe=(e,t)=>[{name:A$,update:kf},{name:`${e}_domain`,init:`domain('${t}')`},{name:NY,init:`extent(${e}_domain)[0]`},{name:FY,init:`extent(range('${t}'))[1]`},{name:cy,update:`invert('${t}', ${A$})`}],cCe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Go(t)&&(n=n.concat([{name:kf,init:"0",on:[{events:{type:"timer",throttle:lCe},update:`${Ck} ? (${kf} + (now() - ${_k}) > ${FY} ? 0 : ${kf} + (now() - ${_k})) : ${kf}`}]},{name:_k,init:"now()",on:[{events:[{signal:kf},{signal:Ck}],update:"now()"}]},{name:Ck,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+Rm,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=tn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+zf):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Iu(e)}, `;if(t.project.hasSelectionId)u+=`${po}: ${s}[${ge(po)}]`;else if(Go(t))u+=`fields: ${i}, values: [${cy} ? ${cy} : ${NY}]`;else{const f=o.items.map(d=>{const p=e.fieldDef(d.channel);return p!=null&&p.bin?`[${s}[${ge(e.vgField(d.channel,{}))}], ${s}[${ge(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${ge(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(Go(t))return n.concat(uCe(t.name,e.scaleName(Dl)),[{name:r+oa,on:[{events:[{signal:A$},{signal:cy}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+oa,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function MY(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Ni(i.field),i}function ac(e,t=!0,n=er){if(ie(e)){const r=e.map(i=>ac(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Ec(e))return n(t?rc(e):ske(e));return t?n(pt(e)):e}function fCe(e,t){for(const n of tn(e.component.selection??{})){const r=n.name;let i=`${r}${oa}, ${n.resolve==="global"?"true":`{unit: ${Iu(e)}}`}`;for(const o of Wx)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+LCe,on:[{events:{signal:n.name+oa},update:`modify(${ge(n.name+lc)}, ${i})`}]})}return dN(t)}function dCe(e,t){if(e.component.selection&&ue(e.component.selection).length){const n=ge(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Fl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return dN(t)}function hCe(e,t){let n=!1;for(const r of tn(e.component.selection??{})){const i=r.name,o=ge(i+lc);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${KY}(${o}, ${ge(a)}${l}`})}n=!0;for(const a of Wx)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),dN(t)}function pCe(e,t){const n=[],r=[],i=Iu(e,{escape:!1});for(const o of tn(e.component.selection??{})){const s={name:o.name+lc};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:po}}]),o.init){const l=o.project.items.map(MY);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[po]:ac(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:ac(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+lc).length||n.push(s),Go(o)&&t.length){const l=e.lookupDataSource(e.getDataName(Bt.Main)),u=t.find(d=>d.name===l),f=u.transform.find(d=>d.type==="filter"&&d.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(p=>p!==f);const d={name:u.name+TY,source:u.name,transform:[f]};r.push(d)}}}return n.concat(t,r)}function DY(e,t){for(const n of tn(e.component.selection??{}))for(const r of Wx)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function gCe(e,t){for(const n of e.children)jt(n)&&(t=DY(n,t));return t}function mCe(e,t,n,r){const i=tX(e,t.param,t);return{signal:co(n.get("type"))&&ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function dN(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Qs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ms(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&he(Qwe),!o||!co(s)){he(Kwe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||T$(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(KY))i.update=`{${r.map(s=>`${ge(Ni(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${ge(Ni(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!T$(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function R$(e,t){return`domain(${ge(e.scaleName(t))})`}function T$(e){return e.parent&&Qd(e.parent)&&(!e.parent.parent||T$(e.parent.parent))}const zf="_brush",OY="_scale_trigger",hp="geo_interval_init_tick",PY="_init",yCe="_center",vCe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ee(n.select)?n.select:{}};i.fields=[po],i.encodings||(i.encodings=n.value?ue(n.value):[ko,So]),n.select={type:"interval",...i}}if(t.translate&&!Qs.defined(t)){const i=`!event.item || event.item.mark.name !== ${ge(t.name+zf)}`;for(const o of t.events){if(!o.between){he(`${o} is not an ordered event stream for interval selections.`);continue}const s=Se((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+oa,o=tn(t.project.hasChannel).filter(a=>a.channel===Pt||a.channel===_n),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(xCe(e,t,l,s==null?void 0:s[l.index])),[])),e.hasProjection){const a=ge(e.projectionName()),l=e.projectionName()+yCe,{x:u,y:f}=t.project.hasChannel,d=u==null?void 0:u.signals.visual,p=f==null?void 0:f.signals.visual,g=u?s==null?void 0:s[u.index]:`${l}[0]`,y=f?s==null?void 0:s[f.index]:`${l}[1]`,v=$=>e.getSizeSignalRef($).signal,x=`[[${d?`${d}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${d?`${d}[1]`:v("width")}, ${p?`${p}[1]`:v("height")}]]`;s&&(n.unshift({name:r+PY,init:`[scale(${a}, [${u?g[0]:g}, ${f?y[0]:y}]), scale(${a}, [${u?g[1]:g}, ${f?y[1]:y}])]`}),(!u||!f)&&(n.find(R=>R.name===l)||n.unshift({name:l,update:`invert(${a}, [${v("width")}/2, ${v("height")}/2])`})));const w=`intersect(${x}, {markname: ${ge(e.getName("marks"))}}, unit.mark)`,S=`{unit: ${Iu(e)}}`,E=`vlSelectionTuples(${w}, ${S})`,C=o.map($=>$.signals.visual);return n.concat({name:i,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:hp}]:[]],update:E}]})}else{if(!Qs.defined(t)){const u=r+OY,f=o.map(d=>{const p=d.channel,{data:g,visual:y}=d.signals,v=ge(e.scaleName(p)),x=e.getScaleComponent(p).get("type"),w=co(x)?"+":"";return`(!isArray(${g}) || (${w}invert(${v}, ${y})[0] === ${w}${g}[0] && ${w}invert(${v}, ${y})[1] === ${w}${g}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:`${f.join(" && ")} ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Iu(e)}, fields: ${r+Rm}, values`;return n.concat({name:i,...s?{init:`{${l}: ${ac(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(jt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===hp).length||n.unshift({name:hp,value:null,on:[{events:"timer{1}",update:`${hp} === null ? {} : ${hp}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${ge(t.name+lc)})`;if(Qs.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const x of ue(u))u[x]=[{test:`${l}.length && ${l}[0].unit === ${Iu(e)}`,...u[x]},{value:0}];const{fill:f,fillOpacity:d,cursor:p,...g}=t.mark,y=ue(g).reduce((x,w)=>(x[w]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(S=>S).join(" && "),value:g[w]},{value:null}],x),{}),v=p??(t.translate?"move":null);return[{name:`${r+zf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:u}},...n,{name:r+zf,type:"rect",clip:!0,encode:{enter:{...v?{cursor:{value:v}}:{},fill:{value:"transparent"}},update:{...u,...y}}}]}};function xCe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=ge(i?e.scaleName(o):e.projectionName()),l=p=>`scale(${a}, ${p})`,u=e.getSizeSignalRef(o===Pt?"width":"height").signal,f=`${o}(unit)`,d=t.events.reduce((p,g)=>[...p,{events:g.between[0],update:`[${f}, ${f}]`},{events:g,update:`[${s}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const p=n.signals.data,g=Qs.defined(t),y=e.getScaleComponent(o),v=y?y.get("type"):void 0,x=r?{init:ac(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+OY},update:co(v)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),g?[{name:p,on:[]}]:[{name:s,...x,on:d},{name:p,...r?{init:ac(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const p=o===Pt?0:1,g=t.name+PY,y=r?{init:`[${g}[0][${p}], ${g}[1][${p}]]`}:{value:[]};return[{name:s,...y,on:d}]}}function Gd({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=_m(t)&&t.condition;let s=[];o&&(s=Se(o).map(u=>{const f=i(u);if(sEe(u)){const{param:d,empty:p}=u;return{test:eX(e,{param:d,empty:p}),...f}}else return{test:Uv(e,u.test),...f}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function hN(e,t="text"){const n=e.encoding[t];return Gd({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>qx(r,e.config),invalidValueRef:void 0})}function qx(e,t,n="datum"){if(e){if(fo(e))return Tt(e.value);if(Ve(e)){const{format:r,formatType:i}=Pv(e);return GT({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function IY(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(ie(s))return{tooltip:$8({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Gd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const f=qx(u,i,a);if(f)return f;if(u===null)return;let d=bt("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),ke(d))return{value:d};if(Ee(d))return Ne(d)?d:d.content==="encoding"?$8(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function LY(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(f,d){const p=wc(d),g=xr(f)?f:{...f,type:e[p].type},y=g.title||QT(g,i),v=Se(y).join(", ").replaceAll(/"/g,'\\"');let x;if(Zt(d)){const w=d==="x"?"x2":"y2",S=ho(e[w]);if(An(g.bin)&&S){const E=be(g,{expr:s}),C=be(S,{expr:s}),{format:$,formatType:R}=Pv(g);x=km(E,C,$,R,i),o.add(w)}}if((Zt(d)||d===Di||d===wo)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:w,formatType:S}=Pv(g);x=GT({fieldOrDatumDef:g,format:w,formatType:S,expr:s,config:i,normalizeStack:!0}).signal}x??(x=qx(g,i,s).signal),a.push({channel:d,key:v,value:x})}JT(e,(f,d)=>{pe(f)?l(f,d):Mx(f)&&l(f.condition,d)});const u={};for(const{channel:f,key:d,value:p}of a)!o.has(f)&&!u[d]&&(u[d]=p);return u}function $8(e,t,n,{reactiveGeom:r}={}){const i=LY(e,t,n,{reactiveGeom:r}),o=wl(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function bCe(e){const{markDef:t,config:n}=e,r=bt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...wCe(e),...SCe(e)}}function wCe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=bt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:_e(qwe,t)?{}:{ariaRoleDescription:{value:t}}}function SCe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Gd({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>qx(l,e.config),invalidValueRef:void 0});const s=bt("description",n,r);if(s!=null)return{description:Tt(s)};if(r.aria===!1)return{};const a=LY(t,i,r);if(!kt(a))return{description:{signal:wl(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Nn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=bt(e,r,o,{vgChannel:s,ignoreVgConfig:!_m(u)})),l!==void 0&&(a=Tt(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=_G({...f,scaleChannel:e,channelDef:u});return Gd({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:d,mainRefFn:g=>HT({...f,channel:e,channelDef:g,stack:null,defaultRef:a})})}function zY(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??bt("filled",n,i),a=Ze(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=bt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=bt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],f=s?"fill":"stroke",d={...l?{fill:Tt(l)}:{},...u?{stroke:Tt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&he(KH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...Nn("color",e,{vgChannel:f,defaultValue:s?l:u}),...Nn("fill",e,{defaultValue:r.fill?l:void 0}),...Nn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function kCe(e){const{encoding:t,mark:n}=e,r=t.order;return!jl(n)&&fo(r)?Gd({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Tt(i.value),invalidValueRef:void 0}):{}}function vd({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:HT({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Tt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function pr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[gs(e)],f=t.scaleName(e),d=t.getScaleComponent(e),{offset:p,offsetType:g}=vd({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),y=pN({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),v=!l&&Zt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ECe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:f,scale:d,stack:a,offset:p,defaultRef:y,bandPosition:g==="encoding"?0:void 0});return v?{[r||e]:v}:void 0}function ECe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Ve(n)&&i&&t===i.fieldChannel){if(pe(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Mv({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Ou(n,r,{suffix:"end"},{offset:o})}return VT(e)}function pN({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=wc(n),l=Sl(n),u=bt(n,o,s,{vgChannel:l});if(u!==void 0)return ng(n,u);switch(t){case"zeroOrMin":return A8({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return A8({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[zr(n)],mult:.5}}}}function A8({mainChannel:e,config:t,...n}){const r=EG(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const _Ce={left:"x",center:"xc",right:"x2"},CCe={top:"y",middle:"yc",bottom:"y2"};function jY(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Sl(e);const i=e==="x"?"align":"baseline",o=bt(i,t,n);let s;return Ne(o)?(he(ESe(i)),s=void 0):s=o,e==="x"?_Ce[s||(r==="top"?"left":"center")]:CCe[s||r]}function jv(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?BY(e,t,{defaultPos:n,defaultPos2:r}):pr(e,t,{defaultPos:n})}function BY(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=gs(e),a=zr(e),l=$Ce(t,r,s),u=l[a]?jY(e,i,o):Sl(e);return{...pr(e,t,{defaultPos:n,vgChannel:u}),...l}}function $Ce(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=wc(n),u=zr(n),f=Sl(n),d=r[l],p=e.scaleName(l),g=e.getScaleComponent(l),{offset:y}=n in r||n in o?vd({channel:n,markDef:o,encoding:r,model:e}):vd({channel:l,markDef:o,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const x=zr(n),w=e.markDef[x];return w!=null?{[x]:{value:w}}:{[f]:{field:e.getName(n)}}}const v=ACe({channel:n,channelDef:d,channel2Def:r[n],markDef:o,config:a,scaleName:p,scale:g,stack:s,offset:y,defaultRef:void 0});return v!==void 0?{[f]:v}:w1(n,o)||w1(n,{[n]:y$(n,o,a.style),[u]:y$(u,o,a.style)})||w1(n,a[i])||w1(n,a.mark)||{[f]:pN({model:e,defaultPos:t,channel:n,scaleName:p,scale:g})()}}function ACe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Ve(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Ou(t,o,{suffix:"start"},{offset:l}):VT({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function w1(e,t){const n=zr(e),r=Sl(e);if(t[r]!==void 0)return{[r]:ng(e,t[r])};if(t[e]!==void 0)return{[r]:ng(e,t[e])};if(t[n]){const i=t[n];if(oc(i))he(vSe(n));else return{[n]:ng(e,i)}}}function ia(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=gs(t),a=zr(t),l=r[t],u=r[s],f=e.getScaleComponent(t),d=f?f.get("type"):void 0,p=i.orient,g=r[a]??r.size??bt("size",i,n,{vgChannel:a}),y=DH(t),v=o==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||o==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return pe(l)&&(Ct(l.bin)||An(l.bin)||l.timeUnit&&!u)&&!(g&&!oc(g))&&!r[y]&&!kn(d)?NCe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Ve(l)&&kn(d)||v)&&!u?TCe(l,t,e):BY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function RCe(e,t,n,r,i,o,s){if(oc(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=ts("minBandSize",{type:s},r);return{signal:f?`max(${no(f)}, ${u})`:u}}else i.band!==1&&(he(ASe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ne(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(kc(l)&&lt(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:d}=r.scale,p=Qt(l,s==="tick"?d:s==="bar"?u:f);if(Ne(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(lt(p))return{signal:`${1-p} * ${e}`}}return{value:E$(r.view,e)-2}}function TCe(e,t,n){var M,I;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=zr(t),d=gs(t),p=DH(t),g=n.scaleName(p),y=n.getScaleComponent(vT(t)),v=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let x;(i.size||r.size)&&(v?x=Nn("size",n,{vgChannel:f,defaultRef:Tt(r.size)}):he(FSe(r.type)));const w=!!x,S=FG({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(M=u||y)==null?void 0:M.get("type"),useVlSizeChannel:v});x=x||{[f]:RCe(f,g||l,y||u,o,S,!!e,r.type)};const E=((I=u||y)==null?void 0:I.get("type"))==="band"&&oc(S)&&!w?"top":"middle",C=jY(t,r,o,E),$=C==="xc"||C==="yc",{offset:R,offsetType:A}=vd({channel:t,markDef:r,encoding:i,model:n,bandPosition:$?.5:0}),N=VT({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:R,defaultRef:pN({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:$?A==="encoding"?0:.5:Ne(S)?{signal:`(1-${S})/2`}:oc(S)?(1-S.band)/2:0});if(f)return{[C]:N,...x};{const P=Sl(d),K=x[f],W=R?{...K,offset:R}:K;return{[C]:N,[P]:ie(N)?[N[0],{...N[1],offset:W}]:{...N,offset:W}}}}function R8(e,t,n,r,i,o,s){if(AH(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Ne(n)||Ne(i)||Ne(r)||o){const u=no(n),f=no(i),d=no(r),p=no(o),y=o?`(${s} < ${p} ? ${a?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,v=d?`${d} + `:"",x=u?`(${u} ? -1 : 1) * `:"",w=f?`(${f} + ${y})`:y;return{signal:v+x+w}}else return i=i||0,r+(n?-i-l:+i+l)}function NCe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),d=FG({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),p=(I=r.component.axes[n])==null?void 0:I[0],g=(p==null?void 0:p.get("translate"))??.5,y=Zt(n)?bt("binSpacing",o,i)??0:0,v=gs(n),x=Sl(n),w=Sl(v),S=ts("minBandSize",o,i),{offset:E}=vd({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:C}=vd({channel:v,markDef:o,encoding:s,model:r,bandPosition:0}),$=eEe({fieldDef:e,scaleName:l}),R=R8(n,y,f,g,E,S,$),A=R8(v,y,f,g,C??E,S,$),N=Ne(d)?{signal:`(1-${d.signal})/2`}:oc(d)?(1-d.band)/2:.5,M=kl({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Ct(e.bin)||e.timeUnit){const P=e.timeUnit&&M!==.5;return{[w]:T8({fieldDef:e,scaleName:l,bandPosition:N,offset:A,useRectOffsetField:P}),[x]:T8({fieldDef:e,scaleName:l,bandPosition:Ne(N)?{signal:`1-${N.signal}`}:1-N,offset:R,useRectOffsetField:P})}}else if(An(e.bin)){const P=Ou(e,l,{},{offset:A});if(pe(t))return{[w]:P,[x]:Ou(t,l,{},{offset:R})};if(Sc(e.bin)&&e.bin.step)return{[w]:P,[x]:{signal:`scale("${l}", ${be(e,{expr:"datum"})} + ${e.bin.step})`,offset:R}}}he(JH(v))}function T8({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Mv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Bx,endSuffix:Ux}:{}})}const FCe=new Set(["aria","width","height"]);function Oi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?zY(e):{};return{...MCe(e.markDef,t),...N8("fill",n),...N8("stroke",r),...Nn("opacity",e),...Nn("fillOpacity",e),...Nn("strokeOpacity",e),...Nn("strokeWidth",e),...Nn("strokeDash",e),...kCe(e),...IY(e),...hN(e,"href"),...bCe(e)}}function N8(e,t){return t?{[e]:t}:{}}function MCe(e,t){return Uwe.reduce((n,r)=>(!FCe.has(r)&&fe(e,r)&&t[r]!=="ignore"&&(n[r]=Tt(e[r])),n),{})}function gN(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!ms(o)||!(s=e.getScaleType(o)))return;const a=Sx(i.aggregate),l=WT({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(Qke(l)){const f=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(o=>Cx(o,!0)).join(" && ")}}}function F8(e,t){if(t!==void 0)return{[e]:Tt(t)}}const $k="voronoi",UY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName($k)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(jl(o))return he(Ywe(o)),n;const s={name:e.getName($k),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...IY(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const d=u.name??"";d===e.component.mark[0].name?a=f:d.includes($k)&&(l=!0)}),l||n.splice(a+1,0,s),n}},qY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!oN(e.bind),parse:(e,t,n)=>QY(t,n),topLevelSignals:(e,t,n)=>{var l;const r=t.name,i=t.project,o=t.bind,s=(l=t.init)==null?void 0:l[0],a=UY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,f)=>{const d=Dt(`${r}_${u.field}`);n.filter(g=>g.name===d).length||n.unshift({name:d,...s?{init:ac(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ge(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+oa),s=r+Rm,a=i.items.map(u=>Dt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},Bv="_toggle",WY={defined:e=>e.type==="point"&&!Go(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Bv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+oa,r=t.name+Bv;return`${r} ? null : ${n}, ${t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Iu(e)}}, `}${r} ? ${n} : null`}},DCe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Go(e),parse:(e,t)=>{t.clear&&(t.clear=ke(t.clear)?Fl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(qY.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Dt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+oa);r(i,"null"),WY.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Bv),r(i,"false"))}return n}},VY={defined:e=>{const t=e.resolve==="global"&&e.bind&&oN(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==po;return t&&!n&&he(Zwe),t&&n},parse:(e,t,n)=>{const r=qe(n);if(r.select=ke(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},QY(t,r),Ee(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Se(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=wk(t.bind)?t.bind.legend:"click",o=ke(i)?Fl(i,"view"):Se(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=wk(t.bind)&&t.bind.legend,o=s=>a=>{const l=qe(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Dt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(p=>p.name===r+oa),s=r+Rm,a=i.items.filter(p=>p.hasLegend).map(p=>Dt(`${r}_${Dt(p.field)}_legend`)),u=`${a.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(p=>({signal:p})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const f=n.find(p=>p.name===r+Bv),d=wk(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:d}):f.on[0].events=d),n}};function OCe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of tn(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&VY.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const HY="_translate_anchor",GY="_translate_delta",PCe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Qs.defined(t),o=r+HY,{x:s,y:a}=t.project.hasChannel;let l=Fl(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+zf,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${i?R$(e,Pt):`slice(${s.signals.visual})`}`:""}${a!==void 0?`, extent_y: ${i?R$(e,_n):`slice(${a.signals.visual})`}`:""}}`}]},{name:r+GY,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&M8(e,t,s,"width",n),a!==void 0&&M8(e,t,a,"height",n),n}};function M8(e,t,n,r,i){const o=t.name,s=o+HY,a=o+GY,l=n.channel,u=Qs.defined(t),f=i.find($=>$.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(l),g=p==null?void 0:p.get("type"),y=p==null?void 0:p.get("reverse"),v=u?l===Pt?y?"":"-":y?"-":"":"",x=`${s}.extent_${l}`,w=`${v}${a}.${l} / ${u?`${d}`:`span(${x})`}`,S=!u||!p?"panLinear":g==="log"?"panLog":g==="symlog"?"panSymlog":g==="pow"?"panPow":"panLinear",E=u?g==="pow"?`, ${p.get("exponent")??1}`:g==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${S}(${x}, ${w}${E})`;f.on.push({events:{signal:a},update:u?C:`clampRange(${C}, 0, ${d})`})}const YY="_zoom_anchor",XY="_zoom_delta",ICe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Qs.defined(t),o=r+XY,{x:s,y:a}=t.project.hasChannel,l=ge(e.scaleName(Pt)),u=ge(e.scaleName(_n));let f=Fl(t.zoom,"scope");return i||(f=f.map(d=>(d.markname=r+zf,d))),n.push({name:r+YY,on:[{events:f,update:i?`{${[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&D8(e,t,s,"width",n),a!==void 0&&D8(e,t,a,"height",n),n}};function D8(e,t,n,r,i){const o=t.name,s=n.channel,a=Qs.defined(t),l=i.find(S=>S.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),d=f==null?void 0:f.get("type"),p=a?R$(e,s):l.name,g=o+XY,y=`${o}${YY}.${s}`,v=!a||!f?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",x=a?d==="pow"?`, ${f.get("exponent")??1}`:d==="symlog"?`, ${f.get("constant")??1}`:"":"",w=`${v}(${p}, ${y}, ${g}${x})`;l.on.push({events:{signal:g},update:a?w:`clampRange(${w}, 0, ${u})`})}const lc="_store",oa="_tuple",LCe="_modify",KY="vlSelectionResolve",Wx=[cCe,vCe,aCe,WY,qY,Qs,VY,DCe,PCe,ICe,UY];function zCe(e){let t=e.parent;for(;t&&!ni(t);)t=t.parent;return t}function Iu(e,{escape:t}={escape:!0}){let n=t?ge(e.name):e.name;const r=zCe(e);if(r){const{facet:i}=r;for(const o of ki)i[o]&&(n+=` + '__facet_${o}_' + (facet[${ge(r.vgField(o))}])`)}return n}function mN(e){return tn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function QY(e,t){(ke(t.select)||!t.select.on)&&delete e.events,(ke(t.select)||!t.select.clear)&&delete e.clear,(ke(t.select)||!t.select.toggle)&&delete e.toggle}function Go(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function N$(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...N$(e.object)),t.push(...N$(e.property))),t)}function ZY(e){return e.object.type==="MemberExpression"?ZY(e.object):e.object.name==="datum"}function JY(e){const t=OR(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&ZY(r)&&n.add(N$(r).slice(1).join("."))}),n}class Yd extends xt{constructor(n,r,i){super(n);ee(this,"model");ee(this,"filter");ee(this,"expr");ee(this,"_dependentFields");this.model=r,this.filter=i,this.expr=Uv(this.model,this.filter,this),this._dependentFields=JY(this.expr)}clone(){return new Yd(null,this.model,qe(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function jCe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=Dt(o.name),a=o.select,l=ke(a)?a:a.type,u=Ee(a)?qe(a):{type:l},f=r[l];for(const g in f)g==="fields"||g==="encodings"||(g==="mark"&&(u.mark={...f.mark,...u.mark}),(u[g]===void 0||u[g]===!0)&&(u[g]=qe(f[g]??u[g])));const d=n[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:ke(u.on)?Fl(u.on,"scope"):Se(qe(u.on))};if(Go(d)&&(i++,i>1)){delete n[s];continue}const p=qe(o);for(const g of Wx)g.defined(d)&&g.parse&&g.parse(e,d,p)}return i>1&&he(iSe),n}function eX(e,t,n,r="datum"){const i=ke(t)?t:t.param,o=Dt(i),s=ge(o+lc);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const p=n??e.component.data.raw,g=a.project.timeUnit.clone();p.parent?g.insertAsParentOf(p):p.parent=g}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ge(a.resolve)})`,f=`${l}${s}, ${r}${u}`,d=`length(data(${s}))`;return t.empty===!1?`${d} && ${f}`:`!${d} || ${f}`}function tX(e,t,n){const r=Dt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&he(oSe(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,he(sSe(a,i,n,o))):o=a[0].field}return`${s.name}[${ge(Ni(o))}]`}function BCe(e,t){for(const[n,r]of wl(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Mr(new Yd(t,e,{param:n}),i,Bt.Lookup,e.component.data.outputNodeRefCounts)}}function Uv(e,t,n){return tg(t,r=>ke(r)?r:gke(r)?eX(e,r,n):fG(r))}function UCe(e,t){if(e)return ie(e)&&!Ya(e)?e.map(n=>QT(n,t)).join(", "):e}function Ak(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function zp(e,t,n,r={header:!1}){var d,p;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const g in f){const y=g,v=bEe[y],x=f[y];if(v&&v!==t&&v!=="both")delete f[y];else if(Am(x)){const{condition:w,...S}=x,E=Se(w),C=l8[y];if(C){const{vgProp:$,part:R}=C,A=[...E.map(N=>{const{test:M,...I}=N;return{test:Uv(null,M),...I}}),S];Ak(f,R,$,A),delete f[y]}else if(C===null){const $={signal:E.map(R=>{const{test:A,...N}=R;return`${Uv(null,A)} ? ${HP(N)} : `}).join("")+HP(S)};f[y]=$}}else if(Ne(x)){const w=l8[y];if(w){const{vgProp:S,part:E}=w;Ak(f,E,S,x),delete f[y]}}Ze(["labelAlign","labelBaseline"],y)&&f[y]===null&&delete f[y]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:g}=f.encode;f.encode={...g?{grid:g}:{}},kt(f.encode)&&delete f.encode}return{scale:s,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Qt(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let y=a;(p=(d=f.encode)==null?void 0:d.labels)!=null&&p.update&&Ne(f.encode.labels.update.text)&&(y=ec(a,"datum.label",f.encode.labels.update.text.signal)),Ak(f,"labels","text",{signal:y})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const y of UG)e.hasAxisPart(y)||delete f.encode[y];kt(f.encode)&&delete f.encode}const g=UCe(l,n);return{scale:s,orient:o,grid:!1,...g?{title:g}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Qt(u,0)}}}}function nX(e){const{axes:t}=e.component,n=[];for(const r of ha)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function qCe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>zp(i,"grid",t)),...r.map(i=>zp(i,"grid",t)),...n.map(i=>zp(i,"main",t)),...r.map(i=>zp(i,"main",t))].filter(i=>i)}function O8(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ue(s),...ue(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${o}" ? ${no(s[f])} : ${no(a[f])}`};return u}return t[i]})])}function WCe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:gG(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=Ne(n)?"axisOrient":`axis${ym(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:O8(a,r,e,n),vgAxisConfig:O8(l,r,e,n),axisConfigStyle:VCe([...l,...a],r)}}function VCe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=Se(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function F$(e,t,n,r={}){var o;const i=qH(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const P8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??HCe(n,e),gridScale:({model:e,channel:t})=>GCe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||iX(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||rX(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??XCe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??KCe(t.type,n,pe(t)&&!!t.timeUnit,pe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??ZCe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??JCe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=oX(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return VH(i?[s8(i)]:[],pe(s)?[s8(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>e$e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??t$e(n,t)};function HCe(e,t){return!kn(e)&&pe(t)&&!Ct(t==null?void 0:t.bin)&&!An(t==null?void 0:t.bin)}function GCe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function YCe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Ne(o)?o:Rg(o);{const{configValue:s}=F$("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?Rg(s):n===Pt&&Ze([zT,LT],e.type)&&!(pe(e)&&e.timeUnit)?270:void 0}}function M$(e){return`(((${e.signal} % 360) + 360) % 360)`}function rX(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ne(e)){const i=M$(e),o=Ne(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ne(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ne(e)){const i=M$(e),o=Ne(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ne(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function iX(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Ne(e)){const s=M$(e),a=Ne(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ne(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function XCe(e,t){if(t==="x"&&Ze(["quantitative","temporal"],e))return!0}function KCe(e,t,n,r){if(n&&!Ee(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function QCe(e){return e==="x"?"bottom":"left"}function ZCe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!kn(t)&&t!=="log"){if(pe(e)){if(Ct(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ze(["month","hours","day","quarter"],(i=Sn(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function JCe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(pe(t)){const{timeUnit:n}=t;if(n){const r=lG(n);if(r)return{signal:r}}}}function oX(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return HH(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function e$e(e,t){const n=e.values;if(ie(n))return BG(t,n);if(Ne(n))return n}function t$e(e,t){return e==="rect"&&Ov(t)?1:0}class xd extends xt{constructor(n,r){super(n);ee(this,"transform");ee(this,"_dependentFields");this.transform=r,this._dependentFields=JY(this.transform.calculate)}clone(){return new xd(null,qe(this.transform))}static parseAllForSortIndex(n,r){return r.forEachFieldDef((i,o)=>{if(Cc(i)&&NG(i.sort)){const{field:s,timeUnit:a}=i,l=i.sort,u=l.map((f,d)=>`${fG({field:s,timeUnit:a,equal:f})} ? ${d} : `).join("")+l.length;n=new xd(n,{calculate:u,as:bd(i,o,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tt(this.transform)}`}}function bd(e,t,n){return be(e,{prefix:t,suffix:"sort_index",...n})}function Vx(e,t){return Ze(["top","bottom"],t)?"column":Ze(["left","right"],t)||e==="row"?"row":"column"}function wd(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Qt((t||{})[e],i[e],n.header[e])}function Hx(e,t,n,r){const i={};for(const o of e){const s=wd(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const yN=["row","column"],vN=["header","footer"];function n$e(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=Hx(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=Vx(t,a),u=Rg(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...aX(u,l),...sX(l,u,o),...lX(r,i,t,UEe,sY)}}}function sX(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=iX(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function aX(e,t){const n=rX(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function r$e(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of vN)if(n[i])for(const o of n[i]){const s=o$e(e,t,i,n,o);s!=null&&r.push(s)}return r}function i$e(e,t){const{sort:n}=e;return Ks(n)?{field:be(n,{expr:"datum"}),order:n.order??"ascending"}:ie(n)?{field:bd(e,t,{expr:"datum"}),order:"ascending"}:{field:be(e,{expr:"datum"}),order:n??"ascending"}}function D$(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=Hx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=GT({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=Vx(t,a);return{text:{signal:l?ec(ec(l,"datum.label",u),"datum.value",be(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...aX(o,f),...sX(f,o,s),...lX(n,e,t,qEe,aY)}}function o$e(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:d}=Hx(["labelOrient"],s.header,a,t);(t==="row"&&!Ze(["top","bottom"],d)||t==="column"&&!Ze(["left","right"],d))&&(o=D$(s,t,a))}const l=ni(e)&&!Em(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(o||f){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:i$e(s,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const s$e={column:{start:0,end:1},row:{start:1,end:0}};function a$e(e,t){return s$e[t][e]}function l$e(e,t){const n={};for(const r of ki){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=Hx(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=Vx(r,s),l=a$e(o,a);l!==void 0&&(n[a]=l)}}return kt(n)?void 0:n}function lX(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=wd(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function xN(e){return[...S1(e,"width"),...S1(e,"height"),...S1(e,"childWidth"),...S1(e,"childHeight")]}function S1(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(kn(s)&&kc(a)){const l=e.scaleName(n);return ni(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[I8(l,a)]:[I8(l,a),{name:i,update:uX(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=k$(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function I8(e,t){const n=`${e}_step`;return Ne(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function uX(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Qt(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${no(s)}, ${no(o)}) * ${e}_step`}function cX(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function fX(e,t){return ue(e).reduce((n,r)=>({...n,...Gd({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Tt(i.value),invalidValueRef:void 0})}),{})}function dX(e,t){if(ni(t))return e==="theta"?"independent":"shared";if(Qd(t))return"shared";if(CN(t))return Zt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function bN(e,t){const n=e.scale[t],r=Zt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&he(ISe(t)),"independent"):e[r][t]||"shared"}const u$e={...HEe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hX=ue(u$e);class c$e extends ga{}const L8={symbols:f$e,gradient:d$e,labels:h$e,entries:p$e};function f$e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,f=s.filled&&u!=="trail";let d={...Vwe({},n,Bke),...zY(n,{filled:f})};const p=i.get("symbolOpacity")??l.legend.symbolOpacity,g=i.get("symbolFillColor")??l.legend.symbolFillColor,y=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,v=p===void 0?pX(a.opacity)??s.opacity:void 0;if(d.fill){if(r==="fill"||f&&r===Ir)delete d.fill;else if(fe(d.fill,"field"))g?delete d.fill:(d.fill=Tt(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Tt(v??1));else if(ie(d.fill)){const x=O$(a.fill??a.color)??s.fill??(f&&s.color);x&&(d.fill=Tt(x))}}if(d.stroke){if(r==="stroke"||!f&&r===Ir)delete d.stroke;else if(fe(d.stroke,"field")||y)delete d.stroke;else if(ie(d.stroke)){const x=Qt(O$(a.stroke||a.color),s.stroke,f?s.color:void 0);x&&(d.stroke={value:x})}}if(r!==da){const x=pe(t)&&mX(n,i,t);x?d.opacity=[{test:x,...Tt(v??1)},Tt(l.legend.unselectedOpacity)]:v&&(d.opacity=Tt(v))}return d={...d,...e},kt(d)?void 0:d}function d$e(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?pX(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Tt(u)),a={...a,...e},kt(a)?void 0:a}function h$e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=pe(t)?mX(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=o;let d;sc(f)?d=ro({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:s}):u===void 0&&f===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?d=ro({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&pe(t)&&t.timeUnit===void 0&&(d=ro({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...d?{text:d}:{},...e};return kt(p)?void 0:p}function p$e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function pX(e){return gX(e,(t,n)=>Math.max(t,n.value))}function O$(e){return gX(e,(t,n)=>Qt(t,n.value))}function gX(e,t){if(lEe(e))return Se(e.condition).reduce(t,e.value);if(fo(e))return e.value}function mX(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ge(n.field);return r.map(o=>`(!length(data(${ge(Dt(o)+lc)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const z8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return AG(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return RG(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??w$e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??S$e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??m$e(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Lf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(If(n)&&Uo(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>g$e(t,e)};function g$e(e,t){const n=e.values;if(ie(n))return BG(t,n);if(Ne(n))return n}function m$e(e,t,n,r){if(t!=="shape"){const i=O$(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function y$e(e){const{legend:t}=e;return Qt(t.type,v$e(e))}function v$e({channel:e,timeUnit:t,scaleType:n}){if(If(e)){if(Ze(["quarter","month","day"],t))return"symbol";if(Uo(n))return"gradient"}return"symbol"}function x$e({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??b$e(n,t)}function b$e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function w$e({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Uo(i))return n==="horizontal"?r==="top"||r==="bottom"?j8(t,"width",s,o):s:j8(t,"height",l,a)}function j8(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function S$e(e){if(Ze(["quantile","threshold","log","symlog"],e))return"greedy"}function yX(e){const t=jt(e)?k$e(e):$$e(e);return e.component.legends=t,t}function k$e(e){const{encoding:t}=e,n={};for(const r of[Ir,...uY]){const i=un(t[r]);!i||!e.getScaleComponent(r)||r===Lr&&pe(i)&&i.type===Hd||(n[r]=C$e(e,r))}return n}function E$e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function _$e(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function C$e(e,t){var C;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new c$e({},E$e(e,t));OCe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=un(i[t]),d=pe(f)?(C=Sn(f.timeUnit))==null?void 0:C.unit:void 0,p=n.orient||o.legend.orient||"right",g=y$e({legend:n,channel:t,timeUnit:d,scaleType:u}),y=x$e({legend:n,legendType:g,orient:p,legendConfig:s}),v={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:s,config:o,scaleType:u,orient:p,legendType:g,direction:y};for(const $ of hX){if(g==="gradient"&&$.startsWith("symbol")||g==="symbol"&&$.startsWith("gradient"))continue;const R=$ in z8?z8[$](v):n[$];if(R!==void 0){const A=_$e(R,$,n,e.fieldDef(t));(A||o.legend[$]===void 0)&&a.set($,R,A)}}const x=(n==null?void 0:n.encoding)??{},w=a.get("selections"),S={},E={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:g};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const R=fX(x[$]??{},e),A=$ in L8?L8[$](R,E):R;A!==void 0&&!kt(A)&&(S[$]={...w!=null&&w.length&&pe(f)?{name:`${Dt(f.field)}_legend_${$}`}:{},...w!=null&&w.length?{interactive:!!w}:{},update:A})}return kt(S)||a.set("encode",S,!!(n!=null&&n.encoding)),a}function $$e(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){yX(r);for(const i of ue(r.component.legends))n.legend[i]=bN(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=vX(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ue(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function vX(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of hX){const f=El(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,p)=>{switch(u){case"symbolType":return A$e(d,p);case"title":return GH(d,p);case"type":return i=!0,Hr("symbol")}return jx(d,p,u,"legend")});e.setWithExplicit(u,f)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&Tv(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Tv(e.explicit,["encode","gradient"])),e}function A$e(e,t){return t.value==="circle"?t:e}function R$e(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function xX(e){const t=e.component.legends,n={};for(const i of ue(t)){const o=e.getScaleComponent(i),s=pt(o.get("domains"));if(n[s])for(const a of n[s])vX(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return tn(n).flat().map(i=>T$e(i,e.config)).filter(i=>i!==void 0)}function T$e(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const f of uY)o[f]&&delete u[f]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&Ne(o.encode.labels.update.text)&&(u=ec(r,"datum.label",o.encode.labels.update.text.signal)),R$e(o,"labels","text",{signal:u})}return o}}function N$e(e){return Qd(e)||CN(e)?F$e(e):bX(e)}function F$e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),bX(e))}function bX(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Ne(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ze(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const M$e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wX extends ga{constructor(n,r,i,o){super({...r},{name:n});ee(this,"specifiedProjection");ee(this,"size");ee(this,"data");ee(this,"merged",!1);this.specifiedProjection=r,this.size=i,this.data=o}get isFit(){return!!this.data}}function SX(e){e.component.projection=jt(e)?D$e(e):I$e(e)}function D$e(e){if(e.hasProjection){const t=Rn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?O$e(e):void 0,o=new wX(e.projectionName(!0),{...Rn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function O$e(e){const t=[],{encoding:n}=e;for(const r of[[ko,So],[Fi,Eo]])(un(n[r[0]])||un(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Lr)&&e.typedFieldDef(Lr).type===Hd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Bt.Main)),t}function P$e(e,t){const n=fT(M$e,i=>!!(!_e(e.explicit,i)&&!_e(t.explicit,i)||_e(e.explicit,i)&&_e(t.explicit,i)&&Qr(e.get(i),t.get(i))));if(Qr(e.size,t.size)){if(n)return e;if(Qr(e.explicit,{}))return t;if(Qr(t.explicit,{}))return e}return null}function I$e(e){if(e.children.length===0)return;let t;for(const r of e.children)SX(r);const n=fT(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=P$e(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new wX(r,t.specifiedProjection,t.size,qe(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function L$e(e,t,n,r){if($m(t,n)){const i=jt(e)?e.axis(n)??e.legend(n)??{}:{},o=be(t,{expr:"datum"}),s=be(t,{expr:"datum",binSuffix:"end"});return{formulaAs:be(t,{binSuffix:"range",forAs:!0}),formula:km(o,s,i.format,i.formatType,r)}}return{}}function kX(e,t){return`${zH(e)}_${t}`}function z$e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wN(e,t,n){const r=Dx(n,void 0)??{},i=kX(r,t);return e.getName(`${i}_bins`)}function j$e(e){return"as"in e}function B8(e,t,n){let r,i;j$e(e)?r=ke(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[be(e,{forAs:!0}),be(e,{binSuffix:"end",forAs:!0})];const o={...Dx(t,void 0)},s=kX(o,e.field),{signal:a,extentSignal:l}=z$e(n,s);if(kx(o.extent)){const f=o.extent;i=tX(n,f.param,f),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class Yo extends xt{constructor(n,r){super(n);ee(this,"bins");this.bins=r}clone(){return new Yo(null,qe(this.bins))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{if(xr(s)&&Ct(s.bin)){const{key:l,binComponent:u}=B8(s,s.bin,r);o[l]={...u,...o[l],...L$e(r,s,a,r.config)}}return o},{});return kt(i)?null:new Yo(n,i)}static makeFromTransform(n,r,i){const{key:o,binComponent:s}=B8(r,r.bin,i);return new Yo(n,{[o]:s})}merge(n,r){for(const i of ue(n.bins))i in this.bins?(r(n.bins[i].signal,this.bins[i].signal),this.bins[i].as=Bo([...this.bins[i].as,...n.bins[i].as],tt)):this.bins[i]=n.bins[i];for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}producedFields(){return new Set(tn(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(tn(this.bins).map(n=>n.field))}hash(){return`Bin ${tt(this.bins)}`}assemble(){return tn(this.bins).flatMap(n=>{const r=[],[i,...o]=n.as,{extent:s,...a}=n.bin,l={type:"bin",field:Ni(n.field),as:i,signal:n.signal,...kx(s)?{extent:null}:{extent:s},...n.span?{span:{signal:`span(${n.span})`}}:{},...a};!s&&n.extentSignal&&(r.push({type:"extent",field:Ni(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),r.push(l);for(const u of o)for(let f=0;f<2;f++)r.push({type:"formula",expr:be({field:i[f]},{expr:"datum"}),as:u[f]});return n.formula&&r.push({type:"formula",expr:n.formula,as:n.formulaAs}),r})}}function B$e(e,t,n,r){var o;const i=jt(r)?r.encoding[gs(t)]:void 0;if(xr(n)&&jt(r)&&MG(n,i,r.markDef,r.config)){e.add(be(n,{})),e.add(be(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=kl({fieldDef:n,markDef:a,config:l});Tg(s)&&u!==.5&&Zt(t)&&(e.add(be(n,{suffix:Bx})),e.add(be(n,{suffix:Ux}))),n.bin&&$m(n,t)&&e.add(be(n,{binSuffix:"range"}))}else if(TH(t)){const s=RH(t);e.add(r.getName(s))}else e.add(be(n));return Cc(n)&&Ake((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function U$e(e,t){for(const n of ue(t)){const r=t[n];for(const i of ue(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class oo extends xt{constructor(n,r,i){super(n);ee(this,"dimensions");ee(this,"measures");this.dimensions=r,this.measures=i}clone(){return new oo(null,new Set(this.dimensions),qe(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,r){let i=!1;r.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const o={},s=new Set;return!i||(r.forEachFieldDef((a,l)=>{const{aggregate:u,field:f}=a;if(u)if(u==="count")o["*"]??(o["*"]={}),o["*"].count=new Set([be(a,{forAs:!0})]);else{if(ra(u)||zl(u)){const d=ra(u)?"argmin":"argmax",p=u[d];o[p]??(o[p]={}),o[p][d]=new Set([be({op:d,field:p},{forAs:!0})])}else o[f]??(o[f]={}),o[f][u]=new Set([be(a,{forAs:!0})]);ms(l)&&r.scaleDomain(l)==="unaggregated"&&(o[f]??(o[f]={}),o[f].min=new Set([be({field:f,aggregate:"min"},{forAs:!0})]),o[f].max=new Set([be({field:f,aggregate:"max"},{forAs:!0})]))}else B$e(s,l,a,r)}),s.size+ue(o).length===0)?null:new oo(n,s,o)}static makeFromTransform(n,r){var s;const i=new Set,o={};for(const a of r.aggregate){const{op:l,field:u,as:f}=a;l&&(l==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([f||be(a,{forAs:!0})])):(o[u]??(o[u]={}),(s=o[u])[l]??(s[l]=new Set),o[u][l].add(f||be(a,{forAs:!0}))))}for(const a of r.groupby??[])i.add(a);return i.size+ue(o).length===0?null:new oo(n,i,o)}merge(n){return wH(this.dimensions,n.dimensions)?(U$e(this.measures,n.measures),!0):(JSe("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ue(this.measures)])}producedFields(){const n=new Set;for(const r of ue(this.measures))for(const i of ue(this.measures[r])){const o=this.measures[r][i];o.size===0?n.add(`${i}_${r}`):o.forEach(n.add,n)}return n}hash(){return`Aggregate ${tt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],r=[],i=[];for(const s of ue(this.measures))for(const a of ue(this.measures[s]))for(const l of this.measures[s][a])i.push(l),n.push(a),r.push(s==="*"?null:Ni(s));return{type:"aggregate",groupby:[...this.dimensions].map(Ni),ops:n,fields:r,as:i}}}class Xd extends xt{constructor(n,r,i,o){super(n);ee(this,"model");ee(this,"name");ee(this,"data");ee(this,"column");ee(this,"row");ee(this,"facet");ee(this,"childModel");this.model=r,this.name=i,this.data=o;for(const s of ki){const a=r.facet[s];if(a){const{bin:l,sort:u}=a;this[s]={name:r.getName(`${s}_domain`),fields:[be(a),...Ct(l)?[be(a,{binSuffix:"end"})]:[]],...Ks(u)?{sortField:u}:ie(u)?{sortIndexField:bd(a,s)}:{}}}}this.childModel=r.child}hash(){let n="Facet";for(const r of ki)this[r]&&(n+=` ${r.charAt(0)}:${tt(this[r])}`);return n}get fields(){var r;const n=[];for(const i of ki)(r=this[i])!=null&&r.fields&&n.push(...this[i].fields);return n}dependentFields(){const n=new Set(this.fields);for(const r of ki)this[r]&&(this[r].sortField&&n.add(this[r].sortField.field),this[r].sortIndexField&&n.add(this[r].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const r of ha){const i=this.childModel.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(kn(o)&&kc(s)){const a=Gx(this.childModel,r),l=_N(a);l?n[r]=l:he(_T(r))}}}return n}assembleRowColumnHeaderData(n,r,i){const o={row:"y",column:"x",facet:void 0}[n],s=[],a=[],l=[];o&&i&&i[o]&&(r?(s.push(`distinct_${i[o]}`),a.push("max")):(s.push(i[o]),a.push("distinct")),l.push(`distinct_${i[o]}`));const{sortField:u,sortIndexField:f}=this[n];if(u){const{op:d=Nx,field:p}=u;s.push(p),a.push(d),l.push(be(u,{forAs:!0}))}else f&&(s.push(f),a.push("max"),l.push(f));return{name:this[n].name,source:r??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...s.length?{fields:s,ops:a,as:l}:{}}]}}assembleFacetHeaderData(n){var u,f;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],s={};for(const d of yN){for(const p of vN){const g=((u=i[d])==null?void 0:u[p])??[];for(const y of g)if(((f=y.axes)==null?void 0:f.length)>0){s[d]=!0;break}}if(s[d]){const p=`length(data("${this.facet.name}"))`,g=d==="row"?r?{signal:`ceil(${p} / ${r})`}:1:r?{signal:`min(${p}, ${r})`}:{signal:p};o.push({name:`${this.facet.name}_${d}`,transform:[{type:"sequence",start:0,stop:g}]})}}const{row:a,column:l}=s;return(a||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,n)),o}assemble(){const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:s,facet:a}=this;if(o&&s&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),u=l.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:u}]})}for(const l of[Xs,Ys])this[l]&&n.push(this.assembleRowColumnHeaderData(l,r,i));if(a){const l=this.assembleFacetHeaderData(i);l&&n.push(...l)}return n}}function U8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function q$e(e,t){const n=pT(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=U8(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=U8(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return he(lSe(t)),null}function W$e(e){const t={};return uy(e.filter,n=>{if(cG(n)){let r=null;NT(n)?r=Xr(n.equal):MT(n)?r=Xr(n.lte):FT(n)?r=Xr(n.lt):DT(n)?r=Xr(n.gt):OT(n)?r=Xr(n.gte):PT(n)?r=n.range[0]:IT(n)&&(r=(n.oneOf??n.in)[0]),r&&(Ec(r)?t[n.field]="date":lt(r)?t[n.field]="number":ke(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function V$e(e){const t={};function n(r){md(r)?t[r.field]="date":r.type==="quantitative"&&Pwe(r.aggregate)?t[r.field]="number":cd(r.field)>1?r.field in t||(t[r.field]="flatten"):Cc(r)&&Ks(r.sort)&&cd(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((jt(e)||ni(e))&&e.forEachFieldDef((r,i)=>{if(xr(r))n(r);else{const o=wc(i),s=e.fieldDef(o);n({...r,type:s.type})}}),jt(e)){const{mark:r,markDef:i,encoding:o}=e;if(jl(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];pe(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function H$e(e){const t={};if(jt(e)&&e.component.selection)for(const n of ue(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cd(i.field)>1&&(t[i.field]="flatten")}return t}class Xn extends xt{constructor(n,r){super(n);ee(this,"_parse");this._parse=r}clone(){return new Xn(null,qe(this._parse))}hash(){return`Parse ${tt(this._parse)}`}static makeExplicit(n,r,i){var a;let o={};const s=r.data;return!cl(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(o=s.format.parse),this.makeWithAncestors(n,o,{},i)}static makeWithAncestors(n,r,i,o){for(const l of ue(i)){const u=o.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===i[l]||u.value==="derived"||i[l]==="flatten"?delete i[l]:he(ZP(l,i[l],u.value)))}for(const l of ue(r)){const u=o.get(l);u!==void 0&&(u===r[l]?delete r[l]:he(ZP(l,r[l],u)))}const s=new ga(r,i);o.copyAll(s);const a={};for(const l of ue(s.combine())){const u=s.get(l);u!==null&&(a[l]=u)}return ue(a).length===0||o.parseNothing?null:new Xn(n,a)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const r of ue(this._parse)){const i=this._parse[r];cd(r)===1&&(n[r]=i)}return n}producedFields(){return new Set(ue(this._parse))}dependentFields(){return new Set(ue(this._parse))}assembleTransforms(n=!1){return ue(this._parse).filter(r=>n?cd(r)>1:!0).map(r=>{const i=q$e(r,this._parse[r]);return i?{type:"formula",expr:i,as:Wd(r)}:null}).filter(r=>r!==null)}}class _l extends xt{clone(){return new _l(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([po])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:po}}}class Tm extends xt{constructor(n,r){super(n);ee(this,"params");this.params=r}clone(){return new Tm(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Nm extends xt{constructor(n,r){super(n);ee(this,"params");this.params=r}clone(){return new Nm(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class uc extends xt{constructor(n){super(null);ee(this,"_data");ee(this,"_name");ee(this,"_generator");n??(n={name:"source"});let r;if(cl(n)||(r=n.format?{...ti(n.format,["parse"])}:{}),Ng(n))this._data={values:n.values};else if(yd(n)){if(this._data={url:n.url},!r.type){let i=/(?:\.([^.]+))?$/.exec(n.url)[1];Ze(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else $Y(n)?this._data={values:[{type:"Sphere"}]}:(_Y(n)||cl(n))&&(this._data={});this._generator=cl(n),n.name&&(this._name=n.name),r&&!kt(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function SN(e){return e instanceof uc||e instanceof Tm||e instanceof Nm}var Bf;class kN{constructor(){N6(this,Bf);Jw(this,Bf,!1)}setModified(){Jw(this,Bf,!0)}get modifiedFlag(){return T6(this,Bf)}}Bf=new WeakMap;class $c extends kN{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class EN extends kN{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class G$e extends EN{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ue(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Y$e extends EN{constructor(n){super();ee(this,"requiresSelectionId");this.requiresSelectionId=n&&mN(n)}run(n){n instanceof _l&&(this.requiresSelectionId&&(SN(n.parent)||n.parent instanceof oo||n.parent instanceof Xn)||(this.setModified(),n.remove()))}}class X$e extends kN{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ho&&(r=t.producedFields(),dT(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class K$e extends EN{constructor(){super()}run(t){t instanceof Mr&&!t.isRequired()&&(this.setModified(),t.remove())}}class Q$e extends $c{run(t){if(!SN(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Xn)if(t instanceof Xn)this.setModified(),t.merge(n);else{if(hT(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Z$e extends $c{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Xn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of ue(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!kt(i)){this.setModified();const s=new Xn(t,i);for(const a of n){if(a instanceof Xn)for(const l of ue(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Xn&&ue(a.parse).length===0&&a.remove()}}}}}class J$e extends $c{run(t){t instanceof Mr||t.numChildren()>0||t instanceof Xd||t instanceof uc||(this.setModified(),t.remove())}}class e3e extends $c{run(t){const n=t.children.filter(i=>i instanceof Ho),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class t3e extends $c{run(t){const n=t.children.filter(i=>i instanceof oo),r={};for(const i of n){const o=tt(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of ue(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class n3e extends $c{constructor(n){super();ee(this,"model");this.model=n}run(n){const r=!(SN(n)||n instanceof Yd||n instanceof Xn||n instanceof _l),i=[],o=[];for(const s of n.children)s instanceof Yo&&(r&&!hT(n.producedFields(),s.dependentFields())?i.push(s):o.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof Yo?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(o.length>1){const s=o.pop();for(const a of o)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class r3e extends $c{run(t){const n=[...t.children];if(!ud(n,s=>s instanceof Mr)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Mr){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Mr)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Ac extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new Ac(null,qe(this.transform))}addDimensions(n){this.transform.groupby=Bo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??be(n)}hash(){return`JoinAggregateTransform ${tt(this.transform)}`}assemble(){const n=[],r=[],i=[];for(const s of this.transform.joinaggregate)r.push(s.op),i.push(this.getDefaultName(s)),n.push(s.field===void 0?null:s.field);const o=this.transform.groupby;return{type:"joinaggregate",as:i,ops:r,fields:n,...o!==void 0?{groupby:o}:{}}}}class Sd extends xt{constructor(n,r){super(n);ee(this,"filter");this.filter=r}clone(){return new Sd(null,{...this.filter})}static make(n,r,i){const{config:o,markDef:s}=r,{marks:a,scales:l}=i;if(a==="include-invalid-values"&&l==="include-invalid-values")return null;const u=r.reduceFieldDef((f,d,p)=>{const g=ms(p)&&r.getScaleComponent(p);if(g){const y=g.get("type"),{aggregate:v}=d,x=WT({scaleChannel:p,markDef:s,config:o,scaleType:y,isCountAggregate:Sx(v)});x!=="show"&&x!=="always-valid"&&(f[d.field]=d)}return f},{});return ue(u).length?new Sd(n,u):null}dependentFields(){return new Set(ue(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tt(this.filter)}`}assemble(){const n=ue(this.filter).reduce((r,i)=>{const o=this.filter[i],s=be(o,{expr:"datum"});return o!==null&&(o.type==="temporal"?r.push(`(isDate(${s}) || (${P$(s)}))`):o.type==="quantitative"&&r.push(P$(s))),r},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function P$(e){return`isValid(${e}) && isFinite(+${e})`}function i3e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=be(r);return i&&t.push(i),t},[])}function o3e(e){return ie(e)&&e.every(t=>ke(t))&&e.length>1}class Zs extends xt{constructor(n,r){super(n);ee(this,"_stack");this._stack=r}clone(){return new Zs(null,qe(this._stack))}static makeFromTransform(n,r){const{stack:i,groupby:o,as:s,offset:a="zero"}=r,l=[],u=[];if(r.sort!==void 0)for(const p of r.sort)l.push(p.field),u.push(Qt(p.order,"ascending"));const f={field:l,order:u};let d;return o3e(s)?d=s:ke(s)?d=[s,`${s}_end`]:d=[`${r.stack}_start`,`${r.stack}_end`],new Zs(n,{dimensionFieldDefs:[],stackField:i,groupby:o,offset:a,sort:f,facetby:[],as:d})}static makeFromEncoding(n,r){const i=r.stack,{encoding:o}=r;if(!i)return null;const{groupbyChannels:s,fieldChannel:a,offset:l,impute:u}=i,f=s.map(y=>{const v=o[y];return ho(v)}).filter(y=>!!y),d=i3e(r),p=r.encoding.order;let g;if(ie(p)||pe(p))g=WH(p);else{const y=DG(p)?p.sort:a==="y"?"descending":"ascending";g=d.reduce((v,x)=>(v.field.includes(x)||(v.field.push(x),v.order.push(y)),v),{field:[],order:[]})}return new Zs(n,{dimensionFieldDefs:f,stackField:r.vgField(a),facetby:[],stackby:d,sort:g,offset:l,impute:u,as:[r.vgField(a,{suffix:"start",forAs:!0}),r.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:r,groupby:i}=this._stack;return n.length>0?n.map(o=>o.bin?r?[be(o,{binSuffix:"mid"})]:[be(o,{}),be(o,{binSuffix:"end"})]:[be(o)]).flat():i??[]}assemble(){const n=[],{facetby:r,dimensionFieldDefs:i,stackField:o,stackby:s,sort:a,offset:l,impute:u,as:f}=this._stack;if(u)for(const d of i){const{bandPosition:p=.5,bin:g}=d;if(g){const y=be(d,{expr:"datum"}),v=be(d,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${P$(y)} ? ${p}*${y}+${1-p}*${v} : ${y}`,as:be(d,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:o,groupby:[...s,...r],key:be(d,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:o,sort:a,as:f,offset:l}),n}}class Kd extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new Kd(null,qe(this.transform))}addDimensions(n){this.transform.groupby=Bo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(r=>n.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??be(n)}hash(){return`WindowTransform ${tt(this.transform)}`}assemble(){const n=[],r=[],i=[],o=[];for(const p of this.transform.window)r.push(p.op),i.push(this.getDefaultName(p)),o.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(p=>kT(p)))return{type:"joinaggregate",as:i,ops:r,fields:n,...a!==void 0?{groupby:a}:{}};const l=[],u=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)l.push(p.field),u.push(p.order??"ascending");const f={field:l,order:u},d=this.transform.ignorePeers;return{type:"window",params:o,as:i,ops:r,fields:n,sort:f,...d!==void 0?{ignorePeers:d}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function s3e(e){function t(n){if(!(n instanceof Xd)){const r=n.clone();if(r instanceof Mr){const i=L$+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof oo||r instanceof Zs||r instanceof Kd||r instanceof Ac)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function I$(e){if(e instanceof Xd)if(e.numChildren()===1&&!(e.children[0]instanceof Mr)){const t=e.children[0];(t instanceof oo||t instanceof Zs||t instanceof Kd||t instanceof Ac)&&t.addDimensions(e.fields),t.swapWithParent(),I$(e)}else{const t=e.model.component.data.main;EX(t);const n=s3e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(I$)}function EX(e){if(e instanceof Mr&&e.type===Bt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Xd||(t.swapWithParent(),EX(e))}}const L$="scale_",k1=5;function z$(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!z$(t.children))return!1}return!0}function Wi(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function q8(e,t,n){let r=e.sources,i=!1;return i=Wi(new K$e,r)||i,i=Wi(new Y$e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Wi(new J$e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Wi(new Q$e,r)||i,i=Wi(new n3e(t),r)||i,i=Wi(new X$e,r)||i,i=Wi(new Z$e,r)||i,i=Wi(new t3e,r)||i,i=Wi(new e3e,r)||i,i=Wi(new G$e,r)||i,i=Wi(new r3e,r)||i),e.sources=r,i}function a3e(e,t){z$(e.sources);let n=0,r=0;for(let i=0;i<k1&&q8(e,t,!0);i++)n++;e.sources.map(I$);for(let i=0;i<k1&&q8(e,t,!1);i++)r++;z$(e.sources),Math.max(n,r)===k1&&he(`Maximum optimization runs(${k1}) reached.`)}class mn{constructor(t){ee(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new mn(()=>t(n))}}function _X(e){jt(e)?l3e(e):u3e(e)}function l3e(e){const t=e.component.scales;for(const n of ue(t)){const r=f3e(e,n);if(t[n].setWithExplicit("domains",r),h3e(e,n),e.component.data.isFaceted){let o=e;for(;!ni(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Us(a)&&(a.data=L$+a.data.replace(L$,""))}}}function u3e(e){for(const n of e.children)_X(n);const t=e.component.scales;for(const n of ue(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=El(r,s.getWithExplicit("domains"),"domains","scale",j$);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&he(tSe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function c3e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=W8(t,n);if(!i){he(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=W8(t,n);if(i)return"unaggregated"}return e}function f3e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=c3e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&un(r.x2)?un(r.x)?El(qa(n,i,e,"x"),qa(n,i,e,"x2"),"domain","scale",j$):qa(n,i,e,"x2"):t==="y"&&un(r.y2)?un(r.y)?El(qa(n,i,e,"y"),qa(n,i,e,"y2"),"domain","scale",j$):qa(n,i,e,"y2"):qa(n,i,e,t)}function d3e(e,t,n){return e.map(r=>({signal:`{data: ${Ox(r,{timeUnit:n,type:t})}}`}))}function Rk(e,t,n){var i;const r=(i=Sn(n))==null?void 0:i.unit;return t==="temporal"||r?d3e(e,t,r):[e]}function qa(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=un(i[r]),{type:f}=u,d=u.timeUnit,p=oCe({invalid:ts("invalid",o,a),isPath:jl(s)});if($ke(t)){const v=qa(e,void 0,n,r),x=Rk(t.unionWith,f,d);return Po([...x,...v.value])}else{if(Ne(t))return Po([t]);if(t&&t!=="unaggregated"&&!yG(t))return Po(Rk(t,f,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Hr([[0,1]]);const v=n.requestDataName(p);return Hr([{data:v,field:n.vgField(r,{suffix:"start"})},{data:v,field:n.vgField(r,{suffix:"end"})}])}const g=ms(r)&&pe(u)?p3e(n,r,e):void 0;if(ys(u)){const v=Rk([u.datum],f,d);return Hr(v)}const y=u;if(t==="unaggregated"){const{field:v}=u;return Hr([{data:n.requestDataName(p),field:be({field:v,aggregate:"min"})},{data:n.requestDataName(p),field:be({field:v,aggregate:"max"})}])}else if(Ct(y.bin)){if(kn(e))return Hr(e==="bin-ordinal"?[]:[{data:Ag(g)?n.requestDataName(p):n.requestDataName(Bt.Raw),field:n.vgField(r,$m(y,r)?{binSuffix:"range"}:{}),sort:g===!0||!Ee(g)?{field:n.vgField(r,{}),op:"min"}:g}]);{const{bin:v}=y;if(Ct(v)){const x=wN(n,y.field,v);return Hr([new mn(()=>{const w=n.getSignalName(x);return`[${w}.start, ${w}.stop]`})])}else return Hr([{data:n.requestDataName(p),field:n.vgField(r,{})}])}}else if(y.timeUnit&&Ze(["time","utc"],e)){const v=i[gs(r)];if(MG(y,v,o,a)){const x=n.requestDataName(p),w=kl({fieldDef:y,fieldDef2:v,markDef:o,config:a}),S=Tg(s)&&w!==.5&&Zt(r);return Hr([{data:x,field:n.vgField(r,S?{suffix:Bx}:{})},{data:x,field:n.vgField(r,{suffix:S?Ux:"end"})}])}}return Hr(g?[{data:Ag(g)?n.requestDataName(p):n.requestDataName(Bt.Raw),field:n.vgField(r),sort:g}]:[{data:n.requestDataName(p),field:n.vgField(r)}])}function Tk(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Nx),...r?{field:Ni(r)}:{},...i?{order:i}:{}}}function h3e(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=yG(r)?r:void 0,s=Sc(i)&&kx(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function p3e(e,t,n){if(!kn(n))return;const r=e.fieldDef(t),i=r.sort;if(NG(i))return{op:"min",field:bd(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Ks(i)){const a=o&&!s.has(i.field);return Tk(i,a)}else if(oEe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:d}=u,p=o&&!s.has(d);if(ra(f)||zl(f))return Tk({field:be(u),order:l},p);if(kT(f)||!f)return Tk({op:f,field:d,order:l},p)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ze(["ascending",void 0],i))return!0}}function W8(e,t){const{aggregate:n,type:r}=e;return n?ke(n)&&!Lwe.has(n)?{valid:!1,reason:TSe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:NSe(e)}:{valid:!0}:{valid:!1,reason:RSe(e)}}function j$(e,t,n,r){return e.explicit&&t.explicit&&he(PSe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function g3e(e){const t=Bo(e.map(s=>{if(Us(s)){const{sort:a,...l}=s;return l}return s}),tt),n=Bo(e.map(s=>{if(Us(s)){const a=s.sort;return a!==void 0&&!Ag(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),tt);if(t.length===0)return;if(t.length===1){const s=e[0];if(Us(s)&&n.length>0){let a=n[0];if(n.length>1){he(e8);const l=n.filter(u=>Ee(u)&&"op"in u&&u.op!=="min");n.every(u=>Ee(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(Ee(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Bo(n.map(s=>Ag(s)||!("op"in s)||ke(s.op)&&_e(Dwe,s.op)?s:(he(LSe(s)),!0)),tt);let i;r.length===1?i=r[0]:r.length>1&&(he(e8),i=!0);const o=Bo(e.map(s=>Us(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function _N(e){if(Us(e)&&ke(e.field))return e.field;if(zwe(e)){let t;for(const n of e.fields)if(Us(n)&&ke(n.field)){if(!t)t=n.field;else if(t!==n.field)return he(zSe),t}return he(jSe),t}else if(jwe(e)){he(BSe);const t=e.fields[0];return ke(t)?t:void 0}}function Gx(e,t){const r=e.component.scales[t].get("domains").map(i=>(Us(i)&&(i.data=e.lookupDataSource(i.data)),i));return g3e(r)}function CX(e){return Qd(e)||CN(e)?e.children.reduce((t,n)=>t.concat(CX(n)),V8(e)):V8(e)}function V8(e){return ue(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:f,...d}=i,p=m3e(i.range,o,n,e),g=Gx(e,n),y=a?mCe(e,a,r,g):null;return t.push({name:o,type:s,...g?{domain:g}:{},...y?{domainRaw:y}:{},range:p,...f!==void 0?{reverse:f}:{},...d}),t},[])}function m3e(e,t,n,r){if(Zt(n)){if(kc(e))return{step:{signal:`${t}_step`}}}else if(Ee(e)&&Us(e))return{...e,data:r.lookupDataSource(e.data)};return e}class $X extends ga{constructor(n,r){super({},{name:n});ee(this,"merged",!1);this.setWithExplicit("type",r)}domainHasZero(){const n=this.get("type");if(Ze([Tn.LOG,Tn.TIME,Tn.UTC],n))return"definitely-not";const r=this.get("zero");if(r===!0||r===void 0&&Ze([Tn.LINEAR,Tn.SQRT,Tn.POW],n))return"definitely";const i=this.get("domains");if(i.length>0){let o=!1,s=!1,a=!1;for(const l of i){if(ie(l)){const u=l[0],f=l[l.length-1];if(lt(u)&&lt(f))if(u<=0&&f>=0){o=!0;continue}else{s=!0;continue}}a=!0}if(o)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const y3e=["range","scheme"];function v3e(e){const t=e.component.scales;for(const n of ST){const r=t[n];if(!r)continue;const i=x3e(n,e);r.setWithExplicit("range",i)}}function H8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=zr(t),s=e.getName(o);if(Ee(r)&&r.binned&&r.step!==void 0)return new mn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Ct(r)){const a=wN(e,i,r);return new mn(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function x3e(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const d of y3e)if(n[d]!==void 0){const p=b$(o,d),g=vG(e,d);if(!p)he(QH(o,d,e));else if(g)he(g);else switch(d){case"range":{const y=n.range;if(ie(y)){if(Zt(e))return Po(y.map(v=>{if(v==="width"||v==="height"){const x=t.getName(v),w=t.getSignalName.bind(t);return mn.fromName(w,x)}return v}))}else if(Ee(y))return Po({data:t.requestDataName(Bt.Main),field:y.field,sort:{op:"min",field:t.vgField(e)}});return Po(y)}case"scheme":return Po(b3e(n[d]))}}const s=e===Pt||e==="xOffset"?"width":"height",a=r[s];if(rs(a)){if(Zt(e))if(kn(o)){const d=RX(a,t,e);if(d)return Po({step:d})}else he(ZH(s));else if(bm(e)){const d=e===Ml?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const y=TX(a,o);if(y)return Po(y)}}}const{rangeMin:l,rangeMax:u}=n,f=w3e(e,t);return(l!==void 0||u!==void 0)&&b$(o,"rangeMin")&&ie(f)&&f.length===2?Po([l??f[0],u??f[1]]):Hr(f)}function b3e(e){return Cke(e)?{scheme:e.name,...ti(e,["name"])}:{scheme:e}}function AX(e,t,n,{center:r}={}){const i=zr(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===_n&&co(n)?r?[mn.fromName(a=>`${s(a)}/2`,o),mn.fromName(a=>`-${s(a)}/2`,o)]:[mn.fromName(s,o),0]:r?[mn.fromName(a=>`-${s(a)}/2`,o),mn.fromName(a=>`${s(a)}/2`,o)]:[0,mn.fromName(s,o)]}function w3e(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=un(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case Pt:case _n:{if(Ze(["point","band"],l)){const d=NX(e,n,r.view);if(rs(d))return{step:RX(d,t,e)}}return AX(e,t,l)}case Ml:case Vd:return S3e(e,t,l);case fa:{const d=_3e(i,r),p=C3e(i,n,t,r);return hd(l)?E3e(d,p,k3e(l,r,u,e)):[d,p]}case Di:return[0,Math.PI*2];case bc:return[0,360];case wo:return[0,new mn(()=>{const d=t.getSignalName(ni(t.parent)?"child_width":"width"),p=t.getSignalName(ni(t.parent)?"child_height":"height");return`min(${d},${p})/2`})];case Dl:return{step:1e3/r.scale.framesPerSecond};case Il:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ll:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Lr:return"symbol";case Ir:case hs:case ps:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case da:case Ol:case Pl:return[r.scale.minOpacity,r.scale.maxOpacity]}}function RX(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=vT(n),s=r[o];if(fY({step:e,offsetIsDiscrete:Ve(s)&&dG(s.type)})==="offset"&&VG(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,g=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${p}, ${g})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Wwe(d)})`}}else return e.step}function TX(e,t){if(fY({step:e,offsetIsDiscrete:kn(t)})==="offset")return{step:e.step}}function S3e(e,t,n){const r=e===Ml?"x":"y",i=t.getScaleComponent(r);if(!i)return AX(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=NX(r,t.size,t.config.view);if(rs(u)){const f=TX(u,n);if(f)return f}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(pe(u)&&u.timeUnit){const f=lG(u.timeUnit,y=>`scale('${s}', ${y})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,p=kl({fieldDef:u,markDef:a,config:l})-.5,g=p!==0?` + ${p}`:"";if(d){const y=Ne(d)?`${d.signal}/2${g}`:`${d/2+p}`,v=Ne(d)?`(1 - ${d.signal}/2)${g}`:`${1-d/2+p}`;return[{signal:`${y} * (${f})`},{signal:`${v} * (${f})`}]}return[0,{signal:f}]}return xH(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function NX(e,t,n){const r=e===Pt?"width":"height",i=t[r];return i||zv(n,r)}function k3e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ie(n)?n.length+1:(he(KSe(r)),3)}}function E3e(e,t,n){const r=()=>{const i=no(t),o=no(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return Ne(t)?new mn(r):{signal:r()}}function _3e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Ex("size",e))}const G8=.95;function C3e(e,t,n,r){const i={x:H8(n,"x"),y:H8(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=Y8(t,i,r.view);return lt(o)?o-1:new mn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=Y8(t,i,r.view);return lt(o)?Math.pow(G8*o,2):new mn(()=>`pow(${G8} * ${o.signal}, 2)`)}}throw new Error(Ex("size",e))}function Y8(e,t,n){const r=rs(e.width)?e.width.step:E$(n,"width"),i=rs(e.height)?e.height.step:E$(n,"height");return t.x||t.y?new mn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function FX(e,t){jt(e)?$3e(e,t):DX(e,t)}function $3e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of ue(n)){const l=s[a],u=n[a],f=e.getScaleComponent(a),d=un(i[a]),p=l[t],g=f.get("type"),y=f.get("padding"),v=f.get("paddingInner"),x=b$(g,t),w=vG(a,t);if(p!==void 0&&(x?w&&he(w):he(QH(g,t,a))),x&&w===void 0)if(p!==void 0){const S=d.timeUnit,E=d.type;switch(t){case"domainMax":case"domainMin":Ec(l[t])||E==="temporal"||S?u.set(t,{signal:Ox(l[t],{type:E,timeUnit:S})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const S=fe(X8,t)?X8[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:g,scalePadding:y,scalePaddingInner:v,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:HG(i,a),hasSecondaryRangeChannel:!!i[gs(a)]}):r.scale[t];S!==void 0&&u.set(t,S,!1)}}}const X8={bins:({model:e,fieldOrDatumDef:t})=>pe(t)?A3e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>R3e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>T3e(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>N3e(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>F3e(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>M3e(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=pe(e)?e.sort:void 0;return D3e(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>O3e(e,t,n,r,i,o.scale,s)};function MX(e){jt(e)?v3e(e):DX(e,"range")}function DX(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?MX(r):FX(r,t);for(const r of ue(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=El(i,a,t,"scale",EY((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function A3e(e,t){const n=t.bin;if(Ct(n)){const r=wN(e,t.field,n);return new mn(()=>e.getSignalName(r))}else if(An(n)&&Sc(n)&&n.step!==void 0)return{step:n.step}}function R3e(e,t){if(Ze([Ir,hs,ps],e)&&t!=="nominal")return"hcl"}function T3e(e,t,n,r,i,o){var s;if(!((s=ho(o))!=null&&s.bin||ie(n)||i!=null||r!=null||Ze([Tn.TIME,Tn.UTC],e)))return Zt(t)?!0:void 0}function N3e(e,t,n,r,i,o){if(Zt(e)){if(Uo(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(pe(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Tn.POINT)return n.pointPadding}}function F3e(e,t,n,r,i,o=!1){if(e===void 0){if(Zt(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return o?f:Qt(s,n==="bar"?a:n==="tick"?u:l)}else if(bm(t)&&r===Tn.BAND)return i.offsetBandPaddingInner}}function M3e(e,t,n,r,i,o=!1){if(e===void 0){if(Zt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Tn.BAND)return Qt(s,Ne(r)?{signal:`${r.signal}/2`}:r/2)}else if(bm(t)){if(n===Tn.POINT)return .5;if(n===Tn.BAND)return i.offsetBandPaddingOuter}}}function D3e(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return co(e)&&t==="descending"?Ne(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(co(e)&&t==="descending")return!0}function O3e(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&co(i)){if(ie(n)){const l=n[0],u=n[n.length-1];if(lt(l)&&l<=0&&lt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!hd(i))return!0;if(!(pe(t)&&t.bin)&&Ze([...ha,..._we],e)){const{orient:l,type:u}=r;return Ze(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ze(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function P3e(e,t,n,r,i=!1){const o=I3e(t,n,r,i),{type:s}=e;return ms(t)?s!==void 0?Mke(t,s)?pe(n)&&!Fke(s,n.type)?(he(DSe(s,o)),o):s:(he(MSe(t,s,o)),o):o:null}function I3e(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(If(e)||vk(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&he(xk(e,"ordinal")),"ordinal";if(yk(e))return"band";if(Zt(e)||bm(e)){if(Ze(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in wT)return"band";const o=n[zr(e)];return oc(o)||gd(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return If(e)?"time":vk(e)==="discrete"?(he(xk(e,"temporal")),"ordinal"):pe(t)&&t.timeUnit&&Sn(t.timeUnit).utc?"utc":yk(e)?"band":"time";case"quantitative":return If(e)?pe(t)&&Ct(t.bin)?"bin-ordinal":"linear":vk(e)==="discrete"?(he(xk(e,"quantitative")),"ordinal"):yk(e)?"band":"linear";case"geojson":return}throw new Error(XH(t.type))}function L3e(e,{ignoreRange:t}={}){OX(e),_X(e);for(const n of Nke)FX(e,n);t||MX(e)}function OX(e){jt(e)?e.component.scales=z3e(e):e.component.scales=B3e(e)}function z3e(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of ST){const s=un(t[o]);if(s&&n===wG&&o===Lr&&s.type===Hd)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=HG(t,o),u=P3e(a,o,s,r,l);i[o]=new $X(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const j3e=EY((e,t)=>n8(e)-n8(t));function B3e(e){var i;const t=e.component.scales={},n={},r=e.component.resolve;for(const o of e.children){OX(o);for(const s of ue(o.component.scales))if((i=r.scale)[s]??(i[s]=dX(s,e)),r.scale[s]==="shared"){const a=n[s],l=o.component.scales[s].getWithExplicit("type");a?wke(a.value,l.value)?n[s]=El(a,l,"type","scale",j3e):(r.scale[s]="independent",delete n[s]):n[s]=l}}for(const o of ue(n)){const s=e.scaleName(o,!0),a=n[o];t[o]=new $X(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return t}class Nk{constructor(){ee(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function jt(e){return(e==null?void 0:e.type)==="unit"}function ni(e){return(e==null?void 0:e.type)==="facet"}function CN(e){return(e==null?void 0:e.type)==="concat"}function Qd(e){return(e==null?void 0:e.type)==="layer"}class $N{constructor(t,n,r,i,o,s,a){ee(this,"type");ee(this,"parent");ee(this,"config");ee(this,"name");ee(this,"size");ee(this,"title");ee(this,"description");ee(this,"data");ee(this,"transforms");ee(this,"layout");ee(this,"scaleNameMap");ee(this,"projectionNameMap");ee(this,"signalNameMap");ee(this,"component");ee(this,"view");this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=Rn(a),this.name=t.name??i,this.title=Ya(t.title)?{text:t.title}:t.title?Rn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Nk,this.projectionNameMap=r?r.projectionNameMap:new Nk,this.signalNameMap=r?r.signalNameMap:new Nk,this.data=t.data,this.description=t.description,this.transforms=G_e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:QEe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Fx(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ga,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?qe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){L3e(this)}parseProjection(){SX(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){yX(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of ue(r)){const s=r[o];s!==void 0&&(i[o]=Tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:kt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=l$e(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ki)t[r].title&&n.push(n$e(this,r));for(const r of yN)n=n.concat(r$e(this,r));return n}assembleAxes(){return qCe(this.component.axes,this.config)}assembleLegends(){return xX(this)}assembleProjections(){return N$e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...jH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ze(["unit","layer"],this.type)?Ze(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),kt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ni(this.parent)?CX(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Dt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Bt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ni(this.parent)){const n=cX(t),r=wx(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(kn(o)&&kc(s)){const a=i.get("name"),l=Gx(this,r),u=_N(l);if(u){const f=be({aggregate:"distinct",field:u},{expr:"datum"});return{signal:uX(a,i,f)}}else return he(_T(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(FH(t)&&ms(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Xwe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class PX extends $N{vgField(t,n={}){const r=this.fieldDef(t);if(r)return be(r,n)}reduceFieldDef(t,n){return CEe(this.getMapping(),(r,i,o)=>{const s=ho(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){JT(this.getMapping(),(r,i)=>{const o=ho(r);o&&t(o,i)},n)}}class Yx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const o=this.transform.resolve??"shared";this.transform.resolve=o}clone(){return new Yx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tt(this.transform)}`}assemble(){const{density:n,...r}=this.transform,i={type:"kde",field:n,...r};return i.resolve=this.transform.resolve,i}}class Xx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r)}clone(){return new Xx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tt(this.transform)}`}assemble(){const{extent:n,param:r}=this.transform;return{type:"extent",field:n,signal:r}}}class Kx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const{flatten:i,as:o=[]}=this.transform;this.transform.as=i.map((s,a)=>o[a]??s)}clone(){return new Kx(this.parent,qe(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tt(this.transform)}`}assemble(){const{flatten:n,as:r}=this.transform;return{type:"flatten",fields:n,as:r}}}class Qx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}clone(){return new Qx(null,qe(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tt(this.transform)}`}assemble(){const{fold:n,as:r}=this.transform;return{type:"fold",fields:n,as:r}}}class jf extends xt{constructor(n,r,i,o){super(n);ee(this,"fields");ee(this,"geojson");ee(this,"signal");this.fields=r,this.geojson=i,this.signal=o}clone(){return new jf(null,qe(this.fields),this.geojson,this.signal)}static parseAll(n,r){if(r.component.projection&&!r.component.projection.isFit)return n;let i=0;for(const o of[[ko,So],[Fi,Eo]]){const s=o.map(a=>{const l=un(r.encoding[a]);return pe(l)?l.field:ys(l)?{expr:`${l.datum}`}:fo(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(n=new jf(n,s,null,r.getName(`geojson_${i++}`)))}if(r.channelHasField(Lr)){const o=r.typedFieldDef(Lr);o.type===Hd&&(n=new jf(n,null,o.field,r.getName(`geojson_${i++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(ke);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Fg extends xt{constructor(n,r,i,o){super(n);ee(this,"projection");ee(this,"fields");ee(this,"as");this.projection=r,this.fields=i,this.as=o}clone(){return new Fg(null,this.projection,qe(this.fields),qe(this.as))}static parseAll(n,r){if(!r.projectionName())return n;for(const i of[[ko,So],[Fi,Eo]]){const o=i.map(a=>{const l=un(r.encoding[a]);return pe(l)?l.field:ys(l)?{expr:`${l.datum}`}:fo(l)?{expr:`${l.value}`}:void 0}),s=i[0]===Fi?"2":"";(o[0]||o[1])&&(n=new Fg(n,r.projectionName(),o,[r.getName(`x${s}`),r.getName(`y${s}`)]))}return n}dependentFields(){return new Set(this.fields.filter(ke))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tt(this.fields)} ${tt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Lu extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new Lu(null,qe(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:r=0,stop:i,step:o}=n;return{signal:`sequence(${[r,i,...o?[o]:[]].join(",")})`}}static makeFromTransform(n,r){return new Lu(n,r)}static makeFromEncoding(n,r){const i=r.encoding,o=i.x,s=i.y;if(pe(o)&&pe(s)){const a=o.impute?o:s.impute?s:void 0;if(a===void 0)return;const l=o.impute?s:s.impute?o:void 0,{method:u,value:f,frame:d,keyvals:p}=a.impute,g=XG(r.mark,i);return new Lu(n,{impute:a.field,key:l.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...p!==void 0?{keyvals:p}:{},...g.length?{groupby:g}:{}})}return null}hash(){return`Impute ${tt(this.transform)}`}assemble(){const{impute:n,key:r,keyvals:i,method:o,groupby:s,value:a,frame:l=[null,null]}=this.transform,u={type:"impute",field:n,key:r,...i?{keyvals:A_e(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!o||o==="value"?a:null};if(o&&o!=="value"){const f={type:"window",as:[`imputed_${n}_value`],ops:[o],fields:[n],frame:l,ignorePeers:!1,...s?{groupby:s}:{}},d={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[u,f,d]}else return[u]}}class Zx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.loess]}clone(){return new Zx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tt(this.transform)}`}assemble(){const{loess:n,on:r,...i}=this.transform;return{type:"loess",x:r,y:n,...i}}}class Mg extends xt{constructor(n,r,i){super(n);ee(this,"transform");ee(this,"secondary");this.transform=r,this.secondary=i}clone(){return new Mg(null,qe(this.transform),this.secondary)}static make(n,r,i,o){const s=r.component.data.sources,{from:a}=i;let l=null;if(R_e(a)){let u=zX(a.data,s);u||(u=new uc(a.data),s.push(u));const f=r.getName(`lookup_${o}`);l=new Mr(u,f,Bt.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[f]=l}else if(T_e(a)){const u=a.param;i={as:u,...i};let f;try{f=r.getSelectionComponent(Dt(u),u)}catch{throw new Error(Jwe(u))}if(l=f.materialized,!l)throw new Error(eSe(u))}return new Mg(n,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Se(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tt({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:Se(this.transform.as)}:{}};else{let r=this.transform.as;ke(r)||(he(fSe),r="_lookup"),n={as:[r]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class Jx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}clone(){return new Jx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tt(this.transform)}`}assemble(){const{quantile:n,...r}=this.transform;return{type:"quantile",field:n,...r}}}class eb extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.regression]}clone(){return new eb(null,qe(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tt(this.transform)}`}assemble(){const{regression:n,on:r,...i}=this.transform;return{type:"regression",x:r,y:n,...i}}}class tb extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new tb(null,qe(this.transform))}addDimensions(n){this.transform.groupby=Bo((this.transform.groupby??[]).concat(n),r=>r)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tt(this.transform)}`}assemble(){const{pivot:n,value:r,groupby:i,limit:o,op:s}=this.transform;return{type:"pivot",field:n,value:r,...o!==void 0?{limit:o}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class nb extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new nb(null,qe(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function IX(e){let t=0;function n(r,i){if(r instanceof uc&&!r.isGenerator&&!yd(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Xn&&(r.parent instanceof uc&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Xd){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Tm||r instanceof Nm||r instanceof Sd||r instanceof Yd||r instanceof xd||r instanceof Fg||r instanceof oo||r instanceof Mg||r instanceof Kd||r instanceof Ac||r instanceof Qx||r instanceof Kx||r instanceof Yx||r instanceof Zx||r instanceof Jx||r instanceof eb||r instanceof _l||r instanceof nb||r instanceof tb||r instanceof Xx)&&i.transform.push(r.assemble()),(r instanceof Yo||r instanceof Ho||r instanceof Lu||r instanceof Zs||r instanceof jf)&&i.transform.push(...r.assemble()),r instanceof Mr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Mr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Mr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function U3e(e){const t=[],n=IX(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function q3e(e,t){const n=[],r=IX(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function W3e(e){return e==="top"||e==="left"||Ne(e)?"header":"footer"}function V3e(e){for(const t of ki)H3e(e,t);K8(e,"x"),K8(e,"y")}function H3e(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=wd("title",null,r,t);let u=Lf(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=ie(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=wd("labelOrient",a.header,r,t),d=a.header!==null?Qt((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,p=Ze(["bottom","right"],f)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[p]:t==="facet"?[]:[LX(e,t,d)]}}}function LX(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function K8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=bN(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=W3e(a.get("orient"));s[l]??(s[l]=[LX(e,o,!1)]);const u=zp(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function G3e(e){AN(e),qv(e,"width"),qv(e,"height")}function Y3e(e){AN(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";qv(e,t),qv(e,n)}function AN(e){for(const t of e.children)t.parseLayoutSize()}function qv(e,t){const n=cX(t),r=wx(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??dX(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=El(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function X3e(e){const{size:t,component:n}=e;for(const r of ha){const i=zr(r);if(t[i]){const o=t[i];n.layoutSize.set(i,rs(o)?"step":o,!0)}else{const o=K3e(e,i);n.layoutSize.set(i,o,!1)}}}function K3e(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(kn(o)){const a=zv(r.view,t);return kc(s)||rs(a)?"step":a}else return k$(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return k$(r.view,t);{const o=zv(r.view,t);return rs(o)?o.step:o}}}function B$(e,t,n){return be(t,{suffix:`by_${be(e)}`,...n})}class rg extends PX{constructor(n,r,i,o){super(n,"facet",r,i,o,n.resolve);ee(this,"facet");ee(this,"child");ee(this,"children");this.child=MN(n.spec,this,this.getName("child"),void 0,o),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!Em(n))return{facet:this.initFacetFieldDef(n,"facet")};const r=ue(n),i={};for(const o of r){if(![Ys,Xs].includes(o)){he(Ex(o,"facet"));break}const s=n[o];if(s.field===void 0){he(v$(s,o));break}i[o]=this.initFacetFieldDef(s,o)}return i}initFacetFieldDef(n,r){const i=ZT(n,r);return i.header?i.header=Rn(i.header):i.header===null&&(i.header=null),i}channelHasField(n){return fe(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=rb(this),this.child.parseData()}parseLayoutSize(){AN(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,tn(this.component.selection).some(n=>Go(n))&&$T(CT)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),V3e(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const r of ki)for(const i of vN){const o=this.component.layoutHeaders[r],s=o[i],{facetFieldDef:a}=o;if(a){const l=wd("titleOrient",a.header,this.config,r);if(["right","bottom"].includes(l)){const u=Vx(r,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[u]="end"}}if(s!=null&&s[0]){const l=r==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";r!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[u]??(n[u]={}),n[u][r]=.5),o.title&&(n.offset??(n.offset={}),n.offset[r==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:r}=this.facet,i=n?this.columnDistinctSignal():r?1:void 0;let o="all";return(!r&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(o="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:o}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof rg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof rg?{...this.channelHasField("column")?{encode:{update:{columns:{field:be(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],r=[],i=[];if(this.child instanceof rg){if(this.child.channelHasField("column")){const o=be(this.child.facet.column);n.push(o),r.push("distinct"),i.push(`distinct_${o}`)}}else for(const o of ha){const s=this.child.component.scales[o];if(s&&!s.merged){const a=s.get("type"),l=s.get("range");if(kn(a)&&kc(l)){const u=Gx(this.child,o),f=_N(u);f?(n.push(f),r.push("distinct"),i.push(`distinct_${f}`)):he(_T(o))}}}return{fields:n,ops:r,as:i}}assembleFacet(){const{name:n,data:r}=this.component.data.facetRoot,{row:i,column:o}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(const d of ki){const p=this.facet[d];if(p){u.push(be(p));const{bin:g,sort:y}=p;if(Ct(g)&&u.push(be(p,{binSuffix:"end"})),Ks(y)){const{field:v,op:x=Nx}=y,w=B$(p,y);i&&o?(s.push(w),a.push("max"),l.push(w)):(s.push(v),a.push(x),l.push(w))}else if(ie(y)){const v=bd(p,d);s.push(v),a.push("max"),l.push(v)}}}const f=!!i&&!!o;return{name:n,data:r,groupby:u,...f||s.length>0?{aggregate:{...f?{cross:f}:{},...s.length?{fields:s,ops:a,as:l}:{}}}:{}}}facetSortFields(n){const{facet:r}=this,i=r[n];return i?Ks(i.sort)?[B$(i,i.sort,{expr:"datum"})]:ie(i.sort)?[bd(i,n,{expr:"datum"})]:[be(i,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:r}=this,i=r[n];if(i){const{sort:o}=i;return[(Ks(o)?o.order:!ie(o)&&o)||"ascending"]}return[]}assembleLabelTitle(){var o;const{facet:n,config:r}=this;if(n.facet)return D$(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const s of yN)if(n[s]){const a=wd("labelOrient",(o=n[s])==null?void 0:o.header,r,s);if(i[s].includes(a))return D$(n[s],s,r)}}assembleMarks(){const{child:n}=this,r=this.component.data.facetRoot,i=U3e(r),o=n.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||n.assembleTitle(),a=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:ki.map(u=>this.facetSortFields(u)).flat(),order:ki.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup(dCe(this,[]))}]}getMapping(){return this.facet}}function Q3e(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Ks(o.sort)){const{field:s,op:a=Nx}=o.sort;e=i=new Ac(e,{joinaggregate:[{op:a,field:s,as:B$(o,o.sort,{forAs:!0})}],groupby:[be(o)]})}return i}return null}function zX(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const d=(o=a.format)==null?void 0:o.mesh;if(!((l||d)&&l!==d)){if(Ng(e)&&Ng(a)){if(Qr(e.values,a.values))return s}else if(yd(e)&&yd(a)){if(e.url===a.url)return s}else if(_Y(e)&&e.name===s.dataName)return s}}return null}function Z3e(e,t){if(e.data||!e.parent){if(e.data===null){const r=new uc({values:[]});return t.push(r),r}const n=zX(e.data,t);if(n)return cl(e.data)||(n.data.format=bH({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new uc(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function J3e(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(j_e(i))s=e=new xd(e,i),o="derived";else if(cN(i)){const a=W$e(i);s=e=Xn.makeWithAncestors(e,{},a,n)??e,e=new Yd(e,t,i.filter)}else if(bY(i))s=e=Yo.makeFromTransform(e,i,t),o="number";else if(U_e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Xn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=Ho.makeFromTransform(e,i);else if(q_e(i))s=e=oo.makeFromTransform(e,i),o="number",mN(t)&&(e=new _l(e));else if(xY(i))s=e=Mg.make(e,t,i,r++),o="derived";else if(I_e(i))s=e=new Kd(e,i),o="number";else if(L_e(i))s=e=new Ac(e,i),o="number";else if(W_e(i))s=e=Zs.makeFromTransform(e,i),o="derived";else if(V_e(i))s=e=new Qx(e,i),o="derived";else if(H_e(i))s=e=new Xx(e,i),o="derived";else if(z_e(i))s=e=new Kx(e,i),o="derived";else if(N_e(i))s=e=new tb(e,i),o="derived";else if(P_e(i))e=new nb(e,i);else if(B_e(i))s=e=Lu.makeFromTransform(e,i),o="derived";else if(F_e(i))s=e=new Yx(e,i),o="derived";else if(M_e(i))s=e=new Jx(e,i),o="derived";else if(D_e(i))s=e=new eb(e,i),o="derived";else if(O_e(i))s=e=new Zx(e,i),o="derived";else{he(cSe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function rb(e){var x;let t=Z3e(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(cl(i)||yd(i)||Ng(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new iCe;cl(i)?(CY(i)?t=new Nm(t,i.sequence):fN(i)&&(t=new Tm(t,i.graticule)),s.parseNothing=!0):((x=i==null?void 0:i.format)==null?void 0:x.parse)===null&&(s.parseNothing=!0),t=Xn.makeExplicit(t,e,s)??t,t=new _l(t);const a=e.parent&&Qd(e.parent);(jt(e)||ni(e))&&a&&(t=Yo.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=J3e(t,e,s));const l=H$e(e),u=V$e(e);t=Xn.makeWithAncestors(t,{},{...l,...u},s)??t,jt(e)&&(t=jf.parseAll(t,e),t=Fg.parseAll(t,e)),(jt(e)||ni(e))&&(a||(t=Yo.makeFromEncoding(t,e)??t),t=Ho.makeFromEncoding(t,e)??t,t=xd.parseAllForSortIndex(t,e));const f=t=E1(Bt.Raw,e,t);if(jt(e)){const w=oo.makeFromEncoding(t,e);w&&(t=w,mN(e)&&(t=new _l(t))),t=Lu.makeFromEncoding(t,e)??t,t=Zs.makeFromEncoding(t,e)??t}let d,p;if(jt(e)){const{markDef:w,mark:S,config:E}=e,C=bt("invalid",w,E),{marks:$,scales:R}=p=AY({invalid:C,isPath:jl(S)});$!==R&&R==="include-invalid-values"&&(d=t=E1(Bt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=Sd.make(t,e,p)??t)}const g=t=E1(Bt.Main,e,t);let y;if(jt(e)&&p){const{marks:w,scales:S}=p;w==="include-invalid-values"&&S==="exclude-invalid-values"&&(t=Sd.make(t,e,p)??t,y=t=E1(Bt.PostFilterInvalid,e,t))}jt(e)&&BCe(e,g);let v=null;if(ni(e)){const w=e.getName("facet");t=Q3e(t,e.facet)??t,v=new Xd(t,e,w,g.getSource()),n[w]=v}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:g,facetRoot:v,ancestorParse:s,preFilterInvalid:d,postFilterInvalid:y}}function E1(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Mr(n,o,e,i);return r[o]=s,s}class eAe extends $N{constructor(n,r,i,o){var s,a,l,u;super(n,"concat",r,i,o,n.resolve);ee(this,"children");(((a=(s=n.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((u=(l=n.resolve)==null?void 0:l.axis)==null?void 0:u.y)==="shared")&&he(aSe),this.children=this.getChildren(n).map((f,d)=>MN(f,this,this.getName(`concat_${d}`),void 0,o))}parseData(){this.component.data=rb(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of ue(n.component.selection))this.component.selection[r]=n.component.selection[r]}tn(this.component.selection).some(n=>Go(n))&&$T(CT)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return Lx(n)?n.vconcat:lN(n)?n.hconcat:n.concat}parseLayoutSize(){Y3e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=xN(this);for(const r of this.children)n.push(...r.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleMarks(){return this.children.map(n=>{const r=n.assembleTitle(),i=n.assembleGroupStyle(),o=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...r?{title:r}:{},...i?{style:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function tAe(e){return e===!1||e===null}const nAe={disable:1,gridScale:1,scale:1,...qG,labelExpr:1,encode:1},jX=ue(nAe);class RN extends ga{constructor(n={},r={},i=!1){super();ee(this,"explicit");ee(this,"implicit");ee(this,"mainExtracted");this.explicit=n,this.implicit=r,this.mainExtracted=i}clone(){return new RN(qe(this.explicit),qe(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!tAe(this.get(n))}hasOrientSignalRef(){return Ne(this.explicit.orient)}}function rAe(e,t,n){const{encoding:r,config:i}=e,o=un(r[t])??un(r[gs(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(sc(l))return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(pd(o)==="quantitative"){if(gd(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(pd(o)==="temporal"&&i.timeFormatType&&pe(o)&&!o.timeUnit)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function iAe(e){return ha.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[fAe(n,e)]),t),{})}const oAe={bottom:"top",top:"bottom",left:"right",right:"left"};function sAe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of ue(i.component.axes))n.axis[o]=bN(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=aAe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of ha){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Ne(a)){if(r[a]>0&&!l){const u=oAe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function aAe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=lAe(i,o)}}}else return t.map(n=>n.clone());return e}function lAe(e,t){for(const n of jX){const r=El(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return GH(i,o);case"gridScale":return{explicit:i.explicit,value:Qt(i.value,o.value)}}return jx(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function uAe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ne(n.labelAngle)?n.labelAngle:Rg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===oX(r,i))return!0}return e===n[t]}const cAe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function fAe(e,t){var w,S;let n=t.axis(e);const r=new RN,i=un(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((w=s[e==="x"?"axisX":"axisY"])==null?void 0:w.orient)||((S=s.axis)==null?void 0:S.orient)||QCe(e),l=t.getScaleComponent(e).get("type"),u=WCe(e,l,a,t.config),f=n!==void 0?!n:F$("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const d=YCe(i,n,e,s.style,u),p=RG(n.formatType,i,l),g=AG(i,i.type,n.format,n.formatType,s,!0),y={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:g,formatType:p,mark:o,config:s};for(const E of jX){const C=E in P8?P8[E](y):u8(E)?n[E]:void 0,$=C!==void 0,R=uAe(C,E,n,t,e);if($&&R)r.set(E,C,R);else{const{configValue:A=void 0,configFrom:N=void 0}=u8(E)&&E!=="values"?F$(E,s.style,n.style,u):{},M=A!==void 0;$&&!M?r.set(E,C,R):(N!=="vgAxisConfig"||cAe.has(E)&&M||Am(A)||Ne(A))&&r.set(E,A,!1)}}const v=n.encoding??{},x=UG.reduce((E,C)=>{if(!r.hasAxisPart(C))return E;const $=fX(v[C]??{},t),R=C==="labels"?rAe(t,e,$):$;return R!==void 0&&!kt(R)&&(E[C]={update:R}),E},{});return kt(x)||r.set("encode",x,!!n.encoding||n.labelAngle!==void 0),r}function dAe({encoding:e,size:t}){for(const n of ha){const r=zr(n);rs(t[r])&&il(e[n])&&(delete t[r],he(ZH(r)))}return t}const hAe={vgMark:"arc",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...ia(e,"radius"),...ia(e,"theta")})},pAe={vgMark:"area",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...jv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...jv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...gN(e)})},gAe={vgMark:"rect",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ia(e,"x"),...ia(e,"y")})},mAe={vgMark:"shape",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&pe(n)&&n.type===Hd?{field:be(n,{expr:"datum"})}:{}}]}},yAe={vgMark:"image",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ia(e,"x"),...ia(e,"y"),...hN(e,"url")})},vAe={vgMark:"line",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Nn("size",e,{vgChannel:"strokeWidth"}),...gN(e)})},xAe={vgMark:"trail",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Nn("size",e),...gN(e)})};function TN(e,t){const{config:n}=e;return{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Nn("size",e),...Nn("angle",e),...bAe(e,n,t)}}function bAe(e,t,n){return n?{shape:{value:n}}:Nn("shape",e)}const wAe={vgMark:"symbol",encodeEntry:e=>TN(e)},SAe={vgMark:"symbol",encodeEntry:e=>TN(e,"circle")},kAe={vgMark:"symbol",encodeEntry:e=>TN(e,"square")},EAe={vgMark:"rect",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ia(e,"x"),...ia(e,"y")})},_Ae={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...jv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...jv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Nn("size",e,{vgChannel:"strokeWidth"})}}},CAe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Oi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...hN(e),...Nn("size",e,{vgChannel:"fontSize"}),...Nn("angle",e),...F8("align",$Ae(e.markDef,n,t)),...F8("baseline",AAe(e.markDef,n,t)),...pr("radius",e,{defaultPos:null}),...pr("theta",e,{defaultPos:null})}}};function $Ae(e,t,n){if(bt("align",e,n)===void 0)return"center"}function AAe(e,t,n){if(bt("baseline",e,n)===void 0)return"middle"}const RAe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ia(e,i),...pr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Tt(bt("thickness",n,t))}}},_1={arc:hAe,area:pAe,bar:gAe,circle:SAe,geoshape:mAe,image:yAe,line:vAe,point:wAe,rect:EAe,rule:_Ae,square:kAe,text:CAe,tick:RAe,trail:xAe};function TAe(e){if(Ze([Rx,$x,Ike],e.mark)){const t=XG(e.mark,e.encoding);if(t.length>0)return NAe(e,t)}else if(e.mark===Ax){const t=m$.some(n=>bt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return FAe(e)}return NN(e)}const Q8="faceted_path_";function NAe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Q8+e.requestDataName(Bt.Main),data:e.requestDataName(Bt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:NN(e,{fromPrefix:Q8})}]}const Z8="stack_group_";function FAe(e){var u;const[t]=NN(e,{fromPrefix:Z8}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,d)=>{const p=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${f}(${p.map(g=>`scale('${n}',${g})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...ld(t.encode.update,["y","yc","y2","height",...m$]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ti(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...ld(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ti(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of m$){const d=ts(f,e.markDef,e.config);t.encode.update[f]?(o[f]=t.encode.update[f],delete t.encode.update[f]):d&&(o[f]=Tt(d)),d&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),p=be(d);p&&a.push(p),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(be(d,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const p=ts(d,e.markDef,e.config);return p!==void 0?{...f,[d]:Tt(p)}:f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Bt.Main),name:Z8+e.requestDataName(Bt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function MAe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!ie(s)&&fo(s)&&p$(s.value)||!s&&p$(bt("order",i,o)))){if((ie(s)||pe(s))&&!n)return WH(s,{expr:"datum"});if(jl(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(pe(l))return{field:a}}}}function NN(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Qt(r.clip,DAe(e),OAe(e)),a=UH(r),l=i.key,u=MAe(e),f=PAe(e),d=bt("aria",r,o),p=_1[n].postEncodingTransform?_1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:_1[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Bt.Main)},encode:{update:_1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function DAe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function OAe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function PAe(e){if(!e.component.selection)return null;const t=ue(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ue(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class BX extends PX{constructor(n,r,i,o={},s){super(n,"unit",r,i,s,void 0,f8(n)?n.view:void 0);ee(this,"markDef");ee(this,"encoding");ee(this,"specifiedScales",{});ee(this,"stack");ee(this,"specifiedAxes",{});ee(this,"specifiedLegends",{});ee(this,"specifiedProjection",{});ee(this,"selection",[]);ee(this,"children",[]);ee(this,"correctDataNames",n=>{var r,i,o;return(r=n.from)!=null&&r.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+TY)),(o=(i=n.from)==null?void 0:i.facet)!=null&&o.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const a=ns(n.mark)?{...n.mark}:{type:n.mark},l=a.type;a.filled===void 0&&(a.filled=b_e(a,s,{graticule:n.data&&fN(n.data)}));const u=this.encoding=EEe(n.encoding||{},l,a.filled,s);this.markDef=mY(a,u,s),this.size=dAe({encoding:u,size:f8(n)?{...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}}:o}),this.stack=gY(this.markDef,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(f=>sN(f))}get hasProjection(){const{encoding:n}=this,r=this.mark===wG,i=n&&mwe.some(o=>Ve(n[o]));return r||i}scaleDomain(n){const r=this.specifiedScales[n];return r?r.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,r){return ST.reduce((i,o)=>{const s=un(r[o]);return s&&(i[o]=this.initScale(s.scale??{})),i},{})}initScale(n){const{domain:r,range:i}=n,o=Rn(n);return ie(r)&&(o.domain=r.map(Xr)),ie(i)&&(o.range=i.map(Xr)),o}initAxes(n){return ha.reduce((r,i)=>{const o=n[i];if(Ve(o)||i===Pt&&Ve(n.x2)||i===_n&&Ve(n.y2)){const s=Ve(o)?o.axis:void 0;r[i]=s&&this.initAxis({...s})}return r},{})}initAxis(n){const r=ue(n),i={};for(const o of r){const s=n[o];i[o]=Am(s)?BH(s):Xr(s)}return i}initLegends(n){return $we.reduce((r,i)=>{const o=un(n[i]);if(o&&Rwe(i)){const s=o.legend;r[i]=s&&Rn(s)}return r},{})}parseData(){this.component.data=rb(this)}parseLayoutSize(){X3e(this)}parseSelections(){this.component.selection=jCe(this,this.selection)}parseMarkGroup(){this.component.mark=TAe(this)}parseAxesAndHeaders(){this.component.axes=iAe(this)}assembleSelectionTopLevelSignals(n){return hCe(this,n)}assembleSignals(){return[...nX(this),...fCe(this,[])]}assembleSelectionData(n){return pCe(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return xN(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!Qd(this.parent))&&(n=DY(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return Pu(this.encoding,n)}fieldDef(n){const r=this.encoding[n];return ho(r)}typedFieldDef(n){const r=this.fieldDef(n);return xr(r)?r:null}}class FN extends $N{constructor(n,r,i,o,s){super(n,"layer",r,i,s,n.resolve,n.view);ee(this,"children");const a={...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,u)=>{if(zx(l))return new FN(l,this,this.getName(`layer_${u}`),a,s);if(pa(l))return new BX(l,this,this.getName(`layer_${u}`),a,s);throw new Error(ET(l))})}parseData(){this.component.data=rb(this);for(const n of this.children)n.parseData()}parseLayoutSize(){G3e(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of ue(n.component.selection))this.component.selection[r]=n.component.selection[r]}tn(this.component.selection).some(n=>Go(n))&&$T(CT)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){sAe(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleSignals()),nX(this))}assembleLayoutSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleLayoutSignals()),xN(this))}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleGroupStyle(){const n=new Set;for(const i of this.children)for(const o of Se(i.assembleGroupStyle()))n.add(o);const r=Array.from(n);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const r of this.children)if(n=r.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return gCe(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,r)=>n.concat(r.assembleLegends()),xX(this))}}function MN(e,t,n,r,i){if(Fx(e))return new rg(e,t,n,i);if(zx(e))return new FN(e,t,n,r,i);if(pa(e))return new BX(e,t,n,r,i);if(YEe(e))return new eAe(e,t,n,i);throw new Error(ET(e))}function IAe(e,t={}){t.logger&&QSe(t.logger),t.fieldTitle&&zG(t.fieldTitle);try{const n=pY($d(t.config,e.config)),r=kY(e,n),i=MN(r,null,"",void 0,n);return i.parse(),a3e(i.component.data,i),{spec:zAe(i,LAe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&ZSe(),t.fieldTitle&&gEe()}}function LAe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ke(t)&&(t={type:t}),i&&o&&tCe(t.type)){if(i==="step"&&o==="step")he(XP()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";he(XP(wx(s)));const a=s==="width"?"height":"width";t.type=nCe(a)}}return{...ue(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...k8(n,!1),...k8(e,!0)}}function zAe(e,t,n={},r){const i=e.config?l_e(e.config):void 0,o=q3e(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:p,...g}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...g,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...cY(p)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const jAe=cwe.version,BAe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:cd,accessPathWithDatum:pT,accessWithDatumToUnescapedPath:yt,compile:IAe,contains:Ze,deepEqual:Qr,deleteNestedProperty:Tv,duplicate:qe,entries:wl,every:fT,fieldIntersection:hT,flatAccessWithDatum:SH,getFirstDefined:Qt,hasIntersection:dT,hasProperty:fe,hash:tt,internalField:_H,isBoolean:Ag,isEmpty:kt,isEqual:dwe,isInternalField:CH,isNullOrFalse:p$,isNumeric:gx,keys:ue,logicalExpr:tg,mergeDeep:bH,never:xH,normalize:kY,normalizeAngle:Rg,omit:ti,pick:ld,prefixGenerator:g$,removePathFromField:Wd,replaceAll:ec,replacePathInField:Ni,resetIdCounter:pwe,setEqual:wH,some:ud,stringify:pt,titleCase:ym,unique:Bo,uniqueId:EH,vals:tn,varName:Dt,version:jAe},Symbol.toStringTag,{value:"Module"}));function UX(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var UAe="2.15.0",qAe={version:UAe};const vf="#fff",J8="#888",WAe={background:"#333",view:{stroke:J8},title:{color:vf,subtitleColor:vf},style:{"guide-label":{fill:vf},"guide-title":{fill:vf}},axis:{domainColor:vf,gridColor:J8,tickColor:vf}},su="#4572a7",VAe={background:"#fff",arc:{fill:su},area:{fill:su},line:{stroke:su,strokeWidth:2},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{fill:su,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},au="#30a2da",Fk="#cbcbcb",HAe="#999",GAe="#333",e7="#f0f0f0",t7="#333",YAe={arc:{fill:au},area:{fill:au},axis:{domainColor:Fk,grid:!0,gridColor:Fk,gridWidth:1,labelColor:HAe,labelFontSize:10,titleColor:GAe,tickColor:Fk,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:e7,group:{fill:e7},legend:{labelColor:t7,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:t7,titleFontSize:14,titlePadding:10},line:{stroke:au,strokeWidth:2},path:{stroke:au,strokeWidth:.5},rect:{fill:au},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:au},bar:{binSpacing:2,fill:au,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},lu="#000",XAe={group:{fill:"#e5e5e5"},arc:{fill:lu},area:{fill:lu},line:{stroke:lu},path:{stroke:lu},rect:{fill:lu},shape:{stroke:lu},symbol:{fill:lu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},KAe=22,QAe="normal",n7="Benton Gothic, sans-serif",r7=11.5,ZAe="normal",uu="#82c6df",Mk="Benton Gothic Bold, sans-serif",i7="normal",o7=13,pp={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},JAe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Mk,fontSize:KAe,fontWeight:QAe},arc:{fill:uu},area:{fill:uu},line:{stroke:uu,strokeWidth:2},path:{stroke:uu},rect:{fill:uu},shape:{stroke:uu},symbol:{fill:uu,size:30},axis:{labelFont:n7,labelFontSize:r7,labelFontWeight:ZAe,titleFont:Mk,titleFontSize:o7,titleFontWeight:i7},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:n7,labelFontSize:r7,symbolType:"square",titleFont:Mk,titleFontSize:o7,titleFontWeight:i7},range:{category:pp["category-6"],diverging:pp["fireandice-6"],heatmap:pp["fire-7"],ordinal:pp["fire-7"],ramp:pp["fire-7"]}},cu="#ab5787",C1="#979797",e5e={background:"#f9f9f9",arc:{fill:cu},area:{fill:cu},line:{stroke:cu},path:{stroke:cu},rect:{fill:cu},shape:{stroke:cu},symbol:{fill:cu,size:30},axis:{domainColor:C1,domainWidth:.5,gridWidth:.2,labelColor:C1,tickColor:C1,tickWidth:.2,titleColor:C1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},fu="#3e5c69",t5e={background:"#fff",arc:{fill:fu},area:{fill:fu},line:{stroke:fu},path:{stroke:fu},rect:{fill:fu},shape:{stroke:fu},symbol:{fill:fu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},pi="#1696d2",s7="#000000",n5e="#FFFFFF",$1="Lato",Dk="Lato",r5e="Lato",i5e="#DEDDDD",o5e=18,gp={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},s5e={background:n5e,title:{anchor:"start",fontSize:o5e,font:$1},axisX:{domain:!0,domainColor:s7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Dk,labelAngle:0,tickColor:s7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:$1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:i5e,gridWidth:1,labelFontSize:12,labelFont:Dk,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:$1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Dk,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:$1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:gp["six-groups-cat-1"],diverging:gp["diverging-colors"],heatmap:gp["diverging-colors"],ordinal:gp["six-groups-seq"],ramp:gp["shades-blue"]},area:{fill:pi},rect:{fill:pi},line:{color:pi,stroke:pi,strokeWidth:5},trail:{color:pi,stroke:pi,strokeWidth:0,size:1},path:{stroke:pi,strokeWidth:.5},point:{filled:!0},text:{font:r5e,color:pi,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:pi,stroke:null}},arc:{fill:pi},shape:{stroke:pi},symbol:{fill:pi,size:30}},du="#3366CC",a7="#ccc",A1="Arial, sans-serif",a5e={arc:{fill:du},area:{fill:du},path:{stroke:du},rect:{fill:du},shape:{stroke:du},symbol:{stroke:du},circle:{fill:du},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:A1,fontSize:12},"guide-title":{font:A1,fontSize:12},"group-title":{font:A1,fontSize:12}},title:{font:A1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:a7,tickColor:a7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},DN=e=>e*(1/3+1),l7=DN(9),u7=DN(10),c7=DN(12),mp="Segoe UI",f7="wf_standard-font, helvetica, arial, sans-serif",d7="#252423",yp="#605E5C",h7="transparent",l5e="#C8C6C4",Hi="#118DFF",u5e="#12239E",c5e="#E66C37",f5e="#6B007B",d5e="#E044A7",h5e="#744EC2",p5e="#D9B300",g5e="#D64550",qX=Hi,WX="#DEEFFF",p7=[WX,qX],m5e=[WX,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",qX],y5e={view:{stroke:h7},background:h7,font:mp,header:{titleFont:f7,titleFontSize:c7,titleColor:d7,labelFont:mp,labelFontSize:u7,labelColor:yp},axis:{ticks:!1,grid:!1,domain:!1,labelColor:yp,labelFontSize:l7,titleFont:f7,titleColor:d7,titleFontSize:c7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:l5e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hi},line:{stroke:Hi,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:mp,fontSize:l7,fill:yp},arc:{fill:Hi},area:{fill:Hi,line:!0,opacity:.6},path:{stroke:Hi},rect:{fill:Hi},point:{fill:Hi,filled:!0,size:75},shape:{stroke:Hi},symbol:{fill:Hi,strokeWidth:1.5,size:50},legend:{titleFont:mp,titleFontWeight:"bold",titleColor:yp,labelFont:mp,labelFontSize:u7,labelColor:yp,symbolType:"circle",symbolSize:75},range:{category:[Hi,u5e,c5e,f5e,d5e,h5e,p5e,g5e],diverging:p7,heatmap:p7,ordinal:m5e}},Ok='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',v5e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Pk=400,R1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},x5e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],b5e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function ib({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=R1.gridBg[e],i=R1.textPrimary[e],o=R1.textSecondary[e],s=n==="dark"?x5e:b5e,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Ok,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:v5e,labelFontWeight:Pk,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:R1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Ok,fill:o,fontWeight:Pk},"guide-title":{font:Ok,fill:o,fontWeight:Pk}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const w5e=ib({theme:"white",background:"#ffffff"}),S5e=ib({theme:"g10",background:"#f4f4f4"}),k5e=ib({theme:"g90",background:"#262626"}),E5e=ib({theme:"g100",background:"#161616"}),_5e=qAe.version,C5e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:S5e,carbong100:E5e,carbong90:k5e,carbonwhite:w5e,dark:WAe,excel:VAe,fivethirtyeight:YAe,ggplot2:XAe,googlecharts:a5e,latimes:JAe,powerbi:y5e,quartz:e5e,urbaninstitute:s5e,version:_5e,vox:t5e},Symbol.toStringTag,{value:"Module"}));function $5e(e,t,n,r){if(Kbe(e))return`[${e.map(i=>t(Zbe(i)?i:g7(i,n))).join(", ")}]`;if(UP(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&(UP(f)&&(f=g7(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function A5e(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function g7(e,t){return JSON.stringify(e,A5e(t))}var R5e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const VX="vg-tooltip-element",T5e={offsetX:10,offsetY:10,id:VX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:N5e,maxDepth:2,formatTooltip:$5e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function N5e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function F5e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return R5e.toString().replace(VX,e)}function HX(e,t,{offsetX:n,offsetY:r}){const i=GX({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(YX(i[s],t))return i[s];return i["top-left"]}function M5e(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=D5e(l,u,n),d=GX(f,r,s,a),p=Array.isArray(o)?o:[o];for(const g of p)if(YX(d[g],r)&&!O5e(t,d[g],r))return d[g];return HX(t,r,i)}function D5e(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function GX(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=o-t.height/2,d=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:d},left:{x:s,y:f},right:{x:l,y:f},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:d},"bottom-right":{x:l,y:d}}}function YX(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function O5e(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class P5e{constructor(t){this.options={...T5e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=F5e(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?M5e(t,n,r,this.el.getBoundingClientRect(),this.options):HX(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var Ik={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var I5e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),L5e=Object.prototype.hasOwnProperty;function U$(e,t){return L5e.call(e,t)}function q$(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)U$(e,i)&&r.push(i);return r}function Zr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function W$(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function yu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function XX(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function V$(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(V$(e[t]))return!0}else if(typeof e=="object"){for(var r=q$(e),i=r.length,o=0;o<i;o++)if(V$(e[r[o]]))return!0}}return!1}function m7(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var KX=function(e){I5e(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,m7(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=m7(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Vt=KX,z5e=Zr,Tf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Wv(n,this.path);r&&(r=Zr(r));var i=zu(n,{op:"remove",path:this.from}).removed;return zu(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Wv(n,this.from);return zu(n,{op:"add",path:this.path,value:Zr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Dg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},j5e={add:function(e,t,n){return W$(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Tf.move,copy:Tf.copy,test:Tf.test,_get:Tf._get};function Wv(e,t){if(t=="")return e;var n={op:"_get",path:t};return zu(e,n),n.value}function zu(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Vv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Wv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Dg(e,t.value),s.test===!1)throw new Vt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Zr(e));var a=t.path||"",l=a.split("/"),u=e,f=1,d=l.length,p=void 0,g=void 0,y=void 0;for(typeof n=="function"?y=n:y=Vv;;){if(g=l[f],g&&g.indexOf("~")!=-1&&(g=XX(g)),i&&(g=="__proto__"||g=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[g]===void 0?p=l.slice(0,f).join("/"):f==d-1&&(p=t.path),p!==void 0&&y(t,0,e,p)),f++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!W$(g))throw new Vt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);W$(g)&&(g=~~g)}if(f>=d){if(n&&t.op==="add"&&g>u.length)throw new Vt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=j5e[t.op].call(t,u,g,e);if(s.test===!1)throw new Vt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(f>=d){var s=Tf[t.op].call(t,u,g,e);if(s.test===!1)throw new Vt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[g],n&&f<d&&(!u||typeof u!="object"))throw new Vt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function ob(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Zr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=zu(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function B5e(e,t,n){var r=zu(e,t);if(r.test===!1)throw new Vt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Vv(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Vt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Tf[e.op]){if(typeof e.path!="string")throw new Vt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Vt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Vt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&V$(e.value))throw new Vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Vt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Vt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=QX([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Vt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function QX(e,t,n){try{if(!Array.isArray(e))throw new Vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ob(Zr(t),Zr(e),n||!0);else{n=n||Vv;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Vt)return i;throw i}}function Dg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Dg(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Dg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var U5e=Object.freeze({__proto__:null,JsonPatchError:Vt,_areEquals:Dg,applyOperation:zu,applyPatch:ob,applyReducer:B5e,deepClone:z5e,getValueByPointer:Wv,validate:QX,validator:Vv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ON=new WeakMap,q5e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),W5e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function V5e(e){return ON.get(e)}function H5e(e,t){return e.observers.get(t)}function G5e(e,t){e.observers.delete(t.callback)}function Y5e(e,t){t.unobserve()}function X5e(e,t){var n=[],r,i=V5e(e);if(!i)i=new q5e(e),ON.set(e,i);else{var o=H5e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Zr(e),t){r.callback=t,r.next=null;var s=function(){H$(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){H$(r),clearTimeout(r.next),G5e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new W5e(t,r)),r}function H$(e,t){t===void 0&&(t=!1);var n=ON.get(e.object);PN(n.value,e.object,e.patches,"",t),e.patches.length&&ob(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function PN(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=q$(t),s=q$(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],f=e[u];if(U$(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?PN(f,d,n,r+"/"+yu(u),i):f!==d&&(i&&n.push({op:"test",path:r+"/"+yu(u),value:Zr(f)}),n.push({op:"replace",path:r+"/"+yu(u),value:Zr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+yu(u),value:Zr(f)}),n.push({op:"remove",path:r+"/"+yu(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!U$(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+yu(u),value:Zr(t[u])})}}}function K5e(e,t,n){n===void 0&&(n=!1);var r=[];return PN(e,t,r,"",n),r}var Q5e=Object.freeze({__proto__:null,compare:K5e,generate:H$,observe:X5e,unobserve:Y5e});Object.assign({},U5e,Q5e,{JsonPatchError:KX,deepClone:Zr,escapePathComponent:yu,unescapePathComponent:XX});function Z5e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lk,y7;function J5e(){if(y7)return Lk;y7=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return Lk=e,Lk}var zk,v7;function IN(){if(v7)return zk;v7=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return zk=r=>r?typeof r!="object"?e:r:t,zk}var T1={exports:{}},jk,x7;function LN(){if(x7)return jk;x7=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return jk={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},jk}var Bk,b7;function sb(){return b7||(b7=1,Bk=typeof process=="object"&&Ik&&Ik.NODE_DEBUG&&/\bsemver\b/i.test(Ik.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),Bk}var w7;function zN(){return w7||(w7=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=LN(),o=sb();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const d="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[d,r]],g=v=>{for(const[x,w]of p)v=v.split(`${x}*`).join(`${x}{0,${w}}`).split(`${x}+`).join(`${x}{1,${w}}`);return v},y=(v,x,w)=>{const S=g(x),E=f++;o(v,E,x),u[v]=E,l[E]=x,s[E]=new RegExp(x,w?"g":void 0),a[E]=new RegExp(S,w?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),y("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${d}+`),y("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),y("FULL",`^${l[u.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),y("LOOSE",`^${l[u.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),y("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[u.COERCE],!0),y("COERCERTLFULL",l[u.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(T1,T1.exports)),T1.exports}var Uk,S7;function eRe(){if(S7)return Uk;S7=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return Uk={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},Uk}var qk,k7;function jN(){if(k7)return qk;k7=1;const e=sb(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=LN(),{safeRe:r,t:i}=zN(),o=IN(),{compareIdentifiers:s}=eRe();class a{constructor(u,f){if(f=o(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const d=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const g=+p;if(g>=0&&g<n)return g}return p}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const d=this.prerelease[f],p=u.prerelease[f];if(e("prerelease compare",f,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return s(d,p)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const d=this.build[f],p=u.build[f];if(e("build compare",f,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return s(d,p)}while(++f)}inc(u,f,d){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,d),this.inc("pre",f,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,d),this.inc("pre",f,d);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(d)?1:0;if(!f&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[p];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(f===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(f){let g=[f,p];d===!1&&(g=[f]),s(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return qk=a,qk}var Wk,E7;function Zd(){if(E7)return Wk;E7=1;const e=jN();return Wk=(n,r,i)=>new e(n,i).compare(new e(r,i)),Wk}var Vk,_7;function tRe(){if(_7)return Vk;_7=1;const e=Zd();return Vk=(n,r,i)=>e(n,r,i)===0,Vk}var Hk,C7;function nRe(){if(C7)return Hk;C7=1;const e=Zd();return Hk=(n,r,i)=>e(n,r,i)!==0,Hk}var Gk,$7;function rRe(){if($7)return Gk;$7=1;const e=Zd();return Gk=(n,r,i)=>e(n,r,i)>0,Gk}var Yk,A7;function iRe(){if(A7)return Yk;A7=1;const e=Zd();return Yk=(n,r,i)=>e(n,r,i)>=0,Yk}var Xk,R7;function oRe(){if(R7)return Xk;R7=1;const e=Zd();return Xk=(n,r,i)=>e(n,r,i)<0,Xk}var Kk,T7;function sRe(){if(T7)return Kk;T7=1;const e=Zd();return Kk=(n,r,i)=>e(n,r,i)<=0,Kk}var Qk,N7;function aRe(){if(N7)return Qk;N7=1;const e=tRe(),t=nRe(),n=rRe(),r=iRe(),i=oRe(),o=sRe();return Qk=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return o(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},Qk}var Zk,F7;function lRe(){if(F7)return Zk;F7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,d){if(d=n(d),f instanceof t){if(f.loose===!!d.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,d),this.options=d,this.loose=!!d.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=f.match(d);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new a(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,d){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,d).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,d).test(f.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,d)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,d)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Zk=t;const n=IN(),{safeRe:r,t:i}=zN(),o=aRe(),s=sb(),a=jN(),l=ZX();return Zk}var Jk,M7;function ZX(){if(M7)return Jk;M7=1;const e=/\s+/g;class t{constructor(D,L){if(L=i(L),D instanceof t)return D.loose===!!L.loose&&D.includePrerelease===!!L.includePrerelease?D:new t(D.raw,L);if(D instanceof o)return this.raw=D.value,this.set=[[D]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=D.trim().replace(e," "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(U=>!v(U[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&x(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let D=0;D<this.set.length;D++){D>0&&(this.formatted+="||");const L=this.set[D];for(let H=0;H<L.length;H++)H>0&&(this.formatted+=" "),this.formatted+=L[H].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(D){const H=((this.options.includePrerelease&&g)|(this.options.loose&&y))+":"+D,U=r.get(H);if(U)return U;const V=this.options.loose,J=V?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];D=D.replace(J,K(this.options.includePrerelease)),s("hyphen replace",D),D=D.replace(l[u.COMPARATORTRIM],f),s("comparator trim",D),D=D.replace(l[u.TILDETRIM],d),s("tilde trim",D),D=D.replace(l[u.CARETTRIM],p),s("caret trim",D);let z=D.split(" ").map(ve=>S(ve,this.options)).join(" ").split(/\s+/).map(ve=>P(ve,this.options));V&&(z=z.filter(ve=>(s("loose invalid filter",ve,this.options),!!ve.match(l[u.COMPARATORLOOSE])))),s("range list",z);const G=new Map,xe=z.map(ve=>new o(ve,this.options));for(const ve of xe){if(v(ve))return[ve];G.set(ve.value,ve)}G.size>1&&G.has("")&&G.delete("");const we=[...G.values()];return r.set(H,we),we}intersects(D,L){if(!(D instanceof t))throw new TypeError("a Range is required");return this.set.some(H=>w(H,L)&&D.set.some(U=>w(U,L)&&H.every(V=>U.every(J=>V.intersects(J,L)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new a(D,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(W(this.set[L],D,this.options))return!0;return!1}}Jk=t;const n=J5e(),r=new n,i=IN(),o=lRe(),s=sb(),a=jN(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:d,caretTrimReplace:p}=zN(),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:y}=LN(),v=j=>j.value==="<0.0.0-0",x=j=>j.value==="",w=(j,D)=>{let L=!0;const H=j.slice();let U=H.pop();for(;L&&H.length;)L=H.every(V=>U.intersects(V,D)),U=H.pop();return L},S=(j,D)=>(s("comp",j,D),j=R(j,D),s("caret",j),j=C(j,D),s("tildes",j),j=N(j,D),s("xrange",j),j=I(j,D),s("stars",j),j),E=j=>!j||j.toLowerCase()==="x"||j==="*",C=(j,D)=>j.trim().split(/\s+/).map(L=>$(L,D)).join(" "),$=(j,D)=>{const L=D.loose?l[u.TILDELOOSE]:l[u.TILDE];return j.replace(L,(H,U,V,J,z)=>{s("tilde",j,H,U,V,J,z);let G;return E(U)?G="":E(V)?G=`>=${U}.0.0 <${+U+1}.0.0-0`:E(J)?G=`>=${U}.${V}.0 <${U}.${+V+1}.0-0`:z?(s("replaceTilde pr",z),G=`>=${U}.${V}.${J}-${z} <${U}.${+V+1}.0-0`):G=`>=${U}.${V}.${J} <${U}.${+V+1}.0-0`,s("tilde return",G),G})},R=(j,D)=>j.trim().split(/\s+/).map(L=>A(L,D)).join(" "),A=(j,D)=>{s("caret",j,D);const L=D.loose?l[u.CARETLOOSE]:l[u.CARET],H=D.includePrerelease?"-0":"";return j.replace(L,(U,V,J,z,G)=>{s("caret",j,U,V,J,z,G);let xe;return E(V)?xe="":E(J)?xe=`>=${V}.0.0${H} <${+V+1}.0.0-0`:E(z)?V==="0"?xe=`>=${V}.${J}.0${H} <${V}.${+J+1}.0-0`:xe=`>=${V}.${J}.0${H} <${+V+1}.0.0-0`:G?(s("replaceCaret pr",G),V==="0"?J==="0"?xe=`>=${V}.${J}.${z}-${G} <${V}.${J}.${+z+1}-0`:xe=`>=${V}.${J}.${z}-${G} <${V}.${+J+1}.0-0`:xe=`>=${V}.${J}.${z}-${G} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?J==="0"?xe=`>=${V}.${J}.${z}${H} <${V}.${J}.${+z+1}-0`:xe=`>=${V}.${J}.${z}${H} <${V}.${+J+1}.0-0`:xe=`>=${V}.${J}.${z} <${+V+1}.0.0-0`),s("caret return",xe),xe})},N=(j,D)=>(s("replaceXRanges",j,D),j.split(/\s+/).map(L=>M(L,D)).join(" ")),M=(j,D)=>{j=j.trim();const L=D.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return j.replace(L,(H,U,V,J,z,G)=>{s("xRange",j,H,U,V,J,z,G);const xe=E(V),we=xe||E(J),ve=we||E(z),Be=ve;return U==="="&&Be&&(U=""),G=D.includePrerelease?"-0":"",xe?U===">"||U==="<"?H="<0.0.0-0":H="*":U&&Be?(we&&(J=0),z=0,U===">"?(U=">=",we?(V=+V+1,J=0,z=0):(J=+J+1,z=0)):U==="<="&&(U="<",we?V=+V+1:J=+J+1),U==="<"&&(G="-0"),H=`${U+V}.${J}.${z}${G}`):we?H=`>=${V}.0.0${G} <${+V+1}.0.0-0`:ve&&(H=`>=${V}.${J}.0${G} <${V}.${+J+1}.0-0`),s("xRange return",H),H})},I=(j,D)=>(s("replaceStars",j,D),j.trim().replace(l[u.STAR],"")),P=(j,D)=>(s("replaceGTE0",j,D),j.trim().replace(l[D.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=j=>(D,L,H,U,V,J,z,G,xe,we,ve,Be)=>(E(H)?L="":E(U)?L=`>=${H}.0.0${j?"-0":""}`:E(V)?L=`>=${H}.${U}.0${j?"-0":""}`:J?L=`>=${L}`:L=`>=${L}${j?"-0":""}`,E(xe)?G="":E(we)?G=`<${+xe+1}.0.0-0`:E(ve)?G=`<${xe}.${+we+1}.0-0`:Be?G=`<=${xe}.${we}.${ve}-${Be}`:j?G=`<${xe}.${we}.${+ve+1}-0`:G=`<=${G}`,`${L} ${G}`.trim()),W=(j,D,L)=>{for(let H=0;H<j.length;H++)if(!j[H].test(D))return!1;if(D.prerelease.length&&!L.includePrerelease){for(let H=0;H<j.length;H++)if(s(j[H].semver),j[H].semver!==o.ANY&&j[H].semver.prerelease.length>0){const U=j[H].semver;if(U.major===D.major&&U.minor===D.minor&&U.patch===D.patch)return!0}return!1}return!0};return Jk}var eE,D7;function uRe(){if(D7)return eE;D7=1;const e=ZX();return eE=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},eE}var cRe=uRe(),JX=Z5e(cRe);function fRe(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(u){u.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){s<=0||(r.postMessage(n,o),setTimeout(l,i),s-=1)}setTimeout(l,i)}var dRe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function eK(e,...t){for(const n of t)hRe(e,n);return e}function hRe(e,t){for(const n of Object.keys(t))Ad(e,n,t[n],!0)}const Gi=Wbe;let Og=BAe;const N1=typeof window<"u"?window:void 0;var RI;Og===void 0&&((RI=N1==null?void 0:N1.vl)!=null&&RI.compile)&&(Og=N1.vl);const pRe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},gRe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},jp={vega:"Vega","vega-lite":"Vega-Lite"},Hv={vega:Gi.version,"vega-lite":Og?Og.version:"not available"},mRe={vega:e=>e,"vega-lite":(e,t)=>Og.compile(e,{config:t}).spec},yRe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,vRe="chart-wrapper";function xRe(e){return typeof e=="function"}function O7(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${jp[r]} JSON Source`}function bRe(e,t){if(e.$schema){const n=UX(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${jp[n.library]}, but mode argument sets ${jp[t]??t}.`);const r=n.library;return JX(Hv[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${jp[r]} ${n.version}, but the current version of ${jp[r]} is v${Hv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function tK(e){return!!(e&&"load"in e)}function P7(e){return tK(e)?e:Gi.loader(e)}function wRe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ke(t.defaultStyle)&&(t.defaultStyle=!1),t}async function SRe(e,t,n={}){let r,i;ke(t)?(i=P7(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=wRe(r),s=o.loader;(!i||s)&&(i=P7(n.loader??s));const a=await I7(o,i),l=await I7(n,i),u={...eK(l,a),config:$d(l.config??{},a.config??{})};return await ERe(e,r,u,i)}async function I7(e,t){const n=ke(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ke(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function kRe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ERe(e,t,n={},r){const i=n.theme?$d(C5e[n.theme],n.config??{}):n.config,o=Cl(n.actions)?n.actions:eK({},pRe,n.actions??{}),s={...gRe,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Gi.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const $="vega-embed-style",{root:R,rootContainer:A}=kRe(f);if(!R.getElementById($)){const N=document.createElement("style");N.id=$,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?dRe.toString():n.defaultStyle,A.appendChild(N)}}const d=bRe(t,n.mode);let p=mRe[d](t,i);if(d==="vega-lite"&&p.$schema){const $=UX(p.$schema);JX(Hv.vega,`^${$.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${$.version}, but current version is v${Hv.vega}.`)}f.classList.add("vega-embed"),o&&f.classList.add("has-actions"),f.innerHTML="";let g=f;if(o){const $=document.createElement("div");$.classList.add(vRe),f.appendChild($),g=$}const y=n.patch;if(y&&(p=y instanceof Function?y(p):ob(p,y,!0,!1).newDocument),n.formatLocale&&Gi.formatLocale(n.formatLocale),n.timeFormatLocale&&Gi.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const $ in n.expressionFunctions){const R=n.expressionFunctions[$];"fn"in R?Gi.expressionFunction($,R.fn,R.visitor):R instanceof Function&&Gi.expressionFunction($,R)}const{ast:v}=n,x=Gi.parse(p,d==="vega-lite"?{}:i,{ast:v}),w=new(n.viewClass||Gi.View)(x,{loader:r,logLevel:l,renderer:a,...v?{expr:Gi.expressionInterpreter??n.expr??lwe}:{}});if(w.addSignalListener("autosize",($,R)=>{const{type:A}=R;A=="fit-x"?(g.classList.add("fit-x"),g.classList.remove("fit-y")):A=="fit-y"?(g.classList.remove("fit-x"),g.classList.add("fit-y")):A=="fit"?g.classList.add("fit-x","fit-y"):g.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:$,tooltip:R}=n,A=$&&!tK($)?$==null?void 0:$.baseURL:void 0,N=xRe(R)?R:new P5e({baseURL:A,...R===!0?{}:R}).call;w.tooltip(N)}let{hover:S}=n;if(S===void 0&&(S=d==="vega"),S){const{hoverSet:$,updateSet:R}=typeof S=="boolean"?{}:S;w.hover($,R)}n&&(n.width!=null&&w.width(n.width),n.height!=null&&w.height(n.height),n.padding!=null&&w.padding(n.padding)),await w.initialize(g,n.bind).runAsync();let E;if(o!==!1){let $=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const A=document.createElement("details");A.title=s.CLICK_TO_VIEW_ACTIONS,f.append(A),$=A;const N=document.createElement("summary");N.innerHTML=yRe,A.append(N),E=M=>{A.contains(M.target)||A.removeAttribute("open")},document.addEventListener("click",E)}const R=document.createElement("div");if($.append(R),R.classList.add("vega-actions"),o===!0||o.export!==!1){for(const A of["svg","png"])if(o===!0||o.export===!0||o.export[A]){const N=s[`${A.toUpperCase()}_ACTION`],M=document.createElement("a"),I=Ee(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;M.text=N,M.href="#",M.target="_blank",M.download=`${u}.${A}`,M.addEventListener("mousedown",async function(P){P.preventDefault();const K=await w.toImageURL(A,I);this.href=K}),R.append(M)}}if(o===!0||o.source!==!1){const A=document.createElement("a");A.text=s.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(N){O7(cS(t),n.sourceHeader??"",n.sourceFooter??"",d),N.preventDefault()}),R.append(A)}if(d==="vega-lite"&&(o===!0||o.compiled!==!1)){const A=document.createElement("a");A.text=s.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(N){O7(cS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),R.append(A)}if(o===!0||o.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=s.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(M){fRe(window,A,{config:i,mode:y?"vega":d,renderer:a,spec:cS(y?p:t)}),M.preventDefault()}),R.append(N)}}function C(){E&&document.removeEventListener("click",E),w.finalize()}return{view:w,spec:t,vgSpec:p,finalize:C,embedOptions:n}}function _Re(e){return!!e&&{}.toString.call(e)==="[object Function]"}function CRe(e,t,n){n&&(_Re(n)?n(e.data(t)):e.change(t,Gi.changeset().remove(()=>!0).insert(n)))}function $Re(e,t){Object.keys(t).forEach(n=>{CRe(e,n,t[n])})}function nK(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const rK=()=>{};function tE(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var nE,L7;function ARe(){return L7||(L7=1,nE=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),nE}var RRe=ARe();const TRe=Gv(RRe);function NRe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=nK([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!TRe(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function z7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function rE(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function Bp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class iK extends Ru.PureComponent{constructor(){super(...arguments),Bp(this,"containerRef",Ru.createRef()),Bp(this,"resultPromise",void 0),Bp(this,"handleError",t=>{const{onError:n=rK}=this.props;n(t,this.containerRef.current),console.warn(t)}),Bp(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=nK([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=NRe(rE(this.props),rE(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!T_(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&z7(a,o),i&&tE(a,i)),a.run()})}else T_(i,o)||this.modifyView(s=>{o&&z7(s,o),i&&tE(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=rE(this.props);this.resultPromise=SRe(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;tE(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Ru.createElement("div",{ref:this.containerRef,className:t,style:n})}}Bp(iK,"propTypes",{className:oe.string,onError:oe.func});function G$(){return G$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G$.apply(this,arguments)}function Y$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const FRe={};class oK extends Ru.PureComponent{constructor(){super(...arguments),Y$(this,"vegaEmbed",Ru.createRef()),Y$(this,"handleNewView",t=>{this.update();const{onNewView:n=rK}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){T_(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{$Re(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Ru.createElement(iK,G$({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Y$(oK,"defaultProps",{data:FRe});function X$(){return X$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X$.apply(this,arguments)}function BN(e){return Ru.createElement(oK,X$({},e,{mode:"vega-lite"}))}const Au={gray700:"#4B5563",bluePrimary:"#1E40AF",purpleAccent:"#7C3AED",greenMuted:"#059669",orangePrimary:"#FF6600",orangeAccent:"#B36C31",orangeMuted:"#FF6C0B"},MRe=[{week:"2025-04-01",visits:12e3,hospitalizations:3e3},{week:"2025-04-08",visits:12500,hospitalizations:3100},{week:"2025-04-15",visits:13e3,hospitalizations:3200},{week:"2025-04-22",visits:14e3,hospitalizations:3500},{week:"2025-04-29",visits:15e3,hospitalizations:3700}],DRe={"COVID-19":Au.bluePrimary,Influenza:Au.purpleAccent,RSV:Au.greenMuted,ARI:Au.orangeMuted},ORe=({data:e=MRe,virus:t="COVID-19",view:n="visits"})=>{const r=DRe[t]||Au.gray700,i={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Simple weekly bar chart of ED activity",data:{name:"table"},width:800,height:300,mark:{type:"bar",opacity:1,stroke:"#1E3A8A",strokeWidth:.8},encoding:{x:{field:"week",type:"ordinal",title:"Week"},y:{field:n,type:"quantitative",title:`ED ${n==="hospitalizations"?"Hospitalizations":"Visits"}`},color:{value:r},tooltip:[{field:"week",type:"ordinal"},{field:n,type:"quantitative",title:n==="hospitalizations"?"Hospitalizations":"Visits"}]}};return F.jsx(BN,{spec:i,data:{table:e}})},PRe=({data:e,view:t})=>{const[n,r]=X.useState("fade-in"),[i,o]=X.useState(t);X.useEffect(()=>{if(t===i)return;r("fade-out");const f=setTimeout(()=>{o(t),r("fade-in")},300);return()=>clearTimeout(f)},[t,i]);const s=i==="visits"?"visits":"hospitalizations",a=i==="visits"?"ARI Visits":"ARI Hospitalizations",l=i==="visits"?Au.orangePrimary:Au.orangeAccent,u=X.useMemo(()=>({$schema:"https://vega.github.io/schema/vega-lite/v6.json",description:"Weekly ARI trends",width:900,height:300,autosize:{type:"fit",contains:"padding"},data:{values:e},mark:{type:"bar",cornerRadiusTopLeft:4,cornerRadiusTopRight:4},encoding:{x:{field:"week",type:"temporal",timeUnit:"yearmonthdate",title:"Week",axis:{format:"%b %d",labelAngle:-40}},y:{field:s,type:"quantitative",title:a},color:{value:l},tooltip:[{field:"week",type:"temporal",title:"Week"},{field:s,type:"quantitative",title:a}]}}),[e,i,s,a,l]);return F.jsx("div",{className:`chart-fade-wrapper ${n}`,children:F.jsxs("div",{className:"chart-vega-wrapper",children:[F.jsx(BN,{spec:u,actions:!1,config:{autosize:{type:"fit",contains:"padding"}}}),"      "]})})},ab=({data:e,specTemplate:t,dynamicFields:n={}})=>{const r=X.useRef(null),[i,o]=X.useState(0);X.useEffect(()=>{const a=r.current;if(!a)return;const l=new ResizeObserver(u=>{for(let f of u)f.contentRect.width>0&&o(f.contentRect.width)});return l.observe(a),()=>l.disconnect()},[]);const s=JSON.parse(JSON.stringify(t),(a,l)=>typeof l=="string"&&l.startsWith("{")&&l.endsWith("}")?n[l.slice(1,-1)]:l);return s.data={values:e},s.width=i,s.autosize={type:"fit",contains:"padding"},F.jsx("div",{ref:r,style:{width:"100%"},children:i>0?F.jsx(BN,{spec:s}):null})};ab.propTypes={data:oe.array.isRequired,specTemplate:oe.object.isRequired,dynamicFields:oe.object};const{typography:j7,colors:B7,spacing:iE}=sa,IRe=({dataSource:e,latestDate:t,footnote:n})=>{const r=t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null;return F.jsxs("div",{style:{fontSize:j7.fontSizeBase,color:B7.gray500,marginTop:iE.sm},children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:iE.sm},children:[F.jsxs("span",{children:[F.jsx("strong",{children:"Data Source:"})," ",F.jsx("span",{dangerouslySetInnerHTML:{__html:ft.parseInline(e||"")}})]}),r&&F.jsxs("span",{children:["Data as of: ",r]})]}),n&&F.jsx("div",{style:{marginTop:iE.xs,fontSize:j7.fontSizeSmall,color:B7.gray500},dangerouslySetInnerHTML:{__html:ft.parseInline(n)}})]})},{covid:LRe,flu:zRe,rsv:jRe}=sa.colorScales,{colors:Ns,typography:F1}=sa,BRe=(e,t)=>{if(!e||e.length<2)return"%b %d";const n=new Date(e[0][t]),r=new Date(e[1][t]),i=Math.abs(r-n),o=864e5,s=o*7,a=o*28;return i<=o||i<=s+o?"%b %d":i<=a?"%b":"%b %Y"},URe=({data:e,title:t,xField:n,yField:r,colorField:i,tooltipFields:o,virus:s,color:a,metricName:l="Category",isPercent:u,seasonal:f,dataSource:d="NYC Health Department Syndromic Surveillance",footnote:p})=>{const g={"COVID-19":Ns.bluePrimary,Influenza:Ns.purplePrimary,RSV:Ns.greenPrimary},y={"COVID-19":LRe,Influenza:zRe,RSV:jRe},v=Ns.gray600,x=sa.colors[a]||a||g[s]||v,w=s&&e.some(R=>R.virus)?e.filter(R=>R.virus===s):e,S=BRe(w,n),E=f?{field:"dayOfSeason",type:"quantitative",axis:{title:null,values:[1,32,62,93,124,152,183,213,244,274,305,335],labelExpr:"['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'][indexof([1, 32, 62, 93, 124, 152, 183, 213, 244, 274, 305, 335], datum.value)]"},scale:{domain:[1,365]}}:{field:n,type:"temporal",axis:{title:null,format:S,tickCount:6},scale:{padding:10}},C=(o??[n,r,...i?[i]:[]]).map(R=>{var N;const A=(N=w.find(M=>M[R]!=null))==null?void 0:N[R];return{field:R,type:R===n?"temporal":typeof A=="number"?"quantitative":"nominal"}}),$={width:"container",autosize:{type:"fit",contains:"padding"},title:{text:t,subtitlePadding:10,fontWeight:"normal",anchor:"start",fontSize:14,baseline:"top",dy:-10,subtitleFontSize:13},config:{background:Ns.white,axis:{labelFont:F1.body,titleFont:F1.heading,labelColor:Ns.gray700,titleColor:Ns.gray800,labelFontSize:12},axisX:{ticks:!0,domain:!0,domainColor:"lightgray",grid:!1},axisY:{domain:!1,ticks:!1,tickCount:3,orient:"left",zindex:0,gridDash:[2]},legend:{labelFont:F1.body,titleFont:F1.heading,labelColor:Ns.gray600,titleColor:Ns.gray700,symbolSize:100,symbolStrokeWidth:5,orient:"bottom",title:l,labelFontSize:16},view:{stroke:"transparent"}},transform:[{calculate:"year(datum.date)",as:"year"},{calculate:"month(datum.date)",as:"month"},{calculate:"dayofyear(datum.date)",as:"day"},{calculate:"month(datum.date) > 7 ? year(datum.date) : year(datum.date) - 1",as:"startYear"},{calculate:"(datetime(year(datum.date), month(datum.date), date(datum.date)) - datetime(month(datum.date) > 7 ? year(datum.date) : year(datum.date) - 1, 8, 1)) / (1000 * 60 * 60 * 24) + 1",as:"dayOfSeason"},{calculate:"toString(datum.startYear) + '-' + substring(toString(datum.startYear + 1), 2)",as:"season"}],layer:[...i||f?[]:[{mark:{type:"area",interpolate:"linear",opacity:.15,color:x},encoding:{x:E,y:{field:"{yField}",type:"quantitative"}}}],{mark:{type:"line",interpolate:"linear",strokeWidth:3,point:{filled:!0,size:40}},encoding:{x:E,y:{field:"{yField}",type:"quantitative",axis:{title:null,tickCount:4,...u?{labelExpr:"datum.value + '%'"}:{}}},color:i?{field:"{colorField}",type:"nominal",scale:{range:y[s]||void 0},sort:["0-4","5-17","18-64","65+"]}:{value:x},tooltip:C}},{mark:{type:"point",opacity:0,size:100},encoding:{x:E,y:{field:"{yField}",type:"quantitative"},tooltip:C}}]};return F.jsxs("div",{style:{width:"100%"},children:[F.jsx(ab,{data:w,specTemplate:$,dynamicFields:{xField:n,yField:r,colorField:i}}),F.jsx(IRe,{dataSource:d,latestDate:(w==null?void 0:w.length)>0?Math.max(...w.map(R=>new Date(R[n]))):null,footnote:p})]})},{colors:hu,typography:vp,spacing:qRe}=sa;function WRe(e){const t=new Date(e.valueOf()),n=(e.getDay()+6)%7;t.setDate(t.getDate()-n+3);const r=new Date(t.getFullYear(),0,4),i=t-r;return 1+Math.round(i/(7*24*60*60*1e3))}const VRe=({data:e,xField:t="date",yField:n="value",colorField:r="submetric",metricName:i,display:o,legendTitle:s="Category",showRollingAvg:a=!1,customColorScale:l})=>{const u=typeof o=="string"?o.trim().toLowerCase():null,d=e.map(v=>{const x=new Date(v.date),w=x.getFullYear(),S=WRe(x),C=(typeof v.display=="string"?v.display.trim():"").toLowerCase();return{...v,date:x,year:w,isoWeek:`${w}-W${String(S).padStart(2,"0")}`,value:isNaN(+v[n])?null:+v[n],metric:v.metric??i,...r?{[r]:v[r]??"Unknown"}:{},display:C||"unknown"}}).filter(v=>{const x=!i||v.metric===i,w=!u||v.display===u;return x&&w}),p={mark:{type:"bar",opacity:.9,stroke:null},encoding:{x:{field:t,type:"ordinal",axis:{title:null,labelExpr:"timeFormat(toDate(datum.value), '%m/%d/%y')",labelAngle:-45},scale:{padding:0}},y:{field:n,type:"quantitative",stack:"zero",title:null},...r&&{color:{field:r,type:"nominal",legend:{title:s},...l?{scale:l}:{}},order:{field:"stackOrder",type:"ordinal"}},tooltip:[{field:"date",type:"temporal",format:"%d %b %Y"},...r?[{field:r,type:"nominal"}]:[],{field:n,type:"quantitative"}]}},g=a?{transform:[{aggregate:[{op:"sum",field:n,as:"totalValue"}],groupby:[t]},{window:[{op:"mean",field:"totalValue",as:"rollingAvg"}],frame:[-1,1],sort:[{field:t}]}],mark:{type:"line",color:hu.gray700,strokeWidth:2,interpolate:"monotone"},encoding:{x:{field:t,type:"temporal"},y:{field:"rollingAvg",type:"quantitative",title:"3-Week Avg"},tooltip:[{field:t,type:"temporal",format:"%d %b %Y"},{field:"rollingAvg",type:"quantitative",title:"3-Week Avg"}]}}:null,y={width:"container",autosize:{type:"fit",contains:"padding"},config:{background:hu.white,axis:{labelFont:vp.body,titleFont:vp.heading,labelColor:hu.gray700,titleColor:hu.gray800,grid:!1,ticks:!1,domain:!1},view:{stroke:"transparent"},legend:{labelFont:vp.body,titleFont:vp.heading,labelColor:hu.gray600,titleColor:hu.gray700,symbolSize:100,symbolStrokeWidth:5,orient:"bottom"},bar:{binSpacing:0,stroke:null,continuousBandSize:10}},transform:[{calculate:"datum.submetric === 'Flu B' ? 0 : datum.submetric === 'Confirmed' ? 0 : datum.submetric === 'Flu A H3' ? 1 : datum.submetric === 'Probable' ? 1 : datum.submetric === 'Flu A H1' ? 2 : datum.submetric === 'Flu A not subtyped' ? 3 : 4",as:"stackOrder"}],layer:a?[p,g]:[p]};return F.jsxs("div",{style:{width:"100%"},children:[F.jsx(ab,{data:d,specTemplate:y}),F.jsx("div",{style:{fontSize:vp.fontSizeBase,color:hu.gray500,marginTop:qRe.sm},children:"Source: NYC Health Department Syndromic Surveillance"})]})},{colors:xf,typography:bf,spacing:HRe}=sa;function GRe(e){const t=new Date(e.valueOf()),n=(e.getDay()+6)%7;t.setDate(t.getDate()-n+3);const r=new Date(t.getFullYear(),0,4),i=t-r;return 1+Math.round(i/(7*24*60*60*1e3))}const YRe=({data:e,xField:t="date",yField:n="value",colorField:r="submetric",metricName:i,display:o,legendTitle:s="Category",showRollingAvg:a=!1})=>{const l=typeof o=="string"?o.trim().toLowerCase():null,f=e.map(g=>{const y=new Date(g.date),v=y.getFullYear(),x=GRe(y),S=(typeof g.display=="string"?g.display.trim():"").toLowerCase();return{...g,date:y,year:v,isoWeek:`${v}-W${String(x).padStart(2,"0")}`,value:isNaN(+g[n])?null:+g[n],metric:g.metric??i,...r?{[r]:g[r]??"Unknown"}:{},display:S||"unknown"}}).filter(g=>{const y=!i||g.metric===i,v=!l||g.display===l;return y&&v});let d;i.includes("COVID")?d="#2B83BA":i.includes("Influenza")||i.includes("Flu")||i.includes("flu")?d="#4F32B3":i.includes("RSV")?d="#00441B":console.log("metric name not identified");const p={width:"container",autosize:{type:"fit",contains:"padding"},transform:[{calculate:"datum.submetric === '0-4' ? 0 : datum.submetric === '5-17' ? 1 : datum.submetric === '18-49' ? 2 : datum.submetric === '50-64' ? 3 : 4",as:"submetric_order"}],facet:{row:{field:"submetric",type:"nominal",sort:{field:"submetric_order",op:"min"},header:{labelOpacity:0,labelFontSize:0,title:null,labelPadding:0}}},spec:{height:75,config:{background:xf.white,axis:{labelFont:bf.body,titleFont:bf.heading,labelColor:xf.gray700,titleColor:xf.gray800,grid:!1,ticks:!1,domain:!1},view:{stroke:"transparent"},legend:{labelFont:bf.body,titleFont:bf.heading,labelColor:xf.gray600,titleColor:xf.gray700,symbolSize:100,symbolStrokeWidth:5,orient:"bottom"},bar:{binSpacing:0,stroke:null,continuousBandSize:10}},layer:[{transform:[{window:[{op:"row_number",as:"row_number"}],groupby:["submetric"]},{filter:"datum.row_number === 1"}],mark:{type:"text",align:"left",dx:-518,dy:-50,font:bf.body,fontSize:14,fontWeight:"bold",color:"#374151"},encoding:{text:{field:"submetric",type:"nominal"}}},{selection:{hover:{type:"single",on:"mouseover",empty:"none",fields:["date","submetric"]}},mark:{type:"bar",opacity:.9,stroke:1},encoding:{x:{field:t,type:"ordinal",axis:{title:null,labelExpr:"timeFormat(toDate(datum.value), '%m/%d/%y')",labelAngle:-45},scale:{padding:0}},y:{field:n,type:"quantitative",stack:"zero",title:null},color:{value:d},strokeWidth:{condition:{selection:"hover",value:2.5},value:1},order:{field:"stackOrder",type:"ordinal"},tooltip:[{field:"date",type:"temporal",format:"%d %b %Y"},{field:"submetric",type:"nominal"},{field:"value",type:"quantitative"}]}}]}};return F.jsxs("div",{style:{width:"100%"},children:[F.jsx(ab,{data:f,specTemplate:p}),F.jsx("div",{style:{fontSize:bf.fontSizeBase,color:xf.gray500,marginTop:HRe.sm},children:"Source: NYC Health Department Syndromic Surveillance"})]})},XRe={edSeasonalComparisonChart:ORe,ExampleChart:PRe,lineChart:URe,yearComparisonChart:VRe,smallMultipleBarChart:YRe};function KRe(e,t){var o,s;if(!Array.isArray(e)||e.length<2)return null;const n=(o=e.at(-1))==null?void 0:o[t],r=(s=e.at(-2))==null?void 0:s[t];if(typeof n!="number"||typeof r!="number"||r===0)return null;const i=(n-r)/r*100;return i>.5?{label:"increased",value:Math.round(i),direction:"up"}:i<-.5?{label:"decreased",value:Math.abs(Math.round(i)),direction:"down"}:{label:"not changed",value:0,direction:"neutral"}}function QRe(e){return e?new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A"}const ZRe=({trendDirection:e,metricLabel:t,virus:n})=>{if(!e)return null;const r={up:"var(--red-accent)",down:"var(--green-muted)",same:"var(--black)"},i={up:"",down:"",same:""},o={up:"higher than last week",down:"lower than last week",same:"the same as last week"};return{trendColor:r[e],arrow:i[e],directionText:o[e],label:`${n} ${t} are `}};async function JRe(e){const n=await(await fetch(e)).text();return _te(n)}var oE,U7;function eTe(){return U7||(U7=1,oE=function(){}),oE}var sE,q7;function Rc(){if(q7)return sE;q7=1;var e=eTe()();return sE=function(t){return t!==e&&t!==null},sE}var aE,W7;function sK(){if(W7)return aE;W7=1;var e=Rc(),t=Array.prototype.forEach,n=Object.create,r=function(i,o){var s;for(s in i)o[s]=i[s]};return aE=function(i){var o=n(null);return t.call(arguments,function(s){e(s)&&r(Object(s),o)}),o},aE}var lE,V7;function tTe(){return V7||(V7=1,lE=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1}),lE}var uE,H7;function nTe(){return H7||(H7=1,uE=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1}),uE}var cE,G7;function rTe(){return G7||(G7=1,cE=tTe()()?Math.sign:nTe()),cE}var fE,Y7;function iTe(){if(Y7)return fE;Y7=1;var e=rTe(),t=Math.abs,n=Math.floor;return fE=function(r){return isNaN(r)?0:(r=Number(r),r===0||!isFinite(r)?r:e(r)*n(t(r)))},fE}var dE,X7;function Tc(){if(X7)return dE;X7=1;var e=iTe(),t=Math.max;return dE=function(n){return t(0,e(n))},dE}var hE,K7;function aK(){if(K7)return hE;K7=1;var e=Tc();return hE=function(t,n,r){var i;return isNaN(t)?(i=n,i>=0?r&&i?i-1:i:1):t===!1?!1:e(t)},hE}var pE,Q7;function Bl(){return Q7||(Q7=1,pE=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}),pE}var gE,Z7;function Jd(){if(Z7)return gE;Z7=1;var e=Rc();return gE=function(t){if(!e(t))throw new TypeError("Cannot use null or undefined");return t},gE}var mE,J7;function oTe(){if(J7)return mE;J7=1;var e=Bl(),t=Jd(),n=Function.prototype.bind,r=Function.prototype.call,i=Object.keys,o=Object.prototype.propertyIsEnumerable;return mE=function(s,a){return function(l,u){var f,d=arguments[2],p=arguments[3];return l=Object(t(l)),e(u),f=i(l),p&&f.sort(typeof p=="function"?n.call(p,l):void 0),typeof s!="function"&&(s=f[s]),r.call(s,f,function(g,y){return o.call(l,g)?r.call(u,d,l[g],g,l,y):a})}},mE}var yE,e9;function lb(){return e9||(e9=1,yE=oTe()("forEach")),yE}var t9={},n9;function Nc(){return n9||(n9=1),t9}var vE={exports:{}},xE,r9;function sTe(){return r9||(r9=1,xE=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}),xE}var bE,i9;function aTe(){return i9||(i9=1,bE=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),bE}var wE,o9;function lTe(){if(o9)return wE;o9=1;var e=Rc(),t=Object.keys;return wE=function(n){return t(e(n)?Object(n):n)},wE}var SE,s9;function uTe(){return s9||(s9=1,SE=aTe()()?Object.keys:lTe()),SE}var kE,a9;function cTe(){if(a9)return kE;a9=1;var e=uTe(),t=Jd(),n=Math.max;return kE=function(r,i){var o,s,a=n(arguments.length,2),l;for(r=Object(t(r)),l=function(u){try{r[u]=i[u]}catch(f){o||(o=f)}},s=1;s<a;++s)i=arguments[s],e(i).forEach(l);if(o!==void 0)throw o;return r},kE}var EE,l9;function lK(){return l9||(l9=1,EE=sTe()()?Object.assign:cTe()),EE}var _E,u9;function fTe(){if(u9)return _E;u9=1;var e=Rc(),t={function:!0,object:!0};return _E=function(n){return e(n)&&t[typeof n]||!1},_E}var c9;function dTe(){return c9||(c9=1,function(e){var t=lK(),n=fTe(),r=Rc(),i=Error.captureStackTrace;e.exports=function(o){var s=new Error(o),a=arguments[1],l=arguments[2];return r(l)||n(a)&&(l=a,a=null),r(l)&&t(s,l),r(a)&&(s.code=a),i&&i(s,e.exports),s}}(vE)),vE.exports}var M1={exports:{}},CE,f9;function uK(){if(f9)return CE;f9=1;var e=Jd(),t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols;return CE=function(o,s){var a,l=Object(e(s));if(o=Object(e(o)),r(l).forEach(function(u){try{t(o,u,n(s,u))}catch(f){a=f}}),typeof i=="function"&&i(l).forEach(function(u){try{t(o,u,n(s,u))}catch(f){a=f}}),a!==void 0)throw a;return o},CE}var d9;function cK(){if(d9)return M1.exports;d9=1;var e=Tc(),t=function(s,a){return a},n,r,i,o;try{Object.defineProperty(t,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch{}return t.length===1?(n={configurable:!0,writable:!1,enumerable:!1},r=Object.defineProperty,M1.exports=function(s,a){return a=e(a),s.length===a?s:(n.value=a,r(s,"length",n))}):(o=uK(),i=function(){var s=[];return function(a){var l,u=0;if(s[a])return s[a];for(l=[];a--;)l.push("a"+(++u).toString(36));return new Function("fn","return function ("+l.join(", ")+") { return fn.apply(this, arguments); };")}}(),M1.exports=function(s,a){var l;if(a=e(a),s.length===a)return s;l=i(a)(s);try{o(l,s)}catch{}return l}),M1.exports}var $E={exports:{}},AE,h9;function fK(){if(h9)return AE;h9=1;var e=void 0;return AE=function(t){return t!==e&&t!==null},AE}var RE,p9;function hTe(){if(p9)return RE;p9=1;var e=fK(),t={object:!0,function:!0,undefined:!0};return RE=function(n){return e(n)?hasOwnProperty.call(t,typeof n):!1},RE}var TE,g9;function pTe(){if(g9)return TE;g9=1;var e=hTe();return TE=function(t){if(!e(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},TE}var NE,m9;function gTe(){if(m9)return NE;m9=1;var e=pTe();return NE=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!e(t)},NE}var FE,y9;function mTe(){if(y9)return FE;y9=1;var e=gTe(),t=/^\s*class[\s{/}]/,n=Function.prototype.toString;return FE=function(r){return!(!e(r)||t.test(n.call(r)))},FE}var ME,v9;function yTe(){if(v9)return ME;v9=1;var e="razdwatrzy";return ME=function(){return typeof e.contains!="function"?!1:e.contains("dwa")===!0&&e.contains("foo")===!1},ME}var DE,x9;function vTe(){if(x9)return DE;x9=1;var e=String.prototype.indexOf;return DE=function(t){return e.call(this,t,arguments[1])>-1},DE}var OE,b9;function xTe(){return b9||(b9=1,OE=yTe()()?String.prototype.contains:vTe()),OE}var w9;function Fc(){if(w9)return $E.exports;w9=1;var e=fK(),t=mTe(),n=lK(),r=sK(),i=xTe(),o=$E.exports=function(s,a){var l,u,f,d,p;return arguments.length<2||typeof s!="string"?(d=a,a=s,s=null):d=arguments[2],e(s)?(l=i.call(s,"c"),u=i.call(s,"e"),f=i.call(s,"w")):(l=f=!0,u=!1),p={value:a,configurable:l,enumerable:u,writable:f},d?n(r(d),p):p};return o.gs=function(s,a,l){var u,f,d,p;return typeof s!="string"?(d=l,l=a,a=s,s=null):d=arguments[3],e(a)?t(a)?e(l)?t(l)||(d=l,l=void 0):l=void 0:(d=a,a=l=void 0):a=void 0,e(s)?(u=i.call(s,"c"),f=i.call(s,"e")):(u=!0,f=!1),p={get:a,set:l,configurable:u,enumerable:f},d?n(r(d),p):p},$E.exports}var D1={exports:{}},S9;function bTe(){return S9||(S9=1,function(e,t){var n=Fc(),r=Bl(),i=Function.prototype.apply,o=Function.prototype.call,s=Object.create,a=Object.defineProperty,l=Object.defineProperties,u=Object.prototype.hasOwnProperty,f={configurable:!0,enumerable:!1,writable:!0},d,p,g,y,v,x,w;d=function(S,E){var C;return r(E),u.call(this,"__ee__")?C=this.__ee__:(C=f.value=s(null),a(this,"__ee__",f),f.value=null),C[S]?typeof C[S]=="object"?C[S].push(E):C[S]=[C[S],E]:C[S]=E,this},p=function(S,E){var C,$;return r(E),$=this,d.call(this,S,C=function(){g.call($,S,C),i.call(E,this,arguments)}),C.__eeOnceListener__=E,this},g=function(S,E){var C,$,R,A;if(r(E),!u.call(this,"__ee__"))return this;if(C=this.__ee__,!C[S])return this;if($=C[S],typeof $=="object")for(A=0;R=$[A];++A)(R===E||R.__eeOnceListener__===E)&&($.length===2?C[S]=$[A?0:1]:$.splice(A,1));else($===E||$.__eeOnceListener__===E)&&delete C[S];return this},y=function(S){var E,C,$,R,A;if(u.call(this,"__ee__")&&(R=this.__ee__[S],!!R))if(typeof R=="object"){for(C=arguments.length,A=new Array(C-1),E=1;E<C;++E)A[E-1]=arguments[E];for(R=R.slice(),E=0;$=R[E];++E)i.call($,this,A)}else switch(arguments.length){case 1:o.call(R,this);break;case 2:o.call(R,this,arguments[1]);break;case 3:o.call(R,this,arguments[1],arguments[2]);break;default:for(C=arguments.length,A=new Array(C-1),E=1;E<C;++E)A[E-1]=arguments[E];i.call(R,this,A)}},v={on:d,once:p,off:g,emit:y},x={on:n(d),once:n(p),off:n(g),emit:n(y)},w=l({},x),e.exports=t=function(S){return S==null?s(w):l(Object(S),x)},t.methods=v}(D1,D1.exports)),D1.exports}var PE,k9;function wTe(){return k9||(k9=1,PE=function(){var e=Array.from,t,n;return typeof e!="function"?!1:(t=["raz","dwa"],n=e(t),!!(n&&n!==t&&n[1]==="dwa"))}),PE}var IE,E9;function STe(){return E9||(E9=1,IE=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}),IE}var LE,_9;function kTe(){if(_9)return LE;_9=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return LE=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),LE}var zE,C9;function ub(){return C9||(C9=1,zE=STe()()?globalThis:kTe()),zE}var jE,$9;function ETe(){if($9)return jE;$9=1;var e=ub(),t={object:!0,symbol:!0};return jE=function(){var n=e.Symbol,r;if(typeof n!="function")return!1;r=n("test symbol");try{String(r)}catch{return!1}return!(!t[typeof n.iterator]||!t[typeof n.toPrimitive]||!t[typeof n.toStringTag])},jE}var BE,A9;function _Te(){return A9||(A9=1,BE=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1}),BE}var UE,R9;function dK(){if(R9)return UE;R9=1;var e=_Te();return UE=function(t){if(!e(t))throw new TypeError(t+" is not a symbol");return t},UE}var qE,T9;function CTe(){if(T9)return qE;T9=1;var e=Fc(),t=Object.create,n=Object.defineProperty,r=Object.prototype,i=t(null);return qE=function(o){for(var s=0,a,l;i[o+(s||"")];)++s;return o+=s||"",i[o]=!0,a="@@"+o,n(r,a,e.gs(null,function(u){l||(l=!0,n(this,a,e(u)),l=!1)})),a},qE}var WE,N9;function $Te(){if(N9)return WE;N9=1;var e=Fc(),t=ub().Symbol;return WE=function(n){return Object.defineProperties(n,{hasInstance:e("",t&&t.hasInstance||n("hasInstance")),isConcatSpreadable:e("",t&&t.isConcatSpreadable||n("isConcatSpreadable")),iterator:e("",t&&t.iterator||n("iterator")),match:e("",t&&t.match||n("match")),replace:e("",t&&t.replace||n("replace")),search:e("",t&&t.search||n("search")),species:e("",t&&t.species||n("species")),split:e("",t&&t.split||n("split")),toPrimitive:e("",t&&t.toPrimitive||n("toPrimitive")),toStringTag:e("",t&&t.toStringTag||n("toStringTag")),unscopables:e("",t&&t.unscopables||n("unscopables"))})},WE}var VE,F9;function ATe(){if(F9)return VE;F9=1;var e=Fc(),t=dK(),n=Object.create(null);return VE=function(r){return Object.defineProperties(r,{for:e(function(i){return n[i]?n[i]:n[i]=r(String(i))}),keyFor:e(function(i){var o;t(i);for(o in n)if(n[o]===i)return o})})},VE}var HE,M9;function RTe(){if(M9)return HE;M9=1;var e=Fc(),t=dK(),n=ub().Symbol,r=CTe(),i=$Te(),o=ATe(),s=Object.create,a=Object.defineProperties,l=Object.defineProperty,u,f,d;if(typeof n=="function")try{String(n()),d=!0}catch{}else n=null;return f=function(g){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return u(g)},HE=u=function p(g){var y;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return d?n(g):(y=s(f.prototype),g=g===void 0?"":String(g),a(y,{__description__:e("",g),__name__:e("",r(g))}))},i(u),o(u),a(f.prototype,{constructor:e(u),toString:e("",function(){return this.__name__})}),a(u.prototype,{toString:e(function(){return"Symbol ("+t(this).__description__+")"}),valueOf:e(function(){return t(this)})}),l(u.prototype,u.toPrimitive,e("",function(){var p=t(this);return typeof p=="symbol"?p:p.toString()})),l(u.prototype,u.toStringTag,e("c","Symbol")),l(f.prototype,u.toStringTag,e("c",u.prototype[u.toStringTag])),l(f.prototype,u.toPrimitive,e("c",u.prototype[u.toPrimitive])),HE}var GE,D9;function TTe(){return D9||(D9=1,GE=ETe()()?ub().Symbol:RTe()),GE}var YE,O9;function NTe(){if(O9)return YE;O9=1;var e=Object.prototype.toString,t=e.call(function(){return arguments}());return YE=function(n){return e.call(n)===t},YE}var XE,P9;function FTe(){if(P9)return XE;P9=1;var e=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);return XE=function(n){return typeof n=="function"&&t(e.call(n))},XE}var KE,I9;function MTe(){if(I9)return KE;I9=1;var e=Object.prototype.toString,t=e.call("");return KE=function(n){return typeof n=="string"||n&&typeof n=="object"&&(n instanceof String||e.call(n)===t)||!1},KE}var QE,L9;function DTe(){if(L9)return QE;L9=1;var e=TTe().iterator,t=NTe(),n=FTe(),r=Tc(),i=Bl(),o=Jd(),s=Rc(),a=MTe(),l=Array.isArray,u=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;return QE=function(p){var g=arguments[1],y=arguments[2],v,x,w,S,E,C,$,R,A,N;if(p=Object(o(p)),s(g)&&i(g),!this||this===Array||!n(this)){if(!g){if(t(p))return E=p.length,E!==1?Array.apply(null,p):(S=new Array(1),S[0]=p[0],S);if(l(p)){for(S=new Array(E=p.length),x=0;x<E;++x)S[x]=p[x];return S}}S=[]}else v=this;if(!l(p)){if((A=p[e])!==void 0){for($=i(A).call(p),v&&(S=new v),R=$.next(),x=0;!R.done;)N=g?u.call(g,y,R.value,x):R.value,v?(f.value=N,d(S,x,f)):S[x]=N,R=$.next(),++x;E=x}else if(a(p)){for(E=p.length,v&&(S=new v),x=0,w=0;x<E;++x)N=p[x],x+1<E&&(C=N.charCodeAt(0),C>=55296&&C<=56319&&(N+=p[++x])),N=g?u.call(g,y,N,w):N,v?(f.value=N,d(S,w,f)):S[w]=N,++w;E=w}}if(E===void 0)for(E=r(p.length),v&&(S=new v(E)),x=0;x<E;++x)N=g?u.call(g,y,p[x],x):p[x],v?(f.value=N,d(S,x,f)):S[x]=N;return v&&(f.value=null,S.length=E),S},QE}var ZE,z9;function UN(){return z9||(z9=1,ZE=wTe()()?Array.from:DTe()),ZE}var JE,j9;function OTe(){if(j9)return JE;j9=1;var e=UN(),t=Array.isArray;return JE=function(n){return t(n)?n:e(n)},JE}var e_,B9;function PTe(){if(B9)return e_;B9=1;var e=OTe(),t=Rc(),n=Bl(),r=Array.prototype.slice,i;return i=function(o){return this.map(function(s,a){return s?s(o[a]):o[a]}).concat(r.call(o,this.length))},e_=function(o){return o=e(o),o.forEach(function(s){t(s)&&n(s)}),i.bind(o)},e_}var t_,U9;function ITe(){if(U9)return t_;U9=1;var e=Bl();return t_=function(t){var n;return typeof t=="function"?{set:t,get:t}:(n={get:e(t.get)},t.set!==void 0?(n.set=e(t.set),t.delete&&(n.delete=e(t.delete)),t.clear&&(n.clear=e(t.clear)),n):(n.set=n.get,n))},t_}var n_,q9;function LTe(){if(q9)return n_;q9=1;var e=dTe(),t=cK(),n=Fc(),r=bTe().methods,i=PTe(),o=ITe(),s=Function.prototype.apply,a=Function.prototype.call,l=Object.create,u=Object.defineProperties,f=r.on,d=r.emit;return n_=function(p,g,y){var v=l(null),x,w,S,E,C,$,R,A,N,M,I,P,K,W,j;return g!==!1?w=g:isNaN(p.length)?w=1:w=p.length,y.normalizer&&(M=o(y.normalizer),S=M.get,E=M.set,C=M.delete,$=M.clear),y.resolvers!=null&&(j=i(y.resolvers)),S?W=t(function(D){var L,H,U=arguments;if(j&&(U=j(U)),L=S(U),L!==null&&hasOwnProperty.call(v,L))return I&&x.emit("get",L,U,this),v[L];if(U.length===1?H=a.call(p,this,U[0]):H=s.call(p,this,U),L===null){if(L=S(U),L!==null)throw e("Circular invocation","CIRCULAR_INVOCATION");L=E(U)}else if(hasOwnProperty.call(v,L))throw e("Circular invocation","CIRCULAR_INVOCATION");return v[L]=H,P&&x.emit("set",L,null,H),H},w):g===0?W=function(){var D;if(hasOwnProperty.call(v,"data"))return I&&x.emit("get","data",arguments,this),v.data;if(arguments.length?D=s.call(p,this,arguments):D=a.call(p,this),hasOwnProperty.call(v,"data"))throw e("Circular invocation","CIRCULAR_INVOCATION");return v.data=D,P&&x.emit("set","data",null,D),D}:W=function(D){var L,H=arguments,U;if(j&&(H=j(arguments)),U=String(H[0]),hasOwnProperty.call(v,U))return I&&x.emit("get",U,H,this),v[U];if(H.length===1?L=a.call(p,this,H[0]):L=s.call(p,this,H),hasOwnProperty.call(v,U))throw e("Circular invocation","CIRCULAR_INVOCATION");return v[U]=L,P&&x.emit("set",U,null,L),L},x={original:p,memoized:W,profileName:y.profileName,get:function(D){return j&&(D=j(D)),S?S(D):String(D[0])},has:function(D){return hasOwnProperty.call(v,D)},delete:function(D){var L;hasOwnProperty.call(v,D)&&(C&&C(D),L=v[D],delete v[D],K&&x.emit("delete",D,L))},clear:function(){var D=v;$&&$(),v=l(null),x.emit("clear",D)},on:function(D,L){return D==="get"?I=!0:D==="set"?P=!0:D==="delete"&&(K=!0),f.call(this,D,L)},emit:d,updateEnv:function(){p=x.original}},S?R=t(function(D){var L,H=arguments;j&&(H=j(H)),L=S(H),L!==null&&x.delete(L)},w):g===0?R=function(){return x.delete("data")}:R=function(D){return j&&(D=j(arguments)[0]),x.delete(D)},A=t(function(){var D,L=arguments;return g===0?v.data:(j&&(L=j(L)),S?D=S(L):D=String(L[0]),v[D])}),N=t(function(){var D,L=arguments;return g===0?x.has("data"):(j&&(L=j(L)),S?D=S(L):D=String(L[0]),D===null?!1:x.has(D))}),u(W,{__memoized__:n(!0),delete:n(R),clear:n(x.clear),_get:n(A),_has:n(N)}),x},n_}var r_,W9;function zTe(){if(W9)return r_;W9=1;var e=Bl(),t=lb(),n=Nc(),r=LTe(),i=aK();return r_=function o(s){var a,l,u;if(e(s),a=Object(arguments[1]),a.async&&a.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(s,"__memoized__")&&!a.force?s:(l=i(a.length,s.length,a.async&&n.async),u=r(s,l,a),t(n,function(f,d){a[d]&&f(a[d],u,a)}),o.__profiler__&&o.__profiler__(u),u.updateEnv(),u.memoized)},r_}var i_,V9;function jTe(){return V9||(V9=1,i_=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t}),i_}var o_,H9;function BTe(){return H9||(H9=1,o_=function(e){return e?function(t){for(var n=String(t[0]),r=0,i=e;--i;)n+=""+t[++r];return n}:function(){return""}}),o_}var s_,G9;function UTe(){return G9||(G9=1,s_=function(){var e=Number.isNaN;return typeof e!="function"?!1:!e({})&&e(NaN)&&!e(34)}),s_}var a_,Y9;function qTe(){return Y9||(Y9=1,a_=function(e){return e!==e}),a_}var l_,X9;function WTe(){return X9||(X9=1,l_=UTe()()?Number.isNaN:qTe()),l_}var u_,K9;function qN(){if(K9)return u_;K9=1;var e=WTe(),t=Tc(),n=Jd(),r=Array.prototype.indexOf,i=Object.prototype.hasOwnProperty,o=Math.abs,s=Math.floor;return u_=function(a){var l,u,f,d;if(!e(a))return r.apply(this,arguments);for(u=t(n(this).length),f=arguments[1],isNaN(f)?f=0:f>=0?f=s(f):f=t(this.length)-s(o(f)),l=f;l<u;++l)if(i.call(this,l)&&(d=this[l],e(d)))return l;return-1},u_}var c_,Q9;function VTe(){if(Q9)return c_;Q9=1;var e=qN(),t=Object.create;return c_=function(){var n=0,r=[],i=t(null);return{get:function(o){var s=0,a=r,l,u=o.length;if(u===0)return a[u]||null;if(a=a[u]){for(;s<u-1;){if(l=e.call(a[0],o[s]),l===-1)return null;a=a[1][l],++s}return l=e.call(a[0],o[s]),l===-1?null:a[1][l]||null}return null},set:function(o){var s=0,a=r,l,u=o.length;if(u===0)a[u]=++n;else{for(a[u]||(a[u]=[[],[]]),a=a[u];s<u-1;)l=e.call(a[0],o[s]),l===-1&&(l=a[0].push(o[s])-1,a[1].push([[],[]])),a=a[1][l],++s;l=e.call(a[0],o[s]),l===-1&&(l=a[0].push(o[s])-1),a[1][l]=++n}return i[n]=o,n},delete:function(o){var s=0,a=r,l,u=i[o],f=u.length,d=[];if(f===0)delete a[f];else if(a=a[f]){for(;s<f-1;){if(l=e.call(a[0],u[s]),l===-1)return;d.push(a,l),a=a[1][l],++s}if(l=e.call(a[0],u[s]),l===-1)return;for(o=a[1][l],a[0].splice(l,1),a[1].splice(l,1);!a[0].length&&d.length;)l=d.pop(),a=d.pop(),a[0].splice(l,1),a[1].splice(l,1)}delete i[o]},clear:function(){r=[],i=t(null)}}},c_}var f_,Z9;function HTe(){if(Z9)return f_;Z9=1;var e=qN();return f_=function(){var t=0,n=[],r=[];return{get:function(i){var o=e.call(n,i[0]);return o===-1?null:r[o]},set:function(i){return n.push(i[0]),r.push(++t),t},delete:function(i){var o=e.call(r,i);o!==-1&&(n.splice(o,1),r.splice(o,1))},clear:function(){n=[],r=[]}}},f_}var d_,J9;function GTe(){if(J9)return d_;J9=1;var e=qN(),t=Object.create;return d_=function(n){var r=0,i=[[],[]],o=t(null);return{get:function(s){for(var a=0,l=i,u;a<n-1;){if(u=e.call(l[0],s[a]),u===-1)return null;l=l[1][u],++a}return u=e.call(l[0],s[a]),u===-1?null:l[1][u]||null},set:function(s){for(var a=0,l=i,u;a<n-1;)u=e.call(l[0],s[a]),u===-1&&(u=l[0].push(s[a])-1,l[1].push([[],[]])),l=l[1][u],++a;return u=e.call(l[0],s[a]),u===-1&&(u=l[0].push(s[a])-1),l[1][u]=++r,o[r]=s,r},delete:function(s){for(var a=0,l=i,u,f=[],d=o[s];a<n-1;){if(u=e.call(l[0],d[a]),u===-1)return;f.push(l,u),l=l[1][u],++a}if(u=e.call(l[0],d[a]),u!==-1){for(s=l[1][u],l[0].splice(u,1),l[1].splice(u,1);!l[0].length&&f.length;)u=f.pop(),l=f.pop(),l[0].splice(u,1),l[1].splice(u,1);delete o[s]}},clear:function(){i=[[],[]],o=t(null)}}},d_}var eI={},h_,tI;function hK(){if(tI)return h_;tI=1;var e=Bl(),t=lb(),n=Function.prototype.call;return h_=function(r,i){var o={},s=arguments[2];return e(i),t(r,function(a,l,u,f){o[l]=n.call(i,s,a,l,u,f)}),o},h_}var p_,nI;function WN(){if(nI)return p_;nI=1;var e=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n},t=function(n){var r=document.createTextNode(""),i,o,s=0;return new n(function(){var a;if(i)o&&(i=o.concat(i));else{if(!o)return;i=o}if(o=i,i=null,typeof o=="function"){a=o,o=null,a();return}for(r.data=s=++s%2;o;)a=o.shift(),o.length||(o=null),a()}).observe(r,{characterData:!0}),function(a){if(e(a),i){typeof i=="function"?i=[i,a]:i.push(a);return}i=a,r.data=s=++s%2}};return p_=function(){if(typeof process=="object"&&process&&typeof process.nextTick=="function")return process.nextTick;if(typeof queueMicrotask=="function")return function(n){queueMicrotask(e(n))};if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return t(MutationObserver);if(typeof WebKitMutationObserver=="function")return t(WebKitMutationObserver)}return typeof setImmediate=="function"?function(n){setImmediate(e(n))}:typeof setTimeout=="function"||typeof setTimeout=="object"?function(n){setTimeout(e(n),0)}:null}(),p_}var rI;function YTe(){if(rI)return eI;rI=1;var e=UN(),t=hK(),n=uK(),r=cK(),i=WN(),o=Array.prototype.slice,s=Function.prototype.apply,a=Object.create;return Nc().async=function(l,u){var f=a(null),d=a(null),p=u.memoized,g=u.original,y,v,x;u.memoized=r(function(w){var S=arguments,E=S[S.length-1];return typeof E=="function"&&(y=E,S=o.call(S,0,-1)),p.apply(v=this,x=S)},p);try{n(u.memoized,p)}catch{}u.on("get",function(w){var S,E,C;if(y){if(f[w]){typeof f[w]=="function"?f[w]=[f[w],y]:f[w].push(y),y=null;return}S=y,E=v,C=x,y=v=x=null,i(function(){var $;hasOwnProperty.call(d,w)?($=d[w],u.emit("getasync",w,C,E),s.call(S,$.context,$.args)):(y=S,v=E,x=C,p.apply(E,C))})}}),u.original=function(){var w,S,E,C;return y?(w=e(arguments),S=function $(R){var A,N,M=$.id;if(M==null){i(s.bind($,this,arguments));return}if(delete $.id,A=f[M],delete f[M],!!A)return N=e(arguments),u.has(M)&&(R?u.delete(M):(d[M]={context:this,args:N},u.emit("setasync",M,typeof A=="function"?1:A.length))),typeof A=="function"?C=s.call(A,this,N):A.forEach(function(I){C=s.call(I,this,N)},this),C},E=y,y=v=x=null,w.push(S),C=s.call(g,this,w),S.cb=E,y=S,C):s.call(g,this,arguments)},u.on("set",function(w){if(!y){u.delete(w);return}f[w]?typeof f[w]=="function"?f[w]=[f[w],y.cb]:f[w].push(y.cb):f[w]=y.cb,delete y.cb,y.id=w,y=null}),u.on("delete",function(w){var S;hasOwnProperty.call(f,w)||d[w]&&(S=d[w],delete d[w],u.emit("deleteasync",w,o.call(S.args,1)))}),u.on("clear",function(){var w=d;d=a(null),u.emit("clearasync",t(w,function(S){return o.call(S.args,1)}))})},eI}var iI={},g_,oI;function XTe(){if(oI)return g_;oI=1;var e=Array.prototype.forEach,t=Object.create;return g_=function(n){var r=t(null);return e.call(arguments,function(i){r[i]=!0}),r},g_}var m_,sI;function pK(){return sI||(sI=1,m_=function(e){return typeof e=="function"}),m_}var y_,aI;function KTe(){if(aI)return y_;aI=1;var e=pK();return y_=function(t){try{return t&&e(t.toString)?t.toString():String(t)}catch{throw new TypeError("Passed argument cannot be stringifed")}},y_}var v_,lI;function QTe(){if(lI)return v_;lI=1;var e=Jd(),t=KTe();return v_=function(n){return t(e(n))},v_}var x_,uI;function ZTe(){if(uI)return x_;uI=1;var e=pK();return x_=function(t){try{return t&&e(t.toString)?t.toString():String(t)}catch{return"<Non-coercible to string value>"}},x_}var b_,cI;function JTe(){if(cI)return b_;cI=1;var e=ZTe(),t=/[\n\r\u2028\u2029]/g;return b_=function(n){var r=e(n);return r.length>100&&(r=r.slice(0,99)+""),r=r.replace(t,function(i){return JSON.stringify(i).slice(1,-1)}),r},b_}var O1={exports:{}},fI;function gK(){if(fI)return O1.exports;fI=1,O1.exports=e,O1.exports.default=e;function e(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}return O1.exports}var dI;function eNe(){if(dI)return iI;dI=1;var e=hK(),t=XTe(),n=QTe(),r=JTe(),i=gK(),o=WN(),s=Object.create,a=t("then","then:finally","done","done:finally");return Nc().promise=function(l,u){var f=s(null),d=s(null),p=s(null);if(l===!0)l=null;else if(l=n(l),!a[l])throw new TypeError("'"+r(l)+"' is not valid promise mode");u.on("set",function(g,y,v){var x=!1;if(!i(v)){d[g]=v,u.emit("setasync",g,1);return}f[g]=1,p[g]=v;var w=function($){var R=f[g];if(x)throw new Error(`Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)
Consider to rely on 'then' or 'done' mode instead.`);R&&(delete f[g],d[g]=$,u.emit("setasync",g,R))},S=function(){x=!0,f[g]&&(delete f[g],delete p[g],u.delete(g))},E=l;if(E||(E="then"),E==="then"){var C=function(){o(S)};v=v.then(function($){o(w.bind(this,$))},C),typeof v.finally=="function"&&v.finally(C)}else if(E==="done"){if(typeof v.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");v.done(w,S)}else if(E==="done:finally"){if(typeof v.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if(typeof v.finally!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");v.done(w),v.finally(S)}}),u.on("get",function(g,y,v){var x;if(f[g]){++f[g];return}x=p[g];var w=function(){u.emit("getasync",g,y,v)};i(x)?typeof x.done=="function"?x.done(w):x.then(function(){o(w)}):w()}),u.on("delete",function(g){if(delete p[g],f[g]){delete f[g];return}if(hasOwnProperty.call(d,g)){var y=d[g];delete d[g],u.emit("deleteasync",g,[y])}}),u.on("clear",function(){var g=d;d=s(null),f=s(null),p=s(null),u.emit("clearasync",e(g,function(y){return[y]}))})},iI}var hI={},pI;function tNe(){if(pI)return hI;pI=1;var e=Bl(),t=lb(),n=Nc(),r=Function.prototype.apply;return n.dispose=function(i,o,s){var a;if(e(i),s.async&&n.async||s.promise&&n.promise){o.on("deleteasync",a=function(l,u){r.call(i,null,u)}),o.on("clearasync",function(l){t(l,function(u,f){a(f,u)})});return}o.on("delete",a=function(l,u){i(u)}),o.on("clear",function(l){t(l,function(u,f){a(f,u)})})},hI}var gI={},w_,mI;function nNe(){return mI||(mI=1,w_=2147483647),w_}var S_,yI;function rNe(){if(yI)return S_;yI=1;var e=Tc(),t=nNe();return S_=function(n){if(n=e(n),n>t)throw new TypeError(n+" exceeds maximum possible timeout");return n},S_}var vI;function iNe(){if(vI)return gI;vI=1;var e=UN(),t=lb(),n=WN(),r=gK(),i=rNe(),o=Nc(),s=Function.prototype,a=Math.max,l=Math.min,u=Object.create;return o.maxAge=function(f,d,p){var g,y,v,x;f=i(f),f&&(g=u(null),y=p.async&&o.async||p.promise&&o.promise?"async":"",d.on("set"+y,function(w){g[w]=setTimeout(function(){d.delete(w)},f),typeof g[w].unref=="function"&&g[w].unref(),x&&(x[w]&&x[w]!=="nextTick"&&clearTimeout(x[w]),x[w]=setTimeout(function(){delete x[w]},v),typeof x[w].unref=="function"&&x[w].unref())}),d.on("delete"+y,function(w){clearTimeout(g[w]),delete g[w],x&&(x[w]!=="nextTick"&&clearTimeout(x[w]),delete x[w])}),p.preFetch&&(p.preFetch===!0||isNaN(p.preFetch)?v=.333:v=a(l(Number(p.preFetch),1),0),v&&(x={},v=(1-v)*f,d.on("get"+y,function(w,S,E){x[w]||(x[w]="nextTick",n(function(){var C;x[w]==="nextTick"&&(delete x[w],d.delete(w),p.async&&(S=e(S),S.push(s)),C=d.memoized.apply(E,S),p.promise&&r(C)&&(typeof C.done=="function"?C.done(s,s):C.then(s,s)))}))}))),d.on("clear"+y,function(){t(g,function(w){clearTimeout(w)}),g={},x&&(t(x,function(w){w!=="nextTick"&&clearTimeout(w)}),x={})}))},gI}var xI={},k_,bI;function oNe(){if(bI)return k_;bI=1;var e=Tc(),t=Object.create,n=Object.prototype.hasOwnProperty;return k_=function(r){var i=0,o=1,s=t(null),a=t(null),l=0,u;return r=e(r),{hit:function(f){var d=a[f],p=++l;if(s[p]=f,a[f]=p,!d)return++i,i<=r?void 0:(f=s[o],u(f),f);if(delete s[d],o===d)for(;!n.call(s,++o););},delete:u=function(f){var d=a[f];if(d&&(delete s[d],delete a[f],--i,o===d)){if(!i){l=0,o=1;return}for(;!n.call(s,++o););}},clear:function(){i=0,o=1,s=t(null),a=t(null),l=0}}},k_}var wI;function sNe(){if(wI)return xI;wI=1;var e=Tc(),t=oNe(),n=Nc();return n.max=function(r,i,o){var s,a,l;r=e(r),r&&(a=t(r),s=o.async&&n.async||o.promise&&n.promise?"async":"",i.on("set"+s,l=function(u){u=a.hit(u),u!==void 0&&i.delete(u)}),i.on("get"+s,l),i.on("delete"+s,a.delete),i.on("clear"+s,a.clear))},xI}var SI={},kI;function aNe(){if(kI)return SI;kI=1;var e=Fc(),t=Nc(),n=Object.create,r=Object.defineProperties;return t.refCounter=function(i,o,s){var a,l;a=n(null),l=s.async&&t.async||s.promise&&t.promise?"async":"",o.on("set"+l,function(u,f){a[u]=f||1}),o.on("get"+l,function(u){++a[u]}),o.on("delete"+l,function(u){delete a[u]}),o.on("clear"+l,function(){a={}}),r(o.memoized,{deleteRef:e(function(){var u=o.get(arguments);return u===null||!a[u]?null:--a[u]?!1:(o.delete(u),!0)}),getRefCount:e(function(){var u=o.get(arguments);return u===null||!a[u]?0:a[u]})})},SI}var E_,EI;function lNe(){if(EI)return E_;EI=1;var e=sK(),t=aK(),n=zTe();return E_=function(r){var i=e(arguments[1]),o;return i.normalizer||(o=i.length=t(i.length,r.length,i.async),o!==0&&(i.primitive?o===!1?i.normalizer=jTe():o>1&&(i.normalizer=BTe()(o)):o===!1?i.normalizer=VTe()():o===1?i.normalizer=HTe()():i.normalizer=GTe()(o))),i.async&&YTe(),i.promise&&eNe(),i.dispose&&tNe(),i.maxAge&&iNe(),i.max&&sNe(),i.refCounter&&aNe(),n(r,i)},E_}var uNe=lNe();const cNe=Gv(uNe);function fNe(e,t={}){return e.replace(/{([^}]+)}/g,(n,r)=>t[r]??`{${r}}`)}const _I=cNe(function(e,{metric:t,submetric:n,display:r}){const i=typeof r=="string"?r.trim().toLowerCase():null,o=e.filter(a=>{var f;const l=typeof a.display=="string"?a.display.trim().toLowerCase():"unknown",u=a.metric===t&&(n===void 0||((f=a.submetric)==null?void 0:f.trim())===n)&&(i===null||l===i);return!u&&a.metric===t&&console.log(" Rejected row:",a),u});console.log(` getMetricData('${t}', submetric: '${n}', display: '${r}') matched ${o.length} rows`);const s=[...new Set(e.map(a=>a.metric===t?a.submetric:null).filter(Boolean))];return console.log(" Available submetrics for",t,":",s),o.map(a=>({date:a.date,value:+a.value,...n===void 0&&a.submetric?{submetric:a.submetric}:{}}))},{length:2});function dNe(e,t,n=null,r="",i="Percent"){const o={};return e.forEach(s=>{var d;if(s.display!==i||!s.metric.startsWith(t)||r&&!s.metric.endsWith(r))return;const a=s.metric.replace(`${t} `,""),l=r?a.replace(` ${r}`,"").toLowerCase():a.toLowerCase();if(!["visits","hospitalizations"].includes(l))return;const u=n?(d=s[n])==null?void 0:d.trim():null,f=n?`${s.date}|${u}`:s.date;o[f]||(o[f]={date:s.date,...n?{[n]:u}:{}}),o[f][l]=+s.value}),Object.values(o).sort((s,a)=>new Date(s.date)-new Date(a.date))}function hNe(e,t,n={}){var i,o;const r={...e,data:{}};for(const s of e.sections){const a=((i=s.chart)==null?void 0:i.props)||{},l=s.dataSourceKey||a.dataSourceKey,u=a.metricName,f=a.baseMetric,d=a.submetric,p=a.groupField,g=a.hasOwnProperty("display")?a.display:a.hasOwnProperty("defaultDisplay")?a.defaultDisplay:n.display??void 0;if(Array.isArray(a.metrics)){console.log(` Hydrating ${l} using multiple metrics:`,a.metrics),r.data[l]=a.metrics.reduce((y,v)=>(y[v]=_I(t,{metric:v,submetric:d,display:g}),y),{});continue}a.pivotView&&f?(console.log(` Hydrating ${l} via pivotMetricToViews with baseMetric:`,f),r.data[l]=dNe(t,f,p,n.view?`by ${p}`:"",g)):u?(console.log(` Hydrating ${l} using getMetricData with:`,{metricName:u,submetric:d,display:g}),r.data[l]=_I(t,{metric:u,submetric:d,display:g})):console.warn(` Section "${s.id}" missing metricName or baseMetric`),console.log(` Resulting ${l} row count:`,((o=r.data[l])==null?void 0:o.length)||0)}return r}async function pNe(e,t={}){if(!e.dataPath)throw new Error("Config is missing 'dataPath'");const n=await JRe(e.dataPath),i={"COVID-19":"COVID-19",Influenza:"Influenza",RSV:"RSV",ARI:"ARI"}[t.virus]||t.virus,o={...t,virus:i,display:e.defaultDisplay||"Percent"},s={...e,sections:e.sections.map(l=>{const u=l.chart||{},f=u.props||{},d=Object.fromEntries(Object.entries(f).map(([p,g])=>[p,typeof g=="string"?fNe(g,o):g]));return{...l,chart:{...u,props:d}}})},a={...o,...Object.fromEntries(s.sections.flatMap(l=>{var u;return Object.entries(((u=l.chart)==null?void 0:u.props)||{}).filter(([f,d])=>typeof d=="string")}))};return hNe(s,n,a)}const gNe=(e=[],t="submetric",n="All Groups")=>{const r=[...new Set(e.map(i=>i[t]).filter(Boolean))];return[n,...r]},{colors:gi}=sa,mNe={"COVID-19":{color:gi.bluePrimary,background:gi.bgLightBlue,icon:"/assets/covid-vector.svg"},Influenza:{color:gi.purplePrimary,background:gi.bgLightPurple,icon:"/assets/flu-vector.svg"},RSV:{color:gi.greenPrimary,background:gi.bgLightGreen,icon:"/assets/rsv-vector.svg"},ARI:{color:gi.orangeText,background:gi.bgLightOrange,icon:"/assets/ari-vector.svg"},"Acute Respiratory Infections":{color:gi.orangeText,background:gi.bgLightOrange,icon:"/assets/ari-vector.svg"}},yNe={color:gi.gray800,background:gi.gray100,icon:null};function vNe(e){return mNe[e]||yNe}const{colors:__}=sa,CI=({title:e,icon:t,visitPercent:n,hospitalizationPercent:r,visitChange:i,admitChange:o,visitDate:s,admitDate:a})=>{const{color:l,background:u,icon:f}=vNe(e),d=t||f,p=g=>{const y=parseFloat(g);if(isNaN(y))return null;if(Math.abs(y)<.001)return F.jsx("span",{style:{color:__.gray600,marginRight:4},children:""});const w=y>0,S=w?"":"",E=w?__.redPrimary:__.greenMuted;return F.jsx("span",{style:{color:E,marginRight:4},children:S})};return F.jsxs("div",{className:"stat-card",style:{backgroundColor:u},children:[F.jsxs("div",{className:"stat-card-header",children:[d&&F.jsx("img",{className:"stat-card-icon",src:d,alt:`${e} icon`}),F.jsx("div",{className:"stat-card-title",children:e})]}),F.jsxs("div",{className:"stat-block",children:[F.jsx("div",{className:"stat-percent",style:{color:l},children:n}),F.jsxs("div",{className:"stat-detail",children:[F.jsx("div",{className:"stat-label",style:{color:l},children:"of Visits"}),F.jsxs("div",{className:"stat-trend-row",children:[i!==null&&F.jsxs(F.Fragment,{children:[p(i),Math.abs(i),"%  ",F.jsx("span",{className:"stat-date",children:s})]}),"  "]})]})]}),F.jsx("hr",{className:"stat-divider"}),F.jsxs("div",{className:"stat-block",children:[F.jsx("div",{className:"stat-percent",style:{color:l},children:r}),F.jsxs("div",{className:"stat-detail",children:[F.jsx("div",{className:"stat-label",style:{color:l},children:"of Hospitalizations"}),F.jsx("div",{className:"stat-trend-row",children:o!==null&&F.jsxs(F.Fragment,{children:[p(o),Math.abs(o),"%  ",F.jsx("span",{className:"stat-date",children:s})]})})]})]})]})},xNe=({data:e})=>{if(!e)return null;const n=[{key:"ari",label:"ARI"},{key:"covid",label:"COVID-19"},{key:"flu",label:"Influenza"},{key:"rsv",label:"RSV"}].map(({key:r,label:i})=>{var v,x;const o=e[`${i} visits`]||[],s=e[`${i} hospitalizations`]||[],a=o.at(-1),l=o.at(-2),u=s.at(-1),f=s.at(-2),d=(w,S)=>!w||!S?null:(w.value-S.value).toFixed(1),p=w=>w?`${w.value.toFixed(1)}%`:"",g=w=>w?`as of ${new Date(w.date).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})}`:"",y=(x=(v=vu==null?void 0:vu.overview)==null?void 0:v.statCards)==null?void 0:x[r];return{key:r,title:(y==null?void 0:y.title)||i,visitPercent:p(a),hospitalizationPercent:p(u),visitChange:d(a,l),admitChange:d(u,f),visitDate:g(a),admitDate:g(u)}});return F.jsxs("div",{className:"stat-grid",children:[F.jsxs("div",{className:"top-row",children:[F.jsx(CI,{...n[0]},n[0].key),F.jsxs("div",{className:"stat-info-box",children:[F.jsx("h4",{className:"stat-info-title",children:vu.overview.summaryBox.title}),F.jsx("p",{className:"stat-info-description",children:vu.overview.summaryBox.description})]})]}),F.jsx("div",{className:"bottom-row",children:n.slice(1).map(r=>F.jsx(CI,{...r},r.key))})]})},bNe=[{labelKey:"overviewBottomNav.emergencyDept.title",descriptionKey:"overviewBottomNav.emergencyDept.description",link:"/data/emergency-dept"},{labelKey:"overviewBottomNav.github.title",descriptionKey:"overviewBottomNav.github.description",link:"https://github.com/nychealth/respiratory-data-portal"},{labelKey:"overviewBottomNav.wastewater.title",descriptionKey:"overviewBottomNav.wastewater.description",link:"https://coronavirus.health.ny.gov/covid-19-wastewater-surveillance"}],wNe=()=>F.jsx("section",{className:"overview-grid",children:bNe.map(({labelKey:e,descriptionKey:t,link:n},r)=>{const i=n.startsWith("http");return F.jsxs("a",{className:"grid-card",href:n,target:i?"_blank":"_self",rel:i?"noopener noreferrer":void 0,"aria-label":Ws(e),children:[F.jsx("h3",{children:Ws(e)}),F.jsx("p",{children:Ws(t)})]},r)})}),mK=({data:e,view:t,onToggle:n})=>{const r=i=>{n&&i!==t&&n(i)};return F.jsxs("div",{className:"toggle-controls",children:[F.jsx("button",{className:`toggle-button ${t==="visits"?"active":""}`,onClick:()=>r("visits"),children:"Visits"}),F.jsx("button",{className:`toggle-button ${t==="hospitalizations"?"active":""}`,onClick:()=>r("hospitalizations"),children:"Hospitalizations"})]})};mK.propTypes={data:oe.array.isRequired,view:oe.string.isRequired,onToggle:oe.func.isRequired};const yK=({label:e="Group",options:t=[],active:n,onChange:r,inline:i=!1})=>{const o={Bronx:"the Bronx","0-4":"ages 04","5-17":"ages 517","18-64":"ages 1864","65+":"ages 65+","All Ages":"all age groups","All Boroughs":"all boroughs"},s={fontSize:14,padding:"4px 8px",...i?{marginLeft:4,display:"inline-block",fontWeight:600,textDecoration:"underline",backgroundColor:"transparent",border:"none",color:"var(--blueAccent)",cursor:"pointer"}:{display:"block",marginTop:4}};return i?F.jsx("select",{value:n||"",onChange:a=>r(a.target.value),className:"trend-subtitle-select",children:t.map(a=>F.jsx("option",{value:a,children:o[a]||a},a))}):F.jsxs("label",{style:{display:"block",fontSize:14,marginBottom:8},children:[e,F.jsx("select",{value:n||"",onChange:a=>r(a.target.value),style:s,children:t.map(a=>F.jsx("option",{value:a,children:o[a]||a},a))})]})};yK.propTypes={label:oe.string,options:oe.array.isRequired,active:oe.string,onChange:oe.func.isRequired,inline:oe.bool};const vK=({template:e,variables:t={},groupProps:n})=>{if(!e)return null;const r=e.split(/({group})/g);return F.jsx("span",{className:"chart-subtitle",style:{margin:"8px 0",display:"inline-flex",flexWrap:"wrap",alignItems:"center"},children:r.map((i,o)=>{if(i==="{group}")return F.jsx(yK,{options:n.options,active:n.active,onChange:n.onChange,label:"",inline:!0},o);const s=i.replace(/{(\w+)}/g,(a,l)=>t[l]??`{${l}}`);return F.jsx("span",{dangerouslySetInnerHTML:{__html:s}},o)})})};vK.propTypes={template:oe.string,variables:oe.object,groupProps:oe.shape({options:oe.array.isRequired,active:oe.string.isRequired,onChange:oe.func.isRequired})};const SNe={StatGrid:xNe,OverviewGrid:wNe},P1={visits:"Visits",hospitalizations:"Hospitalizations"},kNe={Bronx:"the Bronx","0-4":"Ages 04","5-17":"Ages 517","18-64":"Ages 1864","65+":"Ages 65+","All Ages":"all Age Groups","All Boroughs":"All Boroughs"},Fo=(e,t={})=>{const n=typeof e=="string"&&e.includes(".")?Ws(e):e;return typeof n=="string"?n.replace(/{(\w+)}/g,(r,i)=>t[i]??`{${i}}`):n},ENe=(e,t)=>typeof e=="string"?e.replace(/{(\w+)}/g,(n,r)=>t[r]??`{${r}}`):e,_Ne=(e,t)=>JSON.parse(JSON.stringify(e),(n,r)=>ENe(r,t)),Fm=({config:e})=>{const{titleKey:t,subtitleKey:n,summary:r,sections:i=[],controls:o={}}=e,s=Jee(e.data),{activeVirus:a="COVID-19",view:l="visits",handleDownload:u=()=>{},setView:f=()=>{},setVirus:d=()=>{}}=s,[p,g]=X.useState(null),[y,v]=X.useState(""),[x,w]=X.useState({}),S=(N,M)=>{w(I=>({...I,[N]:M}))},E=X.useRef(null),[C,$]=X.useState(!1);if(X.useEffect(()=>{const N=()=>{const I=E.current;if(!I){requestAnimationFrame(N);return}const P=new IntersectionObserver(([K])=>$(!K.isIntersecting),{threshold:.05});return P.observe(I),()=>P.disconnect()},M=N();return typeof M=="function"?M:void 0},[]),X.useEffect(()=>{if(e.data){g(e);return}const N=a||e.defaultVirus||"COVID-19",M=l||e.defaultView||"visits";pNe(e,{virus:N,view:M}).then(g).catch(console.error)},[e,a,l]),X.useEffect(()=>{r!=null&&r.markdownPath&&fetch(r.markdownPath).then(N=>N.text()).then(v).catch(N=>console.error("Failed to load markdown:",N))},[r==null?void 0:r.markdownPath]),!p)return F.jsx("div",{className:"loading"});const{data:R={},sections:A=[]}=p;return F.jsxs(F.Fragment,{children:[F.jsxs(e2,{title:Fo(t),subtitle:Fo(n),topControls:e.showTopControls===!1?null:F.jsx(sL,{controls:o,activeVirus:a,onVirusChange:d,view:l,onViewChange:f}),children:[(r==null?void 0:r.markdownPath)&&F.jsx(g3,{ref:E,sectionTitle:Fo(r.titleKey||r.title),date:r.lastUpdated,markdownPath:r.markdownPath,showTitle:!0,animateOnScroll:r.animateOnScroll!==!1,virus:a,view:l,...r.showTrendArrow?{trendDirection:"up"}:{}}),A.filter(N=>{const M=N.showIfVirus;return!M||(Array.isArray(M)?M.includes(a):M===a)}).map((N,M)=>{var et,Nt,Ut,In,ma,Mc,ya,vs,Dc,eh,th,nh,rh,Oc,Ul,ih,va,xa,Mm,oh;const I=N.id||M,P={virus:a,view:l,displayView:`<span class="bg-highlight">${P1[l]}</span>`},K=_Ne(((et=N.chart)==null?void 0:et.props)||{},P),W=N.dataSourceKey||K.dataSourceKey||((Ut=(Nt=N.chart)==null?void 0:Nt.props)==null?void 0:Ut.dataSourceKey)||null,j=W&&R[W]?R[W]:[];if(N.renderAs==="overview"||N.renderAs==="hidden")return null;if(N.renderAs==="custom"){const Pi=SNe[N.component];if(!Pi)return null;const cb=Pi.length>0;return F.jsx(m3,{title:Fo(N.titleKey),subtitle:Fo(N.subtitle,P),subtitleVariables:P,animateOnScroll:N.animateOnScroll!==!1,background:N.background||"white",children:cb?F.jsx(Pi,{data:j}):F.jsx(Pi,{})},I)}const D=(ma=(In=N.chart)==null?void 0:In.props)==null?void 0:ma.groupField,L=((ya=(Mc=N.chart)==null?void 0:Mc.props)==null?void 0:ya.groupLabel)||"All Groups",H=gNe(j,D,L),U=x[I]??H[0]??null,V=(U||"").trim(),J=L.trim(),z=kNe[V]||V,G=!U||U===L?j:j.filter(Pi=>Pi[D]===U),xe=((Dc=(vs=N.chart)==null?void 0:vs.props)==null?void 0:Dc.yField)||l,we=N.trendEnabled?KRe(G,xe):null,ve=ZRe({trendDirection:we==null?void 0:we.direction,metricLabel:P1[l],virus:a}),Be=(we==null?void 0:we.direction)==="up"?"trend-up":(we==null?void 0:we.direction)==="down"?"trend-down":"trend-neutral",Je=((th=(eh=G.at)==null?void 0:eh.call(G,-1))==null?void 0:th.week)||((rh=(nh=G.at)==null?void 0:nh.call(G,-1))==null?void 0:rh.date),Ye=V&&V!==J?`in ${z}`:`across ${J.toLowerCase()}`,le={...P,date:`<span class="bg-highlight">${QRe(Je)}</span>`,trend:we?`<span class="${Be}">${we.label} ${we.value}%</span>`:"not available",group:Ye,trendDirection:we==null?void 0:we.direction,arrow:ve==null?void 0:ve.arrow,viewLabel:P1[l],directionText:ve==null?void 0:ve.directionText,trendColor:ve==null?void 0:ve.trendColor},Me=Fo(N.subtitle),We=F.jsx(vK,{template:Me,variables:le,groupProps:{options:H,active:U,onChange:Pi=>S(I,Pi)}}),ce=XRe[(Oc=N.chart)==null?void 0:Oc.type];if(!ce)return console.warn(`Chart type '${(Ul=N.chart)==null?void 0:Ul.type}' not found`),null;const Et={...K,data:G,virus:a,view:l,colorMap:(ih=sa.colorScales)==null?void 0:ih[a]};return(xa=(va=N.chart)==null?void 0:va.type)!=null&&xa.toLowerCase().includes("line")&&!Et.xField&&(Et.xField="date"),F.jsx(ote,{title:Fo(N.title,le),subtitle:We,subtitleVariables:le,infoIcon:N.infoIcon,downloadIcon:N.downloadIcon,onDownloadClick:()=>nL(G,`${N.id}.csv`),columnLabels:K.columnLabels,modalTitle:Fo((Mm=N.modal)==null?void 0:Mm.title,le),modalContent:((oh=N.modal)==null?void 0:oh.markdownPath)&&F.jsx(Bu,{filePath:N.modal.markdownPath,sectionTitle:Fo(N.modal.title||"",le),showTitle:!1,variables:le}),animateOnScroll:N.animateOnScroll!==!1,previewData:G,children:F.jsx(y3,{title:Fo(N.title,le),chart:F.jsx(ce,{...Et}),...N.showSidebarToggle?{sidebar:F.jsx(mK,{data:j,view:l,onToggle:f})}:{},footer:N.chart.footer})},I)})]}),e.showPillToggle!==!1&&C&&F.jsx(lL,{className:C?"visible":"",activeVirus:a,view:l,viewLabel:P1[l],onVirusChange:d,onViewChange:f,controls:o})]})};Fm.propTypes={config:oe.object.isRequired};const CNe={id:"overviewPage",titleKey:"overview.title",subtitleKey:"overview.subtitle",dataPath:"/data/emergencyDeptData.csv",controls:{viewToggle:!0,virusToggle:!1},showTopControls:!1,showPillToggle:!1,sections:[{id:"stat-cards",renderAs:"custom",component:"StatGrid",background:"white",dataSourceKey:"statCardData",chart:{props:{metrics:["ARI visits","ARI hospitalizations","COVID-19 visits","COVID-19 hospitalizations","Influenza visits","Influenza hospitalizations","RSV visits","RSV hospitalizations"],submetric:"Overall",display:"Percent"}}},{id:"monthly-ari-overview",title:"overview.charts.monthlyARIChart.title",subtitle:"overview.charts.monthlyARIChart.subtitle",trendEnabled:!0,infoIcon:!0,showSidebarToggle:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"ARI Visits",markdownPath:"/content/modals/metric-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"seasonalARI",dataSource:"NYC Health Department",metricName:"ARI {view}",seasonal:null,submetric:"Overall",xField:"date",yField:"value",tooltipFields:["date","value"],defaultDisplay:"Percent",color:"orangePrimary",columnLabels:{date:"Week",value:"Number of {view}"}}}},{id:"overview-info-grid",renderAs:"custom",component:"OverviewGrid",background:"transparent"}]},$Ne=()=>F.jsx(Jv,{enableVirusToggle:!1,children:F.jsx(Fm,{config:CNe})}),ANe={"ed-visits":"Emergency Department Visits & Hospitalizations",cases:"Case Data & Demographics",deaths:"COVID-19 Deaths"},RNe=()=>{const{topic:e}=rJ(),t=ANe[e]||"Data Explorer";return F.jsx(e2,{title:t,subtitle:"Explore NYC public health trends by topic",children:F.jsxs("div",{style:{padding:"24px",color:"#6B7280"},children:["Charts and data for ",F.jsx("strong",{children:t})," will appear here."]})})},TNe={id:"emergencyDeptPage",titleKey:"emergencyDeptPage.mainTitle",subtitleKey:"emergencyDeptPage.mainSubtitle",dataPath:"/data/emergencyDeptData.csv",controls:{virusToggle:!0,viewToggle:!0},defaultView:"visits",summary:{markdownPath:"/content/sections/edSectionText.md",title:"Page Overview",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondaryTitle:!1},sections:[{id:"ed-trends",title:"emergencyDeptPage.charts.seasonalEdVisits.title",subtitle:"emergencyDeptPage.charts.seasonalEdVisits.subtitle",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:"{virus} Seasonal ED {view}",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"lineChart",props:{isPercent:!0,dataSourceKey:"seasonalEDTrends",dataSource:"[NYC Health Department Syndromic Surveillance](https://www.nyc.gov/)",footnote:"*Data includes only hospitals that report syndromic data consistently.*",seasonal:null,title:"Percent of emergency department {view} that are for {virus}",metricName:"{virus} {view}",submetric:"Overall",xField:"date",yField:"value",colorField:null,tooltipFields:["date","value"],columnLabels:{date:"Week",value:"Number of {view}"}}}},{id:"percent-ed-visits-age",title:"emergencyDeptPage.charts.percentEdVisitsByAge.title",subtitle:"emergencyDeptPage.charts.percentEdVisitsByAge.subtitle",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:"{virus} ED {view} by Age Group",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"lineChart",props:{isPercent:!0,dataSourceKey:"edByAge",dataSource:"[NYC Health Department Syndromic Surveillance](https://www.nyc.gov/)",footnote:"*Age groups are based on patient-reported data and may contain missing values.*",seasonal:null,title:"Percent of emergency department {view} that are for {virus}",metricName:"{virus} {view} by age group",groupField:"submetric",groupLabel:"All Ages",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],columnLabels:{date:"Week",value:"Number of {view}",submetric:"Age Group"}}}},{id:"percent-ed-visits-geo",title:"emergencyDeptPage.charts.percentEdVisitsByGeo.title",subtitle:"emergencyDeptPage.charts.percentEdVisitsByGeo.subtitle",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:"{virus} ED {view} by Borough",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"lineChart",props:{isPercent:!0,dataSourceKey:"edByGeo",dataSource:"[NYC Health Department Syndromic Surveillance](https://www.nyc.gov/)",footnote:"*Borough-level data reflects patient residence, not facility location.*",title:"Percent of emergency department {view} that are for {virus}",seasonal:null,metricName:"{virus} {view} by borough",groupField:"submetric",groupLabel:"All Boroughs",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],columnLabels:{date:"Week",value:"Number of {view}",submetric:"Borough"}}}}]},NNe=()=>F.jsx(Jv,{children:F.jsx(Fm,{config:TNe})}),FNe={id:"caseDataPage",titleKey:"caseDataPage.mainTitle",subtitleKey:"caseDataPage.mainSubtitle",dataPath:"/data/caseData.csv",controls:{virusToggle:!0,viewToggle:!1},summary:{title:"Page Overview",markdownPath:"/content/sections/caseDataSectionText.md",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondayTitle:!1,metricLabel:"cases"},sections:[{id:"case-reports-season",title:"caseDataPage.charts.seasonalComparison.title",subtitle:"caseDataPage.charts.seasonalComparison.subtitle",infoIcon:!0,downloadIcon:!0,trendEnabled:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Season",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"seasonalCaseTrends",seasonal:!0,title:"Laboratory-reported cases of {virus}",metricName:"{virus} cases",submetric:"Total",xField:"dayOfSeason",yField:"value",colorField:"season",tooltipFields:["date","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Cases"}}}},{id:"case-reports-test-type",title:"caseDataPage.charts.reportsByTestType.title",showIfVirus:"COVID-19",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Test Type",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"yearComparisonChart",props:{dataSourceKey:"casesByType",metricName:"{virus} cases by test type",title:"Laboratory-reported cases of {virus}",groupField:"submetric",field:"isoWeek",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],defaultDisplay:"Number",legendTitle:"Type",showRollingAvg:!1,customColorScale:{domain:["Confirmed","Probable"],range:["#4F32B3","#9CA3AF"]},columnLabels:{date:"Week",value:"Number of Cases",submtric:"Test Type"}}}},{id:"case-reports-subtype",title:"caseDataPage.charts.reportsBySubtype.title",subtitle:"caseDataPage.charts.reportsBySubtype.subtitle",showIfVirus:"Influenza",infoIcon:!0,downloadIcon:!0,trendEnabled:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Subtype",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"yearComparisonChart",props:{dataSourceKey:"casesBySubType",title:"Laboratory-reported cases of {virus}",metricName:"{virus} cases by subtype",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","value"],defaultDisplay:"Number",legendTitle:"Subtype",showRollingAvg:!1,customColorScale:{domain:["Influenza A not subtyped","Influenza A H1","Influenza A H3","Influenza B"],range:["#3F007D","#6A51A3","#807DBA","#9E9AC8"]},columnLabels:{date:"Week",value:"Number of Cases",submtric:"Subtype"}}}},{id:"case-reports-age",title:"caseDataPage.charts.reportsByAge.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Age Group",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"smallMultipleBarChart",props:{dataSourceKey:"casesByAge",seasonal:null,metricName:"{virus} cases by age group",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],defaultDisplay:"Number",customColor:"#4F32B3",columnLabels:{date:"Week",value:"Number of Cases",submtric:"Age Group"}}}},{id:"case-reports-borough",title:"caseDataPage.charts.reportsByBorough.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Borough",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"smallMultipleBarChart",props:{dataSourceKey:"casesByBorough",seasonal:null,metricName:"{virus} cases by borough",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Cases",submtric:"Borough"}}}},{id:"case-reports-re",title:"caseDataPage.charts.reportsByRE.title",showIfVirus:"COVID-19",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Race and Ethnicity",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"casesByRE",seasonal:null,metricName:"{virus} cases by race and ethnicity",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","submetric","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Cases",submtric:"Race & Ethnicity"}}}}]},MNe=()=>F.jsx(Jv,{children:F.jsx(Fm,{config:FNe})}),$I={id:"covidDeathPage",titleKey:"CovidDeathPage.mainTitle",subtitleKey:"CovidDeathPage.mainSubtitle",dataPath:"/data/covidDeathData.csv",controls:{virusToggle:!1,viewToggle:!1},summary:{title:"Covid Death Page Overview",markdownPath:"/content/sections/covidDeathSectionText.md",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondayTitle:!1,metricLabel:"cases"},sections:[{id:"covid-deaths-season",title:"CovidDeathPage.charts.seasonalComparison.title",subtitle:"CovidDeathPage.charts.seasonalComparison.subtitle",infoIcon:!0,downloadIcon:!0,trendEnabled:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Season",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"seasonalCovidDeaths",dataSource:"NYC Health Department",title:"{virus} deaths",seasonal:!0,metricName:"{virus} deaths",submetric:"Total",xField:"date",yField:"value",colorField:null,tooltipFields:["date","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Deaths"}}}},{id:"covid-deaths-age-group",title:"CovidDeathPage.charts.deathsByAge.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Age Group",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"covidDeathsByAge",dataSource:"NYC Health Department",title:"{virus} deaths",seasonal:null,metricName:"{virus} deaths by age group",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Deaths",submtric:"Age Group"}}}},{id:"covid-deaths-borough",title:"CovidDeathPage.charts.deathsByBorough.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Borough",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"covidDeathsByGeo",dataSource:"NYC Health Department",title:"{virus} deaths",seasonal:null,metricName:"{virus} deaths by borough",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Deaths",submtric:"Borough"}}}},{id:"covid-deahths-re",title:"CovidDeathPage.charts.deathsByRE.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Race & Ethnicity",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"lineChart",props:{dataSourceKey:"covidDeathsByRE",dataSource:"NYC Health Department",title:"{virus} deaths",seasonal:null,metricName:"{virus} deaths by race and ethnicity",groupField:"submetric",xField:"date",yField:"value",colorField:"submetric",tooltipFields:["date","value"],defaultDisplay:"Number",columnLabels:{date:"Week",value:"Number of Deaths",submtric:"Race & Ethnicity"}}}}]},DNe=()=>F.jsx(Jv,{initialData:$I.data,children:F.jsx(Fm,{config:$I})}),xK=({leftTitle:e,rightTitle:t,leftContent:n,rightContent:r})=>F.jsx("section",{className:"overview-section",children:F.jsx("div",{className:"overview-container",children:F.jsxs("div",{className:"overview-columns",children:[F.jsxs("div",{className:"overview-column",children:[e&&F.jsx("h2",{className:"overview-title",children:e}),n]}),F.jsxs("div",{className:"overview-column",children:[t&&F.jsx("h2",{className:"overview-title",children:t}),r]})]})})});xK.propTypes={leftTitle:oe.string,rightTitle:oe.string,leftContent:oe.node,rightContent:oe.node};const bK=({title:e,icon:t,description:n,link:r})=>{const i=F.jsxs("div",{className:"info-card",children:[t&&F.jsx("img",{className:"info-card-icon",src:t,alt:`${e} icon`}),F.jsx("h3",{className:"info-card-title",children:e}),F.jsx("p",{className:"info-card-description",children:n})]});return r?F.jsx("a",{href:r,className:"info-card-link",target:"_blank",rel:"noreferrer",children:i}):i};bK.propTypes={title:oe.string.isRequired,icon:oe.string,description:oe.string.isRequired,link:oe.string};const ONe=(e,t)=>{if(!e||!t)return[];const n=new RegExp(`## ${t}[\\s\\S]*?(?=\\n## |$)`,"i"),r=e.match(n);if(!r)return[];const i=r[0].split(`
`).slice(1),o=[];let s=null;return i.forEach(a=>{const l=a.trim();l.startsWith("### ")?(s&&o.push(s),s={title:l.replace("### ","").trim(),description:"",icon:"",link:""}):l.startsWith("icon:")?s&&(s.icon=l.replace("icon:","").trim()):l.startsWith("link:")?s&&(s.link=l.replace("link:","").trim()):s&&(s.description+=l+" ")}),s&&o.push(s),o.map(a=>({...a,description:a.description.trim()}))},wK=({markdown:e,sectionTitle:t})=>{const n=ONe(e,t);return F.jsxs("section",{className:"card-section",children:[F.jsx("h2",{children:t}),F.jsx("div",{className:"card-grid",children:n.map((r,i)=>F.jsx(bK,{...r},i))})]})};wK.propTypes={markdown:oe.string.isRequired,sectionTitle:oe.string.isRequired};const pu=e=>typeof e=="string"&&e.includes(".")?Ws(e):e,SK=({config:e})=>{const{titleKey:t,subtitleKey:n,summary:r,sections:i=[]}=e,[o,s]=X.useState("");X.useEffect(()=>{r!=null&&r.markdownPath&&fetch(r.markdownPath).then(l=>l.text()).then(s).catch(l=>console.error("Failed to fetch about page markdown:",l))},[r==null?void 0:r.markdownPath]);const a=i.filter(l=>l.renderAs==="overview");return F.jsxs(e2,{title:pu(t),subtitle:pu(n),children:[a.length===2&&F.jsx(xK,{leftTitle:pu(a[0].titleKey),rightTitle:pu(a[1].titleKey),leftContent:F.jsx(Bu,{rawContent:o,sectionTitle:a[0].markdownSection,stripRenderDirectives:!0}),rightContent:F.jsx(Bu,{rawContent:o,sectionTitle:a[1].markdownSection,stripRenderDirectives:!0})}),i.map((l,u)=>{const f=l.renderAs==="overview",d=l.renderAs==="hidden",p=l.id||u;return f||d?null:l.renderAs==="cards"?F.jsx(wK,{title:pu(l.titleKey),markdown:o,sectionTitle:l.markdownSection,cards:l.cards.map(g=>({...g,title:pu(g.titleKey)}))},p):l.renderAs==="paragraph"?F.jsx(uL,{title:pu(l.titleKey),markdown:o,sectionTitle:l.markdownSection},p):null})]})};SK.propTypes={config:oe.object.isRequired};const AI={"prevention-info":[{id:"covid",titleKey:"aboutPage.cards.covid.title",link:"https://www.nyc.gov/covid",icon:"/assets/covid-vector.svg"},{id:"flu",titleKey:"aboutPage.cards.flu.title",link:"https://www.nyc.gov/flu",icon:"/assets/flu-vector.svg"},{id:"rsv",titleKey:"aboutPage.cards.rsv.title",link:"https://www.nyc.gov/rsv",icon:"/assets/rsv-vector.svg"}],"provider-info":[{id:"covidProvider",titleKey:"aboutPage.cards.covidProvider.title",link:"https://www.nyc.gov/covid-providers",icon:"/assets/covid-vector.svg"},{id:"fluProvider",titleKey:"aboutPage.cards.fluProvider.title",link:"https://www.nyc.gov/flu-providers",icon:"/assets/flu-vector.svg"},{id:"rsvProvider",titleKey:"aboutPage.cards.rsvProvider.title",link:"https://www.nyc.gov/rsv-providers",icon:"/assets/rsv-vector.svg"}]},PNe={id:"aboutPage",titleKey:"aboutPage.mainTitle",subtitleKey:"aboutPage.mainSubtitle",summary:{titleKey:"aboutPage.summary.title",markdownPath:"/content/sections/aboutPageSectionText.md",lastUpdated:"05/09/2025",showTrendArrow:!1,showSecondayTitle:!1},sections:[{id:"learn",titleKey:"aboutPage.sections.learn.title",renderAs:"overview",markdownSection:"Learn about Respiratory Illnesses"},{id:"about-tracker",titleKey:"aboutPage.sections.aboutTracker.title",renderAs:"overview",markdownSection:"About the Tracker"},{id:"prevention-info",titleKey:"aboutPage.sections.prevention.title",renderAs:"cards",markdownSection:"Prevention and Vaccination Information",cards:AI["prevention-info"]},{id:"provider-info",titleKey:"aboutPage.sections.providers.title",renderAs:"cards",markdownSection:"Information for Providers",cards:AI["provider-info"]},{id:"seasonality",titleKey:"aboutPage.sections.seasonality.title",renderAs:"paragraph",markdownSection:"Respiratory Virus Seasonality"},{id:"transparency",titleKey:"aboutPage.sections.transparency.title",renderAs:"paragraph",markdownSection:"Data Transparency"}]},INe=()=>F.jsx(SK,{config:PNe});function LNe(){return F.jsxs(qJ,{children:[F.jsx(JJ,{}),F.jsx(uee,{}),F.jsx("main",{className:"flex-grow",children:F.jsxs(xJ,{children:[F.jsx(ja,{path:"/",element:F.jsx($Ne,{})}),F.jsx(ja,{path:"/data",element:F.jsx(yJ,{to:"/data/emergency-dept",replace:!0})}),F.jsx(ja,{path:"/info",element:F.jsx(INe,{})}),F.jsx(ja,{path:"/data/emergency-dept",element:F.jsx(NNe,{})}),F.jsx(ja,{path:"/data/:topic",element:F.jsx(RNe,{})}),F.jsx(ja,{path:"/data/cases",element:F.jsx(MNe,{})}),F.jsx(ja,{path:"/data/deaths",element:F.jsx(DNe,{})})]})}),F.jsx(Zee,{})]})}$Z.createRoot(document.getElementById("root")).render(F.jsx(X.StrictMode,{children:F.jsx(LNe,{})}));
